var Wx=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var GB=Wx((hL,Vx)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Nf(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const ot={},ga=[],vr=()=>{},Ux=()=>!1,Mu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Of=e=>e.startsWith("onUpdate:"),Rt=Object.assign,Mf=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},zx=Object.prototype.hasOwnProperty,tt=(e,n)=>zx.call(e,n),De=Array.isArray,ya=e=>Ui(e)==="[object Map]",Bu=e=>Ui(e)==="[object Set]",Ah=e=>Ui(e)==="[object Date]",Oe=e=>typeof e=="function",pt=e=>typeof e=="string",Kn=e=>typeof e=="symbol",rt=e=>e!==null&&typeof e=="object",zm=e=>(rt(e)||Oe(e))&&Oe(e.then)&&Oe(e.catch),Hm=Object.prototype.toString,Ui=e=>Hm.call(e),Hx=e=>Ui(e).slice(8,-1),$m=e=>Ui(e)==="[object Object]",Bf=e=>pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ui=Nf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lu=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},$x=/-(\w)/g,vn=Lu(e=>e.replace($x,(n,t)=>t?t.toUpperCase():"")),jx=/\B([A-Z])/g,qo=Lu(e=>e.replace(jx,"-$1").toLowerCase()),Wr=Lu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ic=Lu(e=>e?`on${Wr(e)}`:""),io=(e,n)=>!Object.is(e,n),Fs=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},jm=(e,n,t,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:t})},Il=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Gx=e=>{const n=pt(e)?Number(e):NaN;return isNaN(n)?e:n};let Th;const Vu=()=>Th||(Th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Lf(e){if(De(e)){const n={};for(let t=0;t<e.length;t++){const r=e[t],o=pt(r)?Yx(r):Lf(r);if(o)for(const a in o)n[a]=o[a]}return n}else if(pt(e)||rt(e))return e}const qx=/;(?![^(]*\))/g,Kx=/:([^]+)/,Xx=/\/\*[^]*?\*\//g;function Yx(e){const n={};return e.replace(Xx,"").split(qx).forEach(t=>{if(t){const r=t.split(Kx);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function dr(e){let n="";if(pt(e))n=e;else if(De(e))for(let t=0;t<e.length;t++){const r=dr(e[t]);r&&(n+=r+" ")}else if(rt(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}const Jx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qx=Nf(Jx);function Gm(e){return!!e||e===""}function Zx(e,n){if(e.length!==n.length)return!1;let t=!0;for(let r=0;t&&r<e.length;r++)t=Wu(e[r],n[r]);return t}function Wu(e,n){if(e===n)return!0;let t=Ah(e),r=Ah(n);if(t||r)return t&&r?e.getTime()===n.getTime():!1;if(t=Kn(e),r=Kn(n),t||r)return e===n;if(t=De(e),r=De(n),t||r)return t&&r?Zx(e,n):!1;if(t=rt(e),r=rt(n),t||r){if(!t||!r)return!1;const o=Object.keys(e).length,a=Object.keys(n).length;if(o!==a)return!1;for(const i in e){const s=e.hasOwnProperty(i),u=n.hasOwnProperty(i);if(s&&!u||!s&&u||!Wu(e[i],n[i]))return!1}}return String(e)===String(n)}function qm(e,n){return e.findIndex(t=>Wu(t,n))}const Km=e=>!!(e&&e.__v_isRef===!0),at=e=>pt(e)?e:e==null?"":De(e)||rt(e)&&(e.toString===Hm||!Oe(e.toString))?Km(e)?at(e.value):JSON.stringify(e,Xm,2):String(e),Xm=(e,n)=>Km(n)?Xm(e,n.value):ya(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[r,o],a)=>(t[Ac(r,a)+" =>"]=o,t),{})}:Bu(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>Ac(t))}:Kn(n)?Ac(n):rt(n)&&!De(n)&&!$m(n)?String(n):n,Ac=(e,n="")=>{var t;return Kn(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let on;class Ym{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=on,!n&&on&&(this.index=(on.scopes||(on.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=on;try{return on=this,n()}finally{on=t}}}on(){on=this}off(){on=this.parent}stop(n){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Vf(e){return new Ym(e)}function ew(){return on}function Jn(e,n=!1){on&&on.cleanups.push(e)}let it;const Tc=new WeakSet;class Jm{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,on&&on.active&&on.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Tc.has(this)&&(Tc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Dh(this),eg(this);const n=it,t=$n;it=this,$n=!0;try{return this.fn()}finally{tg(this),it=n,$n=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)zf(n);this.deps=this.depsTail=void 0,Dh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Tc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Al(this)&&this.run()}get dirty(){return Al(this)}}let Qm=0,ci,li;function Zm(e,n=!1){if(e.flags|=8,n){e.next=li,li=e;return}e.next=ci,ci=e}function Wf(){Qm++}function Uf(){if(--Qm>0)return;if(li){let n=li;for(li=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;ci;){let n=ci;for(ci=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=t}}if(e)throw e}function eg(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function tg(e){let n,t=e.depsTail,r=t;for(;r;){const o=r.prevDep;r.version===-1?(r===t&&(t=o),zf(r),tw(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=n,e.depsTail=t}function Al(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(ng(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function ng(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===xi))return;e.globalVersion=xi;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!Al(e)){e.flags&=-3;return}const t=it,r=$n;it=e,$n=!0;try{eg(e);const o=e.fn(e._value);(n.version===0||io(o,e._value))&&(e._value=o,n.version++)}catch(o){throw n.version++,o}finally{it=t,$n=r,tg(e),e.flags&=-3}}function zf(e,n=!1){const{dep:t,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),t.subs===e&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let a=t.computed.deps;a;a=a.nextDep)zf(a,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function tw(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}let $n=!0;const rg=[];function vo(){rg.push($n),$n=!1}function mo(){const e=rg.pop();$n=e===void 0?!0:e}function Dh(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=it;it=void 0;try{n()}finally{it=t}}}let xi=0;class nw{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hf{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!it||!$n||it===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==it)t=this.activeLink=new nw(it,this),it.deps?(t.prevDep=it.depsTail,it.depsTail.nextDep=t,it.depsTail=t):it.deps=it.depsTail=t,og(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=it.depsTail,t.nextDep=void 0,it.depsTail.nextDep=t,it.depsTail=t,it.deps===t&&(it.deps=r)}return t}trigger(n){this.version++,xi++,this.notify(n)}notify(n){Wf();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Uf()}}}function og(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)og(r)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const js=new WeakMap,Oo=Symbol(""),Tl=Symbol(""),wi=Symbol("");function Kt(e,n,t){if($n&&it){let r=js.get(e);r||js.set(e,r=new Map);let o=r.get(t);o||(r.set(t,o=new Hf),o.map=r,o.key=t),o.track()}}function Mr(e,n,t,r,o,a){const i=js.get(e);if(!i){xi++;return}const s=u=>{u&&u.trigger()};if(Wf(),n==="clear")i.forEach(s);else{const u=De(e),c=u&&Bf(t);if(u&&t==="length"){const l=Number(r);i.forEach((f,d)=>{(d==="length"||d===wi||!Kn(d)&&d>=l)&&s(f)})}else switch((t!==void 0||i.has(void 0))&&s(i.get(t)),c&&s(i.get(wi)),n){case"add":u?c&&s(i.get("length")):(s(i.get(Oo)),ya(e)&&s(i.get(Tl)));break;case"delete":u||(s(i.get(Oo)),ya(e)&&s(i.get(Tl)));break;case"set":ya(e)&&s(i.get(Oo));break}}Uf()}function rw(e,n){const t=js.get(e);return t&&t.get(n)}function ra(e){const n=Ge(e);return n===e?n:(Kt(n,"iterate",wi),Wn(e)?n:n.map(Xt))}function Uu(e){return Kt(e=Ge(e),"iterate",wi),e}const ow={__proto__:null,[Symbol.iterator](){return Dc(this,Symbol.iterator,Xt)},concat(...e){return ra(this).concat(...e.map(n=>De(n)?ra(n):n))},entries(){return Dc(this,"entries",e=>(e[1]=Xt(e[1]),e))},every(e,n){return Dr(this,"every",e,n,void 0,arguments)},filter(e,n){return Dr(this,"filter",e,n,t=>t.map(Xt),arguments)},find(e,n){return Dr(this,"find",e,n,Xt,arguments)},findIndex(e,n){return Dr(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Dr(this,"findLast",e,n,Xt,arguments)},findLastIndex(e,n){return Dr(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Dr(this,"forEach",e,n,void 0,arguments)},includes(...e){return Fc(this,"includes",e)},indexOf(...e){return Fc(this,"indexOf",e)},join(e){return ra(this).join(e)},lastIndexOf(...e){return Fc(this,"lastIndexOf",e)},map(e,n){return Dr(this,"map",e,n,void 0,arguments)},pop(){return Xa(this,"pop")},push(...e){return Xa(this,"push",e)},reduce(e,...n){return Fh(this,"reduce",e,n)},reduceRight(e,...n){return Fh(this,"reduceRight",e,n)},shift(){return Xa(this,"shift")},some(e,n){return Dr(this,"some",e,n,void 0,arguments)},splice(...e){return Xa(this,"splice",e)},toReversed(){return ra(this).toReversed()},toSorted(e){return ra(this).toSorted(e)},toSpliced(...e){return ra(this).toSpliced(...e)},unshift(...e){return Xa(this,"unshift",e)},values(){return Dc(this,"values",Xt)}};function Dc(e,n,t){const r=Uu(e),o=r[n]();return r!==e&&!Wn(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=t(a.value)),a}),o}const aw=Array.prototype;function Dr(e,n,t,r,o,a){const i=Uu(e),s=i!==e&&!Wn(e),u=i[n];if(u!==aw[n]){const f=u.apply(e,a);return s?Xt(f):f}let c=t;i!==e&&(s?c=function(f,d){return t.call(this,Xt(f),d,e)}:t.length>2&&(c=function(f,d){return t.call(this,f,d,e)}));const l=u.call(i,c,r);return s&&o?o(l):l}function Fh(e,n,t,r){const o=Uu(e);let a=t;return o!==e&&(Wn(e)?t.length>3&&(a=function(i,s,u){return t.call(this,i,s,u,e)}):a=function(i,s,u){return t.call(this,i,Xt(s),u,e)}),o[n](a,...r)}function Fc(e,n,t){const r=Ge(e);Kt(r,"iterate",wi);const o=r[n](...t);return(o===-1||o===!1)&&Gf(t[0])?(t[0]=Ge(t[0]),r[n](...t)):o}function Xa(e,n,t=[]){vo(),Wf();const r=Ge(e)[n].apply(e,t);return Uf(),mo(),r}const iw=Nf("__proto__,__v_isRef,__isVue"),ag=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Kn));function sw(e){Kn(e)||(e=String(e));const n=Ge(this);return Kt(n,"has",e),n.hasOwnProperty(e)}class ig{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,r){if(t==="__v_skip")return n.__v_skip;const o=this._isReadonly,a=this._isShallow;if(t==="__v_isReactive")return!o;if(t==="__v_isReadonly")return o;if(t==="__v_isShallow")return a;if(t==="__v_raw")return r===(o?a?gw:lg:a?cg:ug).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const i=De(n);if(!o){let u;if(i&&(u=ow[t]))return u;if(t==="hasOwnProperty")return sw}const s=Reflect.get(n,t,ft(n)?n:r);return(Kn(t)?ag.has(t):iw(t))||(o||Kt(n,"get",t),a)?s:ft(s)?i&&Bf(t)?s:s.value:rt(s)?o?zi(s):Ft(s):s}}class sg extends ig{constructor(n=!1){super(!1,n)}set(n,t,r,o){let a=n[t];if(!this._isShallow){const u=Uo(a);if(!Wn(r)&&!Uo(r)&&(a=Ge(a),r=Ge(r)),!De(n)&&ft(a)&&!ft(r))return u?!1:(a.value=r,!0)}const i=De(n)&&Bf(t)?Number(t)<n.length:tt(n,t),s=Reflect.set(n,t,r,ft(n)?n:o);return n===Ge(o)&&(i?io(r,a)&&Mr(n,"set",t,r):Mr(n,"add",t,r)),s}deleteProperty(n,t){const r=tt(n,t);n[t];const o=Reflect.deleteProperty(n,t);return o&&r&&Mr(n,"delete",t,void 0),o}has(n,t){const r=Reflect.has(n,t);return(!Kn(t)||!ag.has(t))&&Kt(n,"has",t),r}ownKeys(n){return Kt(n,"iterate",De(n)?"length":Oo),Reflect.ownKeys(n)}}class uw extends ig{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const cw=new sg,lw=new uw,fw=new sg(!0),Dl=e=>e,ls=e=>Reflect.getPrototypeOf(e);function dw(e,n,t){return function(...r){const o=this.__v_raw,a=Ge(o),i=ya(a),s=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,c=o[e](...r),l=t?Dl:n?Fl:Xt;return!n&&Kt(a,"iterate",u?Tl:Oo),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:s?[l(f[0]),l(f[1])]:l(f),done:d}},[Symbol.iterator](){return this}}}}function fs(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function hw(e,n){const t={get(o){const a=this.__v_raw,i=Ge(a),s=Ge(o);e||(io(o,s)&&Kt(i,"get",o),Kt(i,"get",s));const{has:u}=ls(i),c=n?Dl:e?Fl:Xt;if(u.call(i,o))return c(a.get(o));if(u.call(i,s))return c(a.get(s));a!==i&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Kt(Ge(o),"iterate",Oo),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,i=Ge(a),s=Ge(o);return e||(io(o,s)&&Kt(i,"has",o),Kt(i,"has",s)),o===s?a.has(o):a.has(o)||a.has(s)},forEach(o,a){const i=this,s=i.__v_raw,u=Ge(s),c=n?Dl:e?Fl:Xt;return!e&&Kt(u,"iterate",Oo),s.forEach((l,f)=>o.call(a,c(l),c(f),i))}};return Rt(t,e?{add:fs("add"),set:fs("set"),delete:fs("delete"),clear:fs("clear")}:{add(o){!n&&!Wn(o)&&!Uo(o)&&(o=Ge(o));const a=Ge(this);return ls(a).has.call(a,o)||(a.add(o),Mr(a,"add",o,o)),this},set(o,a){!n&&!Wn(a)&&!Uo(a)&&(a=Ge(a));const i=Ge(this),{has:s,get:u}=ls(i);let c=s.call(i,o);c||(o=Ge(o),c=s.call(i,o));const l=u.call(i,o);return i.set(o,a),c?io(a,l)&&Mr(i,"set",o,a):Mr(i,"add",o,a),this},delete(o){const a=Ge(this),{has:i,get:s}=ls(a);let u=i.call(a,o);u||(o=Ge(o),u=i.call(a,o)),s&&s.call(a,o);const c=a.delete(o);return u&&Mr(a,"delete",o,void 0),c},clear(){const o=Ge(this),a=o.size!==0,i=o.clear();return a&&Mr(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=dw(o,e,n)}),t}function $f(e,n){const t=hw(e,n);return(r,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(tt(t,o)&&o in r?t:r,o,a)}const pw={get:$f(!1,!1)},vw={get:$f(!1,!0)},mw={get:$f(!0,!1)},ug=new WeakMap,cg=new WeakMap,lg=new WeakMap,gw=new WeakMap;function yw(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bw(e){return e.__v_skip||!Object.isExtensible(e)?0:yw(Hx(e))}function Ft(e){return Uo(e)?e:jf(e,!1,cw,pw,ug)}function fg(e){return jf(e,!1,fw,vw,cg)}function zi(e){return jf(e,!0,lw,mw,lg)}function jf(e,n,t,r,o){if(!rt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const i=bw(e);if(i===0)return e;const s=new Proxy(e,i===2?r:t);return o.set(e,s),s}function ba(e){return Uo(e)?ba(e.__v_raw):!!(e&&e.__v_isReactive)}function Uo(e){return!!(e&&e.__v_isReadonly)}function Wn(e){return!!(e&&e.__v_isShallow)}function Gf(e){return e?!!e.__v_raw:!1}function Ge(e){const n=e&&e.__v_raw;return n?Ge(n):e}function dg(e){return!tt(e,"__v_skip")&&Object.isExtensible(e)&&jm(e,"__v_skip",!0),e}const Xt=e=>rt(e)?Ft(e):e,Fl=e=>rt(e)?zi(e):e;function ft(e){return e?e.__v_isRef===!0:!1}function ve(e){return hg(e,!1)}function Je(e){return hg(e,!0)}function hg(e,n){return ft(e)?e:new xw(e,n)}class xw{constructor(n,t){this.dep=new Hf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Ge(n),this._value=t?n:Xt(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,r=this.__v_isShallow||Wn(n)||Uo(n);n=r?n:Ge(n),io(n,t)&&(this._rawValue=n,this._value=r?n:Xt(n),this.dep.trigger())}}function st(e){return ft(e)?e.value:e}const ww={get:(e,n,t)=>n==="__v_raw"?e:st(Reflect.get(e,n,t)),set:(e,n,t,r)=>{const o=e[n];return ft(o)&&!ft(t)?(o.value=t,!0):Reflect.set(e,n,t,r)}};function pg(e){return ba(e)?e:new Proxy(e,ww)}function qf(e){const n=De(e)?new Array(e.length):{};for(const t in e)n[t]=vg(e,t);return n}class _w{constructor(n,t,r){this._object=n,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return rw(Ge(this._object),this._key)}}class Cw{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $t(e,n,t){return ft(e)?e:Oe(e)?new Cw(e):rt(e)&&arguments.length>1?vg(e,n,t):ve(e)}function vg(e,n,t){const r=e[n];return ft(r)?r:new _w(e,n,t)}class Ew{constructor(n,t,r){this.fn=n,this.setter=t,this._value=void 0,this.dep=new Hf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return Zm(this,!0),!0}get value(){const n=this.dep.track();return ng(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Sw(e,n,t=!1){let r,o;return Oe(e)?r=e:(r=e.get,o=e.set),new Ew(r,o,t)}const ds={},Gs=new WeakMap;let ko;function kw(e,n=!1,t=ko){if(t){let r=Gs.get(t);r||Gs.set(t,r=[]),r.push(e)}}function Rw(e,n,t=ot){const{immediate:r,deep:o,once:a,scheduler:i,augmentJob:s,call:u}=t,c=b=>o?b:Wn(b)||o===!1||o===0?Br(b,1):Br(b);let l,f,d,h,p=!1,v=!1;if(ft(e)?(f=()=>e.value,p=Wn(e)):ba(e)?(f=()=>c(e),p=!0):De(e)?(v=!0,p=e.some(b=>ba(b)||Wn(b)),f=()=>e.map(b=>{if(ft(b))return b.value;if(ba(b))return c(b);if(Oe(b))return u?u(b,2):b()})):Oe(e)?n?f=u?()=>u(e,2):e:f=()=>{if(d){vo();try{d()}finally{mo()}}const b=ko;ko=l;try{return u?u(e,3,[h]):e(h)}finally{ko=b}}:f=vr,n&&o){const b=f,_=o===!0?1/0:o;f=()=>Br(b(),_)}const m=ew(),g=()=>{l.stop(),m&&m.active&&Mf(m.effects,l)};if(a&&n){const b=n;n=(..._)=>{b(..._),g()}}let y=v?new Array(e.length).fill(ds):ds;const x=b=>{if(!(!(l.flags&1)||!l.dirty&&!b))if(n){const _=l.run();if(o||p||(v?_.some((w,S)=>io(w,y[S])):io(_,y))){d&&d();const w=ko;ko=l;try{const S=[_,y===ds?void 0:v&&y[0]===ds?[]:y,h];u?u(n,3,S):n(...S),y=_}finally{ko=w}}}else l.run()};return s&&s(x),l=new Jm(f),l.scheduler=i?()=>i(x,!1):x,h=b=>kw(b,!1,l),d=l.onStop=()=>{const b=Gs.get(l);if(b){if(u)u(b,4);else for(const _ of b)_();Gs.delete(l)}},n?r?x(!0):y=l.run():i?i(x.bind(null,!0),!0):l.run(),g.pause=l.pause.bind(l),g.resume=l.resume.bind(l),g.stop=g,g}function Br(e,n=1/0,t){if(n<=0||!rt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),n--,ft(e))Br(e.value,n,t);else if(De(e))for(let r=0;r<e.length;r++)Br(e[r],n,t);else if(Bu(e)||ya(e))e.forEach(r=>{Br(r,n,t)});else if($m(e)){for(const r in e)Br(e[r],n,t);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Br(e[r],n,t)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hi(e,n,t,r){try{return r?e(...r):e()}catch(o){zu(o,n,t)}}function Xn(e,n,t,r){if(Oe(e)){const o=Hi(e,n,t,r);return o&&zm(o)&&o.catch(a=>{zu(a,n,t)}),o}if(De(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Xn(e[a],n,t,r));return o}}function zu(e,n,t,r=!0){const o=n?n.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:i}=n&&n.appContext.config||ot;if(n){let s=n.parent;const u=n.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const l=s.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](e,u,c)===!1)return}s=s.parent}if(a){vo(),Hi(a,null,10,[e,u,c]),mo();return}}Iw(e,t,o,r,i)}function Iw(e,n,t,r=!0,o=!1){if(o)throw e;console.error(e)}const an=[];let ir=-1;const xa=[];let eo=null,la=0;const mg=Promise.resolve();let qs=null;function wr(e){const n=qs||mg;return e?n.then(this?e.bind(this):e):n}function Aw(e){let n=ir+1,t=an.length;for(;n<t;){const r=n+t>>>1,o=an[r],a=_i(o);a<e||a===e&&o.flags&2?n=r+1:t=r}return n}function Kf(e){if(!(e.flags&1)){const n=_i(e),t=an[an.length-1];!t||!(e.flags&2)&&n>=_i(t)?an.push(e):an.splice(Aw(n),0,e),e.flags|=1,gg()}}function gg(){qs||(qs=mg.then(bg))}function Tw(e){De(e)?xa.push(...e):eo&&e.id===-1?eo.splice(la+1,0,e):e.flags&1||(xa.push(e),e.flags|=1),gg()}function Ph(e,n,t=ir+1){for(;t<an.length;t++){const r=an[t];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;an.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function yg(e){if(xa.length){const n=[...new Set(xa)].sort((t,r)=>_i(t)-_i(r));if(xa.length=0,eo){eo.push(...n);return}for(eo=n,la=0;la<eo.length;la++){const t=eo[la];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}eo=null,la=0}}const _i=e=>e.id==null?e.flags&2?-1:1/0:e.id;function bg(e){try{for(ir=0;ir<an.length;ir++){const n=an[ir];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Hi(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;ir<an.length;ir++){const n=an[ir];n&&(n.flags&=-2)}ir=-1,an.length=0,yg(),qs=null,(an.length||xa.length)&&bg()}}let Pt=null,xg=null;function Ks(e){const n=Pt;return Pt=e,xg=e&&e.type.__scopeId||null,n}function Ne(e,n=Pt,t){if(!n||e._n)return e;const r=(...o)=>{r._d&&qh(-1);const a=Ks(n);let i;try{i=e(...o)}finally{Ks(a),r._d&&qh(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function un(e,n){if(Pt===null)return e;const t=Gu(Pt),r=e.dirs||(e.dirs=[]);for(let o=0;o<n.length;o++){let[a,i,s,u=ot]=n[o];a&&(Oe(a)&&(a={mounted:a,updated:a}),a.deep&&Br(i),r.push({dir:a,instance:t,value:i,oldValue:void 0,arg:s,modifiers:u}))}return e}function wo(e,n,t,r){const o=e.dirs,a=n&&n.dirs;for(let i=0;i<o.length;i++){const s=o[i];a&&(s.oldValue=a[i].value);let u=s.dir[r];u&&(vo(),Xn(u,t,8,[e.el,s,e,n]),mo())}}const wg=Symbol("_vte"),_g=e=>e.__isTeleport,fi=e=>e&&(e.disabled||e.disabled===""),Nh=e=>e&&(e.defer||e.defer===""),Oh=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Mh=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Pl=(e,n)=>{const t=e&&e.to;return pt(t)?n?n(t):null:t},Cg={name:"Teleport",__isTeleport:!0,process(e,n,t,r,o,a,i,s,u,c){const{mc:l,pc:f,pbc:d,o:{insert:h,querySelector:p,createText:v,createComment:m}}=c,g=fi(n.props);let{shapeFlag:y,children:x,dynamicChildren:b}=n;if(e==null){const _=n.el=v(""),w=n.anchor=v("");h(_,t,r),h(w,t,r);const S=(C,k)=>{y&16&&(o&&o.isCE&&(o.ce._teleportTarget=C),l(x,C,k,o,a,i,s,u))},E=()=>{const C=n.target=Pl(n.props,p),k=Eg(C,n,v,h);C&&(i!=="svg"&&Oh(C)?i="svg":i!=="mathml"&&Mh(C)&&(i="mathml"),g||(S(C,k),Ps(n,!1)))};g&&(S(t,w),Ps(n,!0)),Nh(n.props)?rn(()=>{E(),n.el.__isMounted=!0},a):E()}else{if(Nh(n.props)&&!e.el.__isMounted){rn(()=>{Cg.process(e,n,t,r,o,a,i,s,u,c),delete e.el.__isMounted},a);return}n.el=e.el,n.targetStart=e.targetStart;const _=n.anchor=e.anchor,w=n.target=e.target,S=n.targetAnchor=e.targetAnchor,E=fi(e.props),C=E?t:w,k=E?_:S;if(i==="svg"||Oh(w)?i="svg":(i==="mathml"||Mh(w))&&(i="mathml"),b?(d(e.dynamicChildren,b,C,o,a,i,s),Zf(e,n,!0)):u||f(e,n,C,k,o,a,i,s,!1),g)E?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):hs(n,t,_,c,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const I=n.target=Pl(n.props,p);I&&hs(n,I,null,c,0)}else E&&hs(n,w,S,c,1);Ps(n,g)}},remove(e,n,t,{um:r,o:{remove:o}},a){const{shapeFlag:i,children:s,anchor:u,targetStart:c,targetAnchor:l,target:f,props:d}=e;if(f&&(o(c),o(l)),a&&o(u),i&16){const h=a||!fi(d);for(let p=0;p<s.length;p++){const v=s[p];r(v,n,t,h,!!v.dynamicChildren)}}},move:hs,hydrate:Dw};function hs(e,n,t,{o:{insert:r},m:o},a=2){a===0&&r(e.targetAnchor,n,t);const{el:i,anchor:s,shapeFlag:u,children:c,props:l}=e,f=a===2;if(f&&r(i,n,t),(!f||fi(l))&&u&16)for(let d=0;d<c.length;d++)o(c[d],n,t,2);f&&r(s,n,t)}function Dw(e,n,t,r,o,a,{o:{nextSibling:i,parentNode:s,querySelector:u,insert:c,createText:l}},f){const d=n.target=Pl(n.props,u);if(d){const h=fi(n.props),p=d._lpa||d.firstChild;if(n.shapeFlag&16)if(h)n.anchor=f(i(e),n,s(e),t,r,o,a),n.targetStart=p,n.targetAnchor=p&&i(p);else{n.anchor=i(e);let v=p;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")n.targetStart=v;else if(v.data==="teleport anchor"){n.targetAnchor=v,d._lpa=n.targetAnchor&&i(n.targetAnchor);break}}v=i(v)}n.targetAnchor||Eg(d,n,l,c),f(p&&i(p),n,d,t,r,o,a)}Ps(n,h)}return n.anchor&&i(n.anchor)}const Fw=Cg;function Ps(e,n){const t=e.ctx;if(t&&t.ut){let r,o;for(n?(r=e.el,o=e.anchor):(r=e.targetStart,o=e.targetAnchor);r&&r!==o;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Eg(e,n,t,r){const o=n.targetStart=t(""),a=n.targetAnchor=t("");return o[wg]=a,e&&(r(o,e),r(a,e)),a}const to=Symbol("_leaveCb"),ps=Symbol("_enterCb");function Sg(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jt(()=>{e.isMounted=!0}),Dn(()=>{e.isUnmounting=!0}),e}const On=[Function,Array],kg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:On,onEnter:On,onAfterEnter:On,onEnterCancelled:On,onBeforeLeave:On,onLeave:On,onAfterLeave:On,onLeaveCancelled:On,onBeforeAppear:On,onAppear:On,onAfterAppear:On,onAppearCancelled:On},Rg=e=>{const n=e.subTree;return n.component?Rg(n.component):n},Pw={name:"BaseTransition",props:kg,setup(e,{slots:n}){const t=nd(),r=Sg();return()=>{const o=n.default&&Xf(n.default(),!0);if(!o||!o.length)return;const a=Ig(o),i=Ge(e),{mode:s}=i;if(r.isLeaving)return Pc(a);const u=Bh(a);if(!u)return Pc(a);let c=Ci(u,i,r,t,f=>c=f);u.type!==sn&&zo(u,c);let l=t.subTree&&Bh(t.subTree);if(l&&l.type!==sn&&!Ao(u,l)&&Rg(t).type!==sn){let f=Ci(l,i,r,t);if(zo(l,f),s==="out-in"&&u.type!==sn)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave,l=void 0},Pc(a);s==="in-out"&&u.type!==sn?f.delayLeave=(d,h,p)=>{const v=Ag(r,l);v[String(l.key)]=l,d[to]=()=>{h(),d[to]=void 0,delete c.delayedLeave,l=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,l=void 0}}:l=void 0}else l&&(l=void 0);return a}}};function Ig(e){let n=e[0];if(e.length>1){for(const t of e)if(t.type!==sn){n=t;break}}return n}const Nw=Pw;function Ag(e,n){const{leavingVNodes:t}=e;let r=t.get(n.type);return r||(r=Object.create(null),t.set(n.type,r)),r}function Ci(e,n,t,r,o){const{appear:a,mode:i,persisted:s=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:l,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:v,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:x}=n,b=String(e.key),_=Ag(t,e),w=(C,k)=>{C&&Xn(C,r,9,k)},S=(C,k)=>{const I=k[1];w(C,k),De(C)?C.every(R=>R.length<=1)&&I():C.length<=1&&I()},E={mode:i,persisted:s,beforeEnter(C){let k=u;if(!t.isMounted)if(a)k=m||u;else return;C[to]&&C[to](!0);const I=_[b];I&&Ao(e,I)&&I.el[to]&&I.el[to](),w(k,[C])},enter(C){let k=c,I=l,R=f;if(!t.isMounted)if(a)k=g||c,I=y||l,R=x||f;else return;let T=!1;const N=C[ps]=B=>{T||(T=!0,B?w(R,[C]):w(I,[C]),E.delayedLeave&&E.delayedLeave(),C[ps]=void 0)};k?S(k,[C,N]):N()},leave(C,k){const I=String(e.key);if(C[ps]&&C[ps](!0),t.isUnmounting)return k();w(d,[C]);let R=!1;const T=C[to]=N=>{R||(R=!0,k(),N?w(v,[C]):w(p,[C]),C[to]=void 0,_[I]===e&&delete _[I])};_[I]=e,h?S(h,[C,T]):T()},clone(C){const k=Ci(C,n,t,r,o);return o&&o(k),k}};return E}function Pc(e){if(Hu(e))return e=fo(e),e.children=null,e}function Bh(e){if(!Hu(e))return _g(e.type)&&e.children?Ig(e.children):e;const{shapeFlag:n,children:t}=e;if(t){if(n&16)return t[0];if(n&32&&Oe(t.default))return t.default()}}function zo(e,n){e.shapeFlag&6&&e.component?(e.transition=n,zo(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Xf(e,n=!1,t){let r=[],o=0;for(let a=0;a<e.length;a++){let i=e[a];const s=t==null?i.key:String(t)+String(i.key!=null?i.key:a);i.type===qe?(i.patchFlag&128&&o++,r=r.concat(Xf(i.children,n,s))):(n||i.type!==sn)&&r.push(s!=null?fo(i,{key:s}):i)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function cn(e,n){return Oe(e)?Rt({name:e.name},n,{setup:e}):e}function Tg(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Xs(e,n,t,r,o=!1){if(De(e)){e.forEach((p,v)=>Xs(p,n&&(De(n)?n[v]:n),t,r,o));return}if(wa(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Xs(e,n,t,r.component.subTree);return}const a=r.shapeFlag&4?Gu(r.component):r.el,i=o?null:a,{i:s,r:u}=e,c=n&&n.r,l=s.refs===ot?s.refs={}:s.refs,f=s.setupState,d=Ge(f),h=f===ot?()=>!1:p=>tt(d,p);if(c!=null&&c!==u&&(pt(c)?(l[c]=null,h(c)&&(f[c]=null)):ft(c)&&(c.value=null)),Oe(u))Hi(u,s,12,[i,l]);else{const p=pt(u),v=ft(u);if(p||v){const m=()=>{if(e.f){const g=p?h(u)?f[u]:l[u]:u.value;o?De(g)&&Mf(g,a):De(g)?g.includes(a)||g.push(a):p?(l[u]=[a],h(u)&&(f[u]=l[u])):(u.value=[a],e.k&&(l[e.k]=u.value))}else p?(l[u]=i,h(u)&&(f[u]=i)):v&&(u.value=i,e.k&&(l[e.k]=i))};i?(m.id=-1,rn(m,t)):m()}}}Vu().requestIdleCallback;Vu().cancelIdleCallback;const wa=e=>!!e.type.__asyncLoader,Hu=e=>e.type.__isKeepAlive;function Dg(e,n){Pg(e,"a",n)}function Fg(e,n){Pg(e,"da",n)}function Pg(e,n,t=Ht){const r=e.__wdc||(e.__wdc=()=>{let o=t;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if($u(n,r,t),t){let o=t.parent;for(;o&&o.parent;)Hu(o.parent.vnode)&&Ow(r,n,t,o),o=o.parent}}function Ow(e,n,t,r){const o=$u(n,e,r,!0);Og(()=>{Mf(r[n],o)},t)}function $u(e,n,t=Ht,r=!1){if(t){const o=t[e]||(t[e]=[]),a=n.__weh||(n.__weh=(...i)=>{vo();const s=ji(t),u=Xn(n,t,e,i);return s(),mo(),u});return r?o.unshift(a):o.push(a),a}}const Ur=e=>(n,t=Ht)=>{(!ki||e==="sp")&&$u(e,(...r)=>n(...r),t)},Ng=Ur("bm"),jt=Ur("m"),Mw=Ur("bu"),Yf=Ur("u"),Dn=Ur("bum"),Og=Ur("um"),Bw=Ur("sp"),Lw=Ur("rtg"),Vw=Ur("rtc");function Ww(e,n=Ht){$u("ec",e,n)}const Mg="components",Uw="directives",zw=Symbol.for("v-ndc");function Hw(e){return pt(e)&&Bg(Mg,e,!1)||e}function Jf(e){return Bg(Uw,e)}function Bg(e,n,t=!0,r=!1){const o=Pt||Ht;if(o){const a=o.type;if(e===Mg){const s=T2(a,!1);if(s&&(s===n||s===vn(n)||s===Wr(vn(n))))return a}const i=Lh(o[e]||a[e],n)||Lh(o.appContext[e],n);return!i&&r?a:i}}function Lh(e,n){return e&&(e[n]||e[vn(n)]||e[Wr(vn(n))])}function mr(e,n,t,r){let o;const a=t,i=De(e);if(i||pt(e)){const s=i&&ba(e);let u=!1;s&&(u=!Wn(e),e=Uu(e)),o=new Array(e.length);for(let c=0,l=e.length;c<l;c++)o[c]=n(u?Xt(e[c]):e[c],c,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let s=0;s<e;s++)o[s]=n(s+1,s,void 0,a)}else if(rt(e))if(e[Symbol.iterator])o=Array.from(e,(s,u)=>n(s,u,void 0,a));else{const s=Object.keys(e);o=new Array(s.length);for(let u=0,c=s.length;u<c;u++){const l=s[u];o[u]=n(e[l],l,u,a)}}else o=[];return o}function $w(e,n,t={},r,o){if(Pt.ce||Pt.parent&&wa(Pt.parent)&&Pt.parent.ce)return xe(),Tn(qe,null,[V("slot",t,r)],64);let a=e[n];a&&a._c&&(a._d=!1),xe();const i=a&&Lg(a(t)),s=t.key||i&&i.key,u=Tn(qe,{key:(s&&!Kn(s)?s:`_${n}`)+""},i||[],i&&e._===1?64:-2);return a&&a._c&&(a._d=!0),u}function Lg(e){return e.some(n=>Si(n)?!(n.type===sn||n.type===qe&&!Lg(n.children)):!0)?e:null}const Nl=e=>e?ry(e)?Gu(e):Nl(e.parent):null,di=Rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nl(e.parent),$root:e=>Nl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Wg(e),$forceUpdate:e=>e.f||(e.f=()=>{Kf(e.update)}),$nextTick:e=>e.n||(e.n=wr.bind(e.proxy)),$watch:e=>f2.bind(e)}),Nc=(e,n)=>e!==ot&&!e.__isScriptSetup&&tt(e,n),jw={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:r,data:o,props:a,accessCache:i,type:s,appContext:u}=e;let c;if(n[0]!=="$"){const h=i[n];if(h!==void 0)switch(h){case 1:return r[n];case 2:return o[n];case 4:return t[n];case 3:return a[n]}else{if(Nc(r,n))return i[n]=1,r[n];if(o!==ot&&tt(o,n))return i[n]=2,o[n];if((c=e.propsOptions[0])&&tt(c,n))return i[n]=3,a[n];if(t!==ot&&tt(t,n))return i[n]=4,t[n];Ol&&(i[n]=0)}}const l=di[n];let f,d;if(l)return n==="$attrs"&&Kt(e.attrs,"get",""),l(e);if((f=s.__cssModules)&&(f=f[n]))return f;if(t!==ot&&tt(t,n))return i[n]=4,t[n];if(d=u.config.globalProperties,tt(d,n))return d[n]},set({_:e},n,t){const{data:r,setupState:o,ctx:a}=e;return Nc(o,n)?(o[n]=t,!0):r!==ot&&tt(r,n)?(r[n]=t,!0):tt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(a[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:r,appContext:o,propsOptions:a}},i){let s;return!!t[i]||e!==ot&&tt(e,i)||Nc(n,i)||(s=a[0])&&tt(s,i)||tt(r,i)||tt(di,i)||tt(o.config.globalProperties,i)},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:tt(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}};function Vh(e){return De(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}let Ol=!0;function Gw(e){const n=Wg(e),t=e.proxy,r=e.ctx;Ol=!1,n.beforeCreate&&Wh(n.beforeCreate,e,"bc");const{data:o,computed:a,methods:i,watch:s,provide:u,inject:c,created:l,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:v,deactivated:m,beforeDestroy:g,beforeUnmount:y,destroyed:x,unmounted:b,render:_,renderTracked:w,renderTriggered:S,errorCaptured:E,serverPrefetch:C,expose:k,inheritAttrs:I,components:R,directives:T,filters:N}=n;if(c&&qw(c,r,null),i)for(const z in i){const W=i[z];Oe(W)&&(r[z]=W.bind(t))}if(o){const z=o.call(t,t);rt(z)&&(e.data=Ft(z))}if(Ol=!0,a)for(const z in a){const W=a[z],j=Oe(W)?W.bind(t,t):Oe(W.get)?W.get.bind(t,t):vr,Z=!Oe(W)&&Oe(W.set)?W.set.bind(t):vr,ae=Y({get:j,set:Z});Object.defineProperty(r,z,{enumerable:!0,configurable:!0,get:()=>ae.value,set:se=>ae.value=se})}if(s)for(const z in s)Vg(s[z],r,t,z);if(u){const z=Oe(u)?u.call(t):u;Reflect.ownKeys(z).forEach(W=>{Rn(W,z[W])})}l&&Wh(l,e,"c");function H(z,W){De(W)?W.forEach(j=>z(j.bind(t))):W&&z(W.bind(t))}if(H(Ng,f),H(jt,d),H(Mw,h),H(Yf,p),H(Dg,v),H(Fg,m),H(Ww,E),H(Vw,w),H(Lw,S),H(Dn,y),H(Og,b),H(Bw,C),De(k))if(k.length){const z=e.exposed||(e.exposed={});k.forEach(W=>{Object.defineProperty(z,W,{get:()=>t[W],set:j=>t[W]=j})})}else e.exposed||(e.exposed={});_&&e.render===vr&&(e.render=_),I!=null&&(e.inheritAttrs=I),R&&(e.components=R),T&&(e.directives=T),C&&Tg(e)}function qw(e,n,t=vr){De(e)&&(e=Ml(e));for(const r in e){const o=e[r];let a;rt(o)?"default"in o?a=bt(o.from||r,o.default,!0):a=bt(o.from||r):a=bt(o),ft(a)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:i=>a.value=i}):n[r]=a}}function Wh(e,n,t){Xn(De(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,t)}function Vg(e,n,t,r){let o=r.includes(".")?Qg(t,r):()=>t[r];if(pt(e)){const a=n[e];Oe(a)&&je(o,a)}else if(Oe(e))je(o,e.bind(t));else if(rt(e))if(De(e))e.forEach(a=>Vg(a,n,t,r));else{const a=Oe(e.handler)?e.handler.bind(t):n[e.handler];Oe(a)&&je(o,a,e)}}function Wg(e){const n=e.type,{mixins:t,extends:r}=n,{mixins:o,optionsCache:a,config:{optionMergeStrategies:i}}=e.appContext,s=a.get(n);let u;return s?u=s:!o.length&&!t&&!r?u=n:(u={},o.length&&o.forEach(c=>Ys(u,c,i,!0)),Ys(u,n,i)),rt(n)&&a.set(n,u),u}function Ys(e,n,t,r=!1){const{mixins:o,extends:a}=n;a&&Ys(e,a,t,!0),o&&o.forEach(i=>Ys(e,i,t,!0));for(const i in n)if(!(r&&i==="expose")){const s=Kw[i]||t&&t[i];e[i]=s?s(e[i],n[i]):n[i]}return e}const Kw={data:Uh,props:zh,emits:zh,methods:ai,computed:ai,beforeCreate:nn,created:nn,beforeMount:nn,mounted:nn,beforeUpdate:nn,updated:nn,beforeDestroy:nn,beforeUnmount:nn,destroyed:nn,unmounted:nn,activated:nn,deactivated:nn,errorCaptured:nn,serverPrefetch:nn,components:ai,directives:ai,watch:Yw,provide:Uh,inject:Xw};function Uh(e,n){return n?e?function(){return Rt(Oe(e)?e.call(this,this):e,Oe(n)?n.call(this,this):n)}:n:e}function Xw(e,n){return ai(Ml(e),Ml(n))}function Ml(e){if(De(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function nn(e,n){return e?[...new Set([].concat(e,n))]:n}function ai(e,n){return e?Rt(Object.create(null),e,n):n}function zh(e,n){return e?De(e)&&De(n)?[...new Set([...e,...n])]:Rt(Object.create(null),Vh(e),Vh(n??{})):n}function Yw(e,n){if(!e)return n;if(!n)return e;const t=Rt(Object.create(null),e);for(const r in n)t[r]=nn(e[r],n[r]);return t}function Ug(){return{app:null,config:{isNativeTag:Ux,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jw=0;function Qw(e,n){return function(r,o=null){Oe(r)||(r=Rt({},r)),o!=null&&!rt(o)&&(o=null);const a=Ug(),i=new WeakSet,s=[];let u=!1;const c=a.app={_uid:Jw++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:F2,get config(){return a.config},set config(l){},use(l,...f){return i.has(l)||(l&&Oe(l.install)?(i.add(l),l.install(c,...f)):Oe(l)&&(i.add(l),l(c,...f))),c},mixin(l){return a.mixins.includes(l)||a.mixins.push(l),c},component(l,f){return f?(a.components[l]=f,c):a.components[l]},directive(l,f){return f?(a.directives[l]=f,c):a.directives[l]},mount(l,f,d){if(!u){const h=c._ceVNode||V(r,o);return h.appContext=a,d===!0?d="svg":d===!1&&(d=void 0),e(h,l,d),u=!0,c._container=l,l.__vue_app__=c,Gu(h.component)}},onUnmount(l){s.push(l)},unmount(){u&&(Xn(s,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(l,f){return a.provides[l]=f,c},runWithContext(l){const f=_a;_a=c;try{return l()}finally{_a=f}}};return c}}let _a=null;function Rn(e,n){if(Ht){let t=Ht.provides;const r=Ht.parent&&Ht.parent.provides;r===t&&(t=Ht.provides=Object.create(r)),t[e]=n}}function bt(e,n,t=!1){const r=Ht||Pt;if(r||_a){const o=_a?_a._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return t&&Oe(n)?n.call(r&&r.proxy):n}}const zg={},Hg=()=>Object.create(zg),$g=e=>Object.getPrototypeOf(e)===zg;function Zw(e,n,t,r=!1){const o={},a=Hg();e.propsDefaults=Object.create(null),jg(e,n,o,a);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);t?e.props=r?o:fg(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function e2(e,n,t,r){const{props:o,attrs:a,vnode:{patchFlag:i}}=e,s=Ge(o),[u]=e.propsOptions;let c=!1;if((r||i>0)&&!(i&16)){if(i&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let d=l[f];if(ju(e.emitsOptions,d))continue;const h=n[d];if(u)if(tt(a,d))h!==a[d]&&(a[d]=h,c=!0);else{const p=vn(d);o[p]=Bl(u,s,p,h,e,!1)}else h!==a[d]&&(a[d]=h,c=!0)}}}else{jg(e,n,o,a)&&(c=!0);let l;for(const f in s)(!n||!tt(n,f)&&((l=qo(f))===f||!tt(n,l)))&&(u?t&&(t[f]!==void 0||t[l]!==void 0)&&(o[f]=Bl(u,s,f,void 0,e,!0)):delete o[f]);if(a!==s)for(const f in a)(!n||!tt(n,f))&&(delete a[f],c=!0)}c&&Mr(e.attrs,"set","")}function jg(e,n,t,r){const[o,a]=e.propsOptions;let i=!1,s;if(n)for(let u in n){if(ui(u))continue;const c=n[u];let l;o&&tt(o,l=vn(u))?!a||!a.includes(l)?t[l]=c:(s||(s={}))[l]=c:ju(e.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,i=!0)}if(a){const u=Ge(t),c=s||ot;for(let l=0;l<a.length;l++){const f=a[l];t[f]=Bl(o,u,f,c[f],e,!tt(c,f))}}return i}function Bl(e,n,t,r,o,a){const i=e[t];if(i!=null){const s=tt(i,"default");if(s&&r===void 0){const u=i.default;if(i.type!==Function&&!i.skipFactory&&Oe(u)){const{propsDefaults:c}=o;if(t in c)r=c[t];else{const l=ji(o);r=c[t]=u.call(null,n),l()}}else r=u;o.ce&&o.ce._setProp(t,r)}i[0]&&(a&&!s?r=!1:i[1]&&(r===""||r===qo(t))&&(r=!0))}return r}const t2=new WeakMap;function Gg(e,n,t=!1){const r=t?t2:n.propsCache,o=r.get(e);if(o)return o;const a=e.props,i={},s=[];let u=!1;if(!Oe(e)){const l=f=>{u=!0;const[d,h]=Gg(f,n,!0);Rt(i,d),h&&s.push(...h)};!t&&n.mixins.length&&n.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!a&&!u)return rt(e)&&r.set(e,ga),ga;if(De(a))for(let l=0;l<a.length;l++){const f=vn(a[l]);Hh(f)&&(i[f]=ot)}else if(a)for(const l in a){const f=vn(l);if(Hh(f)){const d=a[l],h=i[f]=De(d)||Oe(d)?{type:d}:Rt({},d),p=h.type;let v=!1,m=!0;if(De(p))for(let g=0;g<p.length;++g){const y=p[g],x=Oe(y)&&y.name;if(x==="Boolean"){v=!0;break}else x==="String"&&(m=!1)}else v=Oe(p)&&p.name==="Boolean";h[0]=v,h[1]=m,(v||tt(h,"default"))&&s.push(f)}}const c=[i,s];return rt(e)&&r.set(e,c),c}function Hh(e){return e[0]!=="$"&&!ui(e)}const qg=e=>e[0]==="_"||e==="$stable",Qf=e=>De(e)?e.map(ur):[ur(e)],n2=(e,n,t)=>{if(n._n)return n;const r=Ne((...o)=>Qf(n(...o)),t);return r._c=!1,r},Kg=(e,n,t)=>{const r=e._ctx;for(const o in e){if(qg(o))continue;const a=e[o];if(Oe(a))n[o]=n2(o,a,r);else if(a!=null){const i=Qf(a);n[o]=()=>i}}},Xg=(e,n)=>{const t=Qf(n);e.slots.default=()=>t},Yg=(e,n,t)=>{for(const r in n)(t||r!=="_")&&(e[r]=n[r])},r2=(e,n,t)=>{const r=e.slots=Hg();if(e.vnode.shapeFlag&32){const o=n._;o?(Yg(r,n,t),t&&jm(r,"_",o,!0)):Kg(n,r)}else n&&Xg(e,n)},o2=(e,n,t)=>{const{vnode:r,slots:o}=e;let a=!0,i=ot;if(r.shapeFlag&32){const s=n._;s?t&&s===1?a=!1:Yg(o,n,t):(a=!n.$stable,Kg(n,o)),i=n}else n&&(Xg(e,n),i={default:1});if(a)for(const s in o)!qg(s)&&i[s]==null&&delete o[s]},rn=y2;function a2(e){return i2(e)}function i2(e,n){const t=Vu();t.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:i,createText:s,createComment:u,setText:c,setElementText:l,parentNode:f,nextSibling:d,setScopeId:h=vr,insertStaticContent:p}=e,v=(F,P,L,K=null,J=null,ee=null,ce=void 0,ie=null,ue=!!P.dynamicChildren)=>{if(F===P)return;F&&!Ao(F,P)&&(K=$(F),se(F,J,ee,!0),F=null),P.patchFlag===-2&&(ue=!1,P.dynamicChildren=null);const{type:oe,ref:ke,shapeFlag:fe}=P;switch(oe){case $i:m(F,P,L,K);break;case sn:g(F,P,L,K);break;case Ns:F==null&&y(P,L,K,ce);break;case qe:R(F,P,L,K,J,ee,ce,ie,ue);break;default:fe&1?_(F,P,L,K,J,ee,ce,ie,ue):fe&6?T(F,P,L,K,J,ee,ce,ie,ue):(fe&64||fe&128)&&oe.process(F,P,L,K,J,ee,ce,ie,ue,le)}ke!=null&&J&&Xs(ke,F&&F.ref,ee,P||F,!P)},m=(F,P,L,K)=>{if(F==null)r(P.el=s(P.children),L,K);else{const J=P.el=F.el;P.children!==F.children&&c(J,P.children)}},g=(F,P,L,K)=>{F==null?r(P.el=u(P.children||""),L,K):P.el=F.el},y=(F,P,L,K)=>{[F.el,F.anchor]=p(F.children,P,L,K,F.el,F.anchor)},x=({el:F,anchor:P},L,K)=>{let J;for(;F&&F!==P;)J=d(F),r(F,L,K),F=J;r(P,L,K)},b=({el:F,anchor:P})=>{let L;for(;F&&F!==P;)L=d(F),o(F),F=L;o(P)},_=(F,P,L,K,J,ee,ce,ie,ue)=>{P.type==="svg"?ce="svg":P.type==="math"&&(ce="mathml"),F==null?w(P,L,K,J,ee,ce,ie,ue):C(F,P,J,ee,ce,ie,ue)},w=(F,P,L,K,J,ee,ce,ie)=>{let ue,oe;const{props:ke,shapeFlag:fe,transition:Se,dirs:Ie}=F;if(ue=F.el=i(F.type,ee,ke&&ke.is,ke),fe&8?l(ue,F.children):fe&16&&E(F.children,ue,null,K,J,Oc(F,ee),ce,ie),Ie&&wo(F,null,K,"created"),S(ue,F,F.scopeId,ce,K),ke){for(const Xe in ke)Xe!=="value"&&!ui(Xe)&&a(ue,Xe,null,ke[Xe],ee,K);"value"in ke&&a(ue,"value",null,ke.value,ee),(oe=ke.onVnodeBeforeMount)&&nr(oe,K,F)}Ie&&wo(F,null,K,"beforeMount");const ze=s2(J,Se);ze&&Se.beforeEnter(ue),r(ue,P,L),((oe=ke&&ke.onVnodeMounted)||ze||Ie)&&rn(()=>{oe&&nr(oe,K,F),ze&&Se.enter(ue),Ie&&wo(F,null,K,"mounted")},J)},S=(F,P,L,K,J)=>{if(L&&h(F,L),K)for(let ee=0;ee<K.length;ee++)h(F,K[ee]);if(J){let ee=J.subTree;if(P===ee||ey(ee.type)&&(ee.ssContent===P||ee.ssFallback===P)){const ce=J.vnode;S(F,ce,ce.scopeId,ce.slotScopeIds,J.parent)}}},E=(F,P,L,K,J,ee,ce,ie,ue=0)=>{for(let oe=ue;oe<F.length;oe++){const ke=F[oe]=ie?no(F[oe]):ur(F[oe]);v(null,ke,P,L,K,J,ee,ce,ie)}},C=(F,P,L,K,J,ee,ce)=>{const ie=P.el=F.el;let{patchFlag:ue,dynamicChildren:oe,dirs:ke}=P;ue|=F.patchFlag&16;const fe=F.props||ot,Se=P.props||ot;let Ie;if(L&&_o(L,!1),(Ie=Se.onVnodeBeforeUpdate)&&nr(Ie,L,P,F),ke&&wo(P,F,L,"beforeUpdate"),L&&_o(L,!0),(fe.innerHTML&&Se.innerHTML==null||fe.textContent&&Se.textContent==null)&&l(ie,""),oe?k(F.dynamicChildren,oe,ie,L,K,Oc(P,J),ee):ce||W(F,P,ie,null,L,K,Oc(P,J),ee,!1),ue>0){if(ue&16)I(ie,fe,Se,L,J);else if(ue&2&&fe.class!==Se.class&&a(ie,"class",null,Se.class,J),ue&4&&a(ie,"style",fe.style,Se.style,J),ue&8){const ze=P.dynamicProps;for(let Xe=0;Xe<ze.length;Xe++){const We=ze[Xe],Lt=fe[We],Gt=Se[We];(Gt!==Lt||We==="value")&&a(ie,We,Lt,Gt,J,L)}}ue&1&&F.children!==P.children&&l(ie,P.children)}else!ce&&oe==null&&I(ie,fe,Se,L,J);((Ie=Se.onVnodeUpdated)||ke)&&rn(()=>{Ie&&nr(Ie,L,P,F),ke&&wo(P,F,L,"updated")},K)},k=(F,P,L,K,J,ee,ce)=>{for(let ie=0;ie<P.length;ie++){const ue=F[ie],oe=P[ie],ke=ue.el&&(ue.type===qe||!Ao(ue,oe)||ue.shapeFlag&70)?f(ue.el):L;v(ue,oe,ke,null,K,J,ee,ce,!0)}},I=(F,P,L,K,J)=>{if(P!==L){if(P!==ot)for(const ee in P)!ui(ee)&&!(ee in L)&&a(F,ee,P[ee],null,J,K);for(const ee in L){if(ui(ee))continue;const ce=L[ee],ie=P[ee];ce!==ie&&ee!=="value"&&a(F,ee,ie,ce,J,K)}"value"in L&&a(F,"value",P.value,L.value,J)}},R=(F,P,L,K,J,ee,ce,ie,ue)=>{const oe=P.el=F?F.el:s(""),ke=P.anchor=F?F.anchor:s("");let{patchFlag:fe,dynamicChildren:Se,slotScopeIds:Ie}=P;Ie&&(ie=ie?ie.concat(Ie):Ie),F==null?(r(oe,L,K),r(ke,L,K),E(P.children||[],L,ke,J,ee,ce,ie,ue)):fe>0&&fe&64&&Se&&F.dynamicChildren?(k(F.dynamicChildren,Se,L,J,ee,ce,ie),(P.key!=null||J&&P===J.subTree)&&Zf(F,P,!0)):W(F,P,L,ke,J,ee,ce,ie,ue)},T=(F,P,L,K,J,ee,ce,ie,ue)=>{P.slotScopeIds=ie,F==null?P.shapeFlag&512?J.ctx.activate(P,L,K,ce,ue):N(P,L,K,J,ee,ce,ue):B(F,P,ue)},N=(F,P,L,K,J,ee,ce)=>{const ie=F.component=S2(F,K,J);if(Hu(F)&&(ie.ctx.renderer=le),k2(ie,!1,ce),ie.asyncDep){if(J&&J.registerDep(ie,H,ce),!F.el){const ue=ie.subTree=V(sn);g(null,ue,P,L)}}else H(ie,F,P,L,J,ee,ce)},B=(F,P,L)=>{const K=P.component=F.component;if(m2(F,P,L))if(K.asyncDep&&!K.asyncResolved){z(K,P,L);return}else K.next=P,K.update();else P.el=F.el,K.vnode=P},H=(F,P,L,K,J,ee,ce)=>{const ie=()=>{if(F.isMounted){let{next:fe,bu:Se,u:Ie,parent:ze,vnode:Xe}=F;{const Nn=Jg(F);if(Nn){fe&&(fe.el=Xe.el,z(F,fe,ce)),Nn.asyncDep.then(()=>{F.isUnmounted||ie()});return}}let We=fe,Lt;_o(F,!1),fe?(fe.el=Xe.el,z(F,fe,ce)):fe=Xe,Se&&Fs(Se),(Lt=fe.props&&fe.props.onVnodeBeforeUpdate)&&nr(Lt,ze,fe,Xe),_o(F,!0);const Gt=jh(F),Pn=F.subTree;F.subTree=Gt,v(Pn,Gt,f(Pn.el),$(Pn),F,J,ee),fe.el=Gt.el,We===null&&g2(F,Gt.el),Ie&&rn(Ie,J),(Lt=fe.props&&fe.props.onVnodeUpdated)&&rn(()=>nr(Lt,ze,fe,Xe),J)}else{let fe;const{el:Se,props:Ie}=P,{bm:ze,m:Xe,parent:We,root:Lt,type:Gt}=F,Pn=wa(P);_o(F,!1),ze&&Fs(ze),!Pn&&(fe=Ie&&Ie.onVnodeBeforeMount)&&nr(fe,We,P),_o(F,!0);{Lt.ce&&Lt.ce._injectChildStyle(Gt);const Nn=F.subTree=jh(F);v(null,Nn,L,K,F,J,ee),P.el=Nn.el}if(Xe&&rn(Xe,J),!Pn&&(fe=Ie&&Ie.onVnodeMounted)){const Nn=P;rn(()=>nr(fe,We,Nn),J)}(P.shapeFlag&256||We&&wa(We.vnode)&&We.vnode.shapeFlag&256)&&F.a&&rn(F.a,J),F.isMounted=!0,P=L=K=null}};F.scope.on();const ue=F.effect=new Jm(ie);F.scope.off();const oe=F.update=ue.run.bind(ue),ke=F.job=ue.runIfDirty.bind(ue);ke.i=F,ke.id=F.uid,ue.scheduler=()=>Kf(ke),_o(F,!0),oe()},z=(F,P,L)=>{P.component=F;const K=F.vnode.props;F.vnode=P,F.next=null,e2(F,P.props,K,L),o2(F,P.children,L),vo(),Ph(F),mo()},W=(F,P,L,K,J,ee,ce,ie,ue=!1)=>{const oe=F&&F.children,ke=F?F.shapeFlag:0,fe=P.children,{patchFlag:Se,shapeFlag:Ie}=P;if(Se>0){if(Se&128){Z(oe,fe,L,K,J,ee,ce,ie,ue);return}else if(Se&256){j(oe,fe,L,K,J,ee,ce,ie,ue);return}}Ie&8?(ke&16&&de(oe,J,ee),fe!==oe&&l(L,fe)):ke&16?Ie&16?Z(oe,fe,L,K,J,ee,ce,ie,ue):de(oe,J,ee,!0):(ke&8&&l(L,""),Ie&16&&E(fe,L,K,J,ee,ce,ie,ue))},j=(F,P,L,K,J,ee,ce,ie,ue)=>{F=F||ga,P=P||ga;const oe=F.length,ke=P.length,fe=Math.min(oe,ke);let Se;for(Se=0;Se<fe;Se++){const Ie=P[Se]=ue?no(P[Se]):ur(P[Se]);v(F[Se],Ie,L,null,J,ee,ce,ie,ue)}oe>ke?de(F,J,ee,!0,!1,fe):E(P,L,K,J,ee,ce,ie,ue,fe)},Z=(F,P,L,K,J,ee,ce,ie,ue)=>{let oe=0;const ke=P.length;let fe=F.length-1,Se=ke-1;for(;oe<=fe&&oe<=Se;){const Ie=F[oe],ze=P[oe]=ue?no(P[oe]):ur(P[oe]);if(Ao(Ie,ze))v(Ie,ze,L,null,J,ee,ce,ie,ue);else break;oe++}for(;oe<=fe&&oe<=Se;){const Ie=F[fe],ze=P[Se]=ue?no(P[Se]):ur(P[Se]);if(Ao(Ie,ze))v(Ie,ze,L,null,J,ee,ce,ie,ue);else break;fe--,Se--}if(oe>fe){if(oe<=Se){const Ie=Se+1,ze=Ie<ke?P[Ie].el:K;for(;oe<=Se;)v(null,P[oe]=ue?no(P[oe]):ur(P[oe]),L,ze,J,ee,ce,ie,ue),oe++}}else if(oe>Se)for(;oe<=fe;)se(F[oe],J,ee,!0),oe++;else{const Ie=oe,ze=oe,Xe=new Map;for(oe=ze;oe<=Se;oe++){const Vt=P[oe]=ue?no(P[oe]):ur(P[oe]);Vt.key!=null&&Xe.set(Vt.key,oe)}let We,Lt=0;const Gt=Se-ze+1;let Pn=!1,Nn=0;const Tr=new Array(Gt);for(oe=0;oe<Gt;oe++)Tr[oe]=0;for(oe=Ie;oe<=fe;oe++){const Vt=F[oe];if(Lt>=Gt){se(Vt,J,ee,!0);continue}let tr;if(Vt.key!=null)tr=Xe.get(Vt.key);else for(We=ze;We<=Se;We++)if(Tr[We-ze]===0&&Ao(Vt,P[We])){tr=We;break}tr===void 0?se(Vt,J,ee,!0):(Tr[tr-ze]=oe+1,tr>=Nn?Nn=tr:Pn=!0,v(Vt,P[tr],L,null,J,ee,ce,ie,ue),Lt++)}const na=Pn?u2(Tr):ga;for(We=na.length-1,oe=Gt-1;oe>=0;oe--){const Vt=ze+oe,tr=P[Vt],Ih=Vt+1<ke?P[Vt+1].el:K;Tr[oe]===0?v(null,tr,L,Ih,J,ee,ce,ie,ue):Pn&&(We<0||oe!==na[We]?ae(tr,L,Ih,2):We--)}}},ae=(F,P,L,K,J=null)=>{const{el:ee,type:ce,transition:ie,children:ue,shapeFlag:oe}=F;if(oe&6){ae(F.component.subTree,P,L,K);return}if(oe&128){F.suspense.move(P,L,K);return}if(oe&64){ce.move(F,P,L,le);return}if(ce===qe){r(ee,P,L);for(let fe=0;fe<ue.length;fe++)ae(ue[fe],P,L,K);r(F.anchor,P,L);return}if(ce===Ns){x(F,P,L);return}if(K!==2&&oe&1&&ie)if(K===0)ie.beforeEnter(ee),r(ee,P,L),rn(()=>ie.enter(ee),J);else{const{leave:fe,delayLeave:Se,afterLeave:Ie}=ie,ze=()=>r(ee,P,L),Xe=()=>{fe(ee,()=>{ze(),Ie&&Ie()})};Se?Se(ee,ze,Xe):Xe()}else r(ee,P,L)},se=(F,P,L,K=!1,J=!1)=>{const{type:ee,props:ce,ref:ie,children:ue,dynamicChildren:oe,shapeFlag:ke,patchFlag:fe,dirs:Se,cacheIndex:Ie}=F;if(fe===-2&&(J=!1),ie!=null&&Xs(ie,null,L,F,!0),Ie!=null&&(P.renderCache[Ie]=void 0),ke&256){P.ctx.deactivate(F);return}const ze=ke&1&&Se,Xe=!wa(F);let We;if(Xe&&(We=ce&&ce.onVnodeBeforeUnmount)&&nr(We,P,F),ke&6)Re(F.component,L,K);else{if(ke&128){F.suspense.unmount(L,K);return}ze&&wo(F,null,P,"beforeUnmount"),ke&64?F.type.remove(F,P,L,le,K):oe&&!oe.hasOnce&&(ee!==qe||fe>0&&fe&64)?de(oe,P,L,!1,!0):(ee===qe&&fe&384||!J&&ke&16)&&de(ue,P,L),K&&pe(F)}(Xe&&(We=ce&&ce.onVnodeUnmounted)||ze)&&rn(()=>{We&&nr(We,P,F),ze&&wo(F,null,P,"unmounted")},L)},pe=F=>{const{type:P,el:L,anchor:K,transition:J}=F;if(P===qe){Te(L,K);return}if(P===Ns){b(F);return}const ee=()=>{o(L),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(F.shapeFlag&1&&J&&!J.persisted){const{leave:ce,delayLeave:ie}=J,ue=()=>ce(L,ee);ie?ie(F.el,ee,ue):ue()}else ee()},Te=(F,P)=>{let L;for(;F!==P;)L=d(F),o(F),F=L;o(P)},Re=(F,P,L)=>{const{bum:K,scope:J,job:ee,subTree:ce,um:ie,m:ue,a:oe}=F;$h(ue),$h(oe),K&&Fs(K),J.stop(),ee&&(ee.flags|=8,se(ce,F,P,L)),ie&&rn(ie,P),rn(()=>{F.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},de=(F,P,L,K=!1,J=!1,ee=0)=>{for(let ce=ee;ce<F.length;ce++)se(F[ce],P,L,K,J)},$=F=>{if(F.shapeFlag&6)return $(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const P=d(F.anchor||F.el),L=P&&P[wg];return L?d(L):P};let te=!1;const ne=(F,P,L)=>{F==null?P._vnode&&se(P._vnode,null,null,!0):v(P._vnode||null,F,P,null,null,null,L),P._vnode=F,te||(te=!0,Ph(),yg(),te=!1)},le={p:v,um:se,m:ae,r:pe,mt:N,mc:E,pc:W,pbc:k,n:$,o:e};return{render:ne,hydrate:void 0,createApp:Qw(ne)}}function Oc({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function _o({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function s2(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Zf(e,n,t=!1){const r=e.children,o=n.children;if(De(r)&&De(o))for(let a=0;a<r.length;a++){const i=r[a];let s=o[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=o[a]=no(o[a]),s.el=i.el),!t&&s.patchFlag!==-2&&Zf(i,s)),s.type===$i&&(s.el=i.el)}}function u2(e){const n=e.slice(),t=[0];let r,o,a,i,s;const u=e.length;for(r=0;r<u;r++){const c=e[r];if(c!==0){if(o=t[t.length-1],e[o]<c){n[r]=o,t.push(r);continue}for(a=0,i=t.length-1;a<i;)s=a+i>>1,e[t[s]]<c?a=s+1:i=s;c<e[t[a]]&&(a>0&&(n[r]=t[a-1]),t[a]=r)}}for(a=t.length,i=t[a-1];a-- >0;)t[a]=i,i=n[i];return t}function Jg(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Jg(n)}function $h(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const c2=Symbol.for("v-scx"),l2=()=>bt(c2);function zr(e,n){return ed(e,null,n)}function je(e,n,t){return ed(e,n,t)}function ed(e,n,t=ot){const{immediate:r,deep:o,flush:a,once:i}=t,s=Rt({},t),u=n&&r||!n&&a!=="post";let c;if(ki){if(a==="sync"){const h=l2();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=vr,h.resume=vr,h.pause=vr,h}}const l=Ht;s.call=(h,p,v)=>Xn(h,l,p,v);let f=!1;a==="post"?s.scheduler=h=>{rn(h,l&&l.suspense)}:a!=="sync"&&(f=!0,s.scheduler=(h,p)=>{p?h():Kf(h)}),s.augmentJob=h=>{n&&(h.flags|=4),f&&(h.flags|=2,l&&(h.id=l.uid,h.i=l))};const d=Rw(e,n,s);return ki&&(c?c.push(d):u&&d()),d}function f2(e,n,t){const r=this.proxy,o=pt(e)?e.includes(".")?Qg(r,e):()=>r[e]:e.bind(r,r);let a;Oe(n)?a=n:(a=n.handler,t=n);const i=ji(this),s=ed(o,a.bind(r),t);return i(),s}function Qg(e,n){const t=n.split(".");return()=>{let r=e;for(let o=0;o<t.length&&r;o++)r=r[t[o]];return r}}const d2=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${vn(n)}Modifiers`]||e[`${qo(n)}Modifiers`];function h2(e,n,...t){if(e.isUnmounted)return;const r=e.vnode.props||ot;let o=t;const a=n.startsWith("update:"),i=a&&d2(r,n.slice(7));i&&(i.trim&&(o=t.map(l=>pt(l)?l.trim():l)),i.number&&(o=t.map(Il)));let s,u=r[s=Ic(n)]||r[s=Ic(vn(n))];!u&&a&&(u=r[s=Ic(qo(n))]),u&&Xn(u,e,6,o);const c=r[s+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Xn(c,e,6,o)}}function Zg(e,n,t=!1){const r=n.emitsCache,o=r.get(e);if(o!==void 0)return o;const a=e.emits;let i={},s=!1;if(!Oe(e)){const u=c=>{const l=Zg(c,n,!0);l&&(s=!0,Rt(i,l))};!t&&n.mixins.length&&n.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!a&&!s?(rt(e)&&r.set(e,null),null):(De(a)?a.forEach(u=>i[u]=null):Rt(i,a),rt(e)&&r.set(e,i),i)}function ju(e,n){return!e||!Mu(n)?!1:(n=n.slice(2).replace(/Once$/,""),tt(e,n[0].toLowerCase()+n.slice(1))||tt(e,qo(n))||tt(e,n))}function jh(e){const{type:n,vnode:t,proxy:r,withProxy:o,propsOptions:[a],slots:i,attrs:s,emit:u,render:c,renderCache:l,props:f,data:d,setupState:h,ctx:p,inheritAttrs:v}=e,m=Ks(e);let g,y;try{if(t.shapeFlag&4){const b=o||r,_=b;g=ur(c.call(_,b,l,f,h,d,p)),y=s}else{const b=n;g=ur(b.length>1?b(f,{attrs:s,slots:i,emit:u}):b(f,null)),y=n.props?s:p2(s)}}catch(b){hi.length=0,zu(b,e,1),g=V(sn)}let x=g;if(y&&v!==!1){const b=Object.keys(y),{shapeFlag:_}=x;b.length&&_&7&&(a&&b.some(Of)&&(y=v2(y,a)),x=fo(x,y,!1,!0))}return t.dirs&&(x=fo(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(t.dirs):t.dirs),t.transition&&zo(x,t.transition),g=x,Ks(m),g}const p2=e=>{let n;for(const t in e)(t==="class"||t==="style"||Mu(t))&&((n||(n={}))[t]=e[t]);return n},v2=(e,n)=>{const t={};for(const r in e)(!Of(r)||!(r.slice(9)in n))&&(t[r]=e[r]);return t};function m2(e,n,t){const{props:r,children:o,component:a}=e,{props:i,children:s,patchFlag:u}=n,c=a.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return r?Gh(r,i,c):!!i;if(u&8){const l=n.dynamicProps;for(let f=0;f<l.length;f++){const d=l[f];if(i[d]!==r[d]&&!ju(c,d))return!0}}}else return(o||s)&&(!s||!s.$stable)?!0:r===i?!1:r?i?Gh(r,i,c):!0:!!i;return!1}function Gh(e,n,t){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(n[a]!==e[a]&&!ju(t,a))return!0}return!1}function g2({vnode:e,parent:n},t){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=t,n=n.parent;else break}}const ey=e=>e.__isSuspense;function y2(e,n){n&&n.pendingBranch?De(e)?n.effects.push(...e):n.effects.push(e):Tw(e)}const qe=Symbol.for("v-fgt"),$i=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),Ns=Symbol.for("v-stc"),hi=[];let _n=null;function xe(e=!1){hi.push(_n=e?null:[])}function b2(){hi.pop(),_n=hi[hi.length-1]||null}let Ei=1;function qh(e,n=!1){Ei+=e,e<0&&_n&&n&&(_n.hasOnce=!0)}function ty(e){return e.dynamicChildren=Ei>0?_n||ga:null,b2(),Ei>0&&_n&&_n.push(e),e}function Fe(e,n,t,r,o,a){return ty(U(e,n,t,r,o,a,!0))}function Tn(e,n,t,r,o){return ty(V(e,n,t,r,o,!0))}function Si(e){return e?e.__v_isVNode===!0:!1}function Ao(e,n){return e.type===n.type&&e.key===n.key}const ny=({key:e})=>e??null,Os=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?pt(e)||ft(e)||Oe(e)?{i:Pt,r:e,k:n,f:!!t}:e:null);function U(e,n=null,t=null,r=0,o=null,a=e===qe?0:1,i=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&ny(n),ref:n&&Os(n),scopeId:xg,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Pt};return s?(td(u,t),a&128&&e.normalize(u)):t&&(u.shapeFlag|=pt(t)?8:16),Ei>0&&!i&&_n&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&_n.push(u),u}const V=x2;function x2(e,n=null,t=null,r=0,o=null,a=!1){if((!e||e===zw)&&(e=sn),Si(e)){const s=fo(e,n,!0);return t&&td(s,t),Ei>0&&!a&&_n&&(s.shapeFlag&6?_n[_n.indexOf(e)]=s:_n.push(s)),s.patchFlag=-2,s}if(D2(e)&&(e=e.__vccOpts),n){n=w2(n);let{class:s,style:u}=n;s&&!pt(s)&&(n.class=dr(s)),rt(u)&&(Gf(u)&&!De(u)&&(u=Rt({},u)),n.style=Lf(u))}const i=pt(e)?1:ey(e)?128:_g(e)?64:rt(e)?4:Oe(e)?2:0;return U(e,n,t,r,o,i,a,!0)}function w2(e){return e?Gf(e)||$g(e)?Rt({},e):e:null}function fo(e,n,t=!1,r=!1){const{props:o,ref:a,patchFlag:i,children:s,transition:u}=e,c=n?Et(o||{},n):o,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&ny(c),ref:n&&n.ref?t&&a?De(a)?a.concat(Os(n)):[a,Os(n)]:Os(n):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==qe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fo(e.ssContent),ssFallback:e.ssFallback&&fo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&zo(l,u.clone(l)),l}function wt(e=" ",n=0){return V($i,null,e,n)}function _2(e,n){const t=V(Ns,null,e);return t.staticCount=n,t}function xn(e="",n=!1){return n?(xe(),Tn(sn,null,e)):V(sn,null,e)}function ur(e){return e==null||typeof e=="boolean"?V(sn):De(e)?V(qe,null,e.slice()):Si(e)?no(e):V($i,null,String(e))}function no(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:fo(e)}function td(e,n){let t=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(De(n))t=16;else if(typeof n=="object")if(r&65){const o=n.default;o&&(o._c&&(o._d=!1),td(e,o()),o._c&&(o._d=!0));return}else{t=32;const o=n._;!o&&!$g(n)?n._ctx=Pt:o===3&&Pt&&(Pt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else Oe(n)?(n={default:n,_ctx:Pt},t=32):(n=String(n),r&64?(t=16,n=[wt(n)]):t=8);e.children=n,e.shapeFlag|=t}function Et(...e){const n={};for(let t=0;t<e.length;t++){const r=e[t];for(const o in r)if(o==="class")n.class!==r.class&&(n.class=dr([n.class,r.class]));else if(o==="style")n.style=Lf([n.style,r.style]);else if(Mu(o)){const a=n[o],i=r[o];i&&a!==i&&!(De(a)&&a.includes(i))&&(n[o]=a?[].concat(a,i):i)}else o!==""&&(n[o]=r[o])}return n}function nr(e,n,t,r=null){Xn(e,n,7,[t,r])}const C2=Ug();let E2=0;function S2(e,n,t){const r=e.type,o=(n?n.appContext:e.appContext)||C2,a={uid:E2++,vnode:e,type:r,parent:n,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ym(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(o.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gg(r,o),emitsOptions:Zg(r,o),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:r.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=n?n.root:a,a.emit=h2.bind(null,a),e.ce&&e.ce(a),a}let Ht=null;const nd=()=>Ht||Pt;let Js,Ll;{const e=Vu(),n=(t,r)=>{let o;return(o=e[t])||(o=e[t]=[]),o.push(r),a=>{o.length>1?o.forEach(i=>i(a)):o[0](a)}};Js=n("__VUE_INSTANCE_SETTERS__",t=>Ht=t),Ll=n("__VUE_SSR_SETTERS__",t=>ki=t)}const ji=e=>{const n=Ht;return Js(e),e.scope.on(),()=>{e.scope.off(),Js(n)}},Kh=()=>{Ht&&Ht.scope.off(),Js(null)};function ry(e){return e.vnode.shapeFlag&4}let ki=!1;function k2(e,n=!1,t=!1){n&&Ll(n);const{props:r,children:o}=e.vnode,a=ry(e);Zw(e,r,a,n),r2(e,o,t);const i=a?R2(e,n):void 0;return n&&Ll(!1),i}function R2(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,jw);const{setup:r}=t;if(r){vo();const o=e.setupContext=r.length>1?A2(e):null,a=ji(e),i=Hi(r,e,0,[e.props,o]),s=zm(i);if(mo(),a(),(s||e.sp)&&!wa(e)&&Tg(e),s){if(i.then(Kh,Kh),n)return i.then(u=>{Xh(e,u)}).catch(u=>{zu(u,e,0)});e.asyncDep=i}else Xh(e,i)}else oy(e)}function Xh(e,n,t){Oe(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:rt(n)&&(e.setupState=pg(n)),oy(e)}function oy(e,n,t){const r=e.type;e.render||(e.render=r.render||vr);{const o=ji(e);vo();try{Gw(e)}finally{mo(),o()}}}const I2={get(e,n){return Kt(e,"get",""),e[n]}};function A2(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,I2),slots:e.slots,emit:e.emit,expose:n}}function Gu(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(pg(dg(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in di)return di[t](e)},has(n,t){return t in n||t in di}})):e.proxy}function T2(e,n=!0){return Oe(e)?e.displayName||e.name:e.name||n&&e.__name}function D2(e){return Oe(e)&&"__vccOpts"in e}const Y=(e,n)=>Sw(e,n,ki);function _r(e,n,t){const r=arguments.length;return r===2?rt(n)&&!De(n)?Si(n)?V(e,null,[n]):V(e,n):V(e,null,n):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Si(t)&&(t=[t]),V(e,n,t))}const F2="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vl;const Yh=typeof window<"u"&&window.trustedTypes;if(Yh)try{Vl=Yh.createPolicy("vue",{createHTML:e=>e})}catch{}const ay=Vl?e=>Vl.createHTML(e):e=>e,P2="http://www.w3.org/2000/svg",N2="http://www.w3.org/1998/Math/MathML",Or=typeof document<"u"?document:null,Jh=Or&&Or.createElement("template"),O2={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,r)=>{const o=n==="svg"?Or.createElementNS(P2,e):n==="mathml"?Or.createElementNS(N2,e):t?Or.createElement(e,{is:t}):Or.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>Or.createTextNode(e),createComment:e=>Or.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Or.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,r,o,a){const i=t?t.previousSibling:n.lastChild;if(o&&(o===a||o.nextSibling))for(;n.insertBefore(o.cloneNode(!0),t),!(o===a||!(o=o.nextSibling)););else{Jh.innerHTML=ay(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=Jh.content;if(r==="svg"||r==="mathml"){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}n.insertBefore(s,t)}return[i?i.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},Xr="transition",Ya="animation",Pa=Symbol("_vtc"),iy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sy=Rt({},kg,iy),M2=e=>(e.displayName="Transition",e.props=sy,e),Ho=M2((e,{slots:n})=>_r(Nw,uy(e),n)),Co=(e,n=[])=>{De(e)?e.forEach(t=>t(...n)):e&&e(...n)},Qh=e=>e?De(e)?e.some(n=>n.length>1):e.length>1:!1;function uy(e){const n={};for(const R in e)R in iy||(n[R]=e[R]);if(e.css===!1)return n;const{name:t="v",type:r,duration:o,enterFromClass:a=`${t}-enter-from`,enterActiveClass:i=`${t}-enter-active`,enterToClass:s=`${t}-enter-to`,appearFromClass:u=a,appearActiveClass:c=i,appearToClass:l=s,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:h=`${t}-leave-to`}=e,p=B2(o),v=p&&p[0],m=p&&p[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:x,onLeave:b,onLeaveCancelled:_,onBeforeAppear:w=g,onAppear:S=y,onAppearCancelled:E=x}=n,C=(R,T,N,B)=>{R._enterCancelled=B,Zr(R,T?l:s),Zr(R,T?c:i),N&&N()},k=(R,T)=>{R._isLeaving=!1,Zr(R,f),Zr(R,h),Zr(R,d),T&&T()},I=R=>(T,N)=>{const B=R?S:y,H=()=>C(T,R,N);Co(B,[T,H]),Zh(()=>{Zr(T,R?u:a),ar(T,R?l:s),Qh(B)||ep(T,r,v,H)})};return Rt(n,{onBeforeEnter(R){Co(g,[R]),ar(R,a),ar(R,i)},onBeforeAppear(R){Co(w,[R]),ar(R,u),ar(R,c)},onEnter:I(!1),onAppear:I(!0),onLeave(R,T){R._isLeaving=!0;const N=()=>k(R,T);ar(R,f),R._enterCancelled?(ar(R,d),Wl()):(Wl(),ar(R,d)),Zh(()=>{R._isLeaving&&(Zr(R,f),ar(R,h),Qh(b)||ep(R,r,m,N))}),Co(b,[R,N])},onEnterCancelled(R){C(R,!1,void 0,!0),Co(x,[R])},onAppearCancelled(R){C(R,!0,void 0,!0),Co(E,[R])},onLeaveCancelled(R){k(R),Co(_,[R])}})}function B2(e){if(e==null)return null;if(rt(e))return[Mc(e.enter),Mc(e.leave)];{const n=Mc(e);return[n,n]}}function Mc(e){return Gx(e)}function ar(e,n){n.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[Pa]||(e[Pa]=new Set)).add(n)}function Zr(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const t=e[Pa];t&&(t.delete(n),t.size||(e[Pa]=void 0))}function Zh(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let L2=0;function ep(e,n,t,r){const o=e._endId=++L2,a=()=>{o===e._endId&&r()};if(t!=null)return setTimeout(a,t);const{type:i,timeout:s,propCount:u}=cy(e,n);if(!i)return r();const c=i+"end";let l=0;const f=()=>{e.removeEventListener(c,d),a()},d=h=>{h.target===e&&++l>=u&&f()};setTimeout(()=>{l<u&&f()},s+1),e.addEventListener(c,d)}function cy(e,n){const t=window.getComputedStyle(e),r=p=>(t[p]||"").split(", "),o=r(`${Xr}Delay`),a=r(`${Xr}Duration`),i=tp(o,a),s=r(`${Ya}Delay`),u=r(`${Ya}Duration`),c=tp(s,u);let l=null,f=0,d=0;n===Xr?i>0&&(l=Xr,f=i,d=a.length):n===Ya?c>0&&(l=Ya,f=c,d=u.length):(f=Math.max(i,c),l=f>0?i>c?Xr:Ya:null,d=l?l===Xr?a.length:u.length:0);const h=l===Xr&&/\b(transform|all)(,|$)/.test(r(`${Xr}Property`).toString());return{type:l,timeout:f,propCount:d,hasTransform:h}}function tp(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((t,r)=>np(t)+np(e[r])))}function np(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Wl(){return document.body.offsetHeight}function V2(e,n,t){const r=e[Pa];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const Qs=Symbol("_vod"),ly=Symbol("_vsh"),fy={beforeMount(e,{value:n},{transition:t}){e[Qs]=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):Ja(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:r}){!n!=!t&&(r?n?(r.beforeEnter(e),Ja(e,!0),r.enter(e)):r.leave(e,()=>{Ja(e,!1)}):Ja(e,n))},beforeUnmount(e,{value:n}){Ja(e,n)}};function Ja(e,n){e.style.display=n?e[Qs]:"none",e[ly]=!n}const W2=Symbol(""),U2=/(^|;)\s*display\s*:/;function z2(e,n,t){const r=e.style,o=pt(t);let a=!1;if(t&&!o){if(n)if(pt(n))for(const i of n.split(";")){const s=i.slice(0,i.indexOf(":")).trim();t[s]==null&&Ms(r,s,"")}else for(const i in n)t[i]==null&&Ms(r,i,"");for(const i in t)i==="display"&&(a=!0),Ms(r,i,t[i])}else if(o){if(n!==t){const i=r[W2];i&&(t+=";"+i),r.cssText=t,a=U2.test(t)}}else n&&e.removeAttribute("style");Qs in e&&(e[Qs]=a?r.display:"",e[ly]&&(r.display="none"))}const rp=/\s*!important$/;function Ms(e,n,t){if(De(t))t.forEach(r=>Ms(e,n,r));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const r=H2(e,n);rp.test(t)?e.setProperty(qo(r),t.replace(rp,""),"important"):e[r]=t}}const op=["Webkit","Moz","ms"],Bc={};function H2(e,n){const t=Bc[n];if(t)return t;let r=vn(n);if(r!=="filter"&&r in e)return Bc[n]=r;r=Wr(r);for(let o=0;o<op.length;o++){const a=op[o]+r;if(a in e)return Bc[n]=a}return n}const ap="http://www.w3.org/1999/xlink";function ip(e,n,t,r,o,a=Qx(n)){r&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(ap,n.slice(6,n.length)):e.setAttributeNS(ap,n,t):t==null||a&&!Gm(t)?e.removeAttribute(n):e.setAttribute(n,a?"":Kn(t)?String(t):t)}function sp(e,n,t,r,o){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?ay(t):t);return}const a=e.tagName;if(n==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?e.getAttribute("value")||"":e.value,u=t==null?e.type==="checkbox"?"on":"":String(t);(s!==u||!("_value"in e))&&(e.value=u),t==null&&e.removeAttribute(n),e._value=t;return}let i=!1;if(t===""||t==null){const s=typeof e[n];s==="boolean"?t=Gm(t):t==null&&s==="string"?(t="",i=!0):s==="number"&&(t=0,i=!0)}try{e[n]=t}catch{}i&&e.removeAttribute(o||n)}function To(e,n,t,r){e.addEventListener(n,t,r)}function $2(e,n,t,r){e.removeEventListener(n,t,r)}const up=Symbol("_vei");function j2(e,n,t,r,o=null){const a=e[up]||(e[up]={}),i=a[n];if(r&&i)i.value=r;else{const[s,u]=G2(n);if(r){const c=a[n]=X2(r,o);To(e,s,c,u)}else i&&($2(e,s,i,u),a[n]=void 0)}}const cp=/(?:Once|Passive|Capture)$/;function G2(e){let n;if(cp.test(e)){n={};let r;for(;r=e.match(cp);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):qo(e.slice(2)),n]}let Lc=0;const q2=Promise.resolve(),K2=()=>Lc||(q2.then(()=>Lc=0),Lc=Date.now());function X2(e,n){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Xn(Y2(r,t.value),n,5,[r])};return t.value=e,t.attached=K2(),t}function Y2(e,n){if(De(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(r=>o=>!o._stopped&&r&&r(o))}else return n}const lp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,J2=(e,n,t,r,o,a)=>{const i=o==="svg";n==="class"?V2(e,r,i):n==="style"?z2(e,t,r):Mu(n)?Of(n)||j2(e,n,t,r,a):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Q2(e,n,r,i))?(sp(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&ip(e,n,r,i,a,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!pt(r))?sp(e,vn(n),r,a,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),ip(e,n,r,i))};function Q2(e,n,t,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&lp(n)&&Oe(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return lp(n)&&pt(t)?!1:n in e}const dy=new WeakMap,hy=new WeakMap,Zs=Symbol("_moveCb"),fp=Symbol("_enterCb"),Z2=e=>(delete e.props.mode,e),e_=Z2({name:"TransitionGroup",props:Rt({},sy,{tag:String,moveClass:String}),setup(e,{slots:n}){const t=nd(),r=Sg();let o,a;return Yf(()=>{if(!o.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!o_(o[0].el,t.vnode.el,i))return;o.forEach(t_),o.forEach(n_);const s=o.filter(r_);Wl(),s.forEach(u=>{const c=u.el,l=c.style;ar(c,i),l.transform=l.webkitTransform=l.transitionDuration="";const f=c[Zs]=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",f),c[Zs]=null,Zr(c,i))};c.addEventListener("transitionend",f)})}),()=>{const i=Ge(e),s=uy(i);let u=i.tag||qe;if(o=[],a)for(let c=0;c<a.length;c++){const l=a[c];l.el&&l.el instanceof Element&&(o.push(l),zo(l,Ci(l,s,r,t)),dy.set(l,l.el.getBoundingClientRect()))}a=n.default?Xf(n.default()):[];for(let c=0;c<a.length;c++){const l=a[c];l.key!=null&&zo(l,Ci(l,s,r,t))}return V(u,null,a)}}}),rd=e_;function t_(e){const n=e.el;n[Zs]&&n[Zs](),n[fp]&&n[fp]()}function n_(e){hy.set(e,e.el.getBoundingClientRect())}function r_(e){const n=dy.get(e),t=hy.get(e),r=n.left-t.left,o=n.top-t.top;if(r||o){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${o}px)`,a.transitionDuration="0s",e}}function o_(e,n,t){const r=e.cloneNode(),o=e[Pa];o&&o.forEach(s=>{s.split(/\s+/).forEach(u=>u&&r.classList.remove(u))}),t.split(/\s+/).forEach(s=>s&&r.classList.add(s)),r.style.display="none";const a=n.nodeType===1?n:n.parentNode;a.appendChild(r);const{hasTransform:i}=cy(r);return a.removeChild(r),i}const eu=e=>{const n=e.props["onUpdate:modelValue"]||!1;return De(n)?t=>Fs(n,t):n};function a_(e){e.target.composing=!0}function dp(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Ca=Symbol("_assign"),Mo={created(e,{modifiers:{lazy:n,trim:t,number:r}},o){e[Ca]=eu(o);const a=r||o.props&&o.props.type==="number";To(e,n?"change":"input",i=>{if(i.target.composing)return;let s=e.value;t&&(s=s.trim()),a&&(s=Il(s)),e[Ca](s)}),t&&To(e,"change",()=>{e.value=e.value.trim()}),n||(To(e,"compositionstart",a_),To(e,"compositionend",dp),To(e,"change",dp))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:r,trim:o,number:a}},i){if(e[Ca]=eu(i),e.composing)return;const s=(a||e.type==="number")&&!/^0\d/.test(e.value)?Il(e.value):e.value,u=n??"";s!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&n===t||o&&e.value.trim()===u)||(e.value=u))}},hp={deep:!0,created(e,n,t){e[Ca]=eu(t),To(e,"change",()=>{const r=e._modelValue,o=i_(e),a=e.checked,i=e[Ca];if(De(r)){const s=qm(r,o),u=s!==-1;if(a&&!u)i(r.concat(o));else if(!a&&u){const c=[...r];c.splice(s,1),i(c)}}else if(Bu(r)){const s=new Set(r);a?s.add(o):s.delete(o),i(s)}else i(py(e,a))})},mounted:pp,beforeUpdate(e,n,t){e[Ca]=eu(t),pp(e,n,t)}};function pp(e,{value:n,oldValue:t},r){e._modelValue=n;let o;if(De(n))o=qm(n,r.props.value)>-1;else if(Bu(n))o=n.has(r.props.value);else{if(n===t)return;o=Wu(n,py(e,!0))}e.checked!==o&&(e.checked=o)}function i_(e){return"_value"in e?e._value:e.value}function py(e,n){const t=n?"_trueValue":"_falseValue";return t in e?e[t]:n}const s_=["ctrl","shift","alt","meta"],u_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>s_.some(t=>e[`${t}Key`]&&!n.includes(t))},vy=(e,n)=>{const t=e._withMods||(e._withMods={}),r=n.join(".");return t[r]||(t[r]=(o,...a)=>{for(let i=0;i<n.length;i++){const s=u_[n[i]];if(s&&s(o,n))return}return e(o,...a)})},c_=Rt({patchProp:J2},O2);let vp;function l_(){return vp||(vp=a2(c_))}const f_=(...e)=>{const n=l_().createApp(...e),{mount:t}=n;return n.mount=r=>{const o=h_(r);if(!o)return;const a=n._component;!Oe(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=t(o,!1,d_(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},n};function d_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function h_(e){return pt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const fa=typeof document<"u";function my(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function p_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&my(e.default)}const et=Object.assign;function Vc(e,n){const t={};for(const r in n){const o=n[r];t[r]=Yn(o)?o.map(e):e(o)}return t}const pi=()=>{},Yn=Array.isArray,gy=/#/g,v_=/&/g,m_=/\//g,g_=/=/g,y_=/\?/g,yy=/\+/g,b_=/%5B/g,x_=/%5D/g,by=/%5E/g,w_=/%60/g,xy=/%7B/g,__=/%7C/g,wy=/%7D/g,C_=/%20/g;function od(e){return encodeURI(""+e).replace(__,"|").replace(b_,"[").replace(x_,"]")}function E_(e){return od(e).replace(xy,"{").replace(wy,"}").replace(by,"^")}function Ul(e){return od(e).replace(yy,"%2B").replace(C_,"+").replace(gy,"%23").replace(v_,"%26").replace(w_,"`").replace(xy,"{").replace(wy,"}").replace(by,"^")}function S_(e){return Ul(e).replace(g_,"%3D")}function k_(e){return od(e).replace(gy,"%23").replace(y_,"%3F")}function R_(e){return e==null?"":k_(e).replace(m_,"%2F")}function Ri(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const I_=/\/$/,A_=e=>e.replace(I_,"");function Wc(e,n,t="/"){let r,o={},a="",i="";const s=n.indexOf("#");let u=n.indexOf("?");return s<u&&s>=0&&(u=-1),u>-1&&(r=n.slice(0,u),a=n.slice(u+1,s>-1?s:n.length),o=e(a)),s>-1&&(r=r||n.slice(0,s),i=n.slice(s,n.length)),r=P_(r??n,t),{fullPath:r+(a&&"?")+a+i,path:r,query:o,hash:Ri(i)}}function T_(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function mp(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function D_(e,n,t){const r=n.matched.length-1,o=t.matched.length-1;return r>-1&&r===o&&Na(n.matched[r],t.matched[o])&&_y(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function Na(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function _y(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(!F_(e[t],n[t]))return!1;return!0}function F_(e,n){return Yn(e)?gp(e,n):Yn(n)?gp(n,e):e===n}function gp(e,n){return Yn(n)?e.length===n.length&&e.every((t,r)=>t===n[r]):e.length===1&&e[0]===n}function P_(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let a=t.length-1,i,s;for(i=0;i<r.length;i++)if(s=r[i],s!==".")if(s==="..")a>1&&a--;else break;return t.slice(0,a).join("/")+"/"+r.slice(i).join("/")}const Yr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ii;(function(e){e.pop="pop",e.push="push"})(Ii||(Ii={}));var vi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(vi||(vi={}));function N_(e){if(!e)if(fa){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),A_(e)}const O_=/^[^#]+#/;function M_(e,n){return e.replace(O_,"#")+n}function B_(e,n){const t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-t.left-(n.left||0),top:r.top-t.top-(n.top||0)}}const qu=()=>({left:window.scrollX,top:window.scrollY});function L_(e){let n;if("el"in e){const t=e.el,r=typeof t=="string"&&t.startsWith("#"),o=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!o)return;n=B_(o,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function yp(e,n){return(history.state?history.state.position-n:-1)+e}const zl=new Map;function V_(e,n){zl.set(e,n)}function W_(e){const n=zl.get(e);return zl.delete(e),n}let U_=()=>location.protocol+"//"+location.host;function Cy(e,n){const{pathname:t,search:r,hash:o}=n,a=e.indexOf("#");if(a>-1){let s=o.includes(e.slice(a))?e.slice(a).length:1,u=o.slice(s);return u[0]!=="/"&&(u="/"+u),mp(u,"")}return mp(t,e)+r+o}function z_(e,n,t,r){let o=[],a=[],i=null;const s=({state:d})=>{const h=Cy(e,location),p=t.value,v=n.value;let m=0;if(d){if(t.value=h,n.value=d,i&&i===p){i=null;return}m=v?d.position-v.position:0}else r(h);o.forEach(g=>{g(t.value,p,{delta:m,type:Ii.pop,direction:m?m>0?vi.forward:vi.back:vi.unknown})})};function u(){i=t.value}function c(d){o.push(d);const h=()=>{const p=o.indexOf(d);p>-1&&o.splice(p,1)};return a.push(h),h}function l(){const{history:d}=window;d.state&&d.replaceState(et({},d.state,{scroll:qu()}),"")}function f(){for(const d of a)d();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:u,listen:c,destroy:f}}function bp(e,n,t,r=!1,o=!1){return{back:e,current:n,forward:t,replaced:r,position:window.history.length,scroll:o?qu():null}}function H_(e){const{history:n,location:t}=window,r={value:Cy(e,t)},o={value:n.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function a(u,c,l){const f=e.indexOf("#"),d=f>-1?(t.host&&document.querySelector("base")?e:e.slice(f))+u:U_()+e+u;try{n[l?"replaceState":"pushState"](c,"",d),o.value=c}catch(h){console.error(h),t[l?"replace":"assign"](d)}}function i(u,c){const l=et({},n.state,bp(o.value.back,u,o.value.forward,!0),c,{position:o.value.position});a(u,l,!0),r.value=u}function s(u,c){const l=et({},o.value,n.state,{forward:u,scroll:qu()});a(l.current,l,!0);const f=et({},bp(r.value,u,null),{position:l.position+1},c);a(u,f,!1),r.value=u}return{location:r,state:o,push:s,replace:i}}function $_(e){e=N_(e);const n=H_(e),t=z_(e,n.state,n.location,n.replace);function r(a,i=!0){i||t.pauseListeners(),history.go(a)}const o=et({location:"",base:e,go:r,createHref:M_.bind(null,e)},n,t);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>n.state.value}),o}function j_(e){return typeof e=="string"||e&&typeof e=="object"}function Ey(e){return typeof e=="string"||typeof e=="symbol"}const Sy=Symbol("");var xp;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(xp||(xp={}));function Oa(e,n){return et(new Error,{type:e,[Sy]:!0},n)}function Fr(e,n){return e instanceof Error&&Sy in e&&(n==null||!!(e.type&n))}const wp="[^/]+?",G_={sensitive:!1,strict:!1,start:!0,end:!0},q_=/[.+*?^${}()[\]/\\]/g;function K_(e,n){const t=et({},G_,n),r=[];let o=t.start?"^":"";const a=[];for(const c of e){const l=c.length?[]:[90];t.strict&&!c.length&&(o+="/");for(let f=0;f<c.length;f++){const d=c[f];let h=40+(t.sensitive?.25:0);if(d.type===0)f||(o+="/"),o+=d.value.replace(q_,"\\$&"),h+=40;else if(d.type===1){const{value:p,repeatable:v,optional:m,regexp:g}=d;a.push({name:p,repeatable:v,optional:m});const y=g||wp;if(y!==wp){h+=10;try{new RegExp(`(${y})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+b.message)}}let x=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(x=m&&c.length<2?`(?:/${x})`:"/"+x),m&&(x+="?"),o+=x,h+=20,m&&(h+=-8),v&&(h+=-20),y===".*"&&(h+=-50)}l.push(h)}r.push(l)}if(t.strict&&t.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}t.strict||(o+="/?"),t.end?o+="$":t.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const i=new RegExp(o,t.sensitive?"":"i");function s(c){const l=c.match(i),f={};if(!l)return null;for(let d=1;d<l.length;d++){const h=l[d]||"",p=a[d-1];f[p.name]=h&&p.repeatable?h.split("/"):h}return f}function u(c){let l="",f=!1;for(const d of e){(!f||!l.endsWith("/"))&&(l+="/"),f=!1;for(const h of d)if(h.type===0)l+=h.value;else if(h.type===1){const{value:p,repeatable:v,optional:m}=h,g=p in c?c[p]:"";if(Yn(g)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Yn(g)?g.join("/"):g;if(!y)if(m)d.length<2&&(l.endsWith("/")?l=l.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);l+=y}}return l||"/"}return{re:i,score:r,keys:a,parse:s,stringify:u}}function X_(e,n){let t=0;for(;t<e.length&&t<n.length;){const r=n[t]-e[t];if(r)return r;t++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function ky(e,n){let t=0;const r=e.score,o=n.score;for(;t<r.length&&t<o.length;){const a=X_(r[t],o[t]);if(a)return a;t++}if(Math.abs(o.length-r.length)===1){if(_p(r))return 1;if(_p(o))return-1}return o.length-r.length}function _p(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const Y_={type:0,value:""},J_=/[a-zA-Z0-9_]/;function Q_(e){if(!e)return[[]];if(e==="/")return[[Y_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(h){throw new Error(`ERR (${t})/"${c}": ${h}`)}let t=0,r=t;const o=[];let a;function i(){a&&o.push(a),a=[]}let s=0,u,c="",l="";function f(){c&&(t===0?a.push({type:0,value:c}):t===1||t===2||t===3?(a.length>1&&(u==="*"||u==="+")&&n(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:l,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):n("Invalid state to consume buffer"),c="")}function d(){c+=u}for(;s<e.length;){if(u=e[s++],u==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:u==="/"?(c&&f(),i()):u===":"?(f(),t=1):d();break;case 4:d(),t=r;break;case 1:u==="("?t=2:J_.test(u)?d():(f(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&s--);break;case 2:u===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+u:t=3:l+=u;break;case 3:f(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&s--,l="";break;default:n("Unknown state");break}}return t===2&&n(`Unfinished custom RegExp for param "${c}"`),f(),i(),o}function Z_(e,n,t){const r=K_(Q_(e.path),t),o=et(r,{record:e,parent:n,children:[],alias:[]});return n&&!o.record.aliasOf==!n.record.aliasOf&&n.children.push(o),o}function eC(e,n){const t=[],r=new Map;n=kp({strict:!1,end:!0,sensitive:!1},n);function o(f){return r.get(f)}function a(f,d,h){const p=!h,v=Ep(f);v.aliasOf=h&&h.record;const m=kp(n,f),g=[v];if("alias"in f){const b=typeof f.alias=="string"?[f.alias]:f.alias;for(const _ of b)g.push(Ep(et({},v,{components:h?h.record.components:v.components,path:_,aliasOf:h?h.record:v})))}let y,x;for(const b of g){const{path:_}=b;if(d&&_[0]!=="/"){const w=d.record.path,S=w[w.length-1]==="/"?"":"/";b.path=d.record.path+(_&&S+_)}if(y=Z_(b,d,m),h?h.alias.push(y):(x=x||y,x!==y&&x.alias.push(y),p&&f.name&&!Sp(y)&&i(f.name)),Ry(y)&&u(y),v.children){const w=v.children;for(let S=0;S<w.length;S++)a(w[S],y,h&&h.children[S])}h=h||y}return x?()=>{i(x)}:pi}function i(f){if(Ey(f)){const d=r.get(f);d&&(r.delete(f),t.splice(t.indexOf(d),1),d.children.forEach(i),d.alias.forEach(i))}else{const d=t.indexOf(f);d>-1&&(t.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function s(){return t}function u(f){const d=rC(f,t);t.splice(d,0,f),f.record.name&&!Sp(f)&&r.set(f.record.name,f)}function c(f,d){let h,p={},v,m;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw Oa(1,{location:f});m=h.record.name,p=et(Cp(d.params,h.keys.filter(x=>!x.optional).concat(h.parent?h.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&Cp(f.params,h.keys.map(x=>x.name))),v=h.stringify(p)}else if(f.path!=null)v=f.path,h=t.find(x=>x.re.test(v)),h&&(p=h.parse(v),m=h.record.name);else{if(h=d.name?r.get(d.name):t.find(x=>x.re.test(d.path)),!h)throw Oa(1,{location:f,currentLocation:d});m=h.record.name,p=et({},d.params,f.params),v=h.stringify(p)}const g=[];let y=h;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:v,params:p,matched:g,meta:nC(g)}}e.forEach(f=>a(f));function l(){t.length=0,r.clear()}return{addRoute:a,resolve:c,removeRoute:i,clearRoutes:l,getRoutes:s,getRecordMatcher:o}}function Cp(e,n){const t={};for(const r of n)r in e&&(t[r]=e[r]);return t}function Ep(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:tC(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function tC(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const r in e.components)n[r]=typeof t=="object"?t[r]:t;return n}function Sp(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function nC(e){return e.reduce((n,t)=>et(n,t.meta),{})}function kp(e,n){const t={};for(const r in e)t[r]=r in n?n[r]:e[r];return t}function rC(e,n){let t=0,r=n.length;for(;t!==r;){const a=t+r>>1;ky(e,n[a])<0?r=a:t=a+1}const o=oC(e);return o&&(r=n.lastIndexOf(o,r-1)),r}function oC(e){let n=e;for(;n=n.parent;)if(Ry(n)&&ky(e,n)===0)return n}function Ry({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function aC(e){const n={};if(e===""||e==="?")return n;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(yy," "),i=a.indexOf("="),s=Ri(i<0?a:a.slice(0,i)),u=i<0?null:Ri(a.slice(i+1));if(s in n){let c=n[s];Yn(c)||(c=n[s]=[c]),c.push(u)}else n[s]=u}return n}function Rp(e){let n="";for(let t in e){const r=e[t];if(t=S_(t),r==null){r!==void 0&&(n+=(n.length?"&":"")+t);continue}(Yn(r)?r.map(a=>a&&Ul(a)):[r&&Ul(r)]).forEach(a=>{a!==void 0&&(n+=(n.length?"&":"")+t,a!=null&&(n+="="+a))})}return n}function iC(e){const n={};for(const t in e){const r=e[t];r!==void 0&&(n[t]=Yn(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return n}const sC=Symbol(""),Ip=Symbol(""),Ku=Symbol(""),ad=Symbol(""),Hl=Symbol("");function Qa(){let e=[];function n(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function ro(e,n,t,r,o,a=i=>i()){const i=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((s,u)=>{const c=d=>{d===!1?u(Oa(4,{from:t,to:n})):d instanceof Error?u(d):j_(d)?u(Oa(2,{from:n,to:d})):(i&&r.enterCallbacks[o]===i&&typeof d=="function"&&i.push(d),s())},l=a(()=>e.call(r&&r.instances[o],n,t,c));let f=Promise.resolve(l);e.length<3&&(f=f.then(c)),f.catch(d=>u(d))})}function Uc(e,n,t,r,o=a=>a()){const a=[];for(const i of e)for(const s in i.components){let u=i.components[s];if(!(n!=="beforeRouteEnter"&&!i.instances[s]))if(my(u)){const l=(u.__vccOpts||u)[n];l&&a.push(ro(l,t,r,i,s,o))}else{let c=u();a.push(()=>c.then(l=>{if(!l)throw new Error(`Couldn't resolve component "${s}" at "${i.path}"`);const f=p_(l)?l.default:l;i.mods[s]=l,i.components[s]=f;const h=(f.__vccOpts||f)[n];return h&&ro(h,t,r,i,s,o)()}))}}return a}function Ap(e){const n=bt(Ku),t=bt(ad),r=Y(()=>{const u=st(e.to);return n.resolve(u)}),o=Y(()=>{const{matched:u}=r.value,{length:c}=u,l=u[c-1],f=t.matched;if(!l||!f.length)return-1;const d=f.findIndex(Na.bind(null,l));if(d>-1)return d;const h=Tp(u[c-2]);return c>1&&Tp(l)===h&&f[f.length-1].path!==h?f.findIndex(Na.bind(null,u[c-2])):d}),a=Y(()=>o.value>-1&&dC(t.params,r.value.params)),i=Y(()=>o.value>-1&&o.value===t.matched.length-1&&_y(t.params,r.value.params));function s(u={}){if(fC(u)){const c=n[st(e.replace)?"replace":"push"](st(e.to)).catch(pi);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Y(()=>r.value.href),isActive:a,isExactActive:i,navigate:s}}function uC(e){return e.length===1?e[0]:e}const cC=cn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ap,setup(e,{slots:n}){const t=Ft(Ap(e)),{options:r}=bt(Ku),o=Y(()=>({[Dp(e.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[Dp(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const a=n.default&&uC(n.default(t));return e.custom?a:_r("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:o.value},a)}}}),lC=cC;function fC(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function dC(e,n){for(const t in n){const r=n[t],o=e[t];if(typeof r=="string"){if(r!==o)return!1}else if(!Yn(o)||o.length!==r.length||r.some((a,i)=>a!==o[i]))return!1}return!0}function Tp(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Dp=(e,n,t)=>e??n??t,hC=cn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const r=bt(Hl),o=Y(()=>e.route||r.value),a=bt(Ip,0),i=Y(()=>{let c=st(a);const{matched:l}=o.value;let f;for(;(f=l[c])&&!f.components;)c++;return c}),s=Y(()=>o.value.matched[i.value]);Rn(Ip,Y(()=>i.value+1)),Rn(sC,s),Rn(Hl,o);const u=ve();return je(()=>[u.value,s.value,e.name],([c,l,f],[d,h,p])=>{l&&(l.instances[f]=c,h&&h!==l&&c&&c===d&&(l.leaveGuards.size||(l.leaveGuards=h.leaveGuards),l.updateGuards.size||(l.updateGuards=h.updateGuards))),c&&l&&(!h||!Na(l,h)||!d)&&(l.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=o.value,l=e.name,f=s.value,d=f&&f.components[l];if(!d)return Fp(t.default,{Component:d,route:c});const h=f.props[l],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,m=_r(d,et({},p,n,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(f.instances[l]=null)},ref:u}));return Fp(t.default,{Component:m,route:c})||m}}});function Fp(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const Iy=hC;function pC(e){const n=eC(e.routes,e),t=e.parseQuery||aC,r=e.stringifyQuery||Rp,o=e.history,a=Qa(),i=Qa(),s=Qa(),u=Je(Yr);let c=Yr;fa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Vc.bind(null,$=>""+$),f=Vc.bind(null,R_),d=Vc.bind(null,Ri);function h($,te){let ne,le;return Ey($)?(ne=n.getRecordMatcher($),le=te):le=$,n.addRoute(le,ne)}function p($){const te=n.getRecordMatcher($);te&&n.removeRoute(te)}function v(){return n.getRoutes().map($=>$.record)}function m($){return!!n.getRecordMatcher($)}function g($,te){if(te=et({},te||u.value),typeof $=="string"){const L=Wc(t,$,te.path),K=n.resolve({path:L.path},te),J=o.createHref(L.fullPath);return et(L,K,{params:d(K.params),hash:Ri(L.hash),redirectedFrom:void 0,href:J})}let ne;if($.path!=null)ne=et({},$,{path:Wc(t,$.path,te.path).path});else{const L=et({},$.params);for(const K in L)L[K]==null&&delete L[K];ne=et({},$,{params:f(L)}),te.params=f(te.params)}const le=n.resolve(ne,te),be=$.hash||"";le.params=l(d(le.params));const F=T_(r,et({},$,{hash:E_(be),path:le.path})),P=o.createHref(F);return et({fullPath:F,hash:be,query:r===Rp?iC($.query):$.query||{}},le,{redirectedFrom:void 0,href:P})}function y($){return typeof $=="string"?Wc(t,$,u.value.path):et({},$)}function x($,te){if(c!==$)return Oa(8,{from:te,to:$})}function b($){return S($)}function _($){return b(et(y($),{replace:!0}))}function w($){const te=$.matched[$.matched.length-1];if(te&&te.redirect){const{redirect:ne}=te;let le=typeof ne=="function"?ne($):ne;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=y(le):{path:le},le.params={}),et({query:$.query,hash:$.hash,params:le.path!=null?{}:$.params},le)}}function S($,te){const ne=c=g($),le=u.value,be=$.state,F=$.force,P=$.replace===!0,L=w(ne);if(L)return S(et(y(L),{state:typeof L=="object"?et({},be,L.state):be,force:F,replace:P}),te||ne);const K=ne;K.redirectedFrom=te;let J;return!F&&D_(r,le,ne)&&(J=Oa(16,{to:K,from:le}),ae(le,le,!0,!1)),(J?Promise.resolve(J):k(K,le)).catch(ee=>Fr(ee)?Fr(ee,2)?ee:Z(ee):W(ee,K,le)).then(ee=>{if(ee){if(Fr(ee,2))return S(et({replace:P},y(ee.to),{state:typeof ee.to=="object"?et({},be,ee.to.state):be,force:F}),te||K)}else ee=R(K,le,!0,P,be);return I(K,le,ee),ee})}function E($,te){const ne=x($,te);return ne?Promise.reject(ne):Promise.resolve()}function C($){const te=Te.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext($):$()}function k($,te){let ne;const[le,be,F]=vC($,te);ne=Uc(le.reverse(),"beforeRouteLeave",$,te);for(const L of le)L.leaveGuards.forEach(K=>{ne.push(ro(K,$,te))});const P=E.bind(null,$,te);return ne.push(P),de(ne).then(()=>{ne=[];for(const L of a.list())ne.push(ro(L,$,te));return ne.push(P),de(ne)}).then(()=>{ne=Uc(be,"beforeRouteUpdate",$,te);for(const L of be)L.updateGuards.forEach(K=>{ne.push(ro(K,$,te))});return ne.push(P),de(ne)}).then(()=>{ne=[];for(const L of F)if(L.beforeEnter)if(Yn(L.beforeEnter))for(const K of L.beforeEnter)ne.push(ro(K,$,te));else ne.push(ro(L.beforeEnter,$,te));return ne.push(P),de(ne)}).then(()=>($.matched.forEach(L=>L.enterCallbacks={}),ne=Uc(F,"beforeRouteEnter",$,te,C),ne.push(P),de(ne))).then(()=>{ne=[];for(const L of i.list())ne.push(ro(L,$,te));return ne.push(P),de(ne)}).catch(L=>Fr(L,8)?L:Promise.reject(L))}function I($,te,ne){s.list().forEach(le=>C(()=>le($,te,ne)))}function R($,te,ne,le,be){const F=x($,te);if(F)return F;const P=te===Yr,L=fa?history.state:{};ne&&(le||P?o.replace($.fullPath,et({scroll:P&&L&&L.scroll},be)):o.push($.fullPath,be)),u.value=$,ae($,te,ne,P),Z()}let T;function N(){T||(T=o.listen(($,te,ne)=>{if(!Re.listening)return;const le=g($),be=w(le);if(be){S(et(be,{replace:!0,force:!0}),le).catch(pi);return}c=le;const F=u.value;fa&&V_(yp(F.fullPath,ne.delta),qu()),k(le,F).catch(P=>Fr(P,12)?P:Fr(P,2)?(S(et(y(P.to),{force:!0}),le).then(L=>{Fr(L,20)&&!ne.delta&&ne.type===Ii.pop&&o.go(-1,!1)}).catch(pi),Promise.reject()):(ne.delta&&o.go(-ne.delta,!1),W(P,le,F))).then(P=>{P=P||R(le,F,!1),P&&(ne.delta&&!Fr(P,8)?o.go(-ne.delta,!1):ne.type===Ii.pop&&Fr(P,20)&&o.go(-1,!1)),I(le,F,P)}).catch(pi)}))}let B=Qa(),H=Qa(),z;function W($,te,ne){Z($);const le=H.list();return le.length?le.forEach(be=>be($,te,ne)):console.error($),Promise.reject($)}function j(){return z&&u.value!==Yr?Promise.resolve():new Promise(($,te)=>{B.add([$,te])})}function Z($){return z||(z=!$,N(),B.list().forEach(([te,ne])=>$?ne($):te()),B.reset()),$}function ae($,te,ne,le){const{scrollBehavior:be}=e;if(!fa||!be)return Promise.resolve();const F=!ne&&W_(yp($.fullPath,0))||(le||!ne)&&history.state&&history.state.scroll||null;return wr().then(()=>be($,te,F)).then(P=>P&&L_(P)).catch(P=>W(P,$,te))}const se=$=>o.go($);let pe;const Te=new Set,Re={currentRoute:u,listening:!0,addRoute:h,removeRoute:p,clearRoutes:n.clearRoutes,hasRoute:m,getRoutes:v,resolve:g,options:e,push:b,replace:_,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:a.add,beforeResolve:i.add,afterEach:s.add,onError:H.add,isReady:j,install($){const te=this;$.component("RouterLink",lC),$.component("RouterView",Iy),$.config.globalProperties.$router=te,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>st(u)}),fa&&!pe&&u.value===Yr&&(pe=!0,b(o.location).catch(be=>{}));const ne={};for(const be in Yr)Object.defineProperty(ne,be,{get:()=>u.value[be],enumerable:!0});$.provide(Ku,te),$.provide(ad,fg(ne)),$.provide(Hl,u);const le=$.unmount;Te.add($),$.unmount=function(){Te.delete($),Te.size<1&&(c=Yr,T&&T(),T=null,u.value=Yr,pe=!1,z=!1),le()}}};function de($){return $.reduce((te,ne)=>te.then(()=>C(ne)),Promise.resolve())}return Re}function vC(e,n){const t=[],r=[],o=[],a=Math.max(n.matched.length,e.matched.length);for(let i=0;i<a;i++){const s=n.matched[i];s&&(e.matched.find(c=>Na(c,s))?r.push(s):t.push(s));const u=e.matched[i];u&&(n.matched.find(c=>Na(c,u))||o.push(u))}return[t,r,o]}function Cr(){return bt(Ku)}function Ay(e){return bt(ad)}function Ae(e,n){return t=>Object.keys(e).reduce((r,o)=>{const i=typeof e[o]=="object"&&e[o]!=null&&!Array.isArray(e[o])?e[o]:{type:e[o]};return t&&o in t?r[o]={...i,default:t[o]}:r[o]=i,n&&!r[o].source&&(r[o].source=n),r},{})}const mt=Ae({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component"),lt=typeof window<"u",id=lt&&"IntersectionObserver"in window,mC=lt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function gC(e,n,t){const r=n.length-1;if(r<0)return e===void 0?t:e;for(let o=0;o<r;o++){if(e==null)return t;e=e[n[o]]}return e==null||e[n[r]]===void 0?t:e[n[r]]}function sd(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date&&e.getTime()!==n.getTime()||e!==Object(e)||n!==Object(n))return!1;const t=Object.keys(e);return t.length!==Object.keys(n).length?!1:t.every(r=>sd(e[r],n[r]))}function Pp(e,n,t){return e==null||!n||typeof n!="string"?t:e[n]!==void 0?e[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),gC(e,n.split("."),t))}function Ty(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(t,r)=>n+r)}function Ue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${n}`:void 0}function yC(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Np(e){let n;return e!==null&&typeof e=="object"&&((n=Object.getPrototypeOf(e))===Object.prototype||n===null)}function bC(e){if(e&&"$el"in e){const n=e.$el;return(n==null?void 0:n.nodeType)===Node.TEXT_NODE?n.nextElementSibling:n}return e}const Op=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function zc(e,n){return n.every(t=>e.hasOwnProperty(t))}function xC(e,n){const t={};for(const r of n)Object.hasOwn(e,r)&&(t[r]=e[r]);return t}const wC=/^on[^a-z]/,Dy=e=>wC.test(e);function _C(e){return e==null?[]:Array.isArray(e)?e:[e]}function Ma(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(t,e))}function Mp(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+t.repeat(Math.max(0,n-e.length))}function Bp(e,n){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,n-e.length))+e}function CC(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const t=[];let r=0;for(;r<e.length;)t.push(e.substr(r,n)),r+=n;return t}function Cn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;const r={};for(const o in e)r[o]=e[o];for(const o in n){const a=e[o],i=n[o];if(Np(a)&&Np(i)){r[o]=Cn(a,i,t);continue}if(t&&Array.isArray(a)&&Array.isArray(i)){r[o]=t(a,i);continue}r[o]=i}return r}function Fy(e){return e.map(n=>n.type===qe?Fy(n.children):n).flat()}function Bo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Bo.cache.has(e))return Bo.cache.get(e);const n=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Bo.cache.set(e,n),n}Bo.cache=new Map;function ma(e,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(t=>ma(e,t)).flat(1);if(n.suspense)return ma(e,n.ssContent);if(Array.isArray(n.children))return n.children.map(t=>ma(e,t)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(e))return[n.component];if(n.component.subTree)return ma(e,n.component.subTree).flat(1)}return[]}function ud(e){const n=Ft({}),t=Y(e);return zr(()=>{for(const r in t.value)n[r]=t.value[r]},{flush:"sync"}),qf(n)}function tu(e,n){return e.includes(n)}function Py(e){return e[2].toLowerCase()+e.slice(3)}function Lp(e,n){return n="on"+Wr(n),!!(e[n]||e[`${n}Once`]||e[`${n}Capture`]||e[`${n}OnceCapture`]||e[`${n}CaptureOnce`])}function EC(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(r=>`${r}${n?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(t)]}function SC(e,n){if(!(lt&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${n})`)))return null;try{return!!e&&e.matches(n)}catch{return null}}function kC(e,n){if(!lt||e===0)return n(),()=>{};const t=window.setTimeout(n,e);return()=>window.clearTimeout(t)}function $l(){const e=Je(),n=t=>{e.value=t};return Object.defineProperty(n,"value",{enumerable:!0,get:()=>e.value,set:t=>e.value=t}),Object.defineProperty(n,"el",{enumerable:!0,get:()=>bC(e.value)}),n}const Ny=["top","bottom"],RC=["start","end","left","right"];function jl(e,n){let[t,r]=e.split(" ");return r||(r=tu(Ny,t)?"start":tu(RC,t)?"top":"center"),{side:Vp(t,n),align:Vp(r,n)}}function Vp(e,n){return e==="start"?n?"right":"left":e==="end"?n?"left":"right":e}function Hc(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function $c(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function Wp(e){return{side:e.align,align:e.side}}function Up(e){return tu(Ny,e.side)?"y":"x"}let Lo=class{constructor(n){let{x:t,y:r,width:o,height:a}=n;this.x=t,this.y=r,this.width=o,this.height=a}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}};function zp(e,n){return{x:{before:Math.max(0,n.left-e.left),after:Math.max(0,e.right-n.right)},y:{before:Math.max(0,n.top-e.top),after:Math.max(0,e.bottom-n.bottom)}}}function Oy(e){return Array.isArray(e)?new Lo({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function My(e){const n=e.getBoundingClientRect(),t=getComputedStyle(e),r=t.transform;if(r){let o,a,i,s,u;if(r.startsWith("matrix3d("))o=r.slice(9,-1).split(/, /),a=+o[0],i=+o[5],s=+o[12],u=+o[13];else if(r.startsWith("matrix("))o=r.slice(7,-1).split(/, /),a=+o[0],i=+o[3],s=+o[4],u=+o[5];else return new Lo(n);const c=t.transformOrigin,l=n.x-s-(1-a)*parseFloat(c),f=n.y-u-(1-i)*parseFloat(c.slice(c.indexOf(" ")+1)),d=a?n.width/a:e.offsetWidth+1,h=i?n.height/i:e.offsetHeight+1;return new Lo({x:l,y:f,width:d,height:h})}else return new Lo(n)}function ii(e,n,t){if(typeof e.animate>"u")return{finished:Promise.resolve()};let r;try{r=e.animate(n,t)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(o=>{r.onfinish=()=>{o(r)}})),r}const Bs=new WeakMap;function IC(e,n){Object.keys(n).forEach(t=>{if(Dy(t)){const r=Py(t),o=Bs.get(e);if(n[t]==null)o==null||o.forEach(a=>{const[i,s]=a;i===r&&(e.removeEventListener(r,s),o.delete(a))});else if(!o||![...o].some(a=>a[0]===r&&a[1]===n[t])){e.addEventListener(r,n[t]);const a=o||new Set;a.add([r,n[t]]),Bs.has(e)||Bs.set(e,a)}}else n[t]==null?e.removeAttribute(t):e.setAttribute(t,n[t])})}function AC(e,n){Object.keys(n).forEach(t=>{if(Dy(t)){const r=Py(t),o=Bs.get(e);o==null||o.forEach(a=>{const[i,s]=a;i===r&&(e.removeEventListener(r,s),o.delete(a))})}else e.removeAttribute(t)})}const oa=2.4,Hp=.2126729,$p=.7151522,jp=.072175,TC=.55,DC=.58,FC=.57,PC=.62,vs=.03,Gp=1.45,NC=5e-4,OC=1.25,MC=1.25,BC=.078,qp=12.82051282051282,ms=.06,LC=.001;function Kp(e,n){const t=(e.r/255)**oa,r=(e.g/255)**oa,o=(e.b/255)**oa,a=(n.r/255)**oa,i=(n.g/255)**oa,s=(n.b/255)**oa;let u=t*Hp+r*$p+o*jp,c=a*Hp+i*$p+s*jp;if(u<=vs&&(u+=(vs-u)**Gp),c<=vs&&(c+=(vs-c)**Gp),Math.abs(c-u)<NC)return 0;let l;if(c>u){const f=(c**TC-u**DC)*OC;l=f<LC?0:f<BC?f-f*qp*ms:f-ms}else{const f=(c**PC-u**FC)*MC;l=f>-.001?0:f>-.078?f-f*qp*ms:f+ms}return l*100}const nu=.20689655172413793,VC=e=>e>nu**3?Math.cbrt(e):e/(3*nu**2)+4/29,WC=e=>e>nu?e**3:3*nu**2*(e-4/29);function By(e){const n=VC,t=n(e[1]);return[116*t-16,500*(n(e[0]/.95047)-t),200*(t-n(e[2]/1.08883))]}function Ly(e){const n=WC,t=(e[0]+16)/116;return[n(t+e[1]/500)*.95047,n(t),n(t-e[2]/200)*1.08883]}const UC=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],zC=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,HC=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],$C=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function Vy(e){const n=Array(3),t=zC,r=UC;for(let o=0;o<3;++o)n[o]=Math.round(Ma(t(r[o][0]*e[0]+r[o][1]*e[1]+r[o][2]*e[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function cd(e){let{r:n,g:t,b:r}=e;const o=[0,0,0],a=$C,i=HC;n=a(n/255),t=a(t/255),r=a(r/255);for(let s=0;s<3;++s)o[s]=i[s][0]*n+i[s][1]*t+i[s][2]*r;return o}function Gl(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function jC(e){return Gl(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const Xp=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,GC={rgb:(e,n,t,r)=>({r:e,g:n,b:t,a:r}),rgba:(e,n,t,r)=>({r:e,g:n,b:t,a:r}),hsl:(e,n,t,r)=>Yp({h:e,s:n,l:t,a:r}),hsla:(e,n,t,r)=>Yp({h:e,s:n,l:t,a:r}),hsv:(e,n,t,r)=>Ai({h:e,s:n,v:t,a:r}),hsva:(e,n,t,r)=>Ai({h:e,s:n,v:t,a:r})};function hr(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&Xp.test(e)){const{groups:n}=e.match(Xp),{fn:t,values:r}=n,o=r.split(/,\s*/).map(a=>a.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(t)?parseFloat(a)/100:parseFloat(a));return GC[t](...o)}else if(typeof e=="string"){let n=e.startsWith("#")?e.slice(1):e;return[3,4].includes(n.length)?n=n.split("").map(t=>t+t).join(""):[6,8].includes(n.length),KC(n)}else if(typeof e=="object"){if(zc(e,["r","g","b"]))return e;if(zc(e,["h","s","l"]))return Ai(Wy(e));if(zc(e,["h","s","v"]))return Ai(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Ai(e){const{h:n,s:t,v:r,a:o}=e,a=s=>{const u=(s+n/60)%6;return r-r*t*Math.max(Math.min(u,4-u,1),0)},i=[a(5),a(3),a(1)].map(s=>Math.round(s*255));return{r:i[0],g:i[1],b:i[2],a:o}}function Yp(e){return Ai(Wy(e))}function Wy(e){const{h:n,s:t,l:r,a:o}=e,a=r+t*Math.min(r,1-r),i=a===0?0:2-2*r/a;return{h:n,s:i,v:a,a:o}}function gs(e){const n=Math.round(e).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function qC(e){let{r:n,g:t,b:r,a:o}=e;return`#${[gs(n),gs(t),gs(r),o!==void 0?gs(Math.round(o*255)):""].join("")}`}function KC(e){e=XC(e);let[n,t,r,o]=CC(e,2).map(a=>parseInt(a,16));return o=o===void 0?o:o/255,{r:n,g:t,b:r,a:o}}function XC(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(n=>n+n).join("")),e.length!==6&&(e=Mp(Mp(e,6),8,"F")),e}function YC(e,n){const t=By(cd(e));return t[0]=t[0]+n*10,Vy(Ly(t))}function JC(e,n){const t=By(cd(e));return t[0]=t[0]-n*10,Vy(Ly(t))}function QC(e){const n=hr(e);return cd(n)[1]}function Uy(e){const n=Math.abs(Kp(hr(0),hr(e)));return Math.abs(Kp(hr(16777215),hr(e)))>Math.min(n,50)?"#fff":"#000"}function Mt(e,n){const t=nd();if(!t)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return t}function go(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=Mt(e).type;return Bo((n==null?void 0:n.aliasName)||(n==null?void 0:n.name))}let zy=0,Ls=new WeakMap;function Xu(){const e=Mt("getUid");if(Ls.has(e))return Ls.get(e);{const n=zy++;return Ls.set(e,n),n}}Xu.reset=()=>{zy=0,Ls=new WeakMap};function ZC(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mt("injectSelf");const{provides:t}=n;if(t&&e in t)return t[e]}const Ba=Symbol.for("vuetify:defaults");function eE(e){return ve(e)}function ld(){const e=bt(Ba);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function Yu(e,n){const t=ld(),r=ve(e),o=Y(()=>{if(st(n==null?void 0:n.disabled))return t.value;const i=st(n==null?void 0:n.scoped),s=st(n==null?void 0:n.reset),u=st(n==null?void 0:n.root);if(r.value==null&&!(i||s||u))return t.value;let c=Cn(r.value,{prev:t.value});if(i)return c;if(s||u){const l=Number(s||1/0);for(let f=0;f<=l&&!(!c||!("prev"in c));f++)c=c.prev;return c&&typeof u=="string"&&u in c&&(c=Cn(Cn(c,{prev:c}),c[u])),c}return c.prev?Cn(c.prev,c):c});return Rn(Ba,o),o}function tE(e,n){var t,r;return typeof((t=e.props)==null?void 0:t[n])<"u"||typeof((r=e.props)==null?void 0:r[Bo(n)])<"u"}function nE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ld();const r=Mt("useDefaults");if(n=n??r.type.name??r.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const o=Y(()=>{var u;return(u=t.value)==null?void 0:u[e._as??n]}),a=new Proxy(e,{get(u,c){var f,d,h,p,v,m,g;const l=Reflect.get(u,c);return c==="class"||c==="style"?[(f=o.value)==null?void 0:f[c],l].filter(y=>y!=null):typeof c=="string"&&!tE(r.vnode,c)?((d=o.value)==null?void 0:d[c])!==void 0?(h=o.value)==null?void 0:h[c]:((v=(p=t.value)==null?void 0:p.global)==null?void 0:v[c])!==void 0?(g=(m=t.value)==null?void 0:m.global)==null?void 0:g[c]:l:l}}),i=Je();zr(()=>{if(o.value){const u=Object.entries(o.value).filter(c=>{let[l]=c;return l.startsWith(l[0].toUpperCase())});i.value=u.length?Object.fromEntries(u):void 0}else i.value=void 0});function s(){const u=ZC(Ba,r);Rn(Ba,Y(()=>i.value?Cn((u==null?void 0:u.value)??{},i.value):u==null?void 0:u.value))}return{props:a,provideSubDefaults:s}}function Gi(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Ae(e.props??{},e.name)();const n=Object.keys(e.props).filter(t=>t!=="class"&&t!=="style");e.filterProps=function(r){return xC(r,n)},e.props._as=String,e.setup=function(r,o){const a=ld();if(!a.value)return e._setup(r,o);const{props:i,provideSubDefaults:s}=nE(r,r._as??e.name,a),u=e._setup(i,o);return s(),u}}return e}function Ze(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(e?Gi:cn)(n)}function rE(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",t=arguments.length>2?arguments[2]:void 0;return Ze()({name:t??Wr(vn(e.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...mt()},setup(r,o){let{slots:a}=o;return()=>{var i;return _r(r.tag,{class:[e,r.class],style:r.style},(i=a.default)==null?void 0:i.call(a))}}})}function Hy(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const n=e.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const ql="cubic-bezier(0.4, 0, 0.2, 1)",oE="cubic-bezier(0.0, 0, 0.2, 1)",aE="cubic-bezier(0.4, 0, 1, 1)";function iE(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(n?sE(e):fd(e))return e;e=e.parentElement}return document.scrollingElement}function ru(e,n){const t=[];if(n&&e&&!n.contains(e))return t;for(;e&&(fd(e)&&t.push(e),e!==n);)e=e.parentElement;return t}function fd(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return n.overflowY==="scroll"||n.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function sE(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["scroll","auto"].includes(n.overflowY)}function uE(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function gt(e){const n=Mt("useRender");n.render=e}function $y(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const t=$l(),r=ve();if(lt){const o=new ResizeObserver(a=>{a.length&&(n==="content"?r.value=a[0].contentRect:r.value=a[0].target.getBoundingClientRect())});Dn(()=>{o.disconnect()}),je(()=>t.el,(a,i)=>{i&&(o.unobserve(i),r.value=void 0),a&&o.observe(a)},{flush:"post"})}return{resizeRef:t,contentRect:zi(r)}}const ou=Symbol.for("vuetify:layout"),jy=Symbol.for("vuetify:layout-item"),Jp=1e3,cE=Ae({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),lE=Ae({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function fE(){const e=bt(ou);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function dE(e){const n=bt(ou);if(!n)throw new Error("[Vuetify] Could not find injected layout");const t=e.id??`layout-item-${Xu()}`,r=Mt("useLayoutItem");Rn(jy,{id:t});const o=Je(!1);Fg(()=>o.value=!0),Dg(()=>o.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:i}=n.register(r,{...e,active:Y(()=>o.value?!1:e.active.value),id:t});return Dn(()=>n.unregister(t)),{layoutItemStyles:a,layoutRect:n.layoutRect,layoutItemScrimStyles:i}}const hE=(e,n,t,r)=>{let o={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...o}}];for(const i of e){const s=n.get(i),u=t.get(i),c=r.get(i);if(!s||!u||!c)continue;const l={...o,[s.value]:parseInt(o[s.value],10)+(c.value?parseInt(u.value,10):0)};a.push({id:i,layer:l}),o=l}return a};function pE(e){const n=bt(ou,null),t=Y(()=>n?n.rootZIndex.value-100:Jp),r=ve([]),o=Ft(new Map),a=Ft(new Map),i=Ft(new Map),s=Ft(new Map),u=Ft(new Map),{resizeRef:c,contentRect:l}=$y(),f=Y(()=>{const w=new Map,S=e.overlaps??[];for(const E of S.filter(C=>C.includes(":"))){const[C,k]=E.split(":");if(!r.value.includes(C)||!r.value.includes(k))continue;const I=o.get(C),R=o.get(k),T=a.get(C),N=a.get(k);!I||!R||!T||!N||(w.set(k,{position:I.value,amount:parseInt(T.value,10)}),w.set(C,{position:R.value,amount:-parseInt(N.value,10)}))}return w}),d=Y(()=>{const w=[...new Set([...i.values()].map(E=>E.value))].sort((E,C)=>E-C),S=[];for(const E of w){const C=r.value.filter(k=>{var I;return((I=i.get(k))==null?void 0:I.value)===E});S.push(...C)}return hE(S,o,a,s)}),h=Y(()=>!Array.from(u.values()).some(w=>w.value)),p=Y(()=>d.value[d.value.length-1].layer),v=Y(()=>({"--v-layout-left":Ue(p.value.left),"--v-layout-right":Ue(p.value.right),"--v-layout-top":Ue(p.value.top),"--v-layout-bottom":Ue(p.value.bottom),...h.value?void 0:{transition:"none"}})),m=Y(()=>d.value.slice(1).map((w,S)=>{let{id:E}=w;const{layer:C}=d.value[S],k=a.get(E),I=o.get(E);return{id:E,...C,size:Number(k.value),position:I.value}})),g=w=>m.value.find(S=>S.id===w),y=Mt("createLayout"),x=Je(!1);jt(()=>{x.value=!0}),Rn(ou,{register:(w,S)=>{let{id:E,order:C,position:k,layoutSize:I,elementSize:R,active:T,disableTransitions:N,absolute:B}=S;i.set(E,C),o.set(E,k),a.set(E,I),s.set(E,T),N&&u.set(E,N);const z=ma(jy,y==null?void 0:y.vnode).indexOf(w);z>-1?r.value.splice(z,0,E):r.value.push(E);const W=Y(()=>m.value.findIndex(se=>se.id===E)),j=Y(()=>t.value+d.value.length*2-W.value*2),Z=Y(()=>{const se=k.value==="left"||k.value==="right",pe=k.value==="right",Te=k.value==="bottom",Re=R.value??I.value,de=Re===0?"%":"px",$={[k.value]:0,zIndex:j.value,transform:`translate${se?"X":"Y"}(${(T.value?0:-(Re===0?100:Re))*(pe||Te?-1:1)}${de})`,position:B.value||t.value!==Jp?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!x.value)return $;const te=m.value[W.value];if(!te)throw new Error(`[Vuetify] Could not find layout item "${E}"`);const ne=f.value.get(E);return ne&&(te[ne.position]+=ne.amount),{...$,height:se?`calc(100% - ${te.top}px - ${te.bottom}px)`:R.value?`${R.value}px`:void 0,left:pe?void 0:`${te.left}px`,right:pe?`${te.right}px`:void 0,top:k.value!=="bottom"?`${te.top}px`:void 0,bottom:k.value!=="top"?`${te.bottom}px`:void 0,width:se?R.value?`${R.value}px`:void 0:`calc(100% - ${te.left}px - ${te.right}px)`}}),ae=Y(()=>({zIndex:j.value-1}));return{layoutItemStyles:Z,layoutItemScrimStyles:ae,zIndex:j}},unregister:w=>{i.delete(w),o.delete(w),a.delete(w),s.delete(w),u.delete(w),r.value=r.value.filter(S=>S!==w)},mainRect:p,mainStyles:v,getLayoutItem:g,items:m,layoutRect:l,rootZIndex:t});const b=Y(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),_=Y(()=>({zIndex:n?t.value:void 0,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:b,layoutStyles:_,getLayoutItem:g,items:m,layoutRect:l,layoutRef:c}}function qi(e,n){let t;function r(){t=Vf(),t.run(()=>n.length?n(()=>{t==null||t.stop(),r()}):n())}je(e,o=>{o&&!t?r():o||(t==null||t.stop(),t=void 0)},{immediate:!0}),Jn(()=>{t==null||t.stop()})}function Ko(e,n,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const a=Mt("useProxiedModel"),i=ve(e[n]!==void 0?e[n]:t),s=Bo(n),c=Y(s!==n?()=>{var f,d,h,p;return e[n],!!(((f=a.vnode.props)!=null&&f.hasOwnProperty(n)||(d=a.vnode.props)!=null&&d.hasOwnProperty(s))&&((h=a.vnode.props)!=null&&h.hasOwnProperty(`onUpdate:${n}`)||(p=a.vnode.props)!=null&&p.hasOwnProperty(`onUpdate:${s}`)))}:()=>{var f,d;return e[n],!!((f=a.vnode.props)!=null&&f.hasOwnProperty(n)&&((d=a.vnode.props)!=null&&d.hasOwnProperty(`onUpdate:${n}`)))});qi(()=>!c.value,()=>{je(()=>e[n],f=>{i.value=f})});const l=Y({get(){const f=e[n];return r(c.value?f:i.value)},set(f){const d=o(f),h=Ge(c.value?e[n]:i.value);h===d||r(h)===f||(i.value=d,a==null||a.emit(`update:${n}`,d))}});return Object.defineProperty(l,"externalValue",{get:()=>c.value?e[n]:i.value}),l}const vE={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},Qp="$vuetify.",Zp=(e,n)=>e.replace(/\{(\d+)\}/g,(t,r)=>String(n[+r])),Gy=(e,n,t)=>function(r){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];if(!r.startsWith(Qp))return Zp(r,a);const s=r.replace(Qp,""),u=e.value&&t.value[e.value],c=n.value&&t.value[n.value];let l=Pp(u,s,null);return l||(`${r}${e.value}`,l=Pp(c,s,null)),l||(l=r),typeof l!="string"&&(l=r),Zp(l,a)};function qy(e,n){return(t,r)=>new Intl.NumberFormat([e.value,n.value],r).format(t)}function jc(e,n,t){const r=Ko(e,n,e[n]??t.value);return r.value=e[n]??t.value,je(t,o=>{e[n]==null&&(r.value=t.value)}),r}function Ky(e){return n=>{const t=jc(n,"locale",e.current),r=jc(n,"fallback",e.fallback),o=jc(n,"messages",e.messages);return{name:"vuetify",current:t,fallback:r,messages:o,t:Gy(t,r,o),n:qy(t,r),provide:Ky({current:t,fallback:r,messages:o})}}}function mE(e){const n=Je((e==null?void 0:e.locale)??"en"),t=Je((e==null?void 0:e.fallback)??"en"),r=ve({en:vE,...e==null?void 0:e.messages});return{name:"vuetify",current:n,fallback:t,messages:r,t:Gy(n,t,r),n:qy(n,t),provide:Ky({current:n,fallback:t,messages:r})}}const Kl=Symbol.for("vuetify:locale");function gE(e){return e.name!=null}function yE(e){const n=e!=null&&e.adapter&&gE(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:mE(e),t=xE(n,e);return{...n,...t}}function bE(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function xE(e,n){const t=ve((n==null?void 0:n.rtl)??bE()),r=Y(()=>t.value[e.current.value]??!1);return{isRtl:r,rtl:t,rtlClasses:Y(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function za(){const e=bt(Kl);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}const au=Symbol.for("vuetify:theme"),Er=Ae({theme:String},"theme");function ev(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function wE(){var r,o;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ev();const n=ev();if(!e)return{...n,isDisabled:!0};const t={};for(const[a,i]of Object.entries(e.themes??{})){const s=i.dark||a==="dark"?(r=n.themes)==null?void 0:r.dark:(o=n.themes)==null?void 0:o.light;t[a]=Cn(s,i)}return Cn(n,{...e,themes:t})}function _E(e){const n=wE(e),t=ve(n.defaultTheme),r=ve(n.themes),o=Y(()=>{const l={};for(const[f,d]of Object.entries(r.value)){const h=l[f]={...d,colors:{...d.colors}};if(n.variations)for(const p of n.variations.colors){const v=h.colors[p];if(v)for(const m of["lighten","darken"]){const g=m==="lighten"?YC:JC;for(const y of Ty(n.variations[m],1))h.colors[`${p}-${m}-${y}`]=qC(g(hr(v),y))}}for(const p of Object.keys(h.colors)){if(/^on-[a-z]/.test(p)||h.colors[`on-${p}`])continue;const v=`on-${p}`,m=hr(h.colors[p]);h.colors[v]=Uy(m)}}return l}),a=Y(()=>o.value[t.value]),i=Y(()=>{var p;const l=[];(p=a.value)!=null&&p.dark&&Eo(l,":root",["color-scheme: dark"]),Eo(l,":root",tv(a.value));for(const[v,m]of Object.entries(o.value))Eo(l,`.v-theme--${v}`,[`color-scheme: ${m.dark?"dark":"normal"}`,...tv(m)]);const f=[],d=[],h=new Set(Object.values(o.value).flatMap(v=>Object.keys(v.colors)));for(const v of h)/^on-[a-z]/.test(v)?Eo(d,`.${v}`,[`color: rgb(var(--v-theme-${v})) !important`]):(Eo(f,`.bg-${v}`,[`--v-theme-overlay-multiplier: var(--v-theme-${v}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${v})) !important`,`color: rgb(var(--v-theme-on-${v})) !important`]),Eo(d,`.text-${v}`,[`color: rgb(var(--v-theme-${v})) !important`]),Eo(d,`.border-${v}`,[`--v-border-color: var(--v-theme-${v})`]));return l.push(...f,...d),l.map((v,m)=>m===0?v:`    ${v}`).join("")});function s(){return{style:[{children:i.value,id:"vuetify-theme-stylesheet",nonce:n.cspNonce||!1}]}}function u(l){if(n.isDisabled)return;const f=l._context.provides.usehead;if(f)if(f.push){const h=f.push(s);lt&&je(i,()=>{h.patch(s)})}else lt?(f.addHeadObjs(Y(s)),zr(()=>f.updateDOM())):f.addHeadObjs(s());else{let p=function(){if(typeof document<"u"&&!h){const v=document.createElement("style");v.type="text/css",v.id="vuetify-theme-stylesheet",n.cspNonce&&v.setAttribute("nonce",n.cspNonce),h=v,document.head.appendChild(h)}h&&(h.innerHTML=i.value)};var d=p;let h=lt?document.getElementById("vuetify-theme-stylesheet"):null;lt?je(i,p,{immediate:!0}):p()}}const c=Y(()=>n.isDisabled?void 0:`v-theme--${t.value}`);return{install:u,isDisabled:n.isDisabled,name:t,themes:r,current:a,computedThemes:o,themeClasses:c,styles:i,global:{name:t,current:a}}}function Sr(e){Mt("provideTheme");const n=bt(au,null);if(!n)throw new Error("Could not find Vuetify theme injection");const t=Y(()=>e.theme??n.name.value),r=Y(()=>n.themes.value[t.value]),o=Y(()=>n.isDisabled?void 0:`v-theme--${t.value}`),a={...n,name:t,current:r,themeClasses:o};return Rn(au,a),a}function Eo(e,n,t){e.push(`${n} {
`,...t.map(r=>`  ${r};
`),`}
`)}function tv(e){const n=e.dark?2:1,t=e.dark?1:2,r=[];for(const[o,a]of Object.entries(e.colors)){const i=hr(a);r.push(`--v-theme-${o}: ${i.r},${i.g},${i.b}`),o.startsWith("on-")||r.push(`--v-theme-${o}-overlay-multiplier: ${QC(a)>.18?n:t}`)}for(const[o,a]of Object.entries(e.variables)){const i=typeof a=="string"&&a.startsWith("#")?hr(a):void 0,s=i?`${i.r}, ${i.g}, ${i.b}`:void 0;r.push(`--v-${o}: ${s??a}`)}return r}const CE=Ae({...mt(),...cE({fullHeight:!0}),...Er()},"VApp"),EE=Ze()({name:"VApp",props:CE(),setup(e,n){let{slots:t}=n;const r=Sr(e),{layoutClasses:o,getLayoutItem:a,items:i,layoutRef:s}=pE(e),{rtlClasses:u}=za();return gt(()=>{var c;return V("div",{ref:s,class:["v-application",r.themeClasses.value,o.value,u.value,e.class],style:[e.style]},[V("div",{class:"v-application__wrap"},[(c=t.default)==null?void 0:c.call(t)])])}),{getLayoutItem:a,items:i,theme:r}}}),Ha=Ae({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function $a(e){return{dimensionStyles:Y(()=>{const t={},r=Ue(e.height),o=Ue(e.maxHeight),a=Ue(e.maxWidth),i=Ue(e.minHeight),s=Ue(e.minWidth),u=Ue(e.width);return r!=null&&(t.height=r),o!=null&&(t.maxHeight=o),a!=null&&(t.maxWidth=a),i!=null&&(t.minHeight=i),s!=null&&(t.minWidth=s),u!=null&&(t.width=u),t})}}function Xy(){const e=Je(!1);return jt(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Y(()=>e.value?void 0:{transition:"none !important"}),isBooted:zi(e)}}const ln=Ae({tag:{type:String,default:"div"}},"tag"),SE=Ae({scrollable:Boolean,...mt(),...Ha(),...ln({tag:"main"})},"VMain"),kE=Ze()({name:"VMain",props:SE(),setup(e,n){let{slots:t}=n;const{dimensionStyles:r}=$a(e),{mainStyles:o}=fE(),{ssrBootStyles:a}=Xy();return gt(()=>V(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,a.value,r.value,e.style]},{default:()=>{var i,s;return[e.scrollable?V("div",{class:"v-main__scroller"},[(i=t.default)==null?void 0:i.call(t)]):(s=t.default)==null?void 0:s.call(t)]}})),{}}}),RE=cn({__name:"App",setup(e){return(n,t)=>(xe(),Tn(EE,null,{default:Ne(()=>[V(kE,null,{default:Ne(()=>[V(st(Iy))]),_:1})]),_:1}))}}),Ju={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function IE(e,n,t){const r=[];let o=[];const a=Yy(e),i=Jy(e),s=t??Ju[n.slice(-2).toUpperCase()]??0,u=(a.getDay()-s+7)%7,c=(i.getDay()-s+7)%7;for(let l=0;l<u;l++){const f=new Date(a);f.setDate(f.getDate()-(u-l)),o.push(f)}for(let l=1;l<=i.getDate();l++){const f=new Date(e.getFullYear(),e.getMonth(),l);o.push(f),o.length===7&&(r.push(o),o=[])}for(let l=1;l<7-c;l++){const f=new Date(i);f.setDate(f.getDate()+l),o.push(f)}return o.length>0&&r.push(o),r}function AE(e,n,t){const r=t??Ju[n.slice(-2).toUpperCase()]??0,o=new Date(e);for(;o.getDay()!==r;)o.setDate(o.getDate()-1);return o}function TE(e,n){const t=new Date(e),r=((Ju[n.slice(-2).toUpperCase()]??0)+6)%7;for(;t.getDay()!==r;)t.setDate(t.getDate()+1);return t}function Yy(e){return new Date(e.getFullYear(),e.getMonth(),1)}function Jy(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function DE(e){const n=e.split("-").map(Number);return new Date(n[0],n[1]-1,n[2])}const FE=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function Qy(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let n;if(FE.test(e))return DE(e);if(n=Date.parse(e),!isNaN(n))return new Date(n)}return null}const nv=new Date(2e3,0,2);function PE(e,n){const t=n??Ju[e.slice(-2).toUpperCase()]??0;return Ty(7).map(r=>{const o=new Date(nv);return o.setDate(nv.getDate()+t+r),new Intl.DateTimeFormat(e,{weekday:"narrow"}).format(o)})}function NE(e,n,t,r){const o=Qy(e)??new Date,a=r==null?void 0:r[n];if(typeof a=="function")return a(o,n,t);let i={};switch(n){case"fullDate":i={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":i={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const s=o.getDate(),u=new Intl.DateTimeFormat(t,{month:"long"}).format(o);return`${s} ${u}`;case"normalDateWithWeekday":i={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":i={month:"short",day:"numeric"};break;case"year":i={year:"numeric"};break;case"month":i={month:"long"};break;case"monthShort":i={month:"short"};break;case"monthAndYear":i={month:"long",year:"numeric"};break;case"monthAndDate":i={month:"long",day:"numeric"};break;case"weekday":i={weekday:"long"};break;case"weekdayShort":i={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(t).format(o.getDate());case"hours12h":i={hour:"numeric",hour12:!0};break;case"hours24h":i={hour:"numeric",hour12:!1};break;case"minutes":i={minute:"numeric"};break;case"seconds":i={second:"numeric"};break;case"fullTime":i={hour:"numeric",minute:"numeric"};break;case"fullTime12h":i={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":i={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":i={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":i={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":i={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":i={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return i={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(t,i).format(o).replace(/, /g," ");case"keyboardDateTime12h":return i={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(t,i).format(o).replace(/, /g," ");case"keyboardDateTime24h":return i={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(t,i).format(o).replace(/, /g," ");default:i=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(t,i).format(o)}function OE(e,n){const t=e.toJsDate(n),r=t.getFullYear(),o=Bp(String(t.getMonth()+1),2,"0"),a=Bp(String(t.getDate()),2,"0");return`${r}-${o}-${a}`}function ME(e){const[n,t,r]=e.split("-").map(Number);return new Date(n,t-1,r)}function BE(e,n){const t=new Date(e);return t.setMinutes(t.getMinutes()+n),t}function LE(e,n){const t=new Date(e);return t.setHours(t.getHours()+n),t}function VE(e,n){const t=new Date(e);return t.setDate(t.getDate()+n),t}function WE(e,n){const t=new Date(e);return t.setDate(t.getDate()+n*7),t}function UE(e,n){const t=new Date(e);return t.setDate(1),t.setMonth(t.getMonth()+n),t}function zE(e){return e.getFullYear()}function HE(e){return e.getMonth()}function $E(e){return e.getDate()}function jE(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function GE(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function qE(e){return e.getHours()}function KE(e){return e.getMinutes()}function XE(e){return new Date(e.getFullYear(),0,1)}function YE(e){return new Date(e.getFullYear(),11,31)}function JE(e,n){return iu(e,n[0])&&eS(e,n[1])}function QE(e){const n=new Date(e);return n instanceof Date&&!isNaN(n.getTime())}function iu(e,n){return e.getTime()>n.getTime()}function ZE(e,n){return iu(Xl(e),Xl(n))}function eS(e,n){return e.getTime()<n.getTime()}function rv(e,n){return e.getTime()===n.getTime()}function tS(e,n){return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function nS(e,n){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function rS(e,n){return e.getFullYear()===n.getFullYear()}function oS(e,n,t){const r=new Date(e),o=new Date(n);switch(t){case"years":return r.getFullYear()-o.getFullYear();case"quarters":return Math.floor((r.getMonth()-o.getMonth()+(r.getFullYear()-o.getFullYear())*12)/4);case"months":return r.getMonth()-o.getMonth()+(r.getFullYear()-o.getFullYear())*12;case"weeks":return Math.floor((r.getTime()-o.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((r.getTime()-o.getTime())/(1e3*60*60*24));case"hours":return Math.floor((r.getTime()-o.getTime())/(1e3*60*60));case"minutes":return Math.floor((r.getTime()-o.getTime())/(1e3*60));case"seconds":return Math.floor((r.getTime()-o.getTime())/1e3);default:return r.getTime()-o.getTime()}}function aS(e,n){const t=new Date(e);return t.setHours(n),t}function iS(e,n){const t=new Date(e);return t.setMinutes(n),t}function sS(e,n){const t=new Date(e);return t.setMonth(n),t}function uS(e,n){const t=new Date(e);return t.setDate(n),t}function cS(e,n){const t=new Date(e);return t.setFullYear(n),t}function Xl(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function lS(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class fS{constructor(n){this.locale=n.locale,this.formats=n.formats}date(n){return Qy(n)}toJsDate(n){return n}toISO(n){return OE(this,n)}parseISO(n){return ME(n)}addMinutes(n,t){return BE(n,t)}addHours(n,t){return LE(n,t)}addDays(n,t){return VE(n,t)}addWeeks(n,t){return WE(n,t)}addMonths(n,t){return UE(n,t)}getWeekArray(n,t){return IE(n,this.locale,t?Number(t):void 0)}startOfWeek(n,t){return AE(n,this.locale,t?Number(t):void 0)}endOfWeek(n){return TE(n,this.locale)}startOfMonth(n){return Yy(n)}endOfMonth(n){return Jy(n)}format(n,t){return NE(n,t,this.locale,this.formats)}isEqual(n,t){return rv(n,t)}isValid(n){return QE(n)}isWithinRange(n,t){return JE(n,t)}isAfter(n,t){return iu(n,t)}isAfterDay(n,t){return ZE(n,t)}isBefore(n,t){return!iu(n,t)&&!rv(n,t)}isSameDay(n,t){return tS(n,t)}isSameMonth(n,t){return nS(n,t)}isSameYear(n,t){return rS(n,t)}setMinutes(n,t){return iS(n,t)}setHours(n,t){return aS(n,t)}setMonth(n,t){return sS(n,t)}setDate(n,t){return uS(n,t)}setYear(n,t){return cS(n,t)}getDiff(n,t,r){return oS(n,t,r)}getWeekdays(n){return PE(this.locale,n?Number(n):void 0)}getYear(n){return zE(n)}getMonth(n){return HE(n)}getDate(n){return $E(n)}getNextMonth(n){return jE(n)}getPreviousMonth(n){return GE(n)}getHours(n){return qE(n)}getMinutes(n){return KE(n)}startOfDay(n){return Xl(n)}endOfDay(n){return lS(n)}startOfYear(n){return XE(n)}endOfYear(n){return YE(n)}}const dS=Symbol.for("vuetify:date-options"),ov=Symbol.for("vuetify:date-adapter");function hS(e,n){const t=Cn({adapter:fS,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:t,instance:pS(t,n)}}function pS(e,n){const t=Ft(typeof e.adapter=="function"?new e.adapter({locale:e.locale[n.current.value]??n.current.value,formats:e.formats}):e.adapter);return je(n.current,r=>{t.locale=e.locale[r]??r??t.locale}),t}const Qu=["sm","md","lg","xl","xxl"],Yl=Symbol.for("vuetify:display"),av={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},vS=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:av;return Cn(av,e)};function iv(e){return lt&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function sv(e){return lt&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function uv(e){const n=lt&&!e?window.navigator.userAgent:"ssr";function t(p){return!!n.match(p)}const r=t(/android/i),o=t(/iphone|ipad|ipod/i),a=t(/cordova/i),i=t(/electron/i),s=t(/chrome/i),u=t(/edge/i),c=t(/firefox/i),l=t(/opera/i),f=t(/win/i),d=t(/mac/i),h=t(/linux/i);return{android:r,ios:o,cordova:a,electron:i,chrome:s,edge:u,firefox:c,opera:l,win:f,mac:d,linux:h,touch:mC,ssr:n==="ssr"}}function mS(e,n){const{thresholds:t,mobileBreakpoint:r}=vS(e),o=Je(sv(n)),a=Je(uv(n)),i=Ft({}),s=Je(iv(n));function u(){o.value=sv(),s.value=iv()}function c(){u(),a.value=uv()}return zr(()=>{const l=s.value<t.sm,f=s.value<t.md&&!l,d=s.value<t.lg&&!(f||l),h=s.value<t.xl&&!(d||f||l),p=s.value<t.xxl&&!(h||d||f||l),v=s.value>=t.xxl,m=l?"xs":f?"sm":d?"md":h?"lg":p?"xl":"xxl",g=typeof r=="number"?r:t[r],y=s.value<g;i.xs=l,i.sm=f,i.md=d,i.lg=h,i.xl=p,i.xxl=v,i.smAndUp=!l,i.mdAndUp=!(l||f),i.lgAndUp=!(l||f||d),i.xlAndUp=!(l||f||d||h),i.smAndDown=!(d||h||p||v),i.mdAndDown=!(h||p||v),i.lgAndDown=!(p||v),i.xlAndDown=!v,i.name=m,i.height=o.value,i.width=s.value,i.mobile=y,i.mobileBreakpoint=r,i.platform=a.value,i.thresholds=t}),lt&&window.addEventListener("resize",u,{passive:!0}),{...qf(i),update:c,ssr:!!n}}function gS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();const t=bt(Yl);if(!t)throw new Error("Could not find Vuetify display injection");const r=Y(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?t.width.value<e.mobileBreakpoint:e.mobileBreakpoint?t.width.value<t.thresholds.value[e.mobileBreakpoint]:e.mobile===null?t.mobile.value:!1),o=Y(()=>n?{[`${n}--mobile`]:r.value}:{});return{...t,displayClasses:o,mobile:r}}const yS=Symbol.for("vuetify:goto");function bS(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5}}}function xS(e,n){return{rtl:n.isRtl,options:Cn(bS(),e)}}const wS={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload"},_S={component:e=>_r(e0,{...e,class:"mdi"})},Vr=[String,Function,Object,Array],Jl=Symbol.for("vuetify:icons"),Zu=Ae({icon:{type:Vr},tag:{type:String,required:!0}},"icon"),cv=Ze()({name:"VComponentIcon",props:Zu(),setup(e,n){let{slots:t}=n;return()=>{const r=e.icon;return V(e.tag,null,{default:()=>{var o;return[e.icon?V(r,null,null):(o=t.default)==null?void 0:o.call(t)]}})}}}),Zy=Gi({name:"VSvgIcon",inheritAttrs:!1,props:Zu(),setup(e,n){let{attrs:t}=n;return()=>V(e.tag,Et(t,{style:null}),{default:()=>[V("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(r=>Array.isArray(r)?V("path",{d:r[0],"fill-opacity":r[1]},null):V("path",{d:r},null)):V("path",{d:e.icon},null)])]})}});Gi({name:"VLigatureIcon",props:Zu(),setup(e){return()=>V(e.tag,null,{default:()=>[e.icon]})}});const e0=Gi({name:"VClassIcon",props:Zu(),setup(e){return()=>V(e.tag,{class:e.icon},null)}});function CS(){return{svg:{component:Zy},class:{component:e0}}}function ES(e){const n=CS(),t=(e==null?void 0:e.defaultSet)??"mdi";return t==="mdi"&&!n.mdi&&(n.mdi=_S),Cn({defaultSet:t,sets:n,aliases:{...wS,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const SS=e=>{const n=bt(Jl);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:Y(()=>{var u;const r=st(e);if(!r)return{component:cv};let o=r;if(typeof o=="string"&&(o=o.trim(),o.startsWith("$")&&(o=(u=n.aliases)==null?void 0:u[o.slice(1)])),Array.isArray(o))return{component:Zy,icon:o};if(typeof o!="string")return{component:cv,icon:o};const a=Object.keys(n.sets).find(c=>typeof o=="string"&&o.startsWith(`${c}:`)),i=a?o.slice(a.length+1):o;return{component:n.sets[a??n.defaultSet].component,icon:i}})}};function t0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,...t}=e,r=Cn(n,t),{aliases:o={},components:a={},directives:i={}}=r,s=eE(r.defaults),u=mS(r.display,r.ssr),c=_E(r.theme),l=ES(r.icons),f=yE(r.locale),d=hS(r.date,f),h=xS(r.goTo,f);return{install:v=>{for(const m in i)v.directive(m,i[m]);for(const m in a)v.component(m,a[m]);for(const m in o)v.component(m,Gi({...o[m],name:m,aliasName:o[m].name}));if(c.install(v),v.provide(Ba,s),v.provide(Yl,u),v.provide(au,c),v.provide(Jl,l),v.provide(Kl,f),v.provide(dS,d.options),v.provide(ov,d.instance),v.provide(yS,h),lt&&r.ssr)if(v.$nuxt)v.$nuxt.hook("app:suspense:resolve",()=>{u.update()});else{const{mount:m}=v;v.mount=function(){const g=m(...arguments);return wr(()=>u.update()),v.mount=m,g}}Xu.reset(),v.mixin({computed:{$vuetify(){return Ft({defaults:aa.call(this,Ba),display:aa.call(this,Yl),theme:aa.call(this,au),icons:aa.call(this,Jl),locale:aa.call(this,Kl),date:aa.call(this,ov)})}}})},defaults:s,display:u,theme:c,icons:l,locale:f,date:d,goTo:h}}const kS="3.7.14";t0.version=kS;function aa(e){var r,o;const n=this.$,t=((r=n.parent)==null?void 0:r.provides)??((o=n.vnode.appContext)==null?void 0:o.provides);if(t&&e in t)return t[e]}const RS=Ae({text:String,...mt(),...ln()},"VToolbarTitle"),dd=Ze()({name:"VToolbarTitle",props:RS(),setup(e,n){let{slots:t}=n;return gt(()=>{const r=!!(t.default||t.text||e.text);return V(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var o;return[r&&V("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(o=t.default)==null?void 0:o.call(t)])]}})}),{}}}),IS=Ae({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Fn(e,n,t){return Ze()({name:e,props:IS({mode:t,origin:n}),setup(r,o){let{slots:a}=o;const i={onBeforeEnter(s){r.origin&&(s.style.transformOrigin=r.origin)},onLeave(s){if(r.leaveAbsolute){const{offsetTop:u,offsetLeft:c,offsetWidth:l,offsetHeight:f}=s;s._transitionInitialStyles={position:s.style.position,top:s.style.top,left:s.style.left,width:s.style.width,height:s.style.height},s.style.position="absolute",s.style.top=`${u}px`,s.style.left=`${c}px`,s.style.width=`${l}px`,s.style.height=`${f}px`}r.hideOnLeave&&s.style.setProperty("display","none","important")},onAfterLeave(s){if(r.leaveAbsolute&&(s!=null&&s._transitionInitialStyles)){const{position:u,top:c,left:l,width:f,height:d}=s._transitionInitialStyles;delete s._transitionInitialStyles,s.style.position=u||"",s.style.top=c||"",s.style.left=l||"",s.style.width=f||"",s.style.height=d||""}}};return()=>{const s=r.group?rd:Ho;return _r(s,{name:r.disabled?"":e,css:!r.disabled,...r.group?void 0:{mode:r.mode},...r.disabled?{}:i},a.default)}}})}function n0(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Ze()({name:e,props:{mode:{type:String,default:t},disabled:Boolean,group:Boolean},setup(r,o){let{slots:a}=o;const i=r.group?rd:Ho;return()=>_r(i,{name:r.disabled?"":e,css:!r.disabled,...r.disabled?{}:n},a.default)}})}function r0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=vn(`offset-${t}`);return{onBeforeEnter(i){i._parent=i.parentNode,i._initialStyle={transition:i.style.transition,overflow:i.style.overflow,[t]:i.style[t]}},onEnter(i){const s=i._initialStyle;if(!s)return;i.style.setProperty("transition","none","important"),i.style.overflow="hidden";const u=`${i[r]}px`;i.style[t]="0",i.offsetHeight,i.style.transition=s.transition,e&&i._parent&&i._parent.classList.add(e),requestAnimationFrame(()=>{i.style[t]=u})},onAfterEnter:a,onEnterCancelled:a,onLeave(i){i._initialStyle={transition:"",overflow:i.style.overflow,[t]:i.style[t]},i.style.overflow="hidden",i.style[t]=`${i[r]}px`,i.offsetHeight,requestAnimationFrame(()=>i.style[t]="0")},onAfterLeave:o,onLeaveCancelled:o};function o(i){e&&i._parent&&i._parent.classList.remove(e),a(i)}function a(i){if(!i._initialStyle)return;const s=i._initialStyle[t];i.style.overflow=i._initialStyle.overflow,s!=null&&(i.style[t]=s),delete i._initialStyle}}const AS=Ae({target:[Object,Array]},"v-dialog-transition"),TS=Ze()({name:"VDialogTransition",props:AS(),setup(e,n){let{slots:t}=n;const r={onBeforeEnter(o){o.style.pointerEvents="none",o.style.visibility="hidden"},async onEnter(o,a){var d;await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),o.style.visibility="";const{x:i,y:s,sx:u,sy:c,speed:l}=fv(e.target,o),f=ii(o,[{transform:`translate(${i}px, ${s}px) scale(${u}, ${c})`,opacity:0},{}],{duration:225*l,easing:oE});(d=lv(o))==null||d.forEach(h=>{ii(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*l,easing:ql})}),f.finished.then(()=>a())},onAfterEnter(o){o.style.removeProperty("pointer-events")},onBeforeLeave(o){o.style.pointerEvents="none"},async onLeave(o,a){var d;await new Promise(h=>requestAnimationFrame(h));const{x:i,y:s,sx:u,sy:c,speed:l}=fv(e.target,o);ii(o,[{},{transform:`translate(${i}px, ${s}px) scale(${u}, ${c})`,opacity:0}],{duration:125*l,easing:aE}).finished.then(()=>a()),(d=lv(o))==null||d.forEach(h=>{ii(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*l,easing:ql})})},onAfterLeave(o){o.style.removeProperty("pointer-events")}};return()=>e.target?V(Ho,Et({name:"dialog-transition"},r,{css:!1}),t):V(Ho,{name:"dialog-transition"},t)}});function lv(e){var t;const n=(t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:t.children;return n&&[...n]}function fv(e,n){const t=Oy(e),r=My(n),[o,a]=getComputedStyle(n).transformOrigin.split(" ").map(g=>parseFloat(g)),[i,s]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let u=t.left+t.width/2;i==="left"||s==="left"?u-=t.width/2:(i==="right"||s==="right")&&(u+=t.width/2);let c=t.top+t.height/2;i==="top"||s==="top"?c-=t.height/2:(i==="bottom"||s==="bottom")&&(c+=t.height/2);const l=t.width/r.width,f=t.height/r.height,d=Math.max(1,l,f),h=l/d||0,p=f/d||0,v=r.width*r.height/(window.innerWidth*window.innerHeight),m=v>.12?Math.min(1.5,(v-.12)*10+1):1;return{x:u-(o+r.left),y:c-(a+r.top),sx:h,sy:p,speed:m}}Fn("fab-transition","center center","out-in");Fn("dialog-bottom-transition");Fn("dialog-top-transition");Fn("fade-transition");Fn("scale-transition");Fn("scroll-x-transition");Fn("scroll-x-reverse-transition");Fn("scroll-y-transition");Fn("scroll-y-reverse-transition");Fn("slide-x-transition");Fn("slide-x-reverse-transition");Fn("slide-y-transition");Fn("slide-y-reverse-transition");const DS=n0("expand-transition",r0());n0("expand-x-transition",r0("",!0));const FS=Ae({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),jn=Ze(!1)({name:"VDefaultsProvider",props:FS(),setup(e,n){let{slots:t}=n;const{defaults:r,disabled:o,reset:a,root:i,scoped:s}=qf(e);return Yu(r,{reset:a,root:i,scoped:s,disabled:o}),()=>{var u;return(u=t.default)==null?void 0:u.call(t)}}});function PS(e){return{aspectStyles:Y(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const o0=Ae({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...mt(),...Ha()},"VResponsive"),Ql=Ze()({name:"VResponsive",props:o0(),setup(e,n){let{slots:t}=n;const{aspectStyles:r}=PS(e),{dimensionStyles:o}=$a(e);return gt(()=>{var a;return V("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[o.value,e.style]},[V("div",{class:"v-responsive__sizer",style:r.value},null),(a=t.additional)==null?void 0:a.call(t),t.default&&V("div",{class:["v-responsive__content",e.contentClass]},[t.default()])])}),{}}});function hd(e){return ud(()=>{const n=[],t={};if(e.value.background)if(Gl(e.value.background)){if(t.backgroundColor=e.value.background,!e.value.text&&jC(e.value.background)){const r=hr(e.value.background);if(r.a==null||r.a===1){const o=Uy(r);t.color=o,t.caretColor=o}}}else n.push(`bg-${e.value.background}`);return e.value.text&&(Gl(e.value.text)?(t.color=e.value.text,t.caretColor=e.value.text):n.push(`text-${e.value.text}`)),{colorClasses:n,colorStyles:t}})}function su(e,n){const t=Y(()=>({text:ft(e)?e.value:n?e[n]:null})),{colorClasses:r,colorStyles:o}=hd(t);return{textColorClasses:r,textColorStyles:o}}function Ea(e,n){const t=Y(()=>({background:ft(e)?e.value:n?e[n]:null})),{colorClasses:r,colorStyles:o}=hd(t);return{backgroundColorClasses:r,backgroundColorStyles:o}}const Xo=Ae({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Yo(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();return{roundedClasses:Y(()=>{const r=ft(e)?e.value:e.rounded,o=ft(e)?e.value:e.tile,a=[];if(r===!0||r==="")a.push(`${n}--rounded`);else if(typeof r=="string"||r===0)for(const i of String(r).split(" "))a.push(`rounded-${i}`);else(o||r===!1)&&a.push("rounded-0");return a})}}const a0=Ae({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),si=(e,n)=>{let{slots:t}=n;const{transition:r,disabled:o,group:a,...i}=e,{component:s=a?rd:Ho,...u}=typeof r=="object"?r:{};return _r(s,Et(typeof r=="string"?{name:o?"":r}:u,typeof r=="string"?{}:Object.fromEntries(Object.entries({disabled:o,group:a}).filter(c=>{let[l,f]=c;return f!==void 0})),i),t)};function NS(e,n){if(!id)return;const t=n.modifiers||{},r=n.value,{handler:o,options:a}=typeof r=="object"?r:{handler:r,options:{}},i=new IntersectionObserver(function(){var f;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],u=arguments.length>1?arguments[1]:void 0;const c=(f=e._observe)==null?void 0:f[n.instance.$.uid];if(!c)return;const l=s.some(d=>d.isIntersecting);o&&(!t.quiet||c.init)&&(!t.once||l||c.init)&&o(l,s,u),l&&t.once?i0(e,n):c.init=!0},a);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:i},i.observe(e)}function i0(e,n){var r;const t=(r=e._observe)==null?void 0:r[n.instance.$.uid];t&&(t.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const OS={mounted:NS,unmounted:i0},MS=Ae({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...o0(),...mt(),...Xo(),...a0()},"VImg"),Ti=Ze()({name:"VImg",directives:{intersect:OS},props:MS(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:t,slots:r}=n;const{backgroundColorClasses:o,backgroundColorStyles:a}=Ea($t(e,"color")),{roundedClasses:i}=Yo(e),s=Mt("VImg"),u=Je(""),c=ve(),l=Je(e.eager?"loading":"idle"),f=Je(),d=Je(),h=Y(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),p=Y(()=>h.value.aspect||f.value/d.value||0);je(()=>e.src,()=>{v(l.value!=="idle")}),je(p,(R,T)=>{!R&&T&&c.value&&b(c.value)}),Ng(()=>v());function v(R){if(!(e.eager&&R)&&!(id&&!R&&!e.eager)){if(l.value="loading",h.value.lazySrc){const T=new Image;T.src=h.value.lazySrc,b(T,null)}h.value.src&&wr(()=>{var T;t("loadstart",((T=c.value)==null?void 0:T.currentSrc)||h.value.src),setTimeout(()=>{var N;if(!s.isUnmounted)if((N=c.value)!=null&&N.complete){if(c.value.naturalWidth||g(),l.value==="error")return;p.value||b(c.value,null),l.value==="loading"&&m()}else p.value||b(c.value),y()})})}}function m(){var R;s.isUnmounted||(y(),b(c.value),l.value="loaded",t("load",((R=c.value)==null?void 0:R.currentSrc)||h.value.src))}function g(){var R;s.isUnmounted||(l.value="error",t("error",((R=c.value)==null?void 0:R.currentSrc)||h.value.src))}function y(){const R=c.value;R&&(u.value=R.currentSrc||R.src)}let x=-1;Dn(()=>{clearTimeout(x)});function b(R){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const N=()=>{if(clearTimeout(x),s.isUnmounted)return;const{naturalHeight:B,naturalWidth:H}=R;B||H?(f.value=H,d.value=B):!R.complete&&l.value==="loading"&&T!=null?x=window.setTimeout(N,T):(R.currentSrc.endsWith(".svg")||R.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,d.value=1)};N()}const _=Y(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),w=()=>{var N;if(!h.value.src||l.value==="idle")return null;const R=V("img",{class:["v-img__img",_.value],style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.src,srcset:h.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:c,onLoad:m,onError:g},null),T=(N=r.sources)==null?void 0:N.call(r);return V(si,{transition:e.transition,appear:!0},{default:()=>[un(T?V("picture",{class:"v-img__picture"},[T,R]):R,[[fy,l.value==="loaded"]])]})},S=()=>V(si,{transition:e.transition},{default:()=>[h.value.lazySrc&&l.value!=="loaded"&&V("img",{class:["v-img__img","v-img__img--preload",_.value],style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),E=()=>r.placeholder?V(si,{transition:e.transition,appear:!0},{default:()=>[(l.value==="loading"||l.value==="error"&&!r.error)&&V("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,C=()=>r.error?V(si,{transition:e.transition,appear:!0},{default:()=>[l.value==="error"&&V("div",{class:"v-img__error"},[r.error()])]}):null,k=()=>e.gradient?V("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,I=Je(!1);{const R=je(p,T=>{T&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{I.value=!0})}),R())})}return gt(()=>{const R=Ql.filterProps(e);return un(V(Ql,Et({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!I.value},o.value,i.value,e.class],style:[{width:Ue(e.width==="auto"?f.value:e.width)},a.value,e.style]},R,{aspectRatio:p.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>V(qe,null,[V(w,null,null),V(S,null,null),V(k,null,null),V(E,null,null),V(C,null,null)]),default:r.default}),[[Jf("intersect"),{handler:v,options:e.options},null,{once:!0}]])}),{currentSrc:u,image:c,state:l,naturalWidth:f,naturalHeight:d}}}),Ki=Ae({border:[Boolean,Number,String]},"border");function Xi(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();return{borderClasses:Y(()=>{const r=ft(e)?e.value:e.border,o=[];if(r===!0||r==="")o.push(`${n}--border`);else if(typeof r=="string"||r===0)for(const a of String(r).split(" "))o.push(`border-${a}`);return o})}}const ec=Ae({elevation:{type:[Number,String],validator(e){const n=parseInt(e);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function tc(e){return{elevationClasses:Y(()=>{const t=ft(e)?e.value:e.elevation,r=[];return t==null||r.push(`elevation-${t}`),r})}}const BS=[null,"prominent","default","comfortable","compact"],s0=Ae({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>BS.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ki(),...mt(),...ec(),...Xo(),...ln({tag:"header"}),...Er()},"VToolbar"),dv=Ze()({name:"VToolbar",props:s0(),setup(e,n){var h;let{slots:t}=n;const{backgroundColorClasses:r,backgroundColorStyles:o}=Ea($t(e,"color")),{borderClasses:a}=Xi(e),{elevationClasses:i}=tc(e),{roundedClasses:s}=Yo(e),{themeClasses:u}=Sr(e),{rtlClasses:c}=za(),l=Je(!!(e.extended||(h=t.extension)!=null&&h.call(t))),f=Y(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),d=Y(()=>l.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Yu({VBtn:{variant:"text"}}),gt(()=>{var g;const p=!!(e.title||t.title),v=!!(t.image||e.image),m=(g=t.extension)==null?void 0:g.call(t);return l.value=!!(e.extended||m),V(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},r.value,a.value,i.value,s.value,u.value,c.value,e.class],style:[o.value,e.style]},{default:()=>[v&&V("div",{key:"image",class:"v-toolbar__image"},[t.image?V(jn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):V(Ti,{key:"image-img",cover:!0,src:e.image},null)]),V(jn,{defaults:{VTabs:{height:Ue(f.value)}}},{default:()=>{var y,x,b;return[V("div",{class:"v-toolbar__content",style:{height:Ue(f.value)}},[t.prepend&&V("div",{class:"v-toolbar__prepend"},[(y=t.prepend)==null?void 0:y.call(t)]),p&&V(dd,{key:"title",text:e.title},{text:t.title}),(x=t.default)==null?void 0:x.call(t),t.append&&V("div",{class:"v-toolbar__append"},[(b=t.append)==null?void 0:b.call(t)])])]}}),V(jn,{defaults:{VTabs:{height:Ue(d.value)}}},{default:()=>[V(DS,null,{default:()=>[l.value&&V("div",{class:"v-toolbar__extension",style:{height:Ue(d.value)}},[m])]})]})]})}),{contentHeight:f,extensionHeight:d}}}),LS=Ae({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function VS(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=n;let r=0,o=0;const a=ve(null),i=Je(0),s=Je(0),u=Je(0),c=Je(!1),l=Je(!1),f=Y(()=>Number(e.scrollThreshold)),d=Y(()=>Ma((f.value-i.value)/f.value||0)),h=()=>{const p=a.value;if(!p||t&&!t.value)return;r=i.value,i.value="window"in p?p.pageYOffset:p.scrollTop;const v=p instanceof Window?document.documentElement.scrollHeight:p.scrollHeight;if(o!==v){o=v;return}l.value=i.value<r,u.value=Math.abs(i.value-f.value)};return je(l,()=>{s.value=s.value||i.value}),je(c,()=>{s.value=0}),jt(()=>{je(()=>e.scrollTarget,p=>{var m;const v=p?document.querySelector(p):window;v&&v!==a.value&&((m=a.value)==null||m.removeEventListener("scroll",h),a.value=v,a.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),Dn(()=>{var p;(p=a.value)==null||p.removeEventListener("scroll",h)}),t&&je(t,h,{immediate:!0}),{scrollThreshold:f,currentScroll:i,currentThreshold:u,isScrollActive:c,scrollRatio:d,isScrollingUp:l,savedScroll:s}}const WS=Ae({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...s0(),...lE(),...LS(),height:{type:[Number,String],default:64}},"VAppBar"),Zl=Ze()({name:"VAppBar",props:WS(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const r=ve(),o=Ko(e,"modelValue"),a=Y(()=>{var x;const y=new Set(((x=e.scrollBehavior)==null?void 0:x.split(" "))??[]);return{hide:y.has("hide"),fullyHide:y.has("fully-hide"),inverted:y.has("inverted"),collapse:y.has("collapse"),elevate:y.has("elevate"),fadeImage:y.has("fade-image")}}),i=Y(()=>{const y=a.value;return y.hide||y.fullyHide||y.inverted||y.collapse||y.elevate||y.fadeImage||!o.value}),{currentScroll:s,scrollThreshold:u,isScrollingUp:c,scrollRatio:l}=VS(e,{canScroll:i}),f=Y(()=>a.value.hide||a.value.fullyHide),d=Y(()=>e.collapse||a.value.collapse&&(a.value.inverted?l.value>0:l.value===0)),h=Y(()=>e.flat||a.value.fullyHide&&!o.value||a.value.elevate&&(a.value.inverted?s.value>0:s.value===0)),p=Y(()=>a.value.fadeImage?a.value.inverted?1-l.value:l.value:void 0),v=Y(()=>{var b,_;if(a.value.hide&&a.value.inverted)return 0;const y=((b=r.value)==null?void 0:b.contentHeight)??0,x=((_=r.value)==null?void 0:_.extensionHeight)??0;return f.value?s.value<u.value||a.value.fullyHide?y+x:y:y+x});qi(Y(()=>!!e.scrollBehavior),()=>{zr(()=>{f.value?a.value.inverted?o.value=s.value>u.value:o.value=c.value||s.value<u.value:o.value=!0})});const{ssrBootStyles:m}=Xy(),{layoutItemStyles:g}=dE({id:e.name,order:Y(()=>parseInt(e.order,10)),position:$t(e,"location"),layoutSize:v,elementSize:Je(void 0),active:o,absolute:$t(e,"absolute")});return gt(()=>{const y=dv.filterProps(e);return V(dv,Et({ref:r,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...g.value,"--v-toolbar-image-opacity":p.value,height:void 0,...m.value},e.style]},y,{collapse:d.value,flat:h.value}),t)}),{}}}),US=[null,"default","comfortable","compact"],Yi=Ae({density:{type:String,default:"default",validator:e=>US.includes(e)}},"density");function nc(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();return{densityClasses:Y(()=>`${n}--density-${e.density}`)}}const zS=["elevated","flat","tonal","outlined","text","plain"];function pd(e,n){return V(qe,null,[e&&V("span",{key:"overlay",class:`${n}__overlay`},null),V("span",{key:"underlay",class:`${n}__underlay`},null)])}const rc=Ae({color:String,variant:{type:String,default:"elevated",validator:e=>zS.includes(e)}},"variant");function vd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();const t=Y(()=>{const{variant:a}=st(e);return`${n}--variant-${a}`}),{colorClasses:r,colorStyles:o}=hd(Y(()=>{const{variant:a,color:i}=st(e);return{[["elevated","flat"].includes(a)?"background":"text"]:i}}));return{colorClasses:r,colorStyles:o,variantClasses:t}}const u0=Ae({baseColor:String,divided:Boolean,...Ki(),...mt(),...Yi(),...ec(),...Xo(),...ln(),...Er(),...rc()},"VBtnGroup"),hv=Ze()({name:"VBtnGroup",props:u0(),setup(e,n){let{slots:t}=n;const{themeClasses:r}=Sr(e),{densityClasses:o}=nc(e),{borderClasses:a}=Xi(e),{elevationClasses:i}=tc(e),{roundedClasses:s}=Yo(e);Yu({VBtn:{height:"auto",baseColor:$t(e,"baseColor"),color:$t(e,"color"),density:$t(e,"density"),flat:!0,variant:$t(e,"variant")}}),gt(()=>V(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},r.value,a.value,o.value,i.value,s.value,e.class],style:e.style},t))}}),HS=Ae({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),$S=Ae({value:null,disabled:Boolean,selectedClass:String},"group-item");function jS(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Mt("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const o=Xu();Rn(Symbol.for(`${n.description}:id`),o);const a=bt(n,null);if(!a){if(!t)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const i=$t(e,"value"),s=Y(()=>!!(a.disabled.value||e.disabled));a.register({id:o,value:i,disabled:s},r),Dn(()=>{a.unregister(o)});const u=Y(()=>a.isSelected(o)),c=Y(()=>a.items.value[0].id===o),l=Y(()=>a.items.value[a.items.value.length-1].id===o),f=Y(()=>u.value&&[a.selectedClass.value,e.selectedClass]);return je(u,d=>{r.emit("group:selected",{value:d})},{flush:"sync"}),{id:o,isSelected:u,isFirst:c,isLast:l,toggle:()=>a.select(o,!u.value),select:d=>a.select(o,d),selectedClass:f,value:i,disabled:s,group:a}}function GS(e,n){let t=!1;const r=Ft([]),o=Ko(e,"modelValue",[],d=>d==null?[]:c0(r,_C(d)),d=>{const h=KS(r,d);return e.multiple?h:h[0]}),a=Mt("useGroup");function i(d,h){const p=d,v=Symbol.for(`${n.description}:id`),g=ma(v,a==null?void 0:a.vnode).indexOf(h);st(p.value)==null&&(p.value=g,p.useIndexAsValue=!0),g>-1?r.splice(g,0,p):r.push(p)}function s(d){if(t)return;u();const h=r.findIndex(p=>p.id===d);r.splice(h,1)}function u(){const d=r.find(h=>!h.disabled);d&&e.mandatory==="force"&&!o.value.length&&(o.value=[d.id])}jt(()=>{u()}),Dn(()=>{t=!0}),Yf(()=>{for(let d=0;d<r.length;d++)r[d].useIndexAsValue&&(r[d].value=d)});function c(d,h){const p=r.find(v=>v.id===d);if(!(h&&(p!=null&&p.disabled)))if(e.multiple){const v=o.value.slice(),m=v.findIndex(y=>y===d),g=~m;if(h=h??!g,g&&e.mandatory&&v.length<=1||!g&&e.max!=null&&v.length+1>e.max)return;m<0&&h?v.push(d):m>=0&&!h&&v.splice(m,1),o.value=v}else{const v=o.value.includes(d);if(e.mandatory&&v)return;o.value=h??!v?[d]:[]}}function l(d){if(e.multiple,o.value.length){const h=o.value[0],p=r.findIndex(g=>g.id===h);let v=(p+d)%r.length,m=r[v];for(;m.disabled&&v!==p;)v=(v+d)%r.length,m=r[v];if(m.disabled)return;o.value=[r[v].id]}else{const h=r.find(p=>!p.disabled);h&&(o.value=[h.id])}}const f={register:i,unregister:s,selected:o,select:c,disabled:$t(e,"disabled"),prev:()=>l(r.length-1),next:()=>l(1),isSelected:d=>o.value.includes(d),selectedClass:Y(()=>e.selectedClass),items:Y(()=>r),getItemIndex:d=>qS(r,d)};return Rn(n,f),f}function qS(e,n){const t=c0(e,[n]);return t.length?e.findIndex(r=>r.id===t[0]):-1}function c0(e,n){const t=[];return n.forEach(r=>{const o=e.find(i=>sd(r,i.value)),a=e[r];(o==null?void 0:o.value)!=null?t.push(o.id):a!=null&&t.push(a.id)}),t}function KS(e,n){const t=[];return n.forEach(r=>{const o=e.findIndex(a=>a.id===r);if(~o){const a=e[o];t.push(a.value!=null?a.value:o)}}),t}const l0=Symbol.for("vuetify:v-btn-toggle"),XS=Ae({...u0(),...HS()},"VBtnToggle");Ze()({name:"VBtnToggle",props:XS(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const{isSelected:r,next:o,prev:a,select:i,selected:s}=GS(e,l0);return gt(()=>{const u=hv.filterProps(e);return V(hv,Et({class:["v-btn-toggle",e.class]},u,{style:e.style}),{default:()=>{var c;return[(c=t.default)==null?void 0:c.call(t,{isSelected:r,next:o,prev:a,select:i,selected:s})]}})}),{next:o,prev:a,select:i}}});const YS=["x-small","small","default","large","x-large"],oc=Ae({size:{type:[String,Number],default:"default"}},"size");function ac(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();return ud(()=>{let t,r;return tu(YS,e.size)?t=`${n}--size-${e.size}`:e.size&&(r={width:Ue(e.size),height:Ue(e.size)}),{sizeClasses:t,sizeStyles:r}})}const JS=Ae({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Vr,...mt(),...oc(),...ln({tag:"i"}),...Er()},"VIcon"),Gn=Ze()({name:"VIcon",props:JS(),setup(e,n){let{attrs:t,slots:r}=n;const o=ve(),{themeClasses:a}=Sr(e),{iconData:i}=SS(Y(()=>o.value||e.icon)),{sizeClasses:s}=ac(e),{textColorClasses:u,textColorStyles:c}=su($t(e,"color"));return gt(()=>{var d,h;const l=(d=r.default)==null?void 0:d.call(r);l&&(o.value=(h=Fy(l).filter(p=>p.type===$i&&p.children&&typeof p.children=="string")[0])==null?void 0:h.children);const f=!!(t.onClick||t.onClickOnce);return V(i.value.component,{tag:e.tag,icon:i.value.icon,class:["v-icon","notranslate",a.value,s.value,u.value,{"v-icon--clickable":f,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class],style:[s.value?void 0:{fontSize:Ue(e.size),height:Ue(e.size),width:Ue(e.size)},c.value,e.style],role:f?"button":void 0,"aria-hidden":!f,tabindex:f?e.disabled?-1:0:void 0},{default:()=>[l]})}),{}}});function f0(e,n){const t=ve(),r=Je(!1);if(id){const o=new IntersectionObserver(a=>{r.value=!!a.find(i=>i.isIntersecting)},n);Dn(()=>{o.disconnect()}),je(t,(a,i)=>{i&&(o.unobserve(i),r.value=!1),a&&o.observe(a)},{flush:"post"})}return{intersectionRef:t,isIntersecting:r}}const QS=Ae({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...mt(),...oc(),...ln({tag:"div"}),...Er()},"VProgressCircular"),d0=Ze()({name:"VProgressCircular",props:QS(),setup(e,n){let{slots:t}=n;const r=20,o=2*Math.PI*r,a=ve(),{themeClasses:i}=Sr(e),{sizeClasses:s,sizeStyles:u}=ac(e),{textColorClasses:c,textColorStyles:l}=su($t(e,"color")),{textColorClasses:f,textColorStyles:d}=su($t(e,"bgColor")),{intersectionRef:h,isIntersecting:p}=f0(),{resizeRef:v,contentRect:m}=$y(),g=Y(()=>Math.max(0,Math.min(100,parseFloat(e.modelValue)))),y=Y(()=>Number(e.width)),x=Y(()=>u.value?Number(e.size):m.value?m.value.width:Math.max(y.value,32)),b=Y(()=>r/(1-y.value/x.value)*2),_=Y(()=>y.value/x.value*b.value),w=Y(()=>Ue((100-g.value)/100*o));return zr(()=>{h.value=a.value,v.value=a.value}),gt(()=>V(e.tag,{ref:a,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":p.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},i.value,s.value,c.value,e.class],style:[u.value,l.value,e.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:g.value},{default:()=>[V("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${b.value} ${b.value}`},[V("circle",{class:["v-progress-circular__underlay",f.value],style:d.value,fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":_.value,"stroke-dasharray":o,"stroke-dashoffset":0},null),V("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":_.value,"stroke-dasharray":o,"stroke-dashoffset":w.value},null)]),t.default&&V("div",{class:"v-progress-circular__content"},[t.default({value:g.value})])]})),{}}}),pv={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},md=Ae({location:String},"location");function gd(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=za();return{locationStyles:Y(()=>{if(!e.location)return{};const{side:a,align:i}=jl(e.location.split(" ").length>1?e.location:`${e.location} center`,r.value);function s(c){return t?t(c):0}const u={};return a!=="center"&&(n?u[pv[a]]=`calc(100% - ${s(a)}px)`:u[a]=0),i!=="center"?n?u[pv[i]]=`calc(100% - ${s(i)}px)`:u[i]=0:(a==="center"?u.top=u.left="50%":u[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",u.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),u})}}const ZS=Ae({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...mt(),...md({location:"top"}),...Xo(),...ln(),...Er()},"VProgressLinear"),ek=Ze()({name:"VProgressLinear",props:ZS(),emits:{"update:modelValue":e=>!0},setup(e,n){var I;let{slots:t}=n;const r=Ko(e,"modelValue"),{isRtl:o,rtlClasses:a}=za(),{themeClasses:i}=Sr(e),{locationStyles:s}=gd(e),{textColorClasses:u,textColorStyles:c}=su(e,"color"),{backgroundColorClasses:l,backgroundColorStyles:f}=Ea(Y(()=>e.bgColor||e.color)),{backgroundColorClasses:d,backgroundColorStyles:h}=Ea(Y(()=>e.bufferColor||e.bgColor||e.color)),{backgroundColorClasses:p,backgroundColorStyles:v}=Ea(e,"color"),{roundedClasses:m}=Yo(e),{intersectionRef:g,isIntersecting:y}=f0(),x=Y(()=>parseFloat(e.max)),b=Y(()=>parseFloat(e.height)),_=Y(()=>Ma(parseFloat(e.bufferValue)/x.value*100,0,100)),w=Y(()=>Ma(parseFloat(r.value)/x.value*100,0,100)),S=Y(()=>o.value!==e.reverse),E=Y(()=>e.indeterminate?"fade-transition":"slide-x-transition"),C=lt&&((I=window.matchMedia)==null?void 0:I.call(window,"(forced-colors: active)").matches);function k(R){if(!g.value)return;const{left:T,right:N,width:B}=g.value.getBoundingClientRect(),H=S.value?B-R.clientX+(N-B):R.clientX-T;r.value=Math.round(H/B*x.value)}return gt(()=>V(e.tag,{ref:g,class:["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&y.value,"v-progress-linear--reverse":S.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},m.value,i.value,a.value,e.class],style:[{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Ue(b.value):0,"--v-progress-linear-height":Ue(b.value),...e.absolute?s.value:{}},e.style],role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(r.value),x.value),onClick:e.clickable&&k},{default:()=>[e.stream&&V("div",{key:"stream",class:["v-progress-linear__stream",u.value],style:{...c.value,[S.value?"left":"right"]:Ue(-b.value),borderTop:`${Ue(b.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Ue(b.value/4)})`,width:Ue(100-_.value,"%"),"--v-progress-linear-stream-to":Ue(b.value*(S.value?1:-1))}},null),V("div",{class:["v-progress-linear__background",C?void 0:l.value],style:[f.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}]},null),V("div",{class:["v-progress-linear__buffer",C?void 0:d.value],style:[h.value,{opacity:parseFloat(e.bufferOpacity),width:Ue(_.value,"%")}]},null),V(Ho,{name:E.value},{default:()=>[e.indeterminate?V("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(R=>V("div",{key:R,class:["v-progress-linear__indeterminate",R,C?void 0:p.value],style:v.value},null))]):V("div",{class:["v-progress-linear__determinate",C?void 0:p.value],style:[v.value,{width:Ue(w.value,"%")}]},null)]}),t.default&&V("div",{class:"v-progress-linear__content"},[t.default({value:w.value,buffer:_.value})])]})),{}}}),h0=Ae({loading:[Boolean,String]},"loader");function p0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();return{loaderClasses:Y(()=>({[`${n}--loading`]:e.loading}))}}function tk(e,n){var r;let{slots:t}=n;return V("div",{class:`${e.name}__loader`},[((r=t.default)==null?void 0:r.call(t,{color:e.color,isActive:e.active}))||V(ek,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const nk=["static","relative","fixed","absolute","sticky"],v0=Ae({position:{type:String,validator:e=>nk.includes(e)}},"position");function m0(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:go();return{positionClasses:Y(()=>e.position?`${n}--${e.position}`:void 0)}}function rk(){const e=Mt("useRoute");return Y(()=>{var n;return(n=e==null?void 0:e.proxy)==null?void 0:n.$route})}function ok(){var e,n;return(n=(e=Mt("useRouter"))==null?void 0:e.proxy)==null?void 0:n.$router}function g0(e,n){var f,d;const t=Hw("RouterLink"),r=Y(()=>!!(e.href||e.to)),o=Y(()=>(r==null?void 0:r.value)||Lp(n,"click")||Lp(e,"click"));if(typeof t=="string"||!("useLink"in t)){const h=$t(e,"href");return{isLink:r,isClickable:o,href:h,linkProps:Ft({href:h})}}const a=Y(()=>({...e,to:$t(()=>e.to||"")})),i=t.useLink(a.value),s=Y(()=>e.to?i:void 0),u=rk(),c=Y(()=>{var h,p,v;return s.value?e.exact?u.value?((v=s.value.isExactActive)==null?void 0:v.value)&&sd(s.value.route.value.query,u.value.query):((p=s.value.isExactActive)==null?void 0:p.value)??!1:((h=s.value.isActive)==null?void 0:h.value)??!1:!1}),l=Y(()=>{var h;return e.to?(h=s.value)==null?void 0:h.route.value.href:e.href});return{isLink:r,isClickable:o,isActive:c,route:(f=s.value)==null?void 0:f.route,navigate:(d=s.value)==null?void 0:d.navigate,href:l,linkProps:Ft({href:l,"aria-current":Y(()=>c.value?"page":void 0)})}}const y0=Ae({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Gc=!1;function ak(e,n){let t=!1,r,o;lt&&(e!=null&&e.beforeEach)&&(wr(()=>{window.addEventListener("popstate",a),r=e.beforeEach((i,s,u)=>{Gc?t?n(u):u():setTimeout(()=>t?n(u):u()),Gc=!0}),o=e==null?void 0:e.afterEach(()=>{Gc=!1})}),Jn(()=>{window.removeEventListener("popstate",a),r==null||r(),o==null||o()}));function a(i){var s;(s=i.state)!=null&&s.replaced||(t=!0,setTimeout(()=>t=!1))}}function ik(e,n){je(()=>{var t;return(t=e.isActive)==null?void 0:t.value},t=>{e.isLink.value&&t&&n&&wr(()=>{n(!0)})},{immediate:!0})}const ef=Symbol("rippleStop"),sk=80;function vv(e,n){e.style.transform=n,e.style.webkitTransform=n}function tf(e){return e.constructor.name==="TouchEvent"}function b0(e){return e.constructor.name==="KeyboardEvent"}const uk=function(e,n){var f;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,o=0;if(!b0(e)){const d=n.getBoundingClientRect(),h=tf(e)?e.touches[e.touches.length-1]:e;r=h.clientX-d.left,o=h.clientY-d.top}let a=0,i=.3;(f=n._ripple)!=null&&f.circle?(i=.15,a=n.clientWidth/2,a=t.center?a:a+Math.sqrt((r-a)**2+(o-a)**2)/4):a=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const s=`${(n.clientWidth-a*2)/2}px`,u=`${(n.clientHeight-a*2)/2}px`,c=t.center?s:`${r-a}px`,l=t.center?u:`${o-a}px`;return{radius:a,scale:i,x:c,y:l,centerX:s,centerY:u}},uu={show(e,n){var h;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((h=n==null?void 0:n._ripple)!=null&&h.enabled))return;const r=document.createElement("span"),o=document.createElement("span");r.appendChild(o),r.className="v-ripple__container",t.class&&(r.className+=` ${t.class}`);const{radius:a,scale:i,x:s,y:u,centerX:c,centerY:l}=uk(e,n,t),f=`${a*2}px`;o.className="v-ripple__animation",o.style.width=f,o.style.height=f,n.appendChild(r);const d=window.getComputedStyle(n);d&&d.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),o.classList.add("v-ripple__animation--enter"),o.classList.add("v-ripple__animation--visible"),vv(o,`translate(${s}, ${u}) scale3d(${i},${i},${i})`),o.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o.classList.remove("v-ripple__animation--enter"),o.classList.add("v-ripple__animation--in"),vv(o,`translate(${c}, ${l}) scale3d(1,1,1)`)})})},hide(e){var a;if(!((a=e==null?void 0:e._ripple)!=null&&a.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const t=n[n.length-1];if(t.dataset.isHiding)return;t.dataset.isHiding="true";const r=performance.now()-Number(t.dataset.activated),o=Math.max(250-r,0);setTimeout(()=>{t.classList.remove("v-ripple__animation--in"),t.classList.add("v-ripple__animation--out"),setTimeout(()=>{var s;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((s=t.parentNode)==null?void 0:s.parentNode)===e&&e.removeChild(t.parentNode)},300)},o)}};function x0(e){return typeof e>"u"||!!e}function Di(e){const n={},t=e.currentTarget;if(!(!(t!=null&&t._ripple)||t._ripple.touched||e[ef])){if(e[ef]=!0,tf(e))t._ripple.touched=!0,t._ripple.isTouch=!0;else if(t._ripple.isTouch)return;if(n.center=t._ripple.centered||b0(e),t._ripple.class&&(n.class=t._ripple.class),tf(e)){if(t._ripple.showTimerCommit)return;t._ripple.showTimerCommit=()=>{uu.show(e,t,n)},t._ripple.showTimer=window.setTimeout(()=>{var r;(r=t==null?void 0:t._ripple)!=null&&r.showTimerCommit&&(t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null)},sk)}else uu.show(e,t,n)}}function mv(e){e[ef]=!0}function wn(e){const n=e.currentTarget;if(n!=null&&n._ripple){if(window.clearTimeout(n._ripple.showTimer),e.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{wn(e)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),uu.hide(n)}}function w0(e){const n=e.currentTarget;n!=null&&n._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let Fi=!1;function _0(e){!Fi&&(e.keyCode===Op.enter||e.keyCode===Op.space)&&(Fi=!0,Di(e))}function C0(e){Fi=!1,wn(e)}function E0(e){Fi&&(Fi=!1,wn(e))}function S0(e,n,t){const{value:r,modifiers:o}=n,a=x0(r);if(a||uu.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=o.center,e._ripple.circle=o.circle,yC(r)&&r.class&&(e._ripple.class=r.class),a&&!t){if(o.stop){e.addEventListener("touchstart",mv,{passive:!0}),e.addEventListener("mousedown",mv);return}e.addEventListener("touchstart",Di,{passive:!0}),e.addEventListener("touchend",wn,{passive:!0}),e.addEventListener("touchmove",w0,{passive:!0}),e.addEventListener("touchcancel",wn),e.addEventListener("mousedown",Di),e.addEventListener("mouseup",wn),e.addEventListener("mouseleave",wn),e.addEventListener("keydown",_0),e.addEventListener("keyup",C0),e.addEventListener("blur",E0),e.addEventListener("dragstart",wn,{passive:!0})}else!a&&t&&k0(e)}function k0(e){e.removeEventListener("mousedown",Di),e.removeEventListener("touchstart",Di),e.removeEventListener("touchend",wn),e.removeEventListener("touchmove",w0),e.removeEventListener("touchcancel",wn),e.removeEventListener("mouseup",wn),e.removeEventListener("mouseleave",wn),e.removeEventListener("keydown",_0),e.removeEventListener("keyup",C0),e.removeEventListener("dragstart",wn),e.removeEventListener("blur",E0)}function ck(e,n){S0(e,n,!1)}function lk(e){delete e._ripple,k0(e)}function fk(e,n){if(n.value===n.oldValue)return;const t=x0(n.oldValue);S0(e,n,t)}const R0={mounted:ck,unmounted:lk,updated:fk},dk=Ae({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:l0},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Vr,appendIcon:Vr,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...Ki(),...mt(),...Yi(),...Ha(),...ec(),...$S(),...h0(),...md(),...v0(),...Xo(),...y0(),...oc(),...ln({tag:"button"}),...Er(),...rc({variant:"elevated"})},"VBtn"),so=Ze()({name:"VBtn",props:dk(),emits:{"group:selected":e=>!0},setup(e,n){let{attrs:t,slots:r}=n;const{themeClasses:o}=Sr(e),{borderClasses:a}=Xi(e),{densityClasses:i}=nc(e),{dimensionStyles:s}=$a(e),{elevationClasses:u}=tc(e),{loaderClasses:c}=p0(e),{locationStyles:l}=gd(e),{positionClasses:f}=m0(e),{roundedClasses:d}=Yo(e),{sizeClasses:h,sizeStyles:p}=ac(e),v=jS(e,e.symbol,!1),m=g0(e,t),g=Y(()=>{var I;return e.active!==void 0?e.active:m.isLink.value?(I=m.isActive)==null?void 0:I.value:v==null?void 0:v.isSelected.value}),y=Y(()=>g.value?e.activeColor??e.color:e.color),x=Y(()=>{var R,T;return{color:(v==null?void 0:v.isSelected.value)&&(!m.isLink.value||((R=m.isActive)==null?void 0:R.value))||!v||((T=m.isActive)==null?void 0:T.value)?y.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:b,colorStyles:_,variantClasses:w}=vd(x),S=Y(()=>(v==null?void 0:v.disabled.value)||e.disabled),E=Y(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),C=Y(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function k(I){var R;S.value||m.isLink.value&&(I.metaKey||I.ctrlKey||I.shiftKey||I.button!==0||t.target==="_blank")||((R=m.navigate)==null||R.call(m,I),v==null||v.toggle())}return ik(m,v==null?void 0:v.select),gt(()=>{const I=m.isLink.value?"a":e.tag,R=!!(e.prependIcon||r.prepend),T=!!(e.appendIcon||r.append),N=!!(e.icon&&e.icon!==!0);return un(V(I,Et({type:I==="a"?void 0:"button",class:["v-btn",v==null?void 0:v.selectedClass.value,{"v-btn--active":g.value,"v-btn--block":e.block,"v-btn--disabled":S.value,"v-btn--elevated":E.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},o.value,a.value,b.value,i.value,u.value,c.value,f.value,d.value,h.value,w.value,e.class],style:[_.value,s.value,l.value,p.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:S.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:k,value:C.value},m.linkProps),{default:()=>{var B;return[pd(!0,"v-btn"),!e.icon&&R&&V("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?V(jn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},r.prepend):V(Gn,{key:"prepend-icon",icon:e.prependIcon},null)]),V("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&N?V(Gn,{key:"content-icon",icon:e.icon},null):V(jn,{key:"content-defaults",disabled:!N,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var H;return[((H=r.default)==null?void 0:H.call(r))??e.text]}})]),!e.icon&&T&&V("span",{key:"append",class:"v-btn__append"},[r.append?V(jn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},r.append):V(Gn,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&V("span",{key:"loader",class:"v-btn__loader"},[((B=r.loader)==null?void 0:B.call(r))??V(d0,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[R0,!S.value&&e.ripple,"",{center:!!e.icon}]])}),{group:v}}}),hk=Ae({start:Boolean,end:Boolean,icon:Vr,image:String,text:String,...Ki(),...mt(),...Yi(),...Xo(),...oc(),...ln(),...Er(),...rc({variant:"flat"})},"VAvatar"),gv=Ze()({name:"VAvatar",props:hk(),setup(e,n){let{slots:t}=n;const{themeClasses:r}=Sr(e),{borderClasses:o}=Xi(e),{colorClasses:a,colorStyles:i,variantClasses:s}=vd(e),{densityClasses:u}=nc(e),{roundedClasses:c}=Yo(e),{sizeClasses:l,sizeStyles:f}=ac(e);return gt(()=>V(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},r.value,o.value,a.value,u.value,c.value,l.value,s.value,e.class],style:[i.value,f.value,e.style]},{default:()=>[t.default?V(jn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[t.default()]}):e.image?V(Ti,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?V(Gn,{key:"icon",icon:e.icon},null):e.text,pd(!1,"v-avatar")]})),{}}}),pk=Symbol.for("vuetify:form"),vk=Ae({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function mk(e){const n=Ko(e,"modelValue"),t=Y(()=>e.disabled),r=Y(()=>e.readonly),o=Je(!1),a=ve([]),i=ve([]);async function s(){const l=[];let f=!0;i.value=[],o.value=!0;for(const d of a.value){const h=await d.validate();if(h.length>0&&(f=!1,l.push({id:d.id,errorMessages:h})),!f&&e.fastFail)break}return i.value=l,o.value=!1,{valid:f,errors:i.value}}function u(){a.value.forEach(l=>l.reset())}function c(){a.value.forEach(l=>l.resetValidation())}return je(a,()=>{let l=0,f=0;const d=[];for(const h of a.value)h.isValid===!1?(f++,d.push({id:h.id,errorMessages:h.errorMessages})):h.isValid===!0&&l++;i.value=d,n.value=f>0?!1:l===a.value.length?!0:null},{deep:!0,flush:"post"}),Rn(pk,{register:l=>{let{id:f,vm:d,validate:h,reset:p,resetValidation:v}=l;a.value.some(m=>m.id===f),a.value.push({id:f,validate:h,reset:p,resetValidation:v,vm:dg(d),isValid:null,errorMessages:[]})},unregister:l=>{a.value=a.value.filter(f=>f.id!==l)},update:(l,f,d)=>{const h=a.value.find(p=>p.id===l);h&&(h.isValid=f,h.errorMessages=d)},isDisabled:t,isReadonly:r,isValidating:o,isValid:n,items:a,validateOn:$t(e,"validateOn")}),{errors:i,isDisabled:t,isReadonly:r,isValidating:o,isValid:n,items:a,validate:s,reset:u,resetValidation:c}}function qc(e,n){return{x:e.x+n.x,y:e.y+n.y}}function gk(e,n){return{x:e.x-n.x,y:e.y-n.y}}function yv(e,n){if(e.side==="top"||e.side==="bottom"){const{side:t,align:r}=e,o=r==="left"?0:r==="center"?n.width/2:r==="right"?n.width:r,a=t==="top"?0:t==="bottom"?n.height:t;return qc({x:o,y:a},n)}else if(e.side==="left"||e.side==="right"){const{side:t,align:r}=e,o=t==="left"?0:t==="right"?n.width:t,a=r==="top"?0:r==="center"?n.height/2:r==="bottom"?n.height:r;return qc({x:o,y:a},n)}return qc({x:n.width/2,y:n.height/2},n)}const I0={static:xk,connected:_k},yk=Ae({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in I0},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function bk(e,n){const t=ve({}),r=ve();lt&&qi(()=>!!(n.isActive.value&&e.locationStrategy),a=>{var i,s;je(()=>e.locationStrategy,a),Jn(()=>{window.removeEventListener("resize",o),r.value=void 0}),window.addEventListener("resize",o,{passive:!0}),typeof e.locationStrategy=="function"?r.value=(i=e.locationStrategy(n,e,t))==null?void 0:i.updateLocation:r.value=(s=I0[e.locationStrategy](n,e,t))==null?void 0:s.updateLocation});function o(a){var i;(i=r.value)==null||i.call(r,a)}return{contentStyles:t,updateLocation:r}}function xk(){}function wk(e,n){const t=My(e);return n?t.x+=parseFloat(e.style.right||0):t.x-=parseFloat(e.style.left||0),t.y-=parseFloat(e.style.top||0),t}function _k(e,n,t){(Array.isArray(e.target.value)||uE(e.target.value))&&Object.assign(t.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:o,preferredOrigin:a}=ud(()=>{const p=jl(n.location,e.isRtl.value),v=n.origin==="overlap"?p:n.origin==="auto"?Hc(p):jl(n.origin,e.isRtl.value);return p.side===v.side&&p.align===$c(v).align?{preferredAnchor:Wp(p),preferredOrigin:Wp(v)}:{preferredAnchor:p,preferredOrigin:v}}),[i,s,u,c]=["minWidth","minHeight","maxWidth","maxHeight"].map(p=>Y(()=>{const v=parseFloat(n[p]);return isNaN(v)?1/0:v})),l=Y(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const p=n.offset.split(" ").map(parseFloat);return p.length<2&&p.push(0),p}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let f=!1;const d=new ResizeObserver(()=>{f&&h()});je([e.target,e.contentEl],(p,v)=>{let[m,g]=p,[y,x]=v;y&&!Array.isArray(y)&&d.unobserve(y),m&&!Array.isArray(m)&&d.observe(m),x&&d.unobserve(x),g&&d.observe(g)},{immediate:!0}),Jn(()=>{d.disconnect()});function h(){if(f=!1,requestAnimationFrame(()=>f=!0),!e.target.value||!e.contentEl.value)return;const p=Oy(e.target.value),v=wk(e.contentEl.value,e.isRtl.value),m=ru(e.contentEl.value),g=12;m.length||(m.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(v.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),v.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const y=m.reduce((I,R)=>{const T=R.getBoundingClientRect(),N=new Lo({x:R===document.documentElement?0:T.x,y:R===document.documentElement?0:T.y,width:R.clientWidth,height:R.clientHeight});return I?new Lo({x:Math.max(I.left,N.left),y:Math.max(I.top,N.top),width:Math.min(I.right,N.right)-Math.max(I.left,N.left),height:Math.min(I.bottom,N.bottom)-Math.max(I.top,N.top)}):N},void 0);y.x+=g,y.y+=g,y.width-=g*2,y.height-=g*2;let x={anchor:o.value,origin:a.value};function b(I){const R=new Lo(v),T=yv(I.anchor,p),N=yv(I.origin,R);let{x:B,y:H}=gk(T,N);switch(I.anchor.side){case"top":H-=l.value[0];break;case"bottom":H+=l.value[0];break;case"left":B-=l.value[0];break;case"right":B+=l.value[0];break}switch(I.anchor.align){case"top":H-=l.value[1];break;case"bottom":H+=l.value[1];break;case"left":B-=l.value[1];break;case"right":B+=l.value[1];break}return R.x+=B,R.y+=H,R.width=Math.min(R.width,u.value),R.height=Math.min(R.height,c.value),{overflows:zp(R,y),x:B,y:H}}let _=0,w=0;const S={x:0,y:0},E={x:!1,y:!1};let C=-1;for(;!(C++>10);){const{x:I,y:R,overflows:T}=b(x);_+=I,w+=R,v.x+=I,v.y+=R;{const N=Up(x.anchor),B=T.x.before||T.x.after,H=T.y.before||T.y.after;let z=!1;if(["x","y"].forEach(W=>{if(W==="x"&&B&&!E.x||W==="y"&&H&&!E.y){const j={anchor:{...x.anchor},origin:{...x.origin}},Z=W==="x"?N==="y"?$c:Hc:N==="y"?Hc:$c;j.anchor=Z(j.anchor),j.origin=Z(j.origin);const{overflows:ae}=b(j);(ae[W].before<=T[W].before&&ae[W].after<=T[W].after||ae[W].before+ae[W].after<(T[W].before+T[W].after)/2)&&(x=j,z=E[W]=!0)}}),z)continue}T.x.before&&(_+=T.x.before,v.x+=T.x.before),T.x.after&&(_-=T.x.after,v.x-=T.x.after),T.y.before&&(w+=T.y.before,v.y+=T.y.before),T.y.after&&(w-=T.y.after,v.y-=T.y.after);{const N=zp(v,y);S.x=y.width-N.x.before-N.x.after,S.y=y.height-N.y.before-N.y.after,_+=N.x.before,v.x+=N.x.before,w+=N.y.before,v.y+=N.y.before}break}const k=Up(x.anchor);return Object.assign(t.value,{"--v-overlay-anchor-origin":`${x.anchor.side} ${x.anchor.align}`,transformOrigin:`${x.origin.side} ${x.origin.align}`,top:Ue(Kc(w)),left:e.isRtl.value?void 0:Ue(Kc(_)),right:e.isRtl.value?Ue(Kc(-_)):void 0,minWidth:Ue(k==="y"?Math.min(i.value,p.width):i.value),maxWidth:Ue(bv(Ma(S.x,i.value===1/0?0:i.value,u.value))),maxHeight:Ue(bv(Ma(S.y,s.value===1/0?0:s.value,c.value)))}),{available:S,contentBox:v}}return je(()=>[o.value,a.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>h()),wr(()=>{const p=h();if(!p)return;const{available:v,contentBox:m}=p;m.height>v.y&&requestAnimationFrame(()=>{h(),requestAnimationFrame(()=>{h()})})}),{updateLocation:h}}function Kc(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function bv(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let nf=!0;const cu=[];function Ck(e){!nf||cu.length?(cu.push(e),rf()):(nf=!1,e(),rf())}let xv=-1;function rf(){cancelAnimationFrame(xv),xv=requestAnimationFrame(()=>{const e=cu.shift();e&&e(),cu.length?rf():nf=!0})}const Vs={none:null,close:kk,block:Rk,reposition:Ik},Ek=Ae({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in Vs}},"VOverlay-scroll-strategies");function Sk(e,n){if(!lt)return;let t;zr(async()=>{t==null||t.stop(),n.isActive.value&&e.scrollStrategy&&(t=Vf(),await new Promise(r=>setTimeout(r)),t.active&&t.run(()=>{var r;typeof e.scrollStrategy=="function"?e.scrollStrategy(n,e,t):(r=Vs[e.scrollStrategy])==null||r.call(Vs,n,e,t)}))}),Jn(()=>{t==null||t.stop()})}function kk(e){function n(t){e.isActive.value=!1}A0(e.targetEl.value??e.contentEl.value,n)}function Rk(e,n){var i;const t=(i=e.root.value)==null?void 0:i.offsetParent,r=[...new Set([...ru(e.targetEl.value,n.contained?t:void 0),...ru(e.contentEl.value,n.contained?t:void 0)])].filter(s=>!s.classList.contains("v-overlay-scroll-blocked")),o=window.innerWidth-document.documentElement.offsetWidth,a=(s=>fd(s)&&s)(t||document.documentElement);a&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((s,u)=>{s.style.setProperty("--v-body-scroll-x",Ue(-s.scrollLeft)),s.style.setProperty("--v-body-scroll-y",Ue(-s.scrollTop)),s!==document.documentElement&&s.style.setProperty("--v-scrollbar-offset",Ue(o)),s.classList.add("v-overlay-scroll-blocked")}),Jn(()=>{r.forEach((s,u)=>{const c=parseFloat(s.style.getPropertyValue("--v-body-scroll-x")),l=parseFloat(s.style.getPropertyValue("--v-body-scroll-y")),f=s.style.scrollBehavior;s.style.scrollBehavior="auto",s.style.removeProperty("--v-body-scroll-x"),s.style.removeProperty("--v-body-scroll-y"),s.style.removeProperty("--v-scrollbar-offset"),s.classList.remove("v-overlay-scroll-blocked"),s.scrollLeft=-c,s.scrollTop=-l,s.style.scrollBehavior=f}),a&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Ik(e,n,t){let r=!1,o=-1,a=-1;function i(s){Ck(()=>{var l,f;const u=performance.now();(f=(l=e.updateLocation).value)==null||f.call(l,s),r=(performance.now()-u)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?s=>s():requestIdleCallback)(()=>{t.run(()=>{A0(e.targetEl.value??e.contentEl.value,s=>{r?(cancelAnimationFrame(o),o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{i(s)})})):i(s)})})}),Jn(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(o)})}function A0(e,n){const t=[document,...ru(e)];t.forEach(r=>{r.addEventListener("scroll",n,{passive:!0})}),Jn(()=>{t.forEach(r=>{r.removeEventListener("scroll",n)})})}const Ak=Symbol.for("vuetify:v-menu"),Tk=Ae({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function Dk(e,n){let t=()=>{};function r(i){t==null||t();const s=Number(i?e.openDelay:e.closeDelay);return new Promise(u=>{t=kC(s,()=>{n==null||n(i),u(i)})})}function o(){return r(!0)}function a(){return r(!1)}return{clearDelay:t,runOpenDelay:o,runCloseDelay:a}}const Fk=Ae({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...Tk()},"VOverlay-activator");function Pk(e,n){let{isActive:t,isTop:r,contentEl:o}=n;const a=Mt("useActivator"),i=ve();let s=!1,u=!1,c=!0;const l=Y(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),f=Y(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!l.value),{runOpenDelay:d,runCloseDelay:h}=Dk(e,E=>{E===(e.openOnHover&&s||l.value&&u)&&!(e.openOnHover&&t.value&&!r.value)&&(t.value!==E&&(c=!0),t.value=E)}),p=ve(),v={onClick:E=>{E.stopPropagation(),i.value=E.currentTarget||E.target,t.value||(p.value=[E.clientX,E.clientY]),t.value=!t.value},onMouseenter:E=>{var C;(C=E.sourceCapabilities)!=null&&C.firesTouchEvents||(s=!0,i.value=E.currentTarget||E.target,d())},onMouseleave:E=>{s=!1,h()},onFocus:E=>{SC(E.target,":focus-visible")!==!1&&(u=!0,E.stopPropagation(),i.value=E.currentTarget||E.target,d())},onBlur:E=>{u=!1,E.stopPropagation(),h()}},m=Y(()=>{const E={};return f.value&&(E.onClick=v.onClick),e.openOnHover&&(E.onMouseenter=v.onMouseenter,E.onMouseleave=v.onMouseleave),l.value&&(E.onFocus=v.onFocus,E.onBlur=v.onBlur),E}),g=Y(()=>{const E={};if(e.openOnHover&&(E.onMouseenter=()=>{s=!0,d()},E.onMouseleave=()=>{s=!1,h()}),l.value&&(E.onFocusin=()=>{u=!0,d()},E.onFocusout=()=>{u=!1,h()}),e.closeOnContentClick){const C=bt(Ak,null);E.onClick=()=>{t.value=!1,C==null||C.closeParents()}}return E}),y=Y(()=>{const E={};return e.openOnHover&&(E.onMouseenter=()=>{c&&(s=!0,c=!1,d())},E.onMouseleave=()=>{s=!1,h()}),E});je(r,E=>{var C;E&&(e.openOnHover&&!s&&(!l.value||!u)||l.value&&!u&&(!e.openOnHover||!s))&&!((C=o.value)!=null&&C.contains(document.activeElement))&&(t.value=!1)}),je(t,E=>{E||setTimeout(()=>{p.value=void 0})},{flush:"post"});const x=$l();zr(()=>{x.value&&wr(()=>{i.value=x.el})});const b=$l(),_=Y(()=>e.target==="cursor"&&p.value?p.value:b.value?b.el:T0(e.target,a)||i.value),w=Y(()=>Array.isArray(_.value)?void 0:_.value);let S;return je(()=>!!e.activator,E=>{E&&lt?(S=Vf(),S.run(()=>{Nk(e,a,{activatorEl:i,activatorEvents:m})})):S&&S.stop()},{flush:"post",immediate:!0}),Jn(()=>{S==null||S.stop()}),{activatorEl:i,activatorRef:x,target:_,targetEl:w,targetRef:b,activatorEvents:m,contentEvents:g,scrimEvents:y}}function Nk(e,n,t){let{activatorEl:r,activatorEvents:o}=t;je(()=>e.activator,(u,c)=>{if(c&&u!==c){const l=s(c);l&&i(l)}u&&wr(()=>a())},{immediate:!0}),je(()=>e.activatorProps,()=>{a()}),Jn(()=>{i()});function a(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;u&&IC(u,Et(o.value,c))}function i(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;u&&AC(u,Et(o.value,c))}function s(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const c=T0(u,n);return r.value=(c==null?void 0:c.nodeType)===Node.ELEMENT_NODE?c:void 0,r.value}}function T0(e,n){var r,o;if(!e)return;let t;if(e==="parent"){let a=(o=(r=n==null?void 0:n.proxy)==null?void 0:r.$el)==null?void 0:o.parentNode;for(;a!=null&&a.hasAttribute("data-no-activator");)a=a.parentNode;t=a}else typeof e=="string"?t=document.querySelector(e):"$el"in e?t=e.$el:t=e;return t}function Ok(){if(!lt)return Je(!1);const{ssr:e}=gS();if(e){const n=Je(!1);return jt(()=>{n.value=!0}),n}else return Je(!0)}const Mk=Ae({eager:Boolean},"lazy");function Bk(e,n){const t=Je(!1),r=Y(()=>t.value||e.eager||n.value);je(n,()=>t.value=!0);function o(){e.eager||(t.value=!1)}return{isBooted:t,hasContent:r,onAfterLeave:o}}function D0(){const n=Mt("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const wv=Symbol.for("vuetify:stack"),Za=Ft([]);function Lk(e,n,t){const r=Mt("useStack"),o=!t,a=bt(wv,void 0),i=Ft({activeChildren:new Set});Rn(wv,i);const s=Je(+n.value);qi(e,()=>{var f;const l=(f=Za.at(-1))==null?void 0:f[1];s.value=l?l+10:+n.value,o&&Za.push([r.uid,s.value]),a==null||a.activeChildren.add(r.uid),Jn(()=>{if(o){const d=Ge(Za).findIndex(h=>h[0]===r.uid);Za.splice(d,1)}a==null||a.activeChildren.delete(r.uid)})});const u=Je(!0);o&&zr(()=>{var f;const l=((f=Za.at(-1))==null?void 0:f[0])===r.uid;setTimeout(()=>u.value=l)});const c=Y(()=>!i.activeChildren.size);return{globalTop:zi(u),localTop:c,stackStyles:Y(()=>({zIndex:s.value}))}}function Vk(e){return{teleportTarget:Y(()=>{const t=e();if(t===!0||!lt)return;const r=t===!1?document.body:typeof t=="string"?document.querySelector(t):t;if(r==null)return;let o=[...r.children].find(a=>a.matches(".v-overlay-container"));return o||(o=document.createElement("div"),o.className="v-overlay-container",r.appendChild(o)),o})}}function Wk(){return!0}function F0(e,n,t){if(!e||P0(e,t)===!1)return!1;const r=Hy(n);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===e.target)return!1;const o=(typeof t.value=="object"&&t.value.include||(()=>[]))();return o.push(n),!o.some(a=>a==null?void 0:a.contains(e.target))}function P0(e,n){return(typeof n.value=="object"&&n.value.closeConditional||Wk)(e)}function Uk(e,n,t){const r=typeof t.value=="function"?t.value:t.value.handler;e.shadowTarget=e.target,n._clickOutside.lastMousedownWasOutside&&F0(e,n,t)&&setTimeout(()=>{P0(e,t)&&r&&r(e)},0)}function _v(e,n){const t=Hy(e);n(document),typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&n(t)}const zk={mounted(e,n){const t=o=>Uk(o,e,n),r=o=>{e._clickOutside.lastMousedownWasOutside=F0(o,e,n)};_v(e,o=>{o.addEventListener("click",t,!0),o.addEventListener("mousedown",r,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[n.instance.$.uid]={onClick:t,onMousedown:r}},beforeUnmount(e,n){e._clickOutside&&(_v(e,t=>{var a;if(!t||!((a=e._clickOutside)!=null&&a[n.instance.$.uid]))return;const{onClick:r,onMousedown:o}=e._clickOutside[n.instance.$.uid];t.removeEventListener("click",r,!0),t.removeEventListener("mousedown",o,!0)}),delete e._clickOutside[n.instance.$.uid])}};function Hk(e){const{modelValue:n,color:t,...r}=e;return V(Ho,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&V("div",Et({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},r),null)]})}const N0=Ae({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Fk(),...mt(),...Ha(),...Mk(),...yk(),...Ek(),...Er(),...a0()},"VOverlay"),Cv=Ze()({name:"VOverlay",directives:{ClickOutside:zk},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...N0()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{slots:t,attrs:r,emit:o}=n;const a=Mt("VOverlay"),i=ve(),s=ve(),u=ve(),c=Ko(e,"modelValue"),l=Y({get:()=>c.value,set:de=>{de&&e.disabled||(c.value=de)}}),{themeClasses:f}=Sr(e),{rtlClasses:d,isRtl:h}=za(),{hasContent:p,onAfterLeave:v}=Bk(e,l),m=Ea(Y(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:g,localTop:y,stackStyles:x}=Lk(l,$t(e,"zIndex"),e._disableGlobalStack),{activatorEl:b,activatorRef:_,target:w,targetEl:S,targetRef:E,activatorEvents:C,contentEvents:k,scrimEvents:I}=Pk(e,{isActive:l,isTop:y,contentEl:u}),{teleportTarget:R}=Vk(()=>{var te,ne,le;const de=e.attach||e.contained;if(de)return de;const $=((te=b==null?void 0:b.value)==null?void 0:te.getRootNode())||((le=(ne=a.proxy)==null?void 0:ne.$el)==null?void 0:le.getRootNode());return $ instanceof ShadowRoot?$:!1}),{dimensionStyles:T}=$a(e),N=Ok(),{scopeId:B}=D0();je(()=>e.disabled,de=>{de&&(l.value=!1)});const{contentStyles:H,updateLocation:z}=bk(e,{isRtl:h,contentEl:u,target:w,isActive:l});Sk(e,{root:i,contentEl:u,targetEl:S,isActive:l,updateLocation:z});function W(de){o("click:outside",de),e.persistent?pe():l.value=!1}function j(de){return l.value&&g.value&&(!e.scrim||de.target===s.value||de instanceof MouseEvent&&de.shadowTarget===s.value)}lt&&je(l,de=>{de?window.addEventListener("keydown",Z):window.removeEventListener("keydown",Z)},{immediate:!0}),Dn(()=>{lt&&window.removeEventListener("keydown",Z)});function Z(de){var $,te;de.key==="Escape"&&g.value&&(e.persistent?pe():(l.value=!1,($=u.value)!=null&&$.contains(document.activeElement)&&((te=b.value)==null||te.focus())))}const ae=ok();qi(()=>e.closeOnBack,()=>{ak(ae,de=>{g.value&&l.value?(de(!1),e.persistent?pe():l.value=!1):de()})});const se=ve();je(()=>l.value&&(e.absolute||e.contained)&&R.value==null,de=>{if(de){const $=iE(i.value);$&&$!==document.scrollingElement&&(se.value=$.scrollTop)}});function pe(){e.noClickAnimation||u.value&&ii(u.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:ql})}function Te(){o("afterEnter")}function Re(){v(),o("afterLeave")}return gt(()=>{var de;return V(qe,null,[(de=t.activator)==null?void 0:de.call(t,{isActive:l.value,targetRef:E,props:Et({ref:_},C.value,e.activatorProps)}),N.value&&p.value&&V(Fw,{disabled:!R.value,to:R.value},{default:()=>[V("div",Et({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":l.value,"v-overlay--contained":e.contained},f.value,d.value,e.class],style:[x.value,{"--v-overlay-opacity":e.opacity,top:Ue(se.value)},e.style],ref:i},B,r),[V(Hk,Et({color:m,modelValue:l.value&&!!e.scrim,ref:s},I.value),null),V(si,{appear:!0,persisted:!0,transition:e.transition,target:w.value,onAfterEnter:Te,onAfterLeave:Re},{default:()=>{var $;return[un(V("div",Et({ref:u,class:["v-overlay__content",e.contentClass],style:[T.value,H.value]},k.value,e.contentProps),[($=t.default)==null?void 0:$.call(t,{isActive:l})]),[[fy,l.value],[Jf("click-outside"),{handler:W,closeConditional:j,include:()=>[b.value]}]])]}})])]})])}),{activatorEl:b,scrimEl:s,target:w,animateClick:pe,contentEl:u,globalTop:g,localTop:y,updateLocation:z}}}),Xc=Symbol("Forwarded refs");function Yc(e,n){let t=e;for(;t;){const r=Reflect.getOwnPropertyDescriptor(t,n);if(r)return r;t=Object.getPrototypeOf(t)}}function O0(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e[Xc]=t,new Proxy(e,{get(o,a){if(Reflect.has(o,a))return Reflect.get(o,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const i of t)if(i.value&&Reflect.has(i.value,a)){const s=Reflect.get(i.value,a);return typeof s=="function"?s.bind(i.value):s}}},has(o,a){if(Reflect.has(o,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const i of t)if(i.value&&Reflect.has(i.value,a))return!0;return!1},set(o,a,i){if(Reflect.has(o,a))return Reflect.set(o,a,i);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const s of t)if(s.value&&Reflect.has(s.value,a))return Reflect.set(s.value,a,i);return!1},getOwnPropertyDescriptor(o,a){var s;const i=Reflect.getOwnPropertyDescriptor(o,a);if(i)return i;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const u of t){if(!u.value)continue;const c=Yc(u.value,a)??("_"in u.value?Yc((s=u.value._)==null?void 0:s.setupState,a):void 0);if(c)return c}for(const u of t){const c=u.value&&u.value[Xc];if(!c)continue;const l=c.slice();for(;l.length;){const f=l.shift(),d=Yc(f.value,a);if(d)return d;const h=f.value&&f.value[Xc];h&&l.push(...h)}}}}})}const $k=Ae({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...N0({origin:"center center",scrollStrategy:"block",transition:{component:TS},zIndex:2400})},"VDialog"),jk=Ze()({name:"VDialog",props:$k(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{emit:t,slots:r}=n;const o=Ko(e,"modelValue"),{scopeId:a}=D0(),i=ve();function s(l){var h,p;const f=l.relatedTarget,d=l.target;if(f!==d&&((h=i.value)!=null&&h.contentEl)&&((p=i.value)!=null&&p.globalTop)&&![document,i.value.contentEl].includes(d)&&!i.value.contentEl.contains(d)){const v=EC(i.value.contentEl);if(!v.length)return;const m=v[0],g=v[v.length-1];f===m?g.focus():m.focus()}}Dn(()=>{document.removeEventListener("focusin",s)}),lt&&je(()=>o.value&&e.retainFocus,l=>{l?document.addEventListener("focusin",s):document.removeEventListener("focusin",s)},{immediate:!0});function u(){var l;t("afterEnter"),(l=i.value)!=null&&l.contentEl&&!i.value.contentEl.contains(document.activeElement)&&i.value.contentEl.focus({preventScroll:!0})}function c(){t("afterLeave")}return je(o,async l=>{var f;l||(await wr(),(f=i.value.activatorEl)==null||f.focus({preventScroll:!0}))}),gt(()=>{const l=Cv.filterProps(e),f=Et({"aria-haspopup":"dialog"},e.activatorProps),d=Et({tabindex:-1},e.contentProps);return V(Cv,Et({ref:i,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},l,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,"aria-modal":"true",activatorProps:f,contentProps:d,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:u,onAfterLeave:c},a),{activator:r.activator,default:function(){for(var h=arguments.length,p=new Array(h),v=0;v<h;v++)p[v]=arguments[v];return V(jn,{root:"VDialog"},{default:()=>{var m;return[(m=r.default)==null?void 0:m.call(r,...p)]}})}})}),O0({},i)}}),Gk=Ze()({name:"VCardActions",props:mt(),setup(e,n){let{slots:t}=n;return Yu({VBtn:{slim:!0,variant:"text"}}),gt(()=>{var r;return V("div",{class:["v-card-actions",e.class],style:e.style},[(r=t.default)==null?void 0:r.call(t)])}),{}}}),qk=Ae({opacity:[Number,String],...mt(),...ln()},"VCardSubtitle"),Kk=Ze()({name:"VCardSubtitle",props:qk(),setup(e,n){let{slots:t}=n;return gt(()=>V(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},t)),{}}}),M0=rE("v-card-title"),Xk=Ae({appendAvatar:String,appendIcon:Vr,prependAvatar:String,prependIcon:Vr,subtitle:[String,Number],title:[String,Number],...mt(),...Yi()},"VCardItem"),Yk=Ze()({name:"VCardItem",props:Xk(),setup(e,n){let{slots:t}=n;return gt(()=>{var c;const r=!!(e.prependAvatar||e.prependIcon),o=!!(r||t.prepend),a=!!(e.appendAvatar||e.appendIcon),i=!!(a||t.append),s=!!(e.title!=null||t.title),u=!!(e.subtitle!=null||t.subtitle);return V("div",{class:["v-card-item",e.class],style:e.style},[o&&V("div",{key:"prepend",class:"v-card-item__prepend"},[t.prepend?V(jn,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},t.prepend):V(qe,null,[e.prependAvatar&&V(gv,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&V(Gn,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),V("div",{class:"v-card-item__content"},[s&&V(M0,{key:"title"},{default:()=>{var l;return[((l=t.title)==null?void 0:l.call(t))??e.title]}}),u&&V(Kk,{key:"subtitle"},{default:()=>{var l;return[((l=t.subtitle)==null?void 0:l.call(t))??e.subtitle]}}),(c=t.default)==null?void 0:c.call(t)]),i&&V("div",{key:"append",class:"v-card-item__append"},[t.append?V(jn,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},t.append):V(qe,null,[e.appendIcon&&V(Gn,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&V(gv,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Jk=Ae({opacity:[Number,String],...mt(),...ln()},"VCardText"),B0=Ze()({name:"VCardText",props:Jk(),setup(e,n){let{slots:t}=n;return gt(()=>V(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},t)),{}}}),Qk=Ae({appendAvatar:String,appendIcon:Vr,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Vr,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...Ki(),...mt(),...Yi(),...Ha(),...ec(),...h0(),...md(),...v0(),...Xo(),...y0(),...ln(),...Er(),...rc({variant:"elevated"})},"VCard"),yd=Ze()({name:"VCard",directives:{Ripple:R0},props:Qk(),setup(e,n){let{attrs:t,slots:r}=n;const{themeClasses:o}=Sr(e),{borderClasses:a}=Xi(e),{colorClasses:i,colorStyles:s,variantClasses:u}=vd(e),{densityClasses:c}=nc(e),{dimensionStyles:l}=$a(e),{elevationClasses:f}=tc(e),{loaderClasses:d}=p0(e),{locationStyles:h}=gd(e),{positionClasses:p}=m0(e),{roundedClasses:v}=Yo(e),m=g0(e,t),g=Y(()=>e.link!==!1&&m.isLink.value),y=Y(()=>!e.disabled&&e.link!==!1&&(e.link||m.isClickable.value));return gt(()=>{const x=g.value?"a":e.tag,b=!!(r.title||e.title!=null),_=!!(r.subtitle||e.subtitle!=null),w=b||_,S=!!(r.append||e.appendAvatar||e.appendIcon),E=!!(r.prepend||e.prependAvatar||e.prependIcon),C=!!(r.image||e.image),k=w||E||S,I=!!(r.text||e.text!=null);return un(V(x,Et({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":y.value},o.value,a.value,i.value,c.value,f.value,d.value,p.value,v.value,u.value,e.class],style:[s.value,l.value,h.value,e.style],onClick:y.value&&m.navigate,tabindex:e.disabled?-1:void 0},m.linkProps),{default:()=>{var R;return[C&&V("div",{key:"image",class:"v-card__image"},[r.image?V(jn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):V(Ti,{key:"image-img",cover:!0,src:e.image},null)]),V(tk,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:r.loader}),k&&V(Yk,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),I&&V(B0,{key:"text"},{default:()=>{var T;return[((T=r.text)==null?void 0:T.call(r))??e.text]}}),(R=r.default)==null?void 0:R.call(r),r.actions&&V(Gk,null,{default:r.actions}),pd(y.value,"v-card")]}}),[[Jf("ripple"),y.value&&e.ripple]])}),{}}}),Zk=Ae({fluid:{type:Boolean,default:!1},...mt(),...Ha(),...ln()},"VContainer"),mi=Ze()({name:"VContainer",props:Zk(),setup(e,n){let{slots:t}=n;const{rtlClasses:r}=za(),{dimensionStyles:o}=$a(e);return gt(()=>V(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},r.value,e.class],style:[o.value,e.style]},t)),{}}}),L0=Qu.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),V0=Qu.reduce((e,n)=>{const t="offset"+Wr(n);return e[t]={type:[String,Number],default:null},e},{}),W0=Qu.reduce((e,n)=>{const t="order"+Wr(n);return e[t]={type:[String,Number],default:null},e},{}),Ev={col:Object.keys(L0),offset:Object.keys(V0),order:Object.keys(W0)};function eR(e,n,t){let r=e;if(!(t==null||t===!1)){if(n){const o=n.replace(e,"");r+=`-${o}`}return e==="col"&&(r="v-"+r),e==="col"&&(t===""||t===!0)||(r+=`-${t}`),r.toLowerCase()}}const tR=["auto","start","end","center","baseline","stretch"],nR=Ae({cols:{type:[Boolean,String,Number],default:!1},...L0,offset:{type:[String,Number],default:null},...V0,order:{type:[String,Number],default:null},...W0,alignSelf:{type:String,default:null,validator:e=>tR.includes(e)},...mt(),...ln()},"VCol"),Ws=Ze()({name:"VCol",props:nR(),setup(e,n){let{slots:t}=n;const r=Y(()=>{const o=[];let a;for(a in Ev)Ev[a].forEach(s=>{const u=e[s],c=eR(a,s,u);c&&o.push(c)});const i=o.some(s=>s.startsWith("v-col-"));return o.push({"v-col":!i||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),o});return()=>{var o;return _r(e.tag,{class:[r.value,e.class],style:e.style},(o=t.default)==null?void 0:o.call(t))}}}),bd=["start","end","center"],U0=["space-between","space-around","space-evenly"];function xd(e,n){return Qu.reduce((t,r)=>{const o=e+Wr(r);return t[o]=n(),t},{})}const rR=[...bd,"baseline","stretch"],z0=e=>rR.includes(e),H0=xd("align",()=>({type:String,default:null,validator:z0})),oR=[...bd,...U0],$0=e=>oR.includes(e),j0=xd("justify",()=>({type:String,default:null,validator:$0})),aR=[...bd,...U0,"stretch"],G0=e=>aR.includes(e),q0=xd("alignContent",()=>({type:String,default:null,validator:G0})),Sv={align:Object.keys(H0),justify:Object.keys(j0),alignContent:Object.keys(q0)},iR={align:"align",justify:"justify",alignContent:"align-content"};function sR(e,n,t){let r=iR[e];if(t!=null){if(n){const o=n.replace(e,"");r+=`-${o}`}return r+=`-${t}`,r.toLowerCase()}}const uR=Ae({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:z0},...H0,justify:{type:String,default:null,validator:$0},...j0,alignContent:{type:String,default:null,validator:G0},...q0,...mt(),...ln()},"VRow"),K0=Ze()({name:"VRow",props:uR(),setup(e,n){let{slots:t}=n;const r=Y(()=>{const o=[];let a;for(a in Sv)Sv[a].forEach(i=>{const s=e[i],u=sR(a,i,s);u&&o.push(u)});return o.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),o});return()=>{var o;return _r(e.tag,{class:["v-row",r.value,e.class],style:e.style},(o=t.default)==null?void 0:o.call(t))}}}),cR=Ae({...mt(),...vk()},"VForm"),lR=Ze()({name:"VForm",props:cR(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:r}=n;const o=mk(e),a=ve();function i(u){u.preventDefault(),o.reset()}function s(u){const c=u,l=o.validate();c.then=l.then.bind(l),c.catch=l.catch.bind(l),c.finally=l.finally.bind(l),r("submit",c),c.defaultPrevented||l.then(f=>{var h;let{valid:d}=f;d&&((h=a.value)==null||h.submit())}),c.preventDefault()}return gt(()=>{var u;return V("form",{ref:a,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:s},[(u=t.default)==null?void 0:u.call(t,o)])}),O0(o,a)}}),Bt=(e,n)=>{const t=e.__vccOpts||e;for(const[r,o]of n)t[r]=o;return t},fR=cn({__name:"MainView",setup(e){const n=ve(""),t=Cr();jt(()=>{const i=localStorage.getItem("ticketNumber");n.value=i||"Not available"});const r=()=>{t.push("/my-photos")},o=()=>{t.push("/")},a=()=>{t.push("/capture")};return(i,s)=>(xe(),Tn(st(mi),{class:"d-flex justify-center align-center",style:{height:"100vh","max-width":"480px",margin:"0 auto"}},{default:Ne(()=>[V(st(yd),{elevation:"3",outlined:""},{default:Ne(()=>[V(st(M0),{class:"text-h5 justify-center"},{default:Ne(()=>[wt(" Hi, "+at(n.value),1)]),_:1}),V(st(B0),null,{default:Ne(()=>[V(lR,null,{default:Ne(()=>[V(st(K0),null,{default:Ne(()=>[V(st(Ws),{cols:"12"},{default:Ne(()=>[V(st(so),{block:"",color:"primary",onClick:a,class:"mt-4"},{default:Ne(()=>s[0]||(s[0]=[wt(" Capture Photo ")])),_:1})]),_:1}),V(st(Ws),{cols:"12"},{default:Ne(()=>[V(st(so),{block:"",color:"primary",onClick:r,class:"mt-4"},{default:Ne(()=>s[1]||(s[1]=[wt(" Show My Photos ")])),_:1})]),_:1}),V(st(Ws),{cols:"12"},{default:Ne(()=>[V(st(so),{block:"",color:"primary",onClick:o,class:"mt-4"},{default:Ne(()=>s[2]||(s[2]=[wt(" Logout ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),dR=Bt(fR,[["__scopeId","data-v-aae16e22"]]);function X0(e,n){return function(){return e.apply(n,arguments)}}const{toString:hR}=Object.prototype,{getPrototypeOf:wd}=Object,ic=(e=>n=>{const t=hR.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Qn=e=>(e=e.toLowerCase(),n=>ic(n)===e),sc=e=>n=>typeof n===e,{isArray:ja}=Array,Pi=sc("undefined");function pR(e){return e!==null&&!Pi(e)&&e.constructor!==null&&!Pi(e.constructor)&&In(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Y0=Qn("ArrayBuffer");function vR(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Y0(e.buffer),n}const mR=sc("string"),In=sc("function"),J0=sc("number"),uc=e=>e!==null&&typeof e=="object",gR=e=>e===!0||e===!1,Us=e=>{if(ic(e)!=="object")return!1;const n=wd(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yR=Qn("Date"),bR=Qn("File"),xR=Qn("Blob"),wR=Qn("FileList"),_R=e=>uc(e)&&In(e.pipe),CR=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||In(e.append)&&((n=ic(e))==="formdata"||n==="object"&&In(e.toString)&&e.toString()==="[object FormData]"))},ER=Qn("URLSearchParams"),[SR,kR,RR,IR]=["ReadableStream","Request","Response","Headers"].map(Qn),AR=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ji(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),ja(e))for(r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else{const a=t?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let s;for(r=0;r<i;r++)s=a[r],n.call(null,e[s],s,e)}}function Q0(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,o;for(;r-- >0;)if(o=t[r],n===o.toLowerCase())return o;return null}const Fo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Z0=e=>!Pi(e)&&e!==Fo;function of(){const{caseless:e}=Z0(this)&&this||{},n={},t=(r,o)=>{const a=e&&Q0(n,o)||o;Us(n[a])&&Us(r)?n[a]=of(n[a],r):Us(r)?n[a]=of({},r):ja(r)?n[a]=r.slice():n[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Ji(arguments[r],t);return n}const TR=(e,n,t,{allOwnKeys:r}={})=>(Ji(n,(o,a)=>{t&&In(o)?e[a]=X0(o,t):e[a]=o},{allOwnKeys:r}),e),DR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),FR=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},PR=(e,n,t,r)=>{let o,a,i;const s={};if(n=n||{},e==null)return n;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)i=o[a],(!r||r(i,e,n))&&!s[i]&&(n[i]=e[i],s[i]=!0);e=t!==!1&&wd(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},NR=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},OR=e=>{if(!e)return null;if(ja(e))return e;let n=e.length;if(!J0(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},MR=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&wd(Uint8Array)),BR=(e,n)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const a=o.value;n.call(e,a[0],a[1])}},LR=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},VR=Qn("HTMLFormElement"),WR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),kv=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),UR=Qn("RegExp"),eb=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};Ji(t,(o,a)=>{let i;(i=n(o,a,e))!==!1&&(r[a]=i||o)}),Object.defineProperties(e,r)},zR=e=>{eb(e,(n,t)=>{if(In(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(In(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},HR=(e,n)=>{const t={},r=o=>{o.forEach(a=>{t[a]=!0})};return ja(e)?r(e):r(String(e).split(n)),t},$R=()=>{},jR=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function GR(e){return!!(e&&In(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const qR=e=>{const n=new Array(10),t=(r,o)=>{if(uc(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[o]=r;const a=ja(r)?[]:{};return Ji(r,(i,s)=>{const u=t(i,o+1);!Pi(u)&&(a[s]=u)}),n[o]=void 0,a}}return r};return t(e,0)},KR=Qn("AsyncFunction"),XR=e=>e&&(uc(e)||In(e))&&In(e.then)&&In(e.catch),tb=((e,n)=>e?setImmediate:n?((t,r)=>(Fo.addEventListener("message",({source:o,data:a})=>{o===Fo&&a===t&&r.length&&r.shift()()},!1),o=>{r.push(o),Fo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",In(Fo.postMessage)),YR=typeof queueMicrotask<"u"?queueMicrotask.bind(Fo):typeof process<"u"&&process.nextTick||tb,X={isArray:ja,isArrayBuffer:Y0,isBuffer:pR,isFormData:CR,isArrayBufferView:vR,isString:mR,isNumber:J0,isBoolean:gR,isObject:uc,isPlainObject:Us,isReadableStream:SR,isRequest:kR,isResponse:RR,isHeaders:IR,isUndefined:Pi,isDate:yR,isFile:bR,isBlob:xR,isRegExp:UR,isFunction:In,isStream:_R,isURLSearchParams:ER,isTypedArray:MR,isFileList:wR,forEach:Ji,merge:of,extend:TR,trim:AR,stripBOM:DR,inherits:FR,toFlatObject:PR,kindOf:ic,kindOfTest:Qn,endsWith:NR,toArray:OR,forEachEntry:BR,matchAll:LR,isHTMLForm:VR,hasOwnProperty:kv,hasOwnProp:kv,reduceDescriptors:eb,freezeMethods:zR,toObjectSet:HR,toCamelCase:WR,noop:$R,toFiniteNumber:jR,findKey:Q0,global:Fo,isContextDefined:Z0,isSpecCompliantForm:GR,toJSONObject:qR,isAsyncFn:KR,isThenable:XR,setImmediate:tb,asap:YR};function Le(e,n,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}X.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const nb=Le.prototype,rb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rb[e]={value:e}});Object.defineProperties(Le,rb);Object.defineProperty(nb,"isAxiosError",{value:!0});Le.from=(e,n,t,r,o,a)=>{const i=Object.create(nb);return X.toFlatObject(e,i,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Le.call(i,e.message,n,t,r,o),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const JR=null;function af(e){return X.isPlainObject(e)||X.isArray(e)}function ob(e){return X.endsWith(e,"[]")?e.slice(0,-2):e}function Rv(e,n,t){return e?e.concat(n).map(function(o,a){return o=ob(o),!t&&a?"["+o+"]":o}).join(t?".":""):n}function QR(e){return X.isArray(e)&&!e.some(af)}const ZR=X.toFlatObject(X,{},null,function(n){return/^is[A-Z]/.test(n)});function cc(e,n,t){if(!X.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=X.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,m){return!X.isUndefined(m[v])});const r=t.metaTokens,o=t.visitor||l,a=t.dots,i=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(n);if(!X.isFunction(o))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(X.isDate(p))return p.toISOString();if(!u&&X.isBlob(p))throw new Le("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(p)||X.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,v,m){let g=p;if(p&&!m&&typeof p=="object"){if(X.endsWith(v,"{}"))v=r?v:v.slice(0,-2),p=JSON.stringify(p);else if(X.isArray(p)&&QR(p)||(X.isFileList(p)||X.endsWith(v,"[]"))&&(g=X.toArray(p)))return v=ob(v),g.forEach(function(x,b){!(X.isUndefined(x)||x===null)&&n.append(i===!0?Rv([v],b,a):i===null?v:v+"[]",c(x))}),!1}return af(p)?!0:(n.append(Rv(m,v,a),c(p)),!1)}const f=[],d=Object.assign(ZR,{defaultVisitor:l,convertValue:c,isVisitable:af});function h(p,v){if(!X.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(p),X.forEach(p,function(g,y){(!(X.isUndefined(g)||g===null)&&o.call(n,g,X.isString(y)?y.trim():y,v,d))===!0&&h(g,v?v.concat(y):[y])}),f.pop()}}if(!X.isObject(e))throw new TypeError("data must be an object");return h(e),n}function Iv(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function _d(e,n){this._pairs=[],e&&cc(e,this,n)}const ab=_d.prototype;ab.append=function(n,t){this._pairs.push([n,t])};ab.toString=function(n){const t=n?function(r){return n.call(this,r,Iv)}:Iv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function eI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ib(e,n,t){if(!n)return e;const r=t&&t.encode||eI;X.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(n,t):a=X.isURLSearchParams(n)?n.toString():new _d(n,t).toString(r),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Av{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){X.forEach(this.handlers,function(r){r!==null&&n(r)})}}const sb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tI=typeof URLSearchParams<"u"?URLSearchParams:_d,nI=typeof FormData<"u"?FormData:null,rI=typeof Blob<"u"?Blob:null,oI={isBrowser:!0,classes:{URLSearchParams:tI,FormData:nI,Blob:rI},protocols:["http","https","file","blob","url","data"]},Cd=typeof window<"u"&&typeof document<"u",sf=typeof navigator=="object"&&navigator||void 0,aI=Cd&&(!sf||["ReactNative","NativeScript","NS"].indexOf(sf.product)<0),iI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sI=Cd&&window.location.href||"http://localhost",uI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cd,hasStandardBrowserEnv:aI,hasStandardBrowserWebWorkerEnv:iI,navigator:sf,origin:sI},Symbol.toStringTag,{value:"Module"})),Jt={...uI,...oI};function cI(e,n){return cc(e,new Jt.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,a){return Jt.isNode&&X.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},n))}function lI(e){return X.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function fI(e){const n={},t=Object.keys(e);let r;const o=t.length;let a;for(r=0;r<o;r++)a=t[r],n[a]=e[a];return n}function ub(e){function n(t,r,o,a){let i=t[a++];if(i==="__proto__")return!0;const s=Number.isFinite(+i),u=a>=t.length;return i=!i&&X.isArray(o)?o.length:i,u?(X.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!s):((!o[i]||!X.isObject(o[i]))&&(o[i]=[]),n(t,r,o[i],a)&&X.isArray(o[i])&&(o[i]=fI(o[i])),!s)}if(X.isFormData(e)&&X.isFunction(e.entries)){const t={};return X.forEachEntry(e,(r,o)=>{n(lI(r),o,t,0)}),t}return null}function dI(e,n,t){if(X.isString(e))try{return(n||JSON.parse)(e),X.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const Qi={transitional:sb,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,a=X.isObject(n);if(a&&X.isHTMLForm(n)&&(n=new FormData(n)),X.isFormData(n))return o?JSON.stringify(ub(n)):n;if(X.isArrayBuffer(n)||X.isBuffer(n)||X.isStream(n)||X.isFile(n)||X.isBlob(n)||X.isReadableStream(n))return n;if(X.isArrayBufferView(n))return n.buffer;if(X.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return cI(n,this.formSerializer).toString();if((s=X.isFileList(n))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return cc(s?{"files[]":n}:n,u&&new u,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),dI(n)):n}],transformResponse:[function(n){const t=this.transitional||Qi.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(X.isResponse(n)||X.isReadableStream(n))return n;if(n&&X.isString(n)&&(r&&!this.responseType||o)){const i=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(n)}catch(s){if(i)throw s.name==="SyntaxError"?Le.from(s,Le.ERR_BAD_RESPONSE,this,null,this.response):s}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],e=>{Qi.headers[e]={}});const hI=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pI=e=>{const n={};let t,r,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),t=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!t||n[t]&&hI[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},Tv=Symbol("internals");function ei(e){return e&&String(e).trim().toLowerCase()}function zs(e){return e===!1||e==null?e:X.isArray(e)?e.map(zs):String(e)}function vI(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const mI=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Jc(e,n,t,r,o){if(X.isFunction(r))return r.call(this,n,t);if(o&&(n=t),!!X.isString(n)){if(X.isString(r))return n.indexOf(r)!==-1;if(X.isRegExp(r))return r.test(n)}}function gI(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function yI(e,n){const t=X.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(o,a,i){return this[r].call(this,n,o,a,i)},configurable:!0})})}let hn=class{constructor(n){n&&this.set(n)}set(n,t,r){const o=this;function a(s,u,c){const l=ei(u);if(!l)throw new Error("header name must be a non-empty string");const f=X.findKey(o,l);(!f||o[f]===void 0||c===!0||c===void 0&&o[f]!==!1)&&(o[f||u]=zs(s))}const i=(s,u)=>X.forEach(s,(c,l)=>a(c,l,u));if(X.isPlainObject(n)||n instanceof this.constructor)i(n,t);else if(X.isString(n)&&(n=n.trim())&&!mI(n))i(pI(n),t);else if(X.isHeaders(n))for(const[s,u]of n.entries())a(u,s,r);else n!=null&&a(t,n,r);return this}get(n,t){if(n=ei(n),n){const r=X.findKey(this,n);if(r){const o=this[r];if(!t)return o;if(t===!0)return vI(o);if(X.isFunction(t))return t.call(this,o,r);if(X.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=ei(n),n){const r=X.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||Jc(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let o=!1;function a(i){if(i=ei(i),i){const s=X.findKey(r,i);s&&(!t||Jc(r,r[s],s,t))&&(delete r[s],o=!0)}}return X.isArray(n)?n.forEach(a):a(n),o}clear(n){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const a=t[r];(!n||Jc(this,this[a],a,n,!0))&&(delete this[a],o=!0)}return o}normalize(n){const t=this,r={};return X.forEach(this,(o,a)=>{const i=X.findKey(r,a);if(i){t[i]=zs(o),delete t[a];return}const s=n?gI(a):String(a).trim();s!==a&&delete t[a],t[s]=zs(o),r[s]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return X.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=n&&X.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(o=>r.set(o)),r}static accessor(n){const r=(this[Tv]=this[Tv]={accessors:{}}).accessors,o=this.prototype;function a(i){const s=ei(i);r[s]||(yI(o,i),r[s]=!0)}return X.isArray(n)?n.forEach(a):a(n),this}};hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(hn.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});X.freezeMethods(hn);function Qc(e,n){const t=this||Qi,r=n||t,o=hn.from(r.headers);let a=r.data;return X.forEach(e,function(s){a=s.call(t,a,o.normalize(),n?n.status:void 0)}),o.normalize(),a}function cb(e){return!!(e&&e.__CANCEL__)}function Ga(e,n,t){Le.call(this,e??"canceled",Le.ERR_CANCELED,n,t),this.name="CanceledError"}X.inherits(Ga,Le,{__CANCEL__:!0});function lb(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new Le("Request failed with status code "+t.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function bI(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function xI(e,n){e=e||10;const t=new Array(e),r=new Array(e);let o=0,a=0,i;return n=n!==void 0?n:1e3,function(u){const c=Date.now(),l=r[a];i||(i=c),t[o]=u,r[o]=c;let f=a,d=0;for(;f!==o;)d+=t[f++],f=f%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),c-i<n)return;const h=l&&c-l;return h?Math.round(d*1e3/h):void 0}}function wI(e,n){let t=0,r=1e3/n,o,a;const i=(c,l=Date.now())=>{t=l,o=null,a&&(clearTimeout(a),a=null),e.apply(null,c)};return[(...c)=>{const l=Date.now(),f=l-t;f>=r?i(c,l):(o=c,a||(a=setTimeout(()=>{a=null,i(o)},r-f)))},()=>o&&i(o)]}const lu=(e,n,t=3)=>{let r=0;const o=xI(50,250);return wI(a=>{const i=a.loaded,s=a.lengthComputable?a.total:void 0,u=i-r,c=o(u),l=i<=s;r=i;const f={loaded:i,total:s,progress:s?i/s:void 0,bytes:u,rate:c||void 0,estimated:c&&s&&l?(s-i)/c:void 0,event:a,lengthComputable:s!=null,[n?"download":"upload"]:!0};e(f)},t)},Dv=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},Fv=e=>(...n)=>X.asap(()=>e(...n)),_I=Jt.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Jt.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Jt.origin),Jt.navigator&&/(msie|trident)/i.test(Jt.navigator.userAgent)):()=>!0,CI=Jt.hasStandardBrowserEnv?{write(e,n,t,r,o,a){const i=[e+"="+encodeURIComponent(n)];X.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),X.isString(r)&&i.push("path="+r),X.isString(o)&&i.push("domain="+o),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function EI(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SI(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function fb(e,n,t){let r=!EI(n);return e&&r||t==!1?SI(e,n):n}const Pv=e=>e instanceof hn?{...e}:e;function $o(e,n){n=n||{};const t={};function r(c,l,f,d){return X.isPlainObject(c)&&X.isPlainObject(l)?X.merge.call({caseless:d},c,l):X.isPlainObject(l)?X.merge({},l):X.isArray(l)?l.slice():l}function o(c,l,f,d){if(X.isUndefined(l)){if(!X.isUndefined(c))return r(void 0,c,f,d)}else return r(c,l,f,d)}function a(c,l){if(!X.isUndefined(l))return r(void 0,l)}function i(c,l){if(X.isUndefined(l)){if(!X.isUndefined(c))return r(void 0,c)}else return r(void 0,l)}function s(c,l,f){if(f in n)return r(c,l);if(f in e)return r(void 0,c)}const u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(c,l,f)=>o(Pv(c),Pv(l),f,!0)};return X.forEach(Object.keys(Object.assign({},e,n)),function(l){const f=u[l]||o,d=f(e[l],n[l],l);X.isUndefined(d)&&f!==s||(t[l]=d)}),t}const db=e=>{const n=$o({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:i,auth:s}=n;n.headers=i=hn.from(i),n.url=ib(fb(n.baseURL,n.url),e.params,e.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let u;if(X.isFormData(t)){if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((u=i.getContentType())!==!1){const[c,...l]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...l].join("; "))}}if(Jt.hasStandardBrowserEnv&&(r&&X.isFunction(r)&&(r=r(n)),r||r!==!1&&_I(n.url))){const c=o&&a&&CI.read(a);c&&i.set(o,c)}return n},kI=typeof XMLHttpRequest<"u",RI=kI&&function(e){return new Promise(function(t,r){const o=db(e);let a=o.data;const i=hn.from(o.headers).normalize();let{responseType:s,onUploadProgress:u,onDownloadProgress:c}=o,l,f,d,h,p;function v(){h&&h(),p&&p(),o.cancelToken&&o.cancelToken.unsubscribe(l),o.signal&&o.signal.removeEventListener("abort",l)}let m=new XMLHttpRequest;m.open(o.method.toUpperCase(),o.url,!0),m.timeout=o.timeout;function g(){if(!m)return;const x=hn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),_={data:!s||s==="text"||s==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:x,config:e,request:m};lb(function(S){t(S),v()},function(S){r(S),v()},_),m=null}"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(g)},m.onabort=function(){m&&(r(new Le("Request aborted",Le.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new Le("Network Error",Le.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let b=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const _=o.transitional||sb;o.timeoutErrorMessage&&(b=o.timeoutErrorMessage),r(new Le(b,_.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,e,m)),m=null},a===void 0&&i.setContentType(null),"setRequestHeader"in m&&X.forEach(i.toJSON(),function(b,_){m.setRequestHeader(_,b)}),X.isUndefined(o.withCredentials)||(m.withCredentials=!!o.withCredentials),s&&s!=="json"&&(m.responseType=o.responseType),c&&([d,p]=lu(c,!0),m.addEventListener("progress",d)),u&&m.upload&&([f,h]=lu(u),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",h)),(o.cancelToken||o.signal)&&(l=x=>{m&&(r(!x||x.type?new Ga(null,e,m):x),m.abort(),m=null)},o.cancelToken&&o.cancelToken.subscribe(l),o.signal&&(o.signal.aborted?l():o.signal.addEventListener("abort",l)));const y=bI(o.url);if(y&&Jt.protocols.indexOf(y)===-1){r(new Le("Unsupported protocol "+y+":",Le.ERR_BAD_REQUEST,e));return}m.send(a||null)})},II=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,o;const a=function(c){if(!o){o=!0,s();const l=c instanceof Error?c:this.reason;r.abort(l instanceof Le?l:new Ga(l instanceof Error?l.message:l))}};let i=n&&setTimeout(()=>{i=null,a(new Le(`timeout ${n} of ms exceeded`,Le.ETIMEDOUT))},n);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>X.asap(s),u}},AI=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,o;for(;r<t;)o=r+n,yield e.slice(r,o),r=o},TI=async function*(e,n){for await(const t of DI(e))yield*AI(t,n)},DI=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},Nv=(e,n,t,r)=>{const o=TI(e,n);let a=0,i,s=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:l}=await o.next();if(c){s(),u.close();return}let f=l.byteLength;if(t){let d=a+=f;t(d)}u.enqueue(new Uint8Array(l))}catch(c){throw s(c),c}},cancel(u){return s(u),o.return()}},{highWaterMark:2})},lc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",hb=lc&&typeof ReadableStream=="function",FI=lc&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),pb=(e,...n)=>{try{return!!e(...n)}catch{return!1}},PI=hb&&pb(()=>{let e=!1;const n=new Request(Jt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),Ov=64*1024,uf=hb&&pb(()=>X.isReadableStream(new Response("").body)),fu={stream:uf&&(e=>e.body)};lc&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!fu[n]&&(fu[n]=X.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new Le(`Response type '${n}' is not supported`,Le.ERR_NOT_SUPPORT,r)})})})(new Response);const NI=async e=>{if(e==null)return 0;if(X.isBlob(e))return e.size;if(X.isSpecCompliantForm(e))return(await new Request(Jt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(X.isArrayBufferView(e)||X.isArrayBuffer(e))return e.byteLength;if(X.isURLSearchParams(e)&&(e=e+""),X.isString(e))return(await FI(e)).byteLength},OI=async(e,n)=>{const t=X.toFiniteNumber(e.getContentLength());return t??NI(n)},MI=lc&&(async e=>{let{url:n,method:t,data:r,signal:o,cancelToken:a,timeout:i,onDownloadProgress:s,onUploadProgress:u,responseType:c,headers:l,withCredentials:f="same-origin",fetchOptions:d}=db(e);c=c?(c+"").toLowerCase():"text";let h=II([o,a&&a.toAbortSignal()],i),p;const v=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let m;try{if(u&&PI&&t!=="get"&&t!=="head"&&(m=await OI(l,r))!==0){let _=new Request(n,{method:"POST",body:r,duplex:"half"}),w;if(X.isFormData(r)&&(w=_.headers.get("content-type"))&&l.setContentType(w),_.body){const[S,E]=Dv(m,lu(Fv(u)));r=Nv(_.body,Ov,S,E)}}X.isString(f)||(f=f?"include":"omit");const g="credentials"in Request.prototype;p=new Request(n,{...d,signal:h,method:t.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:g?f:void 0});let y=await fetch(p);const x=uf&&(c==="stream"||c==="response");if(uf&&(s||x&&v)){const _={};["status","statusText","headers"].forEach(C=>{_[C]=y[C]});const w=X.toFiniteNumber(y.headers.get("content-length")),[S,E]=s&&Dv(w,lu(Fv(s),!0))||[];y=new Response(Nv(y.body,Ov,S,()=>{E&&E(),v&&v()}),_)}c=c||"text";let b=await fu[X.findKey(fu,c)||"text"](y,e);return!x&&v&&v(),await new Promise((_,w)=>{lb(_,w,{data:b,headers:hn.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:p})})}catch(g){throw v&&v(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,e,p),{cause:g.cause||g}):Le.from(g,g&&g.code,e,p)}}),cf={http:JR,xhr:RI,fetch:MI};X.forEach(cf,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const Mv=e=>`- ${e}`,BI=e=>X.isFunction(e)||e===null||e===!1,vb={getAdapter:e=>{e=X.isArray(e)?e:[e];const{length:n}=e;let t,r;const o={};for(let a=0;a<n;a++){t=e[a];let i;if(r=t,!BI(t)&&(r=cf[(i=String(t)).toLowerCase()],r===void 0))throw new Le(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+a]=r}if(!r){const a=Object.entries(o).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=n?a.length>1?`since :
`+a.map(Mv).join(`
`):" "+Mv(a[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:cf};function Zc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ga(null,e)}function Bv(e){return Zc(e),e.headers=hn.from(e.headers),e.data=Qc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vb.getAdapter(e.adapter||Qi.adapter)(e).then(function(r){return Zc(e),r.data=Qc.call(e,e.transformResponse,r),r.headers=hn.from(r.headers),r},function(r){return cb(r)||(Zc(e),r&&r.response&&(r.response.data=Qc.call(e,e.transformResponse,r.response),r.response.headers=hn.from(r.response.headers))),Promise.reject(r)})}const mb="1.8.1",fc={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{fc[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const Lv={};fc.transitional=function(n,t,r){function o(a,i){return"[Axios v"+mb+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,s)=>{if(n===!1)throw new Le(o(i," has been removed"+(t?" in "+t:"")),Le.ERR_DEPRECATED);return t&&!Lv[i]&&(Lv[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(a,i,s):!0}};fc.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function LI(e,n,t){if(typeof e!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const a=r[o],i=n[a];if(i){const s=e[a],u=s===void 0||i(s,a,e);if(u!==!0)throw new Le("option "+a+" must be "+u,Le.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Le("Unknown option "+a,Le.ERR_BAD_OPTION)}}const Hs={assertOptions:LI,validators:fc},rr=Hs.validators;let Vo=class{constructor(n){this.defaults=n,this.interceptors={request:new Av,response:new Av}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=$o(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:a}=t;r!==void 0&&Hs.assertOptions(r,{silentJSONParsing:rr.transitional(rr.boolean),forcedJSONParsing:rr.transitional(rr.boolean),clarifyTimeoutError:rr.transitional(rr.boolean)},!1),o!=null&&(X.isFunction(o)?t.paramsSerializer={serialize:o}:Hs.assertOptions(o,{encode:rr.function,serialize:rr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Hs.assertOptions(t,{baseUrl:rr.spelling("baseURL"),withXsrfToken:rr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&X.merge(a.common,a[t.method]);a&&X.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),t.headers=hn.concat(i,a);const s=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(u=u&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let l,f=0,d;if(!u){const p=[Bv.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,c),d=p.length,l=Promise.resolve(t);f<d;)l=l.then(p[f++],p[f++]);return l}d=s.length;let h=t;for(f=0;f<d;){const p=s[f++],v=s[f++];try{h=p(h)}catch(m){v.call(this,m);break}}try{l=Bv.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=c.length;f<d;)l=l.then(c[f++],c[f++]);return l}getUri(n){n=$o(this.defaults,n);const t=fb(n.baseURL,n.url,n.allowAbsoluteUrls);return ib(t,n.params,n.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(n){Vo.prototype[n]=function(t,r){return this.request($o(r||{},{method:n,url:t,data:(r||{}).data}))}});X.forEach(["post","put","patch"],function(n){function t(r){return function(a,i,s){return this.request($o(s||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Vo.prototype[n]=t(),Vo.prototype[n+"Form"]=t(!0)});let VI=class gb{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const i=new Promise(s=>{r.subscribe(s),a=s}).then(o);return i.cancel=function(){r.unsubscribe(a)},i},n(function(a,i,s){r.reason||(r.reason=new Ga(a,i,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new gb(function(o){n=o}),cancel:n}}};function WI(e){return function(t){return e.apply(null,t)}}function UI(e){return X.isObject(e)&&e.isAxiosError===!0}const lf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lf).forEach(([e,n])=>{lf[n]=e});function yb(e){const n=new Vo(e),t=X0(Vo.prototype.request,n);return X.extend(t,Vo.prototype,n,{allOwnKeys:!0}),X.extend(t,n,null,{allOwnKeys:!0}),t.create=function(o){return yb($o(e,o))},t}const Ye=yb(Qi);Ye.Axios=Vo;Ye.CanceledError=Ga;Ye.CancelToken=VI;Ye.isCancel=cb;Ye.VERSION=mb;Ye.toFormData=cc;Ye.AxiosError=Le;Ye.Cancel=Ye.CanceledError;Ye.all=function(n){return Promise.all(n)};Ye.spread=WI;Ye.isAxiosError=UI;Ye.mergeConfig=$o;Ye.AxiosHeaders=hn;Ye.formToJSON=e=>ub(X.isHTMLForm(e)?new FormData(e):e);Ye.getAdapter=vb.getAdapter;Ye.HttpStatusCode=lf;Ye.default=Ye;const{Axios:JB,AxiosError:QB,CanceledError:ZB,isCancel:eL,CancelToken:tL,VERSION:nL,all:rL,Cancel:oL,isAxiosError:aL,spread:iL,toFormData:sL,AxiosHeaders:uL,HttpStatusCode:cL,formToJSON:lL,getAdapter:fL,mergeConfig:dL}=Ye;var zI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HI(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),t}var el={exports:{}};const $I={},jI=Object.freeze(Object.defineProperty({__proto__:null,default:$I},Symbol.toStringTag,{value:"Module"})),Vv=HI(jI);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2024
 * @license MIT
 */var Wv;function GI(){return Wv||(Wv=1,function(e){(function(){var n="input is invalid type",t=typeof window=="object",r=t?window:{};r.JS_SHA256_NO_WINDOW&&(t=!1);var o=!t&&typeof self=="object",a=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?r=zI:o&&(r=self);var i=!r.JS_SHA256_NO_COMMON_JS&&!0&&e.exports,s=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],l=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=["hex","array","digest","arrayBuffer"],h=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(w){return Object.prototype.toString.call(w)==="[object Array]"}),s&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(w){return typeof w=="object"&&w.buffer&&w.buffer.constructor===ArrayBuffer});var p=function(w,S){return function(E){return new x(S,!0).update(E)[w]()}},v=function(w){var S=p("hex",w);a&&(S=m(S,w)),S.create=function(){return new x(w)},S.update=function(k){return S.create().update(k)};for(var E=0;E<d.length;++E){var C=d[E];S[C]=p(C,w)}return S},m=function(w,S){var E=Vv,C=Vv.Buffer,k=S?"sha224":"sha256",I;C.from&&!r.JS_SHA256_NO_BUFFER_FROM?I=C.from:I=function(T){return new C(T)};var R=function(T){if(typeof T=="string")return E.createHash(k).update(T,"utf8").digest("hex");if(T==null)throw new Error(n);return T.constructor===ArrayBuffer&&(T=new Uint8Array(T)),Array.isArray(T)||ArrayBuffer.isView(T)||T.constructor===C?E.createHash(k).update(I(T)).digest("hex"):w(T)};return R},g=function(w,S){return function(E,C){return new b(E,S,!0).update(C)[w]()}},y=function(w){var S=g("hex",w);S.create=function(k){return new b(k,w)},S.update=function(k,I){return S.create(k).update(I)};for(var E=0;E<d.length;++E){var C=d[E];S[C]=g(C,w)}return S};function x(w,S){S?(h[0]=h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0,this.blocks=h):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=w}x.prototype.update=function(w){if(!this.finalized){var S,E=typeof w;if(E!=="string"){if(E==="object"){if(w===null)throw new Error(n);if(s&&w.constructor===ArrayBuffer)w=new Uint8Array(w);else if(!Array.isArray(w)&&(!s||!ArrayBuffer.isView(w)))throw new Error(n)}else throw new Error(n);S=!0}for(var C,k=0,I,R=w.length,T=this.blocks;k<R;){if(this.hashed&&(this.hashed=!1,T[0]=this.block,this.block=T[16]=T[1]=T[2]=T[3]=T[4]=T[5]=T[6]=T[7]=T[8]=T[9]=T[10]=T[11]=T[12]=T[13]=T[14]=T[15]=0),S)for(I=this.start;k<R&&I<64;++k)T[I>>>2]|=w[k]<<l[I++&3];else for(I=this.start;k<R&&I<64;++k)C=w.charCodeAt(k),C<128?T[I>>>2]|=C<<l[I++&3]:C<2048?(T[I>>>2]|=(192|C>>>6)<<l[I++&3],T[I>>>2]|=(128|C&63)<<l[I++&3]):C<55296||C>=57344?(T[I>>>2]|=(224|C>>>12)<<l[I++&3],T[I>>>2]|=(128|C>>>6&63)<<l[I++&3],T[I>>>2]|=(128|C&63)<<l[I++&3]):(C=65536+((C&1023)<<10|w.charCodeAt(++k)&1023),T[I>>>2]|=(240|C>>>18)<<l[I++&3],T[I>>>2]|=(128|C>>>12&63)<<l[I++&3],T[I>>>2]|=(128|C>>>6&63)<<l[I++&3],T[I>>>2]|=(128|C&63)<<l[I++&3]);this.lastByteIndex=I,this.bytes+=I-this.start,I>=64?(this.block=T[16],this.start=I-64,this.hash(),this.hashed=!0):this.start=I}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var w=this.blocks,S=this.lastByteIndex;w[16]=this.block,w[S>>>2]|=c[S&3],this.block=w[16],S>=56&&(this.hashed||this.hash(),w[0]=this.block,w[16]=w[1]=w[2]=w[3]=w[4]=w[5]=w[6]=w[7]=w[8]=w[9]=w[10]=w[11]=w[12]=w[13]=w[14]=w[15]=0),w[14]=this.hBytes<<3|this.bytes>>>29,w[15]=this.bytes<<3,this.hash()}},x.prototype.hash=function(){var w=this.h0,S=this.h1,E=this.h2,C=this.h3,k=this.h4,I=this.h5,R=this.h6,T=this.h7,N=this.blocks,B,H,z,W,j,Z,ae,se,pe,Te,Re;for(B=16;B<64;++B)j=N[B-15],H=(j>>>7|j<<25)^(j>>>18|j<<14)^j>>>3,j=N[B-2],z=(j>>>17|j<<15)^(j>>>19|j<<13)^j>>>10,N[B]=N[B-16]+H+N[B-7]+z<<0;for(Re=S&E,B=0;B<64;B+=4)this.first?(this.is224?(se=300032,j=N[0]-1413257819,T=j-150054599<<0,C=j+24177077<<0):(se=704751109,j=N[0]-210244248,T=j-1521486534<<0,C=j+143694565<<0),this.first=!1):(H=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),z=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7),se=w&S,W=se^w&E^Re,ae=k&I^~k&R,j=T+z+ae+f[B]+N[B],Z=H+W,T=C+j<<0,C=j+Z<<0),H=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),z=(T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7),pe=C&w,W=pe^C&S^se,ae=T&k^~T&I,j=R+z+ae+f[B+1]+N[B+1],Z=H+W,R=E+j<<0,E=j+Z<<0,H=(E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10),z=(R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7),Te=E&C,W=Te^E&w^pe,ae=R&T^~R&k,j=I+z+ae+f[B+2]+N[B+2],Z=H+W,I=S+j<<0,S=j+Z<<0,H=(S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10),z=(I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7),Re=S&E,W=Re^S&C^Te,ae=I&R^~I&T,j=k+z+ae+f[B+3]+N[B+3],Z=H+W,k=w+j<<0,w=j+Z<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+w<<0,this.h1=this.h1+S<<0,this.h2=this.h2+E<<0,this.h3=this.h3+C<<0,this.h4=this.h4+k<<0,this.h5=this.h5+I<<0,this.h6=this.h6+R<<0,this.h7=this.h7+T<<0},x.prototype.hex=function(){this.finalize();var w=this.h0,S=this.h1,E=this.h2,C=this.h3,k=this.h4,I=this.h5,R=this.h6,T=this.h7,N=u[w>>>28&15]+u[w>>>24&15]+u[w>>>20&15]+u[w>>>16&15]+u[w>>>12&15]+u[w>>>8&15]+u[w>>>4&15]+u[w&15]+u[S>>>28&15]+u[S>>>24&15]+u[S>>>20&15]+u[S>>>16&15]+u[S>>>12&15]+u[S>>>8&15]+u[S>>>4&15]+u[S&15]+u[E>>>28&15]+u[E>>>24&15]+u[E>>>20&15]+u[E>>>16&15]+u[E>>>12&15]+u[E>>>8&15]+u[E>>>4&15]+u[E&15]+u[C>>>28&15]+u[C>>>24&15]+u[C>>>20&15]+u[C>>>16&15]+u[C>>>12&15]+u[C>>>8&15]+u[C>>>4&15]+u[C&15]+u[k>>>28&15]+u[k>>>24&15]+u[k>>>20&15]+u[k>>>16&15]+u[k>>>12&15]+u[k>>>8&15]+u[k>>>4&15]+u[k&15]+u[I>>>28&15]+u[I>>>24&15]+u[I>>>20&15]+u[I>>>16&15]+u[I>>>12&15]+u[I>>>8&15]+u[I>>>4&15]+u[I&15]+u[R>>>28&15]+u[R>>>24&15]+u[R>>>20&15]+u[R>>>16&15]+u[R>>>12&15]+u[R>>>8&15]+u[R>>>4&15]+u[R&15];return this.is224||(N+=u[T>>>28&15]+u[T>>>24&15]+u[T>>>20&15]+u[T>>>16&15]+u[T>>>12&15]+u[T>>>8&15]+u[T>>>4&15]+u[T&15]),N},x.prototype.toString=x.prototype.hex,x.prototype.digest=function(){this.finalize();var w=this.h0,S=this.h1,E=this.h2,C=this.h3,k=this.h4,I=this.h5,R=this.h6,T=this.h7,N=[w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255,C>>>24&255,C>>>16&255,C>>>8&255,C&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255,I>>>24&255,I>>>16&255,I>>>8&255,I&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255];return this.is224||N.push(T>>>24&255,T>>>16&255,T>>>8&255,T&255),N},x.prototype.array=x.prototype.digest,x.prototype.arrayBuffer=function(){this.finalize();var w=new ArrayBuffer(this.is224?28:32),S=new DataView(w);return S.setUint32(0,this.h0),S.setUint32(4,this.h1),S.setUint32(8,this.h2),S.setUint32(12,this.h3),S.setUint32(16,this.h4),S.setUint32(20,this.h5),S.setUint32(24,this.h6),this.is224||S.setUint32(28,this.h7),w};function b(w,S,E){var C,k=typeof w;if(k==="string"){var I=[],R=w.length,T=0,N;for(C=0;C<R;++C)N=w.charCodeAt(C),N<128?I[T++]=N:N<2048?(I[T++]=192|N>>>6,I[T++]=128|N&63):N<55296||N>=57344?(I[T++]=224|N>>>12,I[T++]=128|N>>>6&63,I[T++]=128|N&63):(N=65536+((N&1023)<<10|w.charCodeAt(++C)&1023),I[T++]=240|N>>>18,I[T++]=128|N>>>12&63,I[T++]=128|N>>>6&63,I[T++]=128|N&63);w=I}else if(k==="object"){if(w===null)throw new Error(n);if(s&&w.constructor===ArrayBuffer)w=new Uint8Array(w);else if(!Array.isArray(w)&&(!s||!ArrayBuffer.isView(w)))throw new Error(n)}else throw new Error(n);w.length>64&&(w=new x(S,!0).update(w).array());var B=[],H=[];for(C=0;C<64;++C){var z=w[C]||0;B[C]=92^z,H[C]=54^z}x.call(this,S,E),this.update(H),this.oKeyPad=B,this.inner=!0,this.sharedMemory=E}b.prototype=new x,b.prototype.finalize=function(){if(x.prototype.finalize.call(this),this.inner){this.inner=!1;var w=this.array();x.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(w),x.prototype.finalize.call(this)}};var _=v();_.sha256=_,_.sha224=v(!0),_.sha256.hmac=y(),_.sha224.hmac=y(!0),i?e.exports=_:(r.sha256=_.sha256,r.sha224=_.sha224)})()}(el)),el.exports}var qI=GI();function bb(e,n){const{self:t=!1}=n.modifiers??{},r=n.value,o=typeof r=="object"&&r.options||{passive:!0},a=typeof r=="function"||"handleEvent"in r?r:r.handler,i=t?e:n.arg?document.querySelector(n.arg):window;i&&(i.addEventListener("scroll",a,o),e._onScroll=Object(e._onScroll),e._onScroll[n.instance.$.uid]={handler:a,options:o,target:t?void 0:i})}function xb(e,n){var a;if(!((a=e._onScroll)!=null&&a[n.instance.$.uid]))return;const{handler:t,options:r,target:o=e}=e._onScroll[n.instance.$.uid];o.removeEventListener("scroll",t,r),delete e._onScroll[n.instance.$.uid]}function KI(e,n){n.value!==n.oldValue&&(xb(e,n),bb(e,n))}const XI={mounted:bb,unmounted:xb,updated:KI},YI={key:0,class:"refresh-indicator"},JI={class:"scrolling"},QI="https://krawd.antarasuara.com/api/v1/face-rekognition/people/events/hd",ZI=cn({__name:"MyPhotos",setup(e){const n=Cr(),t=ve([]),r=ve(!1),o=ve(1),a=ve(0),i=ve(!1),s=ve(!1),u=ve(null),c=async()=>{if(r.value||a.value&&o.value>a.value)return;r.value=!0;const h={"X-Access-Token":`Bearer ${localStorage.getItem("access_token")}`};try{const p=await Ye.get(QI,{params:{page:o.value,page_size:10},headers:h}),{data:v}=p.data;o.value===1?t.value=v.people_events:t.value.push(...v.people_events),a.value=Math.ceil(v.total/v.page_size),o.value++}catch(p){console.error("Error fetching images:",p)}finally{r.value=!1,i.value=!1}},l=d=>{u.value=d,s.value=!0},f=()=>{n.back()};return jt(()=>{c()}),(d,h)=>(xe(),Fe(qe,null,[V(mi,{class:"pa-0",fluid:""},{default:Ne(()=>[V(Zl,{color:"primary",dark:""},{default:Ne(()=>[V(so,{icon:"",onClick:f},{default:Ne(()=>[V(Gn,null,{default:Ne(()=>h[2]||(h[2]=[wt("mdi-arrow-left")])),_:1})]),_:1}),V(dd,null,{default:Ne(()=>h[3]||(h[3]=[wt("My Photos")])),_:1})]),_:1}),i.value?(xe(),Fe("div",YI," Refreshing... ")):xn("",!0),V(mi,{class:"mt-4"},{default:Ne(()=>[V(K0,null,{default:Ne(()=>[(xe(!0),Fe(qe,null,mr(t.value,(p,v)=>(xe(),Tn(Ws,{key:v,cols:"6",sm:"4",md:"3"},{default:Ne(()=>[V(Ti,{src:p.pe_watermarked_image_url,"aspect-ratio":"1",class:"ma-2",onClick:m=>l(p.pe_watermarked_image_url)},null,8,["src","onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),r.value?(xe(),Tn(mi,{key:1,class:"d-flex justify-center align-center"},{default:Ne(()=>[V(d0,{indeterminate:"",color:"primary"})]),_:1})):xn("",!0),V(jk,{modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=p=>s.value=p),fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},{default:Ne(()=>[V(yd,{class:"d-flex flex-column"},{default:Ne(()=>[V(Zl,{color:"primary",dark:"",flat:""},{default:Ne(()=>[V(so,{icon:"",onClick:h[0]||(h[0]=p=>s.value=!1)},{default:Ne(()=>[V(Gn,null,{default:Ne(()=>h[4]||(h[4]=[wt("mdi-close")])),_:1})]),_:1})]),_:1}),V(Ti,{src:u.value,class:"fullscreen-image","aspect-ratio":"1"},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),un(U("div",JI,null,512),[[XI,c]])],64))}}),eA=Bt(ZI,[["__scopeId","data-v-e08b3175"]]),tA={key:0},nA=["src"],rA={class:"d-flex flex-column mt-4"},oA={key:0},aA={key:1},iA=cn({__name:"CapturePhotoView",setup(e){const n=Cr(),t=ve(null),r=ve(null),o=ve(!1);function a(){r.value&&r.value.click()}function i(c){var d;const l=c.target,f=(d=l==null?void 0:l.files)==null?void 0:d[0];if(f){const h=new FileReader;h.onload=()=>{t.value=h.result},h.readAsDataURL(f)}}async function s(){if(!t.value){console.error("No image selected"),alert("No image selected");return}o.value=!0;try{const c=localStorage.getItem("ticketNumber"),l=`${c}_${Date.now()}.jpg`,f=`{"content_type": "image/jpeg", "file_name": "images/${l}"}`,p={Authorization:`Bearer ${qI.sha256(f+"secret")}`},v=new FormData;v.append("content_type","image/jpeg"),v.append("file_name",`images/${l}`);const g=await(await fetch(t.value)).blob();v.append("file",g,l);const y=await fetch("https://krawd.antarasuara.com/api/v1/face-rekognition/upload-image",{method:"POST",headers:p,body:v});if(!y.ok){const E=await y.json();throw new Error(`Failed to upload image: ${E.message||y.statusText}`)}const b=(await y.json()).data.url_file,_={"X-Access-Token":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2Vyc19pZCI6MSwidXNlcnNfdXNlcm5hbWUiOiJwaG90b2RlayIsInVzZXJzX2Z1bGxuYW1lIjoiYWRtaW4iLCJleHAiOjE3NDA3MTI5MTN9.OMQT-e-Xyik2jUifDMtGh34q-aGLC6xF94RXOcDbJwk","Content-Type":"application/json"},w=JSON.stringify({image_url_hq:b,image_url_compressed:b,image_url_watermarked:b,event_name:"concert-2024",event_code:"concert-2024",index_type:"face",people_external_ref:c}),S=await fetch("https://krawd.antarasuara.com/api/v1/face-rekognition/index",{method:"POST",headers:_,body:w});if(!S.ok){const E=await S.json();throw new Error(`Failed to index image: ${E.message||S.statusText}`)}console.log("File successfully uploaded and indexed"),alert("File successfully uploaded and indexed"),n.push("/")}catch(c){console.error("Error uploading or indexing photo:",c),alert(`Error: ${c.message}`)}finally{o.value=!1}}function u(){n.back()}return(c,l)=>(xe(),Tn(mi,{class:"fill-height",justify:"center"},{default:Ne(()=>[V(Zl,{dense:"",flat:""},{default:Ne(()=>[V(so,{icon:"",onClick:u},{default:Ne(()=>[V(Gn,null,{default:Ne(()=>l[0]||(l[0]=[wt("mdi-arrow-left")])),_:1})]),_:1}),V(dd,null,{default:Ne(()=>l[1]||(l[1]=[wt("Capture Photo")])),_:1})]),_:1}),V(yd,{class:"mx-auto my-5 pa-4","max-width":"400"},{default:Ne(()=>[t.value?(xe(),Fe("div",tA,[l[2]||(l[2]=U("h3",{class:"text-h6"},"Photo Preview",-1)),V(Ql,null,{default:Ne(()=>[U("img",{src:t.value,alt:"Captured Photo",width:"100%"},null,8,nA)]),_:1})])):xn("",!0),U("div",rA,[V(so,{depressed:"",color:"primary",class:"mb-2",onClick:a},{default:Ne(()=>[V(Gn,{left:""},{default:Ne(()=>l[3]||(l[3]=[wt("mdi-camera")])),_:1}),l[4]||(l[4]=wt(" Capture Photo "))]),_:1}),U("input",{ref_key:"captureRef",ref:r,type:"file",accept:"image/*",capture:"user",style:{display:"none"},onChange:i},null,544),V(so,{depressed:"",color:"success",disabled:!t.value||o.value,class:"mb-2",onClick:s},{default:Ne(()=>[V(Gn,{left:""},{default:Ne(()=>l[5]||(l[5]=[wt("mdi-cloud-upload")])),_:1}),o.value?(xe(),Fe("span",oA,"Uploading...")):(xe(),Fe("span",aA,"Upload"))]),_:1},8,["disabled"])])]),_:1})]),_:1}))}}),sA=Bt(iA,[["__scopeId","data-v-23312964"]]),wb="/assets/logo-BeE57ksF.svg",uA=cn({__name:"LandingView",setup(e){const n=Cr();function t(){n.push("/event")}return(r,o)=>(xe(),Fe(qe,null,[o[2]||(o[2]=U("header",null,[U("img",{src:wb,alt:"Krawd Logo",class:"logo"}),U("p",null,"Abadikan Momen Konsermu")],-1)),U("section",{class:"hero"},[o[0]||(o[0]=U("h2",null,"Temukan Dirimu di Tengah Keramaian",-1)),o[1]||(o[1]=U("p",null," Kami bekerja sama langsung dengan promotor konser untuk menyediakan foto-foto personal dan artwork digital eksklusif yang bisa kamu koleksi dan abadikan selamanya. ",-1)),U("button",{class:"cta-btn",onClick:t},"Gabung Sekarang")]),o[3]||(o[3]=_2('<section class="features" data-v-b9c6d44d><h3 data-v-b9c6d44d>Kenapa Krawd?</h3><div class="features-container" data-v-b9c6d44d><div class="feature-item" data-v-b9c6d44d><h4 data-v-b9c6d44d> Foto Personal Otentik</h4><p data-v-b9c6d44d>Upload selfie-mu, dan temukan foto konser yang menampilkan wajahmu  diambil oleh fotografer profesional langsung di venue.</p></div><div class="feature-item" data-v-b9c6d44d><h4 data-v-b9c6d44d> Artwork Digital Eksklusif</h4><p data-v-b9c6d44d>Koleksi karya visual bertema konser yang hanya tersedia di Krawd. Cocok untuk fans sejati dan kolektor digital.</p></div><div class="feature-item" data-v-b9c6d44d><h4 data-v-b9c6d44d> Partner Resmi Promotor</h4><p data-v-b9c6d44d>Krawd bekerja langsung dengan promotor resmi. Akses ke konten autentik yang tidak bisa kamu dapatkan di tempat lain.</p></div></div></section><footer data-v-b9c6d44d>  2025 Krawd. Semua hak dilindungi. </footer>',2))],64))}}),cA=Bt(uA,[["__scopeId","data-v-b9c6d44d"]]),lA={name:"OnboardingPage",mounted(){localStorage.getItem("access_token")&&this.$router.replace("/photo-match")},methods:{handleStart(){this.$router.push("/privacy-policy")}}},fA={class:"wrapper"},dA={class:"onboarding-container"};function hA(e,n,t,r,o,a){return xe(),Fe("div",fA,[U("div",dA,[n[1]||(n[1]=U("div",{class:"subtitle"},"Krawd di Konser .Feast - Membangun dan Menghancurkan",-1)),n[2]||(n[2]=U("p",null," Temukan dan abadikan momen konser terbaikmu. Siap untuk mulai petualangan digitalmu? ",-1)),U("button",{class:"get-started-btn",onClick:n[0]||(n[0]=(...i)=>a.handleStart&&a.handleStart(...i))},"Get Started")])])}const pA=Bt(lA,[["render",hA],["__scopeId","data-v-3a7e7da3"]]),vA={name:"PrivacyPolicyPage",data(){return{agreed:!1,scrolledToBottom:!1,acceptMarketing:!0}},methods:{checkScroll(){const e=this.$refs.scrollBox;e.scrollTop+e.clientHeight>=e.scrollHeight-10&&(this.scrolledToBottom=!0)},handleLabelClick(e){this.scrolledToBottom||(e.preventDefault(),alert("Silakan scroll seluruh halaman kebijakan privasi sebelum mencentang kotak ini."))},proceed(){localStorage.setItem("receive_marketing",this.acceptMarketing?"true":"false"),this.$router.push("/ticket-data")},goBack(){this.$router.push("/event")}}},mA={class:"wrapper"},gA={class:"header"},yA={class:"policy-container"},bA=["checked","readonly"],xA={class:"checkbox"},wA=["disabled"];function _A(e,n,t,r,o,a){return xe(),Fe("div",mA,[U("header",gA,[U("button",{class:"back-btn",onClick:n[0]||(n[0]=(...i)=>a.goBack&&a.goBack(...i))},"  ")]),U("div",yA,[n[8]||(n[8]=U("h2",null,"Persetujuan Kebijakan Privasi",-1)),U("div",{class:"policy-content",onScroll:n[1]||(n[1]=(...i)=>a.checkScroll&&a.checkScroll(...i)),ref:"scrollBox"},[(xe(),Fe(qe,null,mr(20,i=>U("p",{key:i}," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vel ligula at odio elementum malesuada. Praesent a velit nec turpis dictum posuere. Vivamus posuere massa id augue vehicula, a porta est cursus. Fusce condimentum, diam eu ullamcorper accumsan, nunc dolor vehicula lorem, ut vestibulum nulla eros at nisi. ")),64))],544),U("label",{class:"checkbox",onClick:n[3]||(n[3]=(...i)=>a.handleLabelClick&&a.handleLabelClick(...i))},[un(U("input",{type:"checkbox",checked:o.agreed,readonly:!o.scrolledToBottom,"onUpdate:modelValue":n[2]||(n[2]=i=>o.agreed=i)},null,8,bA),[[hp,o.agreed]]),n[6]||(n[6]=wt(" Saya telah membaca dan menyetujui Kebijakan Privasi Krawd "))]),U("label",xA,[un(U("input",{type:"checkbox",id:"marketing","onUpdate:modelValue":n[4]||(n[4]=i=>o.acceptMarketing=i)},null,512),[[hp,o.acceptMarketing]]),n[7]||(n[7]=wt(" Saya ingin menerima konten promosi dan informasi menarik dari Krawd "))]),U("button",{class:"continue-btn",disabled:!o.agreed,onClick:n[5]||(n[5]=(...i)=>a.proceed&&a.proceed(...i))},"Lanjutkan",8,wA)])])}const CA=Bt(vA,[["render",_A],["__scopeId","data-v-e5cbbd07"]]);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var _b=function(e,n){return(_b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(e,n)};function Zn(e,n){function t(){this.constructor=e}_b(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}function ge(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(c){try{u(r.next(c))}catch(l){a(l)}}function s(c){try{u(r.throw(c))}catch(l){a(l)}}function u(c){c.done?o(c.value):new t(function(l){l(c.value)}).then(i,s)}u((r=r.apply(e,[])).next())})}function ye(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(l[0]===6&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(f){l=[6,f],r=0}finally{t=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}var EA=function(){function e(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(n,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=n,this.platform=t},e.prototype.registerFlag=function(n,t,r){if(this.flagRegistry[n]={evaluationFn:t,setHook:r},this.urlFlags[n]!=null){var o=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+o+"."),this.set(n,o)}},e.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},e.prototype.getNumber=function(n){return this.get(n)},e.prototype.getBool=function(n){return this.get(n)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(n,t){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=t,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(t)},e.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},e.prototype.setFlags=function(n){this.flags=Object.assign({},n)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,o=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return SA(r,i[0],i[1]),i.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(a){var i=a.split(":"),s=i[0],u=i[1];n.urlFlags[s]=function(c,l){if((l=l.toLowerCase())==="true"||l==="false")return l==="true";if(""+ +l===l)return+l;throw new Error("Could not parse value flag value "+l+" for flag "+c+".")}(s,u)})}},e}();function SA(e,n,t){e[decodeURIComponent(n)]=decodeURIComponent(t||"")}function Q(){return Cb}var Cb=null,du=new Map,ff=new Map;function Eb(e,n){var t=kb(e,n);return du.get(t)}function kA(e){return ff.get(e)}function Uv(e){for(var n=du.entries(),t=[];;){var r=n.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===e&&t.push(s)}return t}function Sb(e){var n=e.kernelName,t=e.backendName,r=kb(n,t);if(du.has(r))throw new Error("The kernel '"+n+"' for backend '"+t+"' is already registered");du.set(r,e)}function RA(e){var n=e.kernelName;ff.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),ff.set(n,e)}function kb(e,n){return n+"_"+e}function df(e,n,t){return Math.max(e,Math.min(n,t))}function Rb(e){return e%2==0?e:e+1}function IA(e){for(var n=0,t=0;t<e.length;t++)n+=e[t];return n}function D(e,n){if(!e)throw new Error(typeof n=="string"?n:n())}function nt(e,n,t){t===void 0&&(t=""),D(Nt(e,n),function(){return t+" Shapes "+e+" and "+n+" must match"})}function qa(e){D(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function La(e,n,t){if(n===void 0&&(n=[]),t===void 0&&(t=!1),n==null&&(n=[]),Array.isArray(e)||gr(e)&&!t)for(var r=0;r<e.length;++r)La(e[r],n,t);else n.push(e);return n}function we(e){if(e.length===0)return 1;for(var n=e[0],t=1;t<e.length;t++)n*=e[t];return n}function Nt(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function xt(e){return e%1==0}function AA(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var n=Math.exp(2*e);return(n-1)/(n+1)}function hf(e){var n=Math.ceil(Math.sqrt(e));return[n,Math.ceil(e/n)]}function Sa(e,n){return n<=e.length?e:e+" ".repeat(n-e.length)}function zv(e,n,t){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,o){var a=0,i=function(){if(e())r();else{a++;var s=n(a);t!=null&&a>=t?o():setTimeout(i,s)}};i()})}function TA(e,n){for(var t=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)t*=e[o];else if(e[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(r===-1){if(n>0&&n!==t)throw Error("Size("+n+") must match the product of shape "+e);return e}if(t===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(n%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+t);var a=e.slice();return a[r]=n/t,a}function Tt(e,n){var t=n.length;return D((e=e==null?n.map(function(r,o){return o}):[].concat(e)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+e}),D(e.every(function(r){return xt(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?t+r:r})}function Do(e,n){for(var t=[],r=[],o=n!=null&&Array.isArray(n)&&n.length===0,a=n==null||o?null:Tt(n,e).sort(),i=0,s=0;s<e.length;++s){if(a!=null){if(a[i]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(a[i]==null||a[i]>s)&&e[s]===1&&(t.push(e[s]),r.push(s)),a[i]<=s&&i++}e[s]!==1&&(t.push(e[s]),r.push(s))}return{newShape:t,keptDims:r}}function Ni(e,n){var t=null;if(e==null||e==="float32")t=new Float32Array(n);else if(e==="int32")t=new Int32Array(n);else{if(e!=="bool")throw new Error("Unknown data type "+e);t=new Uint8Array(n)}return t}function hu(e,n){var t=null;if(e==null||e==="float32")t=new Float32Array(n);else if(e==="int32")t=new Int32Array(n);else if(e==="bool")t=new Uint8Array(n);else{if(e!=="string")throw new Error("Unknown data type "+e);t=new Array(n)}return t}function DA(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function FA(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function PA(e,n){return n!=="complex64"&&(n!=="float32"||e==="complex64")&&(n!=="int32"||e==="float32"||e==="complex64")&&(n!=="bool"||e!=="bool")}function gr(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function Ib(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function NA(e){if(e==null)return 0;var n=0;return e.forEach(function(t){return n+=t.length}),n}function Ed(e){return typeof e=="string"||e instanceof String}function OA(e){return typeof e=="boolean"}function MA(e){return typeof e=="number"}function Zi(e){return Array.isArray(e)?Zi(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":MA(e)?"float32":Ed(e)?"string":OA(e)?"bool":"float32"}function pf(e){return!!(e&&e.constructor&&e.call&&e.apply)}function vf(e,n){for(var t=n;t<e;++t)if(e%t==0)return t;return e}function yr(e){var n=e.length;if(n<2)return[];var t=new Array(n-1);t[n-2]=e[n-1];for(var r=n-3;r>=0;--r)t[r]=t[r+1]*e[r+1];return t}function Ab(e,n,t){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=La(e)),t&&DA(e,n),function(a,i){return a instanceof Float32Array&&i==="float32"||a instanceof Int32Array&&i==="int32"||a instanceof Uint8Array&&i==="bool"}(e,n))return e;if(n==null||n==="float32"||n==="complex64")return new Float32Array(e);if(n==="int32")return new Int32Array(e);if(n==="bool"){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)Math.round(e[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+n)}function Hv(e,n){if(e.length===0)return n[0];var t=e.reduce(function(r,o){return r*o});if(t===0)return[];if(t!==n.length)throw new Error("["+e+"] does not match the input size.");return function r(o,a,i){var s=new Array;if(a.length===1)for(var u=a[0],c=0;c<u;c++)s[c]=i[o+c];else{u=a[0];var l=a.slice(1),f=l.reduce(function(d,h){return d*h});for(c=0;c<u;c++)s[c]=r(o+c*f,l,i)}return s}(0,e,n)}function Tb(e,n){for(var t=es(e,n),r=0;r<t.length;r++)t[r]=1;return t}function es(e,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(e);if(n==="int32")return new Int32Array(e);if(n==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+n)}function cr(){return Q().platform.now()}function Db(e){e.forEach(function(n){D(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function BA(e,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",Q().platform.encode(e,n)}function pu(e,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",Q().platform.decode(e,n)}function $v(e,n,t){if(n===0)return 0;if(n===1)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=t[o]*e[o];return r}function LA(e,n,t){if(n===0)return[];if(n===1)return[e];for(var r=new Array(n),o=0;o<r.length-1;++o)r[o]=Math.floor(e/t[o]),e-=r[o]*t[o];return r[r.length-1]=e,r}var VA=function(){function e(n,t){this.backendTimer=n,this.logger=t,t==null&&(this.logger=new WA)}return e.prototype.profileKernel=function(n,t,r){var o,a=this,i=this.backendTimer.time(function(){o=r()});return o.forEach(function(s){s.data().then(function(u){(function(c,l,f){if(l!=="float32")return!1;for(var d=0;d<c.length;d++){var h=c[d];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+f+"'"),!0}})(u,s.dtype,n),i.then(function(c){var l="";c.getExtraProfileInfo!=null&&(l=c.getExtraProfileInfo()),a.logger.logKernelProfile(n,s,u,c.kernelMs,t,l)})})}),o},e}(),WA=function(){function e(){}return e.prototype.logKernelProfile=function(n,t,r,o,a,i){var s=typeof o=="number"?Sa(o+"ms",9):o.error,u=Sa(n,25),c=t.rank,l=t.size,f=Sa(t.shape.toString(),14),d="";for(var h in a){var p=a[h].shape||t.shape,v=p.length;d+=h+": "+v+"D "+(v>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+c+"D "+f+"	%c"+l+"	%c"+d+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),jv=20,ti=3,tl=7;function UA(e,n,t,r){var o=yr(n),a=function(c,l,f,d){var h=we(l),p=d[d.length-1],v=new Array(p).fill(0),m=l.length,g=f==="complex64"?ri(c):c;if(m>1)for(var y=0;y<h/p;y++)for(var x=y*p,b=0;b<p;b++)v[b]=Math.max(v[b],ni(g[x+b],0,f).length);return v}(e,n,t,o),i=n.length,s=function c(l,f,d,h,p,v){v===void 0&&(v=!0);var m=d==="complex64"?2:1,g=f[0],y=f.length;if(y===0)return d==="complex64"?[ni(ri(l)[0],0,d)]:d==="bool"?[Fb(l[0])]:[l[0].toString()];if(y===1){if(g>jv){var x=ti*m,b=Array.from(l.slice(0,x)),_=Array.from(l.slice((g-ti)*m,g*m));return d==="complex64"&&(b=ri(b),_=ri(_)),["["+b.map(function(B,H){return ni(B,p[H],d)}).join(", ")+", ..., "+_.map(function(B,H){return ni(B,p[g-ti+H],d)}).join(", ")+"]"]}return["["+(d==="complex64"?ri(l):Array.from(l)).map(function(B,H){return ni(B,p[H],d)}).join(", ")+"]"]}var w=f.slice(1),S=h.slice(1),E=h[0]*m,C=[];if(g>jv){for(var k=0;k<ti;k++){var I=(R=k*E)+E;C.push.apply(C,c(l.slice(R,I),w,d,S,p,!1))}for(C.push("..."),k=g-ti;k<g;k++)I=(R=k*E)+E,C.push.apply(C,c(l.slice(R,I),w,d,S,p,k===g-1))}else for(k=0;k<g;k++){var R;I=(R=k*E)+E,C.push.apply(C,c(l.slice(R,I),w,d,S,p,k===g-1))}var T=y===2?",":"";for(C[0]="["+C[0]+T,k=1;k<C.length-1;k++)C[k]=" "+C[k]+T;var N=`,
`;for(k=2;k<y;k++)N+=`
`;return C[C.length-1]=" "+C[C.length-1]+"]"+(v?"":N),C}(e,n,t,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+t),u.push("  rank: "+i),u.push("  shape: ["+n+"]"),u.push("  values:")),u.push(s.map(function(c){return"    "+c}).join(`
`)),u.join(`
`)}function ni(e,n,t){return Sa(Array.isArray(e)?parseFloat(e[0].toFixed(tl))+" + "+parseFloat(e[1].toFixed(tl))+"j":Ed(e)?"'"+e+"'":t==="bool"?Fb(e):parseFloat(e.toFixed(tl)).toString(),n)}function Fb(e){return e===0?"false":"true"}function ri(e){for(var n=[],t=0;t<e.length;t+=2)n.push([e[t],e[t+1]]);return n}var Oi=function(){function e(n,t,r){var o=this;if(this.dtype=t,this.shape=n.slice(),this.size=we(n),r!=null){var a=r.length;D(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+o.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||hu(t,this.size),this.strides=yr(n)}return e.prototype.set=function(n){for(var t=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),D(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var a=this.locToIndex(r);this.values[a]=n},e.prototype.get=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.length===0&&(n=[0]);for(var r=0,o=0,a=n;o<a.length;o++){var i=a[o];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=n[n.length-1],c=0;c<n.length-1;++c)u+=this.strides[c]*n[c];return this.values[u]},e.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var t=n[n.length-1],r=0;r<n.length-1;++r)t+=this.strides[r]*n[r];return t},e.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(n/this.strides[r]),n-=t[r]*this.strides[r];return t[t.length-1]=n,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return lr().makeTensor(this.values,this.shape,this.dtype)},e}(),lr=null,q=null,Pb=null,dt=function(){function e(n,t,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=t||"float32",this.size=we(n),this.strides=yr(n),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),D(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(n,t){return this.throwIfDisposed(),this.reshape([n,t])},e.prototype.as3D=function(n,t,r){return this.throwIfDisposed(),this.reshape([n,t,r])},e.prototype.as4D=function(n,t,r,o){return this.throwIfDisposed(),this.reshape([n,t,r,o])},e.prototype.as5D=function(n,t,r,o,a){return this.throwIfDisposed(),this.reshape([n,t,r,o,a])},e.prototype.asType=function(n){return this.throwIfDisposed(),q.cast(this,n)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return ge(this,void 0,void 0,function(){var n;return ye(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return n=t.sent(),[2,q.buffer(this.shape,this.dtype,n)]}})})},e.prototype.bufferSync=function(){return q.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return ge(this,void 0,void 0,function(){var n;return ye(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return n=t.sent(),[2,Hv(this.shape,n)]}})})},e.prototype.arraySync=function(){return Hv(this.shape,this.dataSync())},e.prototype.data=function(){return ge(this,void 0,void 0,function(){var n,t;return ye(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=lr().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:t=r.sent();try{return[2,t.map(function(o){return pu(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var n=lr().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(t){return pu(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},e.prototype.bytes=function(){return ge(this,void 0,void 0,function(){var n;return ye(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,lr().read(this.dataId)];case 1:return n=t.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(lr().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(n){return n===void 0&&(n=!1),q.print(this,n)},e.prototype.reshape=function(n){return this.throwIfDisposed(),q.reshape(this,n)},e.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},e.prototype.expandDims=function(n){return n===void 0&&(n=0),q.expandDims(this,n)},e.prototype.cumsum=function(n,t,r){return n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=!1),q.cumsum(this,n,t,r)},e.prototype.squeeze=function(n){return this.throwIfDisposed(),q.squeeze(this,n)},e.prototype.clone=function(){return this.throwIfDisposed(),q.clone(this)},e.prototype.oneHot=function(n,t,r){return this.throwIfDisposed(),q.oneHot(this,n,t,r)},e.prototype.toString=function(n){return n===void 0&&(n=!1),UA(this.dataSync(),this.shape,this.dtype,n)},e.prototype.tile=function(n){return this.throwIfDisposed(),q.tile(this,n)},e.prototype.gather=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),q.gather(this,n,t)},e.prototype.matMul=function(n,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),q.matMul(this,n,t,r)},e.prototype.dot=function(n){return this.throwIfDisposed(),q.dot(this,n)},e.prototype.norm=function(n,t,r){return n===void 0&&(n="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),q.norm(this,n,t,r)},e.prototype.slice=function(n,t){return this.throwIfDisposed(),q.slice(this,n,t)},e.prototype.reverse=function(n){return this.throwIfDisposed(),q.reverse(this,n)},e.prototype.concat=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),n instanceof e&&(n=[n]),q.concat([this].concat(n),t)},e.prototype.split=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),q.split(this,n,t)},e.prototype.stack=function(n,t){return t===void 0&&(t=0),q.stack([this,n],t)},e.prototype.unstack=function(n){return n===void 0&&(n=0),q.unstack(this,n)},e.prototype.pad=function(n,t){return t===void 0&&(t=0),q.pad(this,n,t)},e.prototype.batchNormalization=function(n,t,r,o,a){return r===void 0&&(r=.001),Pb("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,t,a,o,r)},e.prototype.batchNorm=function(n,t,r,o,a){return a===void 0&&(a=.001),this.throwIfDisposed(),q.batchNorm(this,n,t,r,o,a)},e.prototype.all=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.all(this,n,t)},e.prototype.any=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.any(this,n,t)},e.prototype.logSumExp=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.logSumExp(this,n,t)},e.prototype.sum=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.sum(this,n,t)},e.prototype.prod=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.prod(this,n,t)},e.prototype.mean=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.mean(this,n,t)},e.prototype.min=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.min(this,n,t)},e.prototype.max=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),q.max(this,n,t)},e.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),q.argMin(this,n)},e.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),q.argMax(this,n)},e.prototype.cast=function(n){return this.throwIfDisposed(),q.cast(this,n)},e.prototype.add=function(n){return this.throwIfDisposed(),q.add(this,n)},e.prototype.addStrict=function(n){return this.throwIfDisposed(),q.addStrict(this,n)},e.prototype.atan2=function(n){return this.throwIfDisposed(),q.atan2(this,n)},e.prototype.sub=function(n){return this.throwIfDisposed(),q.sub(this,n)},e.prototype.subStrict=function(n){return this.throwIfDisposed(),q.subStrict(this,n)},e.prototype.pow=function(n){return this.throwIfDisposed(),q.pow(this,n)},e.prototype.powStrict=function(n){return this.throwIfDisposed(),q.powStrict(this,n)},e.prototype.mul=function(n){return this.throwIfDisposed(),q.mul(this,n)},e.prototype.mulStrict=function(n){return this.throwIfDisposed(),q.mulStrict(this,n)},e.prototype.div=function(n){return this.throwIfDisposed(),q.div(this,n)},e.prototype.divNoNan=function(n){return this.throwIfDisposed(),q.divNoNan(this,n)},e.prototype.floorDiv=function(n){return this.throwIfDisposed(),q.floorDiv(this,n)},e.prototype.divStrict=function(n){return this.throwIfDisposed(),q.divStrict(this,n)},e.prototype.minimum=function(n){return this.throwIfDisposed(),q.minimum(this,n)},e.prototype.minimumStrict=function(n){return this.throwIfDisposed(),q.minimumStrict(this,n)},e.prototype.maximum=function(n){return this.throwIfDisposed(),q.maximum(this,n)},e.prototype.maximumStrict=function(n){return this.throwIfDisposed(),q.maximumStrict(this,n)},e.prototype.mod=function(n){return this.throwIfDisposed(),q.mod(this,n)},e.prototype.modStrict=function(n){return this.throwIfDisposed(),q.modStrict(this,n)},e.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),q.squaredDifferenceStrict(this,n)},e.prototype.transpose=function(n){return this.throwIfDisposed(),q.transpose(this,n)},e.prototype.notEqual=function(n){return this.throwIfDisposed(),q.notEqual(this,n)},e.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),q.notEqualStrict(this,n)},e.prototype.less=function(n){return this.throwIfDisposed(),q.less(this,n)},e.prototype.lessStrict=function(n){return this.throwIfDisposed(),q.lessStrict(this,n)},e.prototype.equal=function(n){return this.throwIfDisposed(),q.equal(this,n)},e.prototype.equalStrict=function(n){return this.throwIfDisposed(),q.equalStrict(this,n)},e.prototype.lessEqual=function(n){return this.throwIfDisposed(),q.lessEqual(this,n)},e.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),q.lessEqualStrict(this,n)},e.prototype.greater=function(n){return this.throwIfDisposed(),q.greater(this,n)},e.prototype.greaterStrict=function(n){return this.throwIfDisposed(),q.greaterStrict(this,n)},e.prototype.greaterEqual=function(n){return this.throwIfDisposed(),q.greaterEqual(this,n)},e.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),q.greaterEqualStrict(this,n)},e.prototype.logicalAnd=function(n){return this.throwIfDisposed(),q.logicalAnd(this,n)},e.prototype.logicalOr=function(n){return this.throwIfDisposed(),q.logicalOr(this,n)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),q.logicalNot(this)},e.prototype.logicalXor=function(n){return this.throwIfDisposed(),q.logicalXor(this,n)},e.prototype.where=function(n,t){return this.throwIfDisposed(),q.where(n,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),q.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),q.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),q.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),q.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),q.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),q.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),q.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),q.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),q.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),q.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),q.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),q.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),q.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),q.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),q.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),q.abs(this)},e.prototype.clipByValue=function(n,t){return this.throwIfDisposed(),q.clipByValue(this,n,t)},e.prototype.relu=function(){return this.throwIfDisposed(),q.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),q.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),q.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),q.selu(this)},e.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),q.leakyRelu(this,n)},e.prototype.prelu=function(n){return this.throwIfDisposed(),q.prelu(this,n)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),q.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),q.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),q.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),q.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),q.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),q.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),q.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),q.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),q.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),q.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),q.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),q.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),q.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),q.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),q.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),q.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),q.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),q.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),q.round(this)},e.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),q.step(this,n)},e.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),q.softmax(this,n)},e.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),q.logSoftmax(this,n)},e.prototype.resizeBilinear=function(n,t){return t===void 0&&(t=!1),this.throwIfDisposed(),q.image.resizeBilinear(this,n,t)},e.prototype.resizeNearestNeighbor=function(n,t){return t===void 0&&(t=!1),this.throwIfDisposed(),q.image.resizeNearestNeighbor(this,n,t)},e.prototype.conv1d=function(n,t,r,o,a,i){return o===void 0&&(o="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),q.conv1d(this,n,t,r,o,a,i)},e.prototype.conv2d=function(n,t,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),q.conv2d(this,n,t,r,o,a,i)},e.prototype.conv2dTranspose=function(n,t,r,o,a){return this.throwIfDisposed(),q.conv2dTranspose(this,n,t,r,o,a)},e.prototype.depthwiseConv2D=function(n,t,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),q.depthwiseConv2d(this,n,t,r,o,a,i)},e.prototype.separableConv2d=function(n,t,r,o,a,i){return a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),q.separableConv2d(this,n,t,r,o,a,i)},e.prototype.avgPool=function(n,t,r,o){return this.throwIfDisposed(),q.avgPool(this,n,t,r,o)},e.prototype.maxPool=function(n,t,r,o){return this.throwIfDisposed(),q.maxPool(this,n,t,r,o)},e.prototype.localResponseNormalization=function(n,t,r,o){return n===void 0&&(n=5),t===void 0&&(t=1),r===void 0&&(r=1),o===void 0&&(o=.5),q.localResponseNormalization(this,n,t,r,o)},e.prototype.pool=function(n,t,r,o,a){return this.throwIfDisposed(),q.pool(this,n,t,r,o,a)},e.prototype.variable=function(n,t,r){return n===void 0&&(n=!0),this.throwIfDisposed(),lr().makeVariable(this,n,t,r)},e.prototype.unsortedSegmentSum=function(n,t){return this.throwIfDisposed(),q.unsortedSegmentSum(this,n,t)},e.prototype.batchToSpaceND=function(n,t){return this.throwIfDisposed(),q.batchToSpaceND(this,n,t)},e.prototype.spaceToBatchND=function(n,t){return this.throwIfDisposed(),q.spaceToBatchND(this,n,t)},e.prototype.topk=function(n,t){return n===void 0&&(n=1),t===void 0&&(t=!0),this.throwIfDisposed(),q.topk(this,n,t)},e.prototype.stridedSlice=function(n,t,r,o,a,i,s,u){return o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),q.stridedSlice(this,n,t,r,o,a,i,s,u)},e.prototype.depthToSpace=function(n,t){return this.throwIfDisposed(),q.depthToSpace(this,n,t)},e.prototype.fft=function(){return this.throwIfDisposed(),q.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),q.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),q.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),q.spectral.irfft(this)},e}();Object.defineProperty(dt,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var Gv,mf,gf,yf,bf,Va=function(e){function n(t,r,o,a){var i=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return i.trainable=r,i.name=o,i}return Zn(n,e),n.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!Nt(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");lr().disposeTensor(this),this.dataId=t.dataId,lr().incRef(this,null)},n.prototype.dispose=function(){lr().disposeVariable(this),this.isDisposedInternal=!0},n}(dt);Object.defineProperty(Va,Symbol.hasInstance,{value:function(e){return e instanceof dt&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Gv||(Gv={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(mf||(mf={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(gf||(gf={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(yf||(yf={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(bf||(bf={}));var zA={float32:yf,int32:mf,bool:gf,complex64:bf};function Ut(e,n){if(e==="string"||n==="string"){if(e==="string"&&n==="string")return"string";throw new Error("Can not upcast "+e+" with "+n)}return zA[e][n]}function nl(e){return Ut(e,"int32")}function vt(e,n){if(e.dtype===n.dtype)return[e,n];var t=Ut(e.dtype,n.dtype);return[e.cast(t),n.cast(t)]}function HA(e,n){D(e.dtype===n.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+n.dtype+") input must match"})}function Nb(e){var n=[];return function t(r,o,a){if(r!=null){if(r instanceof dt)return void o.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,s=r;for(var u in s){var c=s[u];a.has(c)||(a.add(c),t(c,o,a))}}}}(e,n,new Set),n}var rl,qv=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},e}(),$A=function(){function e(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qv}return e.prototype.ready=function(){return ge(this,void 0,void 0,function(){var n,t,r;return ye(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),t=0,o.label=1;case 1:return t<n.length?(r=n[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),t=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},e.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},e.prototype.registerBackend=function(n,t,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:t,priority:r},!0)},e.prototype.setBackend=function(n){return ge(this,void 0,void 0,function(){var t,r,o;return ye(this,function(a){switch(a.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(n),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return o=a.sent(),[3,3];case 2:o=r,a.label=3;case 3:if(!o)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new VA(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var n=this;Uv(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(n.backendInstance)})},e.prototype.disposeRegisteredKernels=function(n){var t=this;Uv(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[n])})},e.prototype.initializeBackend=function(n){var t=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var a=++this.pendingBackendInitId,i=o.then(function(s){return!(a<t.pendingBackendInitId)&&(t.registry[n]=s,t.pendingBackendInit=null,!0)}).catch(function(s){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return n.registryFactory[r].priority-n.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),t=0;t<n.length;t++){var r=n[t],o=this.initializeBackend(r),a=o.success,i=o.asyncInit;if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(n,t){var r=this.state.tensorInfo.get(t),o=r.backend,a=this.readSync(t);o.disposeData(t),r.backend=n,n.move(t,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(n,t){var r,o=this,a=null;if(t==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");t=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=n}return this.scopedRun(function(){return o.startScope(a)},function(){return o.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(n,t,r){n();try{var o=r();return t(),o}catch(a){throw t(),a}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(n){var t=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[t],function(o){return{x:function(){return o.toFloat()}}},[]),t},e.prototype.runKernel=function(n,t,r,o,a){return this.runKernelFunc(null,t,null,n,r,o,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(n,t,r){var o=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-t-a-i;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},e.prototype.runKernelFunc=function(n,t,r,o,a,i,s){var u,c=this;i===void 0&&(i=[]),s===void 0&&(s=[]);var l=[],f=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var d,h=function(y){f&&(l=y.map(function(x){return c.keep(c.clone(x))}))},p=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=Eb(o,this.backendName);return d=g!=null?function(){var y=c.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:a,backend:c.backend});var x=Array.isArray(m)?m:[m];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(o,y,x);var b=x.map(function(w){var S=w.dataId,E=w.shape,C=w.dtype;return c.makeTensorFromDataId(S,E,C)}),_=b.filter(function(w,S){return s[S]});return h((i||[]).slice().concat(_)),b}:function(){var y=c.backend.numDataIds();m=c.tidy(function(){return n(c.backend,h)});var x=Array.isArray(m)?m:[m];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(o,y,x),x},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){u=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(o,t,function(){return d()}):d()}),f&&this.addTapeNode(o,t,u,r,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(y){return t[y].shape}),outputShapes:u.map(function(y){return y.shape})}),Array.isArray(m)?u:u[0]},e.prototype.makeTensor=function(n,t,r,o){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var a=n;r==="string"&&Ed(n[0])&&(a=n.map(function(l){return BA(l)}));var i=o.write(a,t,r),s=new dt(t,r,i,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(i),c=NA(a);this.state.numBytes+=c-u.bytes,u.bytes=c}return s},e.prototype.makeTensorFromDataId=function(n,t,r,o){var a=new dt(t,r=r||"float32",n,this.nextTensorId());return this.incRef(a,o),a},e.prototype.makeVariable=function(n,t,r,o){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==n.dtype&&(n=n.asType(o));var a=new Va(n,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(n,t){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*Ib(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:t||this.backend,dtype:n.dtype,shape:n.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof Va||this.track(n)},e.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(n.dataId);t.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var t=this.state.registeredVariables[n];this.disposeVariable(t)}},e.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},e.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},e.prototype.profile=function(n){return ge(this,void 0,void 0,function(){var t,r;return ye(this,function(o){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(n,t,r,o,a){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:n,inputs:t,outputs:r,saved:a},u=kA(n);u!=null&&(o=u.gradFunc),o!=null&&(s.gradient=function(c){return c=c.map(function(l,f){if(l==null){var d=r[f],h=es(d.size,d.dtype);return i.makeTensor(h,d.shape,d.dtype)}return l}),o(c.length>1?c:c[0],a)}),this.state.activeTape.push(s)},e.prototype.keep=function(n){return n.kept=!0,n},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(n){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(t.name=n),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(n){for(var t=this,r=Nb(n),o=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||o.has(i.id)||i.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||t.track(u)})},e.prototype.gradients=function(n,t,r,o){var a=this;if(o===void 0&&(o=!1),D(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",n)});D(i instanceof dt,function(){return"The result y returned by f() must be a tensor."});var s=function(u,c,l){for(var f={},d={},h=0;h<c.length;h++)f[c[h].id]=!0;for(h=0;h<u.length;h++){var p=(w=u[h]).inputs;for(var v in p){for(var m=p[v],g=!1,y=0;y<c.length;y++)if(f[m.id]){w.outputs.forEach(function(k){return f[k.id]=!0}),g=!0,d[w.id]=!0;break}if(g)break}}var x={};x[l.id]=!0;var b={};for(h=u.length-1;h>=0;h--)for(p=(w=u[h]).inputs,y=0;y<w.outputs.length;y++)if(x[w.outputs[y].id]){for(var v in p)x[p[v].id]=!0,b[w.id]=!0;break}var _=[];for(h=0;h<u.length;h++){var w;if(d[(w=u[h]).id]&&b[w.id]){var S={};for(var v in w.inputs){var E=w.inputs[v];f[E.id]&&(S[v]=E)}var C=Object.assign({},w);C.inputs=S,C.outputs=w.outputs,_.push(C)}}return _}(this.state.activeTape,t,i);if(!o&&s.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,c,l={};l[i.id]=r??(u=i.shape,c=Tb(we(u),"float32"),M.makeTensor(c,u,"float32")),function(d,h,p){for(var v=function(g){var y=h[g],x=[];if(y.outputs.forEach(function(S){var E=d[S.id];E!=null?x.push(E):x.push(null)}),y.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+y.kernelName+".");var b=y.gradient(x),_=function(S){if(!(S in b))throw new Error("Cannot backprop through input "+S+". Available gradients found: "+Object.keys(b)+".");var E=p(function(){return b[S]()});if(E.dtype!=="float32")throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input "+S+" must have 'float32' dtype, but has '"+E.dtype+"'");var C=y.inputs[S];if(!Nt(E.shape,C.shape))throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input '"+S+"' has shape '"+E.shape+"', which does not match the shape of the input '"+C.shape+"'");if(d[C.id]==null)d[C.id]=E;else{var k=d[C.id];d[C.id]=k.add(E),k.dispose()}};for(var w in y.inputs)_(w)},m=h.length-1;m>=0;m--)v(m)}(l,s,function(d){return a.tidy(d)});var f=t.map(function(d){return l[d.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(d){for(var h=0,p=d.saved;h<p.length;h++)p[h].dispose()}),a.state.activeTape=null),{value:i,grads:f}})},e.prototype.customGrad=function(n){var t=this;return D(pf(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];D(o.every(function(s){return s instanceof dt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return o.forEach(function(s,u){i[u]=s}),t.runKernelFunc(function(s,u){return D((r=n.apply(void 0,o.concat([u]))).value instanceof dt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),D(pf(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},i,function(s,u){var c=r.gradFunc(s,u),l=Array.isArray(c)?c:[c];D(l.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),D(l.every(function(d){return d instanceof dt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return l.forEach(function(d,h){f[h]=function(){return d}}),f})}},e.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},e.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},e.prototype.time=function(n){return ge(this,void 0,void 0,function(){var t,r;return ye(this,function(o){switch(o.label){case 0:return t=cr(),[4,this.backend.time(n)];case 1:return(r=o.sent()).wallMs=cr()-t,[2,r]}})})},e.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qv,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),M=function(){var e=function(){if(rl==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}rl=t}return rl}();if(e._tfengine==null){var n=new EA(e);e._tfengine=new $A(n)}return function(t){Cb=t}(e._tfengine.ENV),lr=function(){return e._tfengine},e._tfengine}();function Ob(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Pr=Q();Pr.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Pr.registerFlag("IS_BROWSER",function(){return Ob()}),Pr.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Pr.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Pr.registerFlag("PROD",function(){return!1}),Pr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Pr.getBool("DEBUG")}),Pr.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Pr.registerFlag("IS_TEST",function(){return!1});var Mi,En,bn,Ro={},ol={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function jA(e,n){Ro[e]=n}function kr(e){e in Ro||(Ro[e]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Ro[t]},!1),t===1?r.getContext("webgl",ol)||r.getContext("experimental-webgl",ol):r.getContext("webgl2",ol)}(e));var n=Ro[e];return n.isContextLost()?(delete Ro[e],kr(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ro[e])}function dc(e,n){return[n,e]}function gi(e){var n=we(e);return hf(Math.ceil(n/4))}function ts(e,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(e/2))]}function Sd(e,n){var t,r,o,a,i,s,u,c,l,f=e;return Q().getNumber("WEBGL_VERSION")===2?(t=f.R32F,r=f.R16F,o=f.RGBA16F,a=f.RGBA32F,i=f.RED,s=4,u=1,c=f.HALF_FLOAT,l=f.FLOAT):(t=e.RGBA,r=e.RGBA,o=e.RGBA,a=f.RGBA,i=e.RGBA,s=4,u=4,c=n!=null?n.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function _e(e,n,t){var r=t();return n&&function(o){var a=o.getError();if(a!==o.NO_ERROR)throw new Error("WebGL Error: "+XA(o,a))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Mi||(Mi={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(En||(En={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(bn||(bn={}));var GA=596e-10,qA=65504;function KA(e){return!!(Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||GA<Math.abs(e)&&Math.abs(e)<qA)}function XA(e,n){switch(n){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function ys(e,n,t){return Hr(e,n,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function YA(e,n,t){var r=Hr(e,n,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(_e(e,n,function(){return e.shaderSource(r,t)}),_e(e,n,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function JA(e,n,t){var r=Hr(e,n,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(_e(e,n,function(){return e.shaderSource(r,t)}),_e(e,n,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(o,a){var i=QA.exec(a);if(i==null)return console.log("Couldn't parse line number in error: "+a),void console.log(o);for(var s=+i[1],u=o.split(`
`),c=u.length.toString().length+2,l=u.map(function(m,g){return Sa((g+1).toString(),c)+m}),f=0,d=0;d<l.length;d++)f=Math.max(l[d].length,f);var h=l.slice(0,s-1),p=l.slice(s-1,s),v=l.slice(s);console.log(h.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+Sa(p[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}(t,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var al,il,QA=/ERROR: [0-9]+:([0-9]+):/g;function ZA(e,n){return Hr(e,n,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function eT(e,n,t){if(_e(e,n,function(){return e.linkProgram(t)}),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function sl(e,n,t){if(_e(e,n,function(){return e.validateProgram(t)}),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function tT(e,n,t){var r=Hr(e,n,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return _e(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),_e(e,n,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),r}function nT(e,n,t){var r=Hr(e,n,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return _e(e,n,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),_e(e,n,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),r}function rT(e,n){return Hr(e,n,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function oT(e,n){var t=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||n<=0){var r="["+e+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>t||n>t)throw r="["+e+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function aT(e,n){return Hr(e,n,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Kv(e,n,t,r,o,a,i,s){var u=e.getAttribLocation(t,r);return u!==-1&&(_e(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,o)}),_e(e,n,function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,s)}),_e(e,n,function(){return e.enableVertexAttribArray(u)}),!0)}function iT(e,n,t,r){fT(e,r),_e(e,n,function(){return e.activeTexture(e.TEXTURE0+r)}),_e(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function sT(e,n,t,r){return Hr(e,n,function(){return e.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function uT(e,n,t){return e.getUniformLocation(n,t)}function cT(e,n,t,r,o,a){_e(e,n,function(){return iT(e,n,r,a)}),_e(e,n,function(){return e.uniform1i(o,a)})}function ul(e,n,t,r){_e(e,n,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),_e(e,n,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})}function Xv(e,n,t){_e(e,n,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),_e(e,n,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function bs(e){var n=e.checkFramebufferStatus(e.FRAMEBUFFER);if(n!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+lT(e,n))}function lT(e,n){switch(n){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function Hr(e,n,t,r){var o=_e(e,n,function(){return t()});if(o==null)throw new Error(r);return o}function fT(e,n){var t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+e.TEXTURE0;if(r<e.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function vu(e,n){return n===void 0&&(n=2),we(e.slice(0,e.length-n))}function mu(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function cl(e){var n=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(n=[vu(e)].concat(mu(e))),n}function dT(e,n){var t;n===void 0&&(n=!1);var r=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(e=e.map(function(c,l){return l>=e.length-2?Rb(e[l]):e[l]})).length===1&&(e=[2,e[0]])),e.length!==2){var o=Do(e);e=o.newShape}var a=we(e);if(e.length<=1&&a<=r)return[1,a];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(n){var i=vu(e),s=2,u=2;return e.length&&(s=(t=mu(e))[0],u=t[1]),hf(a=i*(s/2)*(u/2)).map(function(c){return 2*c})}return hf(a)}function xs(e){return e%2==0}function ws(e,n){if(Nt(e=e.slice(-2),n=n.slice(-2))||!e.length||!n.length||e[0]===0||e[1]===0||n[0]===0||n[1]===0)return!0;if(e.length!==n.length){var t=e.slice(-1)[0],r=n.slice(-1)[0];if(t===r||xs(t)&&xs(r)&&(e[0]===1||n[0]===1))return!0}return e[1]===n[1]&&xs(e[0])&&xs(n[0])}function hT(e){if(al==null){var n=kr(e);al=n.getParameter(n.MAX_TEXTURE_SIZE)}return al}function pT(e){if(il==null){var n=kr(e);il=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,il)}function vT(e){if(e===0)return 0;var n=kr(e);return Ln(n,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Ln(n,"EXT_disjoint_timer_query")?1:0}function Ln(e,n){return e.getExtension(n)!=null}function Yv(e){try{if(kr(e)!=null)return!0}catch{return!1}return!1}function mT(e){if(e===0)return!1;var n=kr(e);if(e===1){if(!Ln(n,"OES_texture_float"))return!1}else if(!Ln(n,"EXT_color_buffer_float"))return!1;return xf(n)}function gT(e){if(e===0)return!1;var n=kr(e);if(e!==1){if(Ln(n,"EXT_color_buffer_float"))return xf(n);if(Ln(n,"EXT_color_buffer_half_float")){var t=n.getExtension("EXT_color_buffer_half_float");return function(r,o){var a=Sd(r,o),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(s),u}(n,t)}return!1}return!!Ln(n,"OES_texture_float")&&!!Ln(n,"WEBGL_color_buffer_float")&&xf(n)}function xf(e){var n=Sd(e),t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(r),o}function yT(e){return e===2&&kr(e).fenceSync!=null}var Pe=Q();function Mb(e){Q().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function me(e,n){return M.tidy(e,n)}function pn(e){Nb(e).forEach(function(n){return n.dispose()})}function bT(e){return M.keep(e)}function gu(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Q().getBool("IS_TEST")||console.warn.apply(console,e)}function yo(e,n){var t=e;if(gr(e))return n==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(t)||gr(t)&&n!=="string";)r.push(t.length),t=t[0];return Array.isArray(e)&&Q().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(a,i,s){if(s=s||[],!Array.isArray(a)&&!gr(a))return void D(i.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"});D(i.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),D(a.length===i[0],function(){return"Element arr["+s.join("][")+"] should have "+i[0]+" elements, but has "+a.length+" elements"});for(var u=i.slice(1),c=0;c<a.length;++c)o(a[c],u,s.concat(c))}(e,r,[]),r}function Jv(e,n,t,r){if(e!=null&&(e!=="numeric"&&e!==n||e==="numeric"&&n==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+e+" tensor, but got "+n+" tensor")}function A(e,n,t,r){if(r===void 0&&(r="numeric"),e instanceof dt)return Jv(r,e.dtype,n,t),e;var o=Zi(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Jv(r,o,n,t),e==null||!gr(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var a=e==null?"null":e.constructor.name;throw new Error("Argument '"+n+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=yo(e,o);gr(e)||Array.isArray(e)||(e=[e]);var s=o!=="string"?Ab(e,o,Q().getBool("DEBUG")):La(e,[],!0);return M.makeTensor(s,i,o)}function yu(e,n,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+n+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(o,a){return A(o,n+"["+a+"]",t)},r)}function Bb(e,n){for(var t=0;t<e.length;++t)if(e[e.length-t-1]!==n-1-t)return!1;return!0}function xT(e,n,t){for(var r=e.length+n.length,o=[],a=0,i=0,s=0;s<r;s++)t.indexOf(s)===-1?o.push(e[a++]):o.push(n[i++]);return o}function qt(e,n){for(var t=[],r=e.length,o=0;o<r;o++)n.indexOf(o)===-1&&t.push(e[o]);return[t,n.map(function(a){return e[a]})]}function mn(e,n){return xT(e,n.map(function(t){return 1}),n)}function yn(e,n,t){D(Bb(n,t),function(){return e+" supports only inner-most axes for now. Got axes "+n+" and rank-"+t+" input."})}function Rr(e,n){if(Bb(e,n))return null;for(var t=[],r=0;r<n;++r)e.indexOf(r)===-1&&t.push(r);return e.forEach(function(o){return t.push(o)}),t}function kd(e){return e.map(function(n,t){return[t,n]}).sort(function(n,t){return n[1]-t[1]}).map(function(n){return n[0]})}function Ir(e,n){for(var t=[],r=n-e;r<n;++r)t.push(r);return t}function wT(e,n){var t=e[0].length;e.forEach(function(o,a){D(o.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+t+")"})}),D(n>=0&&n<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=e[0];e.forEach(function(o,a){for(var i=0;i<t;i++)D(i===n||o[i]===r[i],function(){return"Error in concat"+t+"D: Shape of tensors["+a+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function Wa(e,n){for(var t=e[0].slice(),r=1;r<e.length;r++)t[n]+=e[r][n];return t}function O(e){var n=Object.keys(e);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var t=n[0],r=e[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var o=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];M.startScope(t);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),M.endScope(s),s}catch(u){throw M.endScope(null),u}};return Object.defineProperty(o,"name",{value:t,configurable:!0}),o}Pe.registerFlag("HAS_WEBGL",function(){return Pe.getNumber("WEBGL_VERSION")>0}),Pe.registerFlag("WEBGL_VERSION",function(){return Yv(2)?2:Yv(1)?1:0}),Pe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Pe.get("WEBGL_VERSION")===2}),Pe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Pe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Pe.registerFlag("WEBGL_PACK",function(){return Pe.getBool("HAS_WEBGL")}),Pe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_PACK_CLIP",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Pe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_PACK_REDUCE",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_CONV_IM2COL",function(){return Pe.getBool("WEBGL_PACK")}),Pe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return hT(Pe.getNumber("WEBGL_VERSION"))}),Pe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return pT(Pe.getNumber("WEBGL_VERSION"))}),Pe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Pe.getNumber("WEBGL_VERSION");return e===0?0:vT(e)}),Pe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Pe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Pe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return mT(Pe.getNumber("WEBGL_VERSION"))}),Pe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Pe.getBool("WEBGL_FORCE_F16_TEXTURES")&&Pe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Pe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return gT(Pe.getNumber("WEBGL_VERSION"))}),Pe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return yT(Pe.getNumber("WEBGL_VERSION"))}),Pe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Pe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Pb=Mb;var Wt=O({complex_:function(e,n){var t=A(e,"real","complex"),r=A(n,"imag","complex");return nt(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),M.runKernelFunc(function(o){return o.complex(t,r)},{$real:t,$imag:r})}}),Bn=O({real_:function(e){var n=A(e,"input","real");return M.runKernelFunc(function(t){return t.real(n)},{$input:n})}}),fr=O({imag_:function(e){var n=A(e,"input","imag");return M.runKernelFunc(function(t){return t.imag(n)},{$input:n})}});function zt(e,n,t){return bo(e,n,yo(e,t),t)}function bo(e,n,t,r){if(r==null&&(r=Zi(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!gr(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){Db(n);var o=we(n),a=we(t);D(o===a,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+o+" values but has "+a});for(var i=0;i<t.length;++i){var s=t[i],u=i!==t.length-1||s!==we(n.slice(i));D(t[i]===n[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+n+"). "})}}return gr(e)||Array.isArray(e)||(e=[e]),n=n||t,e=r!=="string"?Ab(e,r,Q().getBool("DEBUG")):La(e,[],!0),M.makeTensor(e,n,r)}function he(e,n){if((gr(e)&&n!=="string"||Array.isArray(e))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&gr(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return bo(e,[],[],n)}function _t(e,n){qa(e);var t=yo(e,n);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return bo(e,null,t,n)}function uo(e,n,t){if(qa(e),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=yo(e,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return bo(e,n,r,t)}function Rd(e,n,t){if(qa(e),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=yo(e,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return bo(e,n,r,t)}function fn(e,n,t){if(qa(e),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=yo(e,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return bo(e,n,r,t)}function _T(e,n,t){if(qa(e),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=yo(e,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return bo(e,n,r,t)}function CT(e,n,t){if(qa(e),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=yo(e,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return bo(e,n=n||r,r,t)}function ET(e,n,t,r){return n===void 0&&(n=!0),M.makeVariable(e,n,t,r)}function Ka(e,n){if(n===void 0&&(n="float32"),n==="complex64"){var t=Ka(e,"float32"),r=ct(e,"float32");return Wt(t,r)}var o=Tb(we(e),n);return M.makeTensor(o,e,n)}function ct(e,n){if(n===void 0&&(n="float32"),n==="complex64"){var t=ct(e,"float32"),r=ct(e,"float32");return Wt(t,r)}var o=es(we(e),n);return M.makeTensor(o,e,n)}function br(e,n,t){return M.runKernelFunc(function(r){return r.fill(e,n,t)},{})}function ST(e,n,t){if(t<=0)throw new Error("The number of values should be positive.");return M.runKernelFunc(function(r){return r.linspace(e,n,t)},{})}function bu(e,n,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(e===n||e<n&&t<0||n<e&&t>1)return ct([0],r);var o=es(Math.abs(Math.ceil((n-e)/t)),r);n<e&&t===1&&(t=-1),o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+t;return _t(o,r)}var Lb=O({onesLike_:function(e){var n=A(e,"x","onesLike");if(n.dtype==="complex64"){var t=Lb(Bn(n)),r=Ke(fr(n));return Wt(t,r)}return M.runKernelFunc(function(o){return o.onesLike(n)},{$x:n},function(o,a){return{$x:function(){return Ke(o)}}})}}),Ke=O({zerosLike_:function(e){var n=A(e,"x","zerosLike");return M.runKernelFunc(function(t){return t.zerosLike(n)},{$x:n},function(t,r){return{$x:function(){return Ke(t)}}})}}),St=O({concat_:function(e,n){n===void 0&&(n=0),D(e.length>=1,function(){return"Pass at least one tensor to concat"});var t=yu(e,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),n=Tt(n,t[0].shape)[0];var r=Wa(t.map(function(s){return s.shape}),n);if(we(r)===0)return zt([],r);if((t=t.filter(function(s){return s.size>0})).length===1)return t[0];var o=t.map(function(s){return s.shape});wT(o,n);var a=t,i={axis:n};return M.runKernelFunc(function(s){return s.concat(t,n)},a,function(s){var u=o.map(function(c){return c[n]});return Id(s,u,n).map(function(c){return function(){return c}})},"Concat",i)}}),kT=O({concat1d_:function(e){return St(e,0)}}),RT=O({concat2d_:function(e,n){return St(e,n)}}),IT=O({concat3d_:function(e,n){return St(e,n)}}),AT=O({concat4d_:function(e,n){return St(e,n)}}),Id=O({split_:function(e,n,t){t===void 0&&(t=0);var r,o=A(e,"x","split");return t=Tt(t,o.shape)[0],typeof n=="number"?(D(o.shape[t]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(o.shape[t]/n)):(D(o.shape[t]===n.reduce(function(a,i){return a+i}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),M.runKernelFunc(function(a){return a.split(o,r,t)},{$x:o},function(a){return{$x:function(){return St(a,t)}}})}});function Jo(e,n){return e(n={exports:{}},n.exports),n.exports}var TT=Jo(function(e){(function(n,t,r){function o(s){var u,c=this,l=(u=4022871197,function(f){f=f.toString();for(var d=0;d<f.length;d++){var h=.02519603282416938*(u+=f.charCodeAt(d));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});c.next=function(){var f=2091639*c.s0+23283064365386963e-26*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=0|f)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(s),c.s0<0&&(c.s0+=1),c.s1-=l(s),c.s1<0&&(c.s1+=1),c.s2-=l(s),c.s2<0&&(c.s2+=1),l=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function i(s,u){var c=new o(s),l=u&&u.state,f=c.next;return f.int32=function(){return 4294967296*c.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}t&&t.exports?t.exports=i:this.alea=i})(0,e)}),DT=Jo(function(e){(function(n,t,r){function o(s){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:c+=s;for(var l=0;l<c.length+64;l++)u.x^=0|c.charCodeAt(l),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function i(s,u){var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}t&&t.exports?t.exports=i:this.xor128=i})(0,e)}),FT=Jo(function(e){(function(n,t,r){function o(s){var u=this,c="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:c+=s;for(var l=0;l<c.length+64;l++)u.x^=0|c.charCodeAt(l),l==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function i(s,u){var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}t&&t.exports?t.exports=i:this.xorwow=i})(0,e)}),PT=Jo(function(e){(function(n,t,r){function o(s){var u=this;u.next=function(){var c,l,f=u.x,d=u.i;return c=f[d],l=(c^=c>>>7)^c<<24,l^=(c=f[d+1&7])^c>>>10,l^=(c=f[d+3&7])^c>>>3,l^=(c=f[d+4&7])^c<<7,c=f[d+7&7],l^=(c^=c<<13)^c<<9,f[d]=l,u.i=d+1&7,l},function(c,l){var f,d=[];if(l===(0|l))d[0]=l;else for(l=""+l,f=0;f<l.length;++f)d[7&f]=d[7&f]<<15^l.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],c.x=d,c.i=0,f=256;f>0;--f)c.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function i(s,u){s==null&&(s=+new Date);var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(l.x&&a(l,c),f.state=function(){return a(c,{})}),f}t&&t.exports?t.exports=i:this.xorshift7=i})(0,e)}),NT=Jo(function(e){(function(n,t,r){function o(s){var u=this;u.next=function(){var c,l,f=u.w,d=u.X,h=u.i;return u.w=f=f+1640531527|0,l=d[h+34&127],c=d[h=h+1&127],l^=l<<13,c^=c<<17,l^=l>>>15,c^=c>>>12,l=d[h]=l^c,u.i=h,l+(f^f>>>16)|0},function(c,l){var f,d,h,p,v,m=[],g=128;for(l===(0|l)?(d=l,l=null):(l+="\0",d=0,g=Math.max(g,l.length)),h=0,p=-32;p<g;++p)l&&(d^=l.charCodeAt((p+32)%l.length)),p===0&&(v=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,p>=0&&(v=v+1640531527|0,h=(f=m[127&p]^=d+v)==0?h+1:0);for(h>=128&&(m[127&(l&&l.length||0)]=-1),h=127,p=512;p>0;--p)d=m[h+34&127],f=m[h=h+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,m[h]=d^f;c.w=v,c.X=m,c.i=h}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function i(s,u){s==null&&(s=+new Date);var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(l.X&&a(l,c),f.state=function(){return a(c,{})}),f}t&&t.exports?t.exports=i:this.xor4096=i})(0,e)}),OT=Jo(function(e){(function(n,t,r){function o(s){var u=this,c="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):c+=s;for(var l=0;l<c.length+20;l++)u.b^=0|c.charCodeAt(l),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function i(s,u){var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}t&&t.exports?t.exports=i:this.tychei=i})(0,e)}),Io=Jo(function(e){(function(n,t){var r,o=this,a=256,i=6,s="random",u=t.pow(a,i),c=t.pow(2,52),l=2*c,f=a-1;function d(g,y,x){var b=[],_=v(function E(C,k){var I,R=[],T=typeof C;if(k&&T=="object")for(I in C)try{R.push(E(C[I],k-1))}catch{}return R.length?R:T=="string"?C:C+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[g,m(n)]:g??function(){try{var E;return r&&(E=r.randomBytes)?E=E(a):(E=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(E)),m(E)}catch{var C=o.navigator,k=C&&C.plugins;return[+new Date,o,k,o.screen,m(n)]}}(),3),b),w=new h(b),S=function(){for(var E=w.g(i),C=u,k=0;E<c;)E=(E+k)*a,C*=a,k=w.g(1);for(;E>=l;)E/=2,C/=2,k>>>=1;return(E+k)/C};return S.int32=function(){return 0|w.g(4)},S.quick=function(){return w.g(4)/4294967296},S.double=S,v(m(w.S),n),(y.pass||x||function(E,C,k,I){return I&&(I.S&&p(I,w),E.state=function(){return p(w,{})}),k?(t[s]=E,C):E})(S,_,"global"in y?y.global:this==t,y.state)}function h(g){var y,x=g.length,b=this,_=0,w=b.i=b.j=0,S=b.S=[];for(x||(g=[x++]);_<a;)S[_]=_++;for(_=0;_<a;_++)S[_]=S[w=f&w+g[_%x]+(y=S[_])],S[w]=y;(b.g=function(E){for(var C,k=0,I=b.i,R=b.j,T=b.S;E--;)C=T[I=f&I+1],k=k*a+T[f&(T[I]=T[R=f&R+C])+(T[R]=C)];return b.i=I,b.j=R,k})(a)}function p(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function v(g,y){for(var x,b=g+"",_=0;_<b.length;)y[f&_]=f&(x^=19*y[f&_])+b.charCodeAt(_++);return m(y)}function m(g){return String.fromCharCode.apply(0,g)}if(t["seed"+s]=d,v(t.random(),n),e.exports){e.exports=d;try{r=require("crypto")}catch{}}})([],Math)});Io.alea=TT,Io.xor128=DT,Io.xorwow=FT,Io.xorshift7=PT,Io.xor4096=NT,Io.tychei=OT;var hc=Io.alea,Ad=function(){function e(n,t,r,o,a){this.mean=n,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=hc(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var t,r,o=!1;!o;){var a=void 0,i=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(t)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},e.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},e.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},e}(),MT=function(){function e(n,t,r,o){this.alpha=n,this.beta=1/t,this.dtype=r;var a=o||Math.random();this.randu=hc(a.toString()),this.randn=new Ad(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var n,t,r,o,a,i;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,t=1-.331*(n=o*o)*n,r=.5*n+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},e}(),BT=function(){function e(n,t,r,o){var a=this;if(n===void 0&&(n=0),t===void 0&&(t=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=n,this.range=t-n,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+t+" <= 1 and dtype is not float");this.random=hc(o)}return e.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Be(e,n,t){return n===void 0&&(n="float32"),n=n||"float32",Db(e),new Oi(e,n,t)}function LT(e,n){n===void 0&&(n=!1),console.log(e.toString(n))}var Vb=O({batchToSpaceND_:function(e,n,t){var r=A(e,"x","batchToSpaceND"),o=n.reduce(function(a,i){return a*i});return D(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),D(t.length===n.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+n.length}),D(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+o}),M.runKernelFunc(function(a){return a.batchToSpaceND(r,n,t)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(n,t)}}})}}),VT=O({broadcastTo_:function(e,n){var t=A(e,"broadcastTo","x"),r=t.shape;if(n.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<t.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+t.rank+".");if(n.length>t.rank){for(var o=t.shape.slice();o.length<n.length;)o.unshift(1);t=t.reshape(o)}for(var a=Array.from(n),i=n.length-1;i>=0;i--)if(t.shape[i]===n[i])a[i]=1;else if(t.shape[i]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var s=a.map(function(u,c){return u>1?c:-1}).filter(function(u){return u>=0});return s.length===0?t.clone():M.runKernelFunc(function(u){return u.tile(t,a)},{input:t},function(u){return{input:function(){return u.sum(s,!0)}}})}}),WT=O({cast_:function(e,n){var t=A(e,"x","cast");if(!FA(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&t.dtype!=="string"||n!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return M.runKernelFunc(function(o){return o.cast(t,n)},{x:t},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),UT=O({clone_:function(e){var n=A(e,"x","clone",null);return M.runKernelFunc(function(){return M.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(t){return{$x:function(){return t.toFloat()}}})}}),zT=O({cumsum_:function(e,n,t,r){n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var o=A(e,"x","cumsum"),a=Rr([n|=0],o.rank),i=o;a!=null&&(i=o.transpose(a));var s=Ir(1,o.rank)[0],u=M.runKernelFunc(function(c){return c.cumsum(i,s,t,r)},{permutedX:i},function(c){return{permutedX:function(){return c.cumsum(n,t,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),HT=O({depthToSpace_:function(e,n,t){t===void 0&&(t="NHWC");var r=A(e,"x","depthToSpace"),o=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],i=t==="NHWC"?r.shape[3]:r.shape[1];return D(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),D(a*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+n+` for depthToSpace with input shape
          `+r.shape}),D(i%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+i+" for depthToSpace with input shape "+r.shape}),M.runKernelFunc(function(s){return s.depthToSpace(r,n,t)},{$x:r})}}),Mn=O({expandDims_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","expandDims",null);D(n<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return n<0&&(D(-(t.rank+1)<=n,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),n=t.rank+n+1),r.splice(n,0,1),Hn(t,r)}}),Wb=O({eye_:function(e,n,t,r){r===void 0&&(r="float32"),n==null&&(n=e);for(var o=Be([e,n],r),a=e<=n?e:n,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(e,n);if(t==null)return s;if(t.length===1)return ka(Mn(s,0),[t[0],1,1]);if(t.length===2)return ka(Mn(Mn(s,0),0),[t[0],t[1],1,1]);if(t.length===3)return ka(Mn(Mn(Mn(s,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),$T=O({multinomial_:function(e,n,t,r){r===void 0&&(r=!1);var o=A(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);t=t||Math.random();var s=i===1?o.as2D(1,-1):o,u=M.runKernelFunc(function(c){return c.multinomial(s,r,n,t)},{logits2D:s});return i===1?u.as1D():u}}),wf=O({oneHot_:function(e,n,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var o=A(e,"indices","oneHot","int32"),a=o.shape.concat([n]);return o=o.flatten(),M.runKernelFunc(function(i){return i.oneHot(o,n,t,r)},{$indices:o},function(i){return{$indices:function(){return ct(o.shape,"float32")}}}).reshape(a)}}),Qo=O({pad_:function(e,n,t){t===void 0&&(t=0);var r=A(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:n,constantValue:t};return M.runKernelFunc(function(a){return a.pad(r,n,t)},{x:r},function(a){var i=n.map(function(s){return s[0]});return{x:function(){return a.slice(i,r.shape)}}},"PadV2",o)}}),jT=O({pad1d_:function(e,n,t){return t===void 0&&(t=0),D(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Qo(e,[n],t)}}),GT=O({pad2d_:function(e,n,t){return t===void 0&&(t=0),D(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Qo(e,n,t)}}),qT=O({pad3d_:function(e,n,t){return t===void 0&&(t=0),D(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Qo(e,n,t)}}),KT=O({pad4d_:function(e,n,t){return t===void 0&&(t=0),D(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Qo(e,n,t)}}),XT=O({rand_:function(e,n,t){var r=we(e),o=null;if(t==null||t==="float32")o=new Float32Array(r);else if(t==="int32")o=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=n();return M.makeTensor(o,e,t)}}),YT=O({randomNormal_:function(e,n,t,r,o){if(n===void 0&&(n=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new Ad(n,t,r,!1,o),i=Be(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),JT=O({randomGamma_:function(e,n,t,r,o){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new MT(n,t,r,o),i=Be(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Ub=O({randomUniform_:function(e,n,t,r,o){n===void 0&&(n=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var a=Be(e,r),i=new BT(n,t,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Hn=O({reshape_:function(e,n){var t=A(e,"x","reshape",null);n=TA(n,t.size),D(t.size===we(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return M.runKernelFunc(function(o){return o.reshape(t,n)},{x:t},function(o){return{x:function(){return o.reshape(t.shape)}}},"Reshape",r)}}),zb=O({spaceToBatchND_:function(e,n,t){var r=A(e,"x","spaceToBatchND");return D(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),D(t.length===n.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+n.length}),D(r.shape.reduce(function(o,a,i){return i>0&&i<=n.length?o&&(a+t[i-1][0]+t[i-1][1])%n[i-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+n.toString()}),M.runKernelFunc(function(o){return o.spaceToBatchND(r,n,t)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(n,t)}}})}}),Hb=O({squeeze_:function(e,n){var t=A(e,"x","squeeze");return Hn(t,Do(t.shape,n).newShape)}}),An=O({stack_:function(e,n){n===void 0&&(n=0);var t=yu(e,"tensors","stack");if(D(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(n);var r=t[0].rank,o=t[0].shape,a=t[0].dtype;D(n<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(s){nt(o,s.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(s){D(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=t.map(function(s){return s.expandDims(n)});return St(i,n)}}),ka=O({tile_:function(e,n){var t=A(e,"x","tile",null);D(t.rank===n.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+n+"."});var r=[t],o={reps:n};return M.runKernelFunc(function(a,i){var s=a.tile(t,n);return i([t]),s},{x:t},function(a,i){var s=i[0];return{x:function(){var u=Ke(s);if(s.rank===1)for(var c=0;c<n[0];++c)u=u.add(a.slice([c*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(c=0;c<n[0];++c)for(var l=0;l<n[1];++l)u=u.add(a.slice([c*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(c=0;c<n[0];++c)for(l=0;l<n[1];++l)for(var f=0;f<n[2];++f)u=u.add(a.slice([c*s.shape[0],l*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(c=0;c<n[0];++c)for(l=0;l<n[1];++l)for(f=0;f<n[2];++f)for(var d=0;d<n[3];++d)u=u.add(a.slice([c*s.shape[0],l*s.shape[1],f*s.shape[2],d*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",o,r)}}),QT=O({truncatedNormal_:function(e,n,t,r,o){if(n===void 0&&(n=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new Ad(n,t,r,!0,o),i=Be(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),kt=O({unstack_:function(e,n){n===void 0&&(n=0),n=n||0;var t=A(e,"x","unstack");D(n>=-t.shape.length&&n<t.shape.length,function(){return"Axis = "+n+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),n<0&&(n+=t.shape.length);var r={axis:n};return M.runKernelFunc(function(o){return o.unstack(t,n)},{x:t},function(o){return{x:function(){return An(o,n)}}},"Unpack",r)}}),ZT=function(e,n){return ge(this,void 0,void 0,function(){var t,r,o,a,i,s,u,c,l,f;return ye(this,function(d){switch(d.label){case 0:return t=A(e,"x","setdiff1d"),r=A(n,"y","setdiff1d"),D(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),D(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),D(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return o=d.sent(),[4,r.data()];case 2:for(a=d.sent(),i=new Set(a),s=0,l=0;l<o.length;l++)i.has(o[l])||s++;for(u=new Oi([s],t.dtype),c=new Oi([s],"int32"),l=0,f=0;l<o.length;l++)i.has(o[l])||(u.values[f]=o[l],c.values[f]=l,f++);return[2,[u.toTensor(),c.toTensor()]]}})})};function xu(e,n,t,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(n.slice(0))).push(e[0]/t),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var a=n.length,i=0;i<a;++i)o=o.concat([e[i+1]/n[i],n[i]]);o=o.concat(e.slice(a+1))}return o}function wu(e,n,t){t===void 0&&(t=!0);var r=[];if(t){r.push(n);for(var o=n+1;o<e;++o)o<=2*n?(r.push(o),r.push(o-(n+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<e;++o)o>=2*n+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function _u(e,n,t,r){r===void 0&&(r=!0);var o=[];r?o.push(e[0]/t):o.push(e[0]*t);for(var a=1;a<e.length;++a)a<=n.length?r?o.push(n[a-1]*e[a]):o.push(e[a]/n[a-1]):o.push(e[a]);return o}function $b(e,n){for(var t=[0],r=0;r<n;++r)t.push(e[r][0]);return t}function jb(e,n,t){for(var r=e.slice(0,1),o=0;o<t;++o)r.push(e[o+1]-n[o][0]-n[o][1]);return r}function Gb(e,n){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var t=n.shape,r=t[t.length-1],o=1,a=0;a<t.length-1;++a)o*=t[a];var i=e.shape,s=t.slice();s.pop();var u=1;for(a=r;a<e.rank;++a)u*=i[a],s.push(i[a]);var c=yr(e.shape).map(function(l){return l/u}).concat([1]).slice(0,r);return[s,o,u,c]}var qb=30;function ll(e){return e<=qb?e:vf(e,Math.floor(Math.sqrt(e)))}function eD(e,n,t){var r=n.rank>1?n.shape[n.rank-1]:1,o=n.rank>1?n.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+n.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(t.rank<o)throw new Error(a+" update.rank < "+o+". ");if(e.length<r+(t.rank-o))throw new Error(a+" Output shape length < "+(r+(t.rank-o)));if(t.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(var i=0;i<o;++i)if(t.shape[i]!==n.shape[i])throw new Error(a+" updates.shape["+i+"] ("+t.shape[i]+") != indices.shape["+i+"] ("+n.shape[i]+").");for(i=0;i<t.rank-o;++i)if(t.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+t.shape[i+o]+") != shape["+(i+o)+"] ("+e[i+o]+")")}function tD(e,n,t){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}eD(t,n,e)}function Cu(e,n,t){for(var r=n.shape.length,o=r>1?n.shape[r-1]:1,a=t.length,i=1,s=o;s<a;++s)i*=t[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:we(n.shape)/u,sliceSize:i,strides:yr(t.slice(0,o)).concat([1]),outputSize:we(t)}}function nD(e,n,t){D(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+n+" must match the rank of the array ("+e.rank+")."}),D(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of size "+t+" must match the rank of the array ("+e.rank+")."});for(var r=function(a){D(n[a]+t[a]<=e.shape[a],function(){return"Error in slice"+e.rank+"D: begin["+a+"] + size["+a+"] ("+(n[a]+t[a])+") would overflow input.shape["+a+"] ("+e.shape[a]+")"})},o=0;o<e.rank;++o)r(o)}function Qv(e){for(var n=[],t=0;e>0;)1&e&&n.push(t),e/=2,t++;return n}function Td(e,n,t){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((n[o]-e[o])/t[o]);return r}function rD(e,n,t,r,o){var a=n[o],i=t[o]||1;(e&1<<o||a==null)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=df(0,a,s-1)}function oD(e,n,t,r,o){var a=n[o],i=t[o]||1;(e&1<<o||a==null)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=i>0?df(0,a,s):df(-1,a,s-1)}function Kb(e,n,t){for(var r=t.length,o=0;o<t.length;o++)if(t[o]>1){r=o;break}for(o=r+1;o<t.length;o++)if(n[o]>0||t[o]!==e[o])return!1;return!0}function Xb(e,n){for(var t=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)t+=e[r]*n[r];return t}function aD(e,n){D(pf(e),function(){return"The f passed in variableGrads(f) must be a function"}),D(n==null||Array.isArray(n)&&n.every(function(l){return l instanceof Va}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=n!=null;if(!t)for(var r in n=[],M.registeredVariables)n.push(M.registeredVariables[r]);var o=t?n.filter(function(l){return!l.trainable}):null,a=n.length;D((n=n.filter(function(l){return l.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var i=M.gradients(e,n,null,!0),s=i.value,u=i.grads;D(u.some(function(l){return l!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),D(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var c={};return n.forEach(function(l,f){u[f]!=null&&(c[l.name]=u[f])}),o!=null&&o.forEach(function(l){return c[l.name]=null}),{value:s,grads:c}}function pc(e){return M.customGrad(e)}var $r=O({softmax_:function(e,n){n===void 0&&(n=-1);var t=A(e,"logits","softmax","float32");if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+n);return M.runKernelFunc(function(r,o){var a=r.softmax(t,n);return o([a]),a},{logits:t},function(r,o){var a=o[0],i=r.mul(a);return{logits:function(){return i.sub(i.sum([n],!0).mul(a))}}},"Softmax",{dim:n},[],[!0])}}),iD=O({logSoftmax_:function(e,n){n===void 0&&(n=-1);var t=A(e,"logits","logSoftmax");if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+n);return pc(function(r,o){var a=r.max(n,!0),i=r.sub(a),s=i.toFloat().sub(i.exp().sum(n,!0).log());return o([s]),{value:s,gradFunc:function(u,c){var l=c[0].exp();return u.sub(u.sum(n,!0).mul(l))}}})(t)}}),Yb=function(){function e(n,t){this.backend=n,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},e.prototype.set=function(n,t){this.dataIdsCount++,this.data.set(n,t)},e.prototype.has=function(n){return this.data.has(n)},e.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Jb=function(){function e(){}return e.prototype.time=function(n){return G("time")},e.prototype.read=function(n){return G("read")},e.prototype.readSync=function(n){return G("readSync")},e.prototype.numDataIds=function(){return G("numDataIds")},e.prototype.disposeData=function(n){return G("disposeData")},e.prototype.write=function(n,t,r){return G("write")},e.prototype.move=function(n,t,r,o){return G("move")},e.prototype.memory=function(){return G("memory")},e.prototype.floatPrecision=function(){return G("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(n,t,r,o){return G("batchMatMul")},e.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,G("fusedBatchMatMul")},e.prototype.slice=function(n,t,r){return G("slice")},e.prototype.stridedSlice=function(n,t,r,o){return G("stridedSlice")},e.prototype.unstack=function(n,t){return G("unstack")},e.prototype.reverse=function(n,t){return G("reverse")},e.prototype.concat=function(n,t){return G("concat")},e.prototype.neg=function(n){return G("neg")},e.prototype.add=function(n,t){return G("add")},e.prototype.addN=function(n){return G("addN")},e.prototype.subtract=function(n,t){return G("subtract")},e.prototype.multiply=function(n,t){return G("multiply")},e.prototype.realDivide=function(n,t){return G("realDivide")},e.prototype.floorDiv=function(n,t){return G("floorDiv")},e.prototype.sum=function(n,t){return G("sum")},e.prototype.prod=function(n,t){return G("prod")},e.prototype.unsortedSegmentSum=function(n,t,r){return G("unsortedSegmentSum")},e.prototype.argMin=function(n,t){return G("argMin")},e.prototype.argMax=function(n,t){return G("argMax")},e.prototype.equal=function(n,t){return G("equal")},e.prototype.notEqual=function(n,t){return G("notEqual")},e.prototype.less=function(n,t){return G("less")},e.prototype.lessEqual=function(n,t){return G("lessEqual")},e.prototype.greater=function(n,t){return G("greater")},e.prototype.greaterEqual=function(n,t){return G("greaterEqual")},e.prototype.logicalNot=function(n){return G("logicalNot")},e.prototype.logicalAnd=function(n,t){return G("logicalAnd")},e.prototype.logicalOr=function(n,t){return G("logicalOr")},e.prototype.where=function(n){return G("where")},e.prototype.select=function(n,t,r){return G("select")},e.prototype.topk=function(n,t,r){return G("topk")},e.prototype.min=function(n,t){return G("min")},e.prototype.minimum=function(n,t){return G("minimum")},e.prototype.mod=function(n,t){return G("mod")},e.prototype.max=function(n,t){return G("max")},e.prototype.maximum=function(n,t){return G("maximum")},e.prototype.all=function(n,t){return G("all")},e.prototype.any=function(n,t){return G("any")},e.prototype.squaredDifference=function(n,t){return G("squaredDifference")},e.prototype.ceil=function(n){return G("ceil")},e.prototype.floor=function(n){return G("floor")},e.prototype.round=function(n){return G("round")},e.prototype.sign=function(n){return G("sign")},e.prototype.isNaN=function(n){return G("isNaN")},e.prototype.isInf=function(n){return G("isInf")},e.prototype.isFinite=function(n){return G("isFinite")},e.prototype.pow=function(n,t){return G("pow")},e.prototype.exp=function(n){return G("exp")},e.prototype.expm1=function(n){return G("expm1")},e.prototype.softmax=function(n,t){return G("softmax")},e.prototype.log=function(n){return G("log")},e.prototype.log1p=function(n){return G("log1p")},e.prototype.sqrt=function(n){return G("sqrt")},e.prototype.rsqrt=function(n){return G("rsqrt")},e.prototype.square=function(n){return G("square")},e.prototype.reciprocal=function(n){return G("reciprocal")},e.prototype.relu=function(n){return G("relu")},e.prototype.relu6=function(n){return G("relu6")},e.prototype.prelu=function(n,t){return G("prelu")},e.prototype.elu=function(n){return G("elu")},e.prototype.eluDer=function(n,t){return G("eluDer")},e.prototype.selu=function(n){return G("selu")},e.prototype.int=function(n){return G("int")},e.prototype.clip=function(n,t,r){return G("clip")},e.prototype.abs=function(n){return G("abs")},e.prototype.complexAbs=function(n){return G("complexAbs")},e.prototype.sigmoid=function(n){return G("sigmoid")},e.prototype.softplus=function(n){return G("softplus")},e.prototype.sin=function(n){return G("sin")},e.prototype.cos=function(n){return G("cos")},e.prototype.tan=function(n){return G("tan")},e.prototype.asin=function(n){return G("asin")},e.prototype.acos=function(n){return G("acos")},e.prototype.atan=function(n){return G("atan")},e.prototype.atan2=function(n,t){return G("atan2")},e.prototype.sinh=function(n){return G("sinh")},e.prototype.cosh=function(n){return G("cosh")},e.prototype.tanh=function(n){return G("tanh")},e.prototype.asinh=function(n){return G("asinh")},e.prototype.acosh=function(n){return G("acosh")},e.prototype.atanh=function(n){return G("atanh")},e.prototype.erf=function(n){return G("erf")},e.prototype.step=function(n,t){return G("step")},e.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,G("fusedConv2d")},e.prototype.conv2d=function(n,t,r){return G("conv2d")},e.prototype.conv2dDerInput=function(n,t,r){return G("conv2dDerInput")},e.prototype.conv2dDerFilter=function(n,t,r){return G("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,G("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(n,t,r){return G("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(n,t,r){return G("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(n,t,r){return G("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(n,t,r){return G("conv3d")},e.prototype.conv3dDerInput=function(n,t,r){return G("conv3dDerInput")},e.prototype.conv3dDerFilter=function(n,t,r){return G("conv3dDerFilter")},e.prototype.maxPool=function(n,t){return G("maxPool")},e.prototype.maxPoolBackprop=function(n,t,r,o){return G("maxPoolBackprop")},e.prototype.avgPool=function(n,t){return G("avgPool")},e.prototype.avgPoolBackprop=function(n,t,r){return G("avgPoolBackprop")},e.prototype.avgPool3d=function(n,t){return G("avgPool3d")},e.prototype.avgPool3dBackprop=function(n,t,r){return G("avgPool3dBackprop")},e.prototype.maxPool3d=function(n,t){return G("maxPool3d")},e.prototype.maxPool3dBackprop=function(n,t,r,o){return G("maxPool3dBackprop")},e.prototype.reshape=function(n,t){return G("reshape")},e.prototype.cast=function(n,t){return G("cast")},e.prototype.tile=function(n,t){return G("tile")},e.prototype.pad=function(n,t,r){return G("pad")},e.prototype.transpose=function(n,t){return G("transpose")},e.prototype.gather=function(n,t,r){return G("gather")},e.prototype.gatherND=function(n,t){return G("gatherND")},e.prototype.scatterND=function(n,t,r){return G("scatterND")},e.prototype.batchToSpaceND=function(n,t,r){return G("batchToSpaceND")},e.prototype.spaceToBatchND=function(n,t,r){return G("spaceToBatchND")},e.prototype.resizeBilinear=function(n,t,r,o){return G("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(n,t,r){return G("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(n,t,r,o){return G("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(n,t,r){return G("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(n,t,r,o,a,i){return G("batchNormalization")},e.prototype.localResponseNormalization4D=function(n,t,r,o,a){return G("localResponseNormalization4D")},e.prototype.LRNGrad=function(n,t,r,o,a,i,s){return G("LRNGrad")},e.prototype.multinomial=function(n,t,r,o){return G("multinomial")},e.prototype.oneHot=function(n,t,r,o){return G("oneHot")},e.prototype.cumsum=function(n,t,r,o){return G("cumsum")},e.prototype.nonMaxSuppression=function(n,t,r,o,a){return G("nonMaxSuppression")},e.prototype.fft=function(n){return G("fft")},e.prototype.ifft=function(n){return G("ifft")},e.prototype.complex=function(n,t){return G("complex")},e.prototype.real=function(n){return G("real")},e.prototype.imag=function(n){return G("imag")},e.prototype.cropAndResize=function(n,t,r,o,a,i){return G("cropAndResize")},e.prototype.depthToSpace=function(n,t,r){return G("depthToSpace")},e.prototype.split=function(n,t,r){return G("split")},e.prototype.sparseToDense=function(n,t,r,o){return G("sparseToDense")},e.prototype.diag=function(n){return G("diag")},e.prototype.fill=function(n,t,r){return G("fill")},e.prototype.onesLike=function(n){return G("onesLike")},e.prototype.zerosLike=function(n){return G("zerosLike")},e.prototype.linspace=function(n,t,r){return G("linspace")},e.prototype.dispose=function(){return G("dispose")},e}();function G(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function oo(e,n){for(var t=e.length,r=[],o=0;o<t;o++){var a=t-1-o,i=e[a]||1;(n[n.length-1-o]||1)>1&&i===1&&r.unshift(a)}return r}function It(e,n){for(var t=[],r=0;r<n.length;r++){var o=e[e.length-r-1],a=n.length-r-1,i=n[a];(o==null||o===1&&i>1)&&t.unshift(a)}return t}function $e(e,n){for(var t=[],r=Math.max(e.length,n.length),o=0;o<r;o++){var a=e[e.length-o-1];a==null&&(a=1);var i=n[n.length-o-1];if(i==null&&(i=1),a===1)t.unshift(i);else if(i===1)t.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+n+".");t.unshift(a)}}return t}function Bi(e,n,t,r,o,a,i){i===void 0&&(i="channelsLast");var s,u=ku(n),c=u[0],l=u[1];if(i==="channelsLast")s=[c,l,e[3],e[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[c,l,e[1],e[1]]}return Zo(e,s,t,r,o,a,!1,i)}function Eu(e,n,t,r,o,a,i){i===void 0&&(i="NDHWC");var s,u,c=_f(n),l=c[0],f=c[1],d=c[2];if(i==="NDHWC")u="channelsLast",s=[l,f,d,e[4],e[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[l,f,d,e[1],e[1]]}return Su(e,s,t,r,o,!1,u,a)}function Zo(e,n,t,r,o,a,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],d=u[3];if(s==="channelsLast")c=e[0],l=e[1],f=e[2],d=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);c=e[0],d=e[1],l=e[2],f=e[3]}var h,p=n[0],v=n[1],m=n[3],g=ku(t),y=g[0],x=g[1],b=ku(r),_=b[0],w=b[1],S=Ra(p,_),E=Ra(v,w),C=function(N,B,H,z,W,j,Z,ae){var se,pe,Te;if(typeof N=="number"){se={top:N,bottom:N,left:N,right:N,type:N===0?"VALID":"NUMBER"};var Re=function(be,F,P,L,K){L==null&&(L=Qb(be,F,P));var J=be[0],ee=be[1],ce=yi((J-F+2*L)/P+1,K);D(xt(ce),function(){return"The output # of rows ("+ce+") must be an integer. Change the stride and/or zero pad parameters"});var ie=yi((ee-F+2*L)/P+1,K);return D(xt(ie),function(){return"The output # of columns ("+ie+") must be an integer. Change the stride and/or zero pad parameters"}),[ce,ie]}([B,H],j,z,N,ae);pe=Re[0],Te=Re[1]}else if(N==="same"){pe=Math.ceil(B/z),Te=Math.ceil(H/W);var de=Math.max(0,(pe-1)*z+j-B),$=Math.max(0,(Te-1)*W+Z-H),te=Math.floor(de/2),ne=de-te,le=Math.floor($/2);se={top:te,bottom:ne,left:le,right:$-le,type:"SAME"}}else{if(N!=="valid")throw Error("Unknown padding parameter: "+N);se={top:0,bottom:0,left:0,right:0,type:"VALID"},pe=Math.ceil((B-j+1)/z),Te=Math.ceil((H-Z+1)/W)}return{padInfo:se,outHeight:pe,outWidth:Te}}(o,l,f,y,x,S,E,a),k=C.padInfo,I=C.outHeight,R=C.outWidth,T=i?m*d:m;return s==="channelsFirst"?h=[c,T,I,R]:s==="channelsLast"&&(h=[c,I,R,T]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:f,inChannels:d,outHeight:I,outWidth:R,outChannels:T,padInfo:k,strideHeight:y,strideWidth:x,filterHeight:p,filterWidth:v,effectiveFilterHeight:S,effectiveFilterWidth:E,dilationHeight:_,dilationWidth:w,inShape:e,outShape:h,filterShape:n}}function Su(e,n,t,r,o,a,i,s){a===void 0&&(a=!1),i===void 0&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],d=u[3],h=u[4];if(i==="channelsLast")c=e[0],l=e[1],f=e[2],d=e[3],h=e[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);c=e[0],h=e[1],l=e[2],f=e[3],d=e[4]}var p,v=n[0],m=n[1],g=n[2],y=n[4],x=_f(t),b=x[0],_=x[1],w=x[2],S=_f(r),E=S[0],C=S[1],k=S[2],I=Ra(v,E),R=Ra(m,C),T=Ra(g,k),N=function(Z,ae,se,pe,Te,Re,de,$,te,ne,le){var be,F,P,L;if(typeof Z=="number"){be={top:Z,bottom:Z,left:Z,right:Z,front:Z,back:Z,type:Z===0?"VALID":"NUMBER"};var K=function(Se,Ie,ze,Xe,We,Lt){We==null&&(We=Qb(Se,Ie,Xe));var Gt=Se[0],Pn=Se[1],Nn=Se[2],Tr=yi((Gt-Ie+2*We)/Xe+1,Lt);D(xt(Tr),function(){return"The output # of depths ("+Tr+") must be an integer. Change the stride and/or zero pad parameters"});var na=yi((Pn-Ie+2*We)/Xe+1,Lt);D(xt(na),function(){return"The output # of rows ("+na+") must be an integer. Change the stride and/or zero pad parameters"});var Vt=yi((Nn-Ie+2*We)/Xe+1,Lt);return D(xt(Vt),function(){return"The output # of columns ("+Vt+") must be an integer. Change the stride and/or zero pad parameters"}),[Tr,na,Vt,ze]}([ae,se,pe,1],$,1,Te,Z,le);F=K[0],P=K[1],L=K[2]}else if(Z==="same"){F=Math.ceil(ae/Te),P=Math.ceil(se/Re),L=Math.ceil(pe/de);var J=(F-1)*Te+$-ae,ee=(P-1)*Re+te-se,ce=(L-1)*de+ne-pe,ie=Math.floor(J/2),ue=J-ie,oe=Math.floor(ee/2),ke=ee-oe,fe=Math.floor(ce/2);be={top:oe,bottom:ke,left:fe,right:ce-fe,front:ie,back:ue,type:"SAME"}}else{if(Z!=="valid")throw Error("Unknown padding parameter: "+Z);be={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},F=Math.ceil((ae-$+1)/Te),P=Math.ceil((se-te+1)/Re),L=Math.ceil((pe-ne+1)/de)}return{padInfo:be,outDepth:F,outHeight:P,outWidth:L}}(o,l,f,d,b,_,w,I,R,T,s),B=N.padInfo,H=N.outDepth,z=N.outHeight,W=N.outWidth,j=a?y*h:y;return i==="channelsFirst"?p=[c,j,H,z,W]:i==="channelsLast"&&(p=[c,H,z,W,j]),{batchSize:c,dataFormat:i,inDepth:l,inHeight:f,inWidth:d,inChannels:h,outDepth:H,outHeight:z,outWidth:W,outChannels:j,padInfo:B,strideDepth:b,strideHeight:_,strideWidth:w,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:I,effectiveFilterHeight:R,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:C,dilationWidth:k,inShape:e,outShape:p,filterShape:n}}function Qb(e,n,t,r){r===void 0&&(r=1);var o=Ra(n,r);return Math.floor((e[0]*(t-1)-t+o)/2)}function ku(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function _f(e){return typeof e=="number"?[e,e,e]:e}function Ra(e,n){return n<=1?e:e+(e-1)*(n-1)}function yi(e,n){if(!n)return e;switch(n){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+n)}}function Ua(e){var n=ku(e),t=n[0],r=n[1],o=n[2];return t===1&&r===1&&o===1}function gn(e,n){return Ua(e)||Ua(n)}function Dd(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function Zb(e,n,t){if(n==="complex64"){if(e.dtype==="complex64")return e.clone();var r=ct(e.shape),o=e.toFloat(),a=t.complex(o,r);return r.dispose(),o.dispose(),a}if(!PA(e.dtype,n))return M.makeTensorFromDataId(e.dataId,e.shape,n);if(e.dtype==="complex64"){var i=t.real(e);return a=i.cast(n),i.dispose(),a}if(n==="int32")return t.int(e);if(n==="bool"){var s=he(0,e.dtype);return a=t.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+n)}function Cf(e,n){return M.makeTensorFromDataId(e.dataId,n,e.dtype)}function e1(e,n,t){var r=(n-e)/(t-1),o=es(t,"float32");o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return _t(o,"float32")}function Ef(e,n){if(e.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+n.length+".");for(var t=new Float32Array(2*e.length),r=0;r<t.length;r+=2)t[r]=e[r/2],t[r+1]=n[r/2];return t}function Zv(e,n){return{real:e[2*n],imag:e[2*n+1]}}function sD(e,n,t,r){e[2*r]=n,e[2*r+1]=t}function uD(e,n,t){var r=(t?2:-2)*Math.PI*(e/n);return{real:Math.cos(r),imag:Math.sin(r)}}function cD(e,n,t){var r=function(a,i,s){return function(u,c,l){for(var f=0,d=u.length,h=0,p=!1;f<d;){var v=l(c,u[h=f+(d-f>>>1)]);v>0?f=h+1:(d=h,p=!v)}return p?f:-f-1}(a,i,s||lD)}(e,n,t),o=r<0?-(r+1):r;e.splice(o,0,n)}function lD(e,n){return e>n?1:e<n?-1:0}function Fd(e,n,t,r,o){return t1(e,n,t,r,o,0).selectedIndices}function Pd(e,n,t,r,o,a){var i=t1(e,n,t,r,o,a);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function t1(e,n,t,r,o,a,i,s){s===void 0&&(s=!1);for(var u=Array.from(n).map(function(b,_){return{score:b,boxIndex:_,suppressBeginIndex:0}}).filter(function(b){return b.score>o}).sort(em),c=a>0?-.5/a:0,l=[],f=[];l.length<t&&u.length>0;){var d=u.pop(),h=d.score,p=d.boxIndex,v=d.suppressBeginIndex;if(h<o)break;for(var m=!1,g=l.length-1;g>=v;--g){var y=fD(e,p,l[g]);if(y>=r){m=!0;break}if(d.score=d.score*dD(r,c,y),d.score<=o)break}d.suppressBeginIndex=l.length,m||(d.score===h?(l.push(p),f.push(d.score)):d.score>o&&cD(u,d,em))}var x=l.length;return s&&(l.fill(0,x),f.fill(0,x)),{selectedIndices:_t(l,"int32"),selectedScores:_t(f,"float32"),numValidOutputs:he(x,"int32")}}function fD(e,n,t){var r=e.subarray(4*n,4*n+4),o=e.subarray(4*t,4*t+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),d=Math.max(o[1],o[3]),h=(s-a)*(u-i),p=(f-c)*(d-l);if(h<=0||p<=0)return 0;var v=Math.max(a,c),m=Math.max(i,l),g=Math.min(s,f),y=Math.min(u,d),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(h+p-x)}function dD(e,n,t){var r=Math.exp(n*t*t);return t<=e?r:0}function em(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}function n1(e,n,t){var r=new Array(e.rank).fill(0),o=e.shape.slice();return n.map(function(a){o[t]=a;var i=e.slice(r,o);return r[t]+=a,i})}function r1(e,n){for(var t=new Array(e.rank),r=0;r<t.length;r++)t[r]=e.shape[r]*n[r];var o=Be(t,e.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=a[s]%e.shape[s];var u=e.locToIndex(i);o.values[r]=e.values[u]}return o.toTensor()}function o1(e,n,t,r,o){for(var a=n[n.length-1],i=[e.length/a,a],s=i[0],u=i[1],c=Ni(t,s*r),l=Ni("int32",s*r),f=0;f<s;f++){for(var d=f*u,h=e.subarray(d,d+u),p=[],v=0;v<h.length;v++)p.push({value:h[v],index:v});p.sort(function(b,_){return _.value-b.value});var m=f*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r);for(v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}var x=n.slice();return x[x.length-1]=r,[zt(c,x,t),zt(l,x,"int32")]}function Nd(e,n){for(var t=[],r=0;r<n.length;r++)n[r]&&t.push(r);var o=Be(e,"int32"),a=Be([t.length,e.length],"int32");for(r=0;r<t.length;r++){var i=o.indexToLoc(t[r]),s=r*e.length;a.values.set(i,s)}return a.toTensor()}var hD=function(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map(function(o,a){return"T"+a});var t=[];this.variableNames.forEach(function(o){t.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},pD=function(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map(function(o,a){return"T"+a});var t=[];this.variableNames.forEach(function(o){t.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},vD=function(e,n,t){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,a=e.inSize,i=Math.ceil(a/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s=n==="max"?">":"<",u=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function a1(e,n){return["x","y","z","w","u","v"].slice(0,n).map(function(t){return e+"."+t})}function dn(e,n){return n===1?[e]:a1(e,n)}function Qt(){var e,n,t,r,o,a,i,s,u,c;return Q().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",n="in",t="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",n="attribute",t="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:n,varyingVs:t,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Po(e,n,t){t===void 0&&(t="index");var r=yr(n);return r.map(function(o,a){return"int "+e[a]+" = "+t+" / "+o+"; "+(a===r.length-1?"int "+e[a+1]+" = "+t+" - "+e[a]+" * "+o:"index -= "+e[a]+" * "+o)+";"}).join("")}function Od(e){var n=yr(e).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var i1=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function mD(e,n,t,r){var o=[];e.forEach(function(h){var p=we(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?o.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(o.push("uniform sampler2D "+h.name+";"),o.push("uniform int offset"+h.name+";"))});var a,i,s=o.join(`
`),u=e.map(function(h){return function(p,v,m){m===void 0&&(m=!1);var g="";g+=m?s1(p):da(p);var y=p.shapeInfo.logicalShape,x=v.logicalShape;return y.length<=x.length&&(g+=m?function(b,_){var w,S=b.name,E=S.charAt(0).toUpperCase()+S.slice(1),C="get"+E+"AtOutCoords",k=b.shapeInfo.logicalShape.length,I=_.logicalShape.length,R=oo(b.shapeInfo.logicalShape,_.logicalShape),T=ut(I),N=I-k,B=["x","y","z","w","u","v"];w=k===0?"":I<2&&R.length>=1?"coords = 0;":R.map(function(se){return"coords."+B[se+N]+" = 0;"}).join(`
`);var H="";H=I<2&&k>0?"coords":b.shapeInfo.logicalShape.map(function(se,pe){return"coords."+B[pe+N]}).join(", ");var z="return outputValue;",W=we(b.shapeInfo.logicalShape)===1,j=we(_.logicalShape)===1;if(k!==1||W||j){if(W&&!j)z=I===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(R.length){var Z=k-2,ae=k-1;R.indexOf(Z)>-1&&R.indexOf(ae)>-1?z="return vec4(outputValue.x);":R.indexOf(Z)>-1?z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":R.indexOf(ae)>-1&&(z="return vec4(outputValue.xx, outputValue.zz);")}}else z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+C+`() {
      `+T+` coords = getOutputCoords();
      `+w+`
      vec4 outputValue = get`+E+"("+H+`);
      `+z+`
    }
  `}(p,v):function(b,_){var w=b.name,S=w.charAt(0).toUpperCase()+w.slice(1),E="get"+S+"AtOutCoords",C=_.texShape,k=b.shapeInfo.texShape,I=b.shapeInfo.logicalShape.length,R=_.logicalShape.length;if(!b.shapeInfo.isUniform&&I===R&&b.shapeInfo.flatOffset==null&&Nt(k,C))return`
      float `+E+`() {
        return sampleTexture(`+w+`, resultUV);
      }
    `;var T,N=ut(R),B=oo(b.shapeInfo.logicalShape,_.logicalShape),H=R-I,z=["x","y","z","w","u","v"];T=I===0?"":R<2&&B.length>=1?"coords = 0;":B.map(function(j){return"coords."+z[j+H]+" = 0;"}).join(`
`);var W="";return W=R<2&&I>0?"coords":b.shapeInfo.logicalShape.map(function(j,Z){return"coords."+z[Z+H]}).join(", "),`
    float `+E+`() {
      `+N+` coords = getOutputCoords();
      `+T+`
      return get`+S+"("+W+`);
    }
  `}(p,v)),g}(h,n,r)}).join(`
`),c=n.texShape,l=Qt(),f=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(l),d=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+gD+`
    `+yD+`
    `+bD+`
  `}(l);return n.isPacked?(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,_){var w=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];return w[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+w[1]+`.0);
      }
    `:w[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+w[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      return 2 * (resTexRC.x * `+w[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,_){var w=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];if(Nt(b,_))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+w[0]+", "+w[1]+`));
      }
    `;var S=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));

      int index = resTexRC.x * `+w[1]+` + resTexRC.y;
      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return v=h,m=p,g=[Math.ceil(m[0]/2),Math.ceil(m[1]/2)],y=Math.ceil(v[2]/2),x=y*Math.ceil(v[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+y+`);
      int c = imod(index, `+y+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,_){for(var w=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)],S=Math.ceil(b[b.length-1]/2),E=S*Math.ceil(b[b.length-2]/2),C=E,k="",I="b, r, c",R=2;R<b.length-1;R++)C*=b[b.length-R-1],k=`
      int b`+R+" = index / "+C+`;
      index -= b`+R+" * "+C+`;
    `+k,I="b"+R+", "+I;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;

      `+k+`

      int b = index / `+E+`;
      index -= b * `+E+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec`+b.length+"("+I+`);
    }
  `}(h,p)}var v,m,g,y,x}(n.logicalShape,c),i=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(l)):(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,y){return y[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+y[1]+`.0);
      }
    `:y[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+y[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      return resTexRC.x * `+y[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(g,y){return Nt(g,y)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+y[0]+", "+y[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return v=p,m=Po(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+m+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,y){var x=Po(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+x+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(g,y){var x=Po(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+y[0]+`,
                             `+y[1]+`));

      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+x+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(g,y){var x=Po(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+x+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var v,m}(n.logicalShape,c),i=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(l)),r&&(d+=xD),[d,f,i,s,a,u,t].join(`
`)}function da(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var a=t.shapeInfo.texShape,i=a[0],s=a[1];if(i===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=t.shapeInfo.texShape,c=u[0],l=u[1],f=So(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+c+", "+l+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(t){var r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+ia(t)+`
      }
    `;var a=t.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=So(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(t){var r=t.shapeInfo.logicalShape,o=t.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Nt(r,i)){var s=i[0],u=i[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var c=Do(r),l=c.newShape,f=c.keptDims,d=l;if(d.length<r.length){var h=ha(t,d);return`
      `+da(h)+`
      float `+a+`(int row, int col) {
        return `+a+"("+pa(["row","col"],f)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+ia(t)+`
      }
    `;var p=i[0],v=i[1],m=So(o);return v===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+v+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+m+`;
    vec2 uv = uvFromFlat(`+p+", "+v+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(e);case 3:return function(t){var r=t.shapeInfo.logicalShape,o=t.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[1]*r[2],s=r[2],u=Do(r),c=u.newShape,l=u.keptDims,f=c;if(f.length<r.length){var d=ha(t,f);return`
        `+da(d)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+pa(["row","col","depth"],l)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+s+`, 1)));
        `+ia(t)+`
      }
    `;var h=t.shapeInfo.texShape,p=h[0],v=h[1],m=t.shapeInfo.flatOffset;if(v===i&&m==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+v+".0, "+p+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(v===s&&m==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+".0, "+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var g=So(o);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+p+", "+v+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(e);case 4:return function(t){var r=t.shapeInfo.logicalShape,o=t.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[3],s=r[2]*i,u=r[1]*s,c=Do(r),l=c.newShape,f=c.keptDims;if(l.length<r.length){var d=ha(t,l);return`
      `+da(d)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+pa(["row","col","depth","depth2"],f)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+i+`, 1)));
        `+ia(t)+`
      }
    `;var h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,v=p[0],m=p[1];if(m===u&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(m===i&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var g=So(o);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+v+", "+m+", index + "+g+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 5:return function(t){var r=t.shapeInfo.logicalShape,o=t.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[4],s=r[3]*i,u=r[2]*s,c=r[1]*u,l=Do(r),f=l.newShape,d=l.keptDims;if(f.length<r.length){var h=ha(t,f);return`
      `+da(h)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+pa(["row","col","depth","depth2","depth3"],d)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+c+", "+u+", "+s+", "+i+`)) +
          depth3;
        `+ia(t)+`
      }
    `;var p=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,m=v[0],g=v[1];if(g===c&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===i&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var y=So(o);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+" + depth * "+s+` +
          depth2 * `+i+" + depth3 + "+y+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 6:return function(t){var r=t.shapeInfo.logicalShape,o=t.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=Do(r),s=i.newShape,u=i.keptDims;if(s.length<r.length){var c=ha(t,s);return`
      `+da(c)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+pa(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var l=r[5],f=r[4]*l,d=r[3]*f,h=r[2]*d,p=r[1]*h;if(t.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+d+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+l+`, 1)));
        `+ia(t)+`
      }
    `;var v=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,g=m[0],y=m[1];if(y===p&&v==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+d+", "+f+", "+l+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===l&&v==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var x=So(o);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+d+` +
          depth2 * `+f+" + depth3 * "+l+" + depth4 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function s1(e){var n,t,r;switch(e.shapeInfo.logicalShape.length){case 0:return n=e.name,t="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Qt(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(o){var a=o.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Qt();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+c.texture2D+"("+a+`, uv);
    }
  `}(e);case 2:return function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,c=u[0],l=u[1],f=Qt();if(u!=null&&Nt(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+c+`.0);

        return `+f.texture2D+"("+i+`, uv);
      }
    `;var d=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+d[0]+", "+d[1]+`, row, col);
      return `+f.texture2D+"("+i+`, uv);
    }
  `}(e);case 3:return function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var l=a.slice(1),f=ha(o,l);return`
        `+s1(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+pa(["b","row","col"],[1,2])+`);
        }
      `}var d=c[0],h=c[1],p=Math.ceil(a[2]/2),v=p*Math.ceil(a[1]/2),m=Qt();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+d+", "+h+", "+v+", "+p+`, b, row, col);
      return `+m.texture2D+"("+i+`, uv);
    }
  `}(e);default:return function(o){for(var a=o.shapeInfo.logicalShape,i=a.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),c=o.shapeInfo.texShape,l=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],f=l[0],d=l[1],h=Math.ceil(a[i-1]/2),p=h*Math.ceil(a[i-2]/2),v="int b, int row, int col",m="b * "+p+" + (row / 2) * "+h+" + (col / 2)",g=2;g<i-1;g++)v="int b"+g+", "+v,p*=a[i-g-1],m="b"+g+" * "+p+" + "+m;var y=Qt();return`
    vec4 `+u+"("+v+`) {
      int index = `+m+`;
      int texR = index / `+d+`;
      int texC = index - texR * `+d+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+d+", "+f+`);
      return `+y.texture2D+"("+s+`, uv);
    }
  `}(e)}}var gD=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,yD=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bD=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,xD=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function So(e){return"offset"+e}function ia(e){var n=e.name,t=we(e.shapeInfo.logicalShape);return t<2?"return "+n+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function ut(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function ha(e,n){var t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function pa(e,n){return n.map(function(t){return e[t]}).join(", ")}var wD=function(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,D(e.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var o=e[e.length-1],a=Math.ceil(o/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,c=u.length,l=ut(c),f=dn("coords",c);if(a===1){var d=ut(s=c+1);i=`
        `+d+" sourceLocR = "+d+"("+f.join()+`, 0);
        ++`+f[c-1]+`;
        `+d+" sourceLocG = "+d+"("+f.join()+`, 0);
        ++`+f[c-2]+`;
        `+d+" sourceLocA = "+d+"("+f.join()+`, 0);
        --`+f[c-1]+`;
        `+d+" sourceLocB = "+d+"("+f.join()+`, 0);
        --`+f[c-2]+";"}else s=c,i=`
        `+l+` sourceLocR = coords;
        ++`+f[c-1]+`;
        `+l+` sourceLocG = coords;
        ++`+f[c-2]+`;
        `+l+` sourceLocA = coords;
        --`+f[c-1]+`;
        `+l+` sourceLocB = coords;
        --`+f[c-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],v=h.map(function(E){return"int "+E}),m=dn("sourceLocR",s-1).concat("inIdx.r"),g=dn("sourceLocG",s-1).concat("inIdx.g"),y=dn("sourceLocB",s-1).concat("inIdx.b"),x=dn("sourceLocA",s-1).concat("inIdx.a"),b=t==="max"?"greaterThan":"lessThan",_=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+x.join()+")));",w=`vec4(
            getAChannel(`+m.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+x.join()+") : 0.)",S=r?"":`
      float getBestIndicesAChannel(`+v.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+v.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+S+`
      void main() {
        `+l+` coords = getOutputCoords();
        bool hasNextCol = `+f[c-1]+" < "+(u[c-1]-1)+`;
        bool hasNextRow = `+f[c-2]+" < "+(u[c-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+w+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+_+`
          vec4 candidate = `+w+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},_D=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.top,l=u-1-e.padInfo.left,f=1/(n*t);this.userCode=`
      const ivec2 pads = ivec2(`+c+", "+l+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},CD=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=l-1-e.padInfo.front,p=f-1-e.padInfo.top,v=d-1-e.padInfo.left,m=1/(n*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);
      const float avgMultiplier = float(`+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+c+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ED=function(e,n,t,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],$e(e,n),$e(e,t);var i="0.0";r!=null&&($e(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";o!=null&&($e(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},SD=function(e,n,t,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],$e(e,n),$e(e,t);var i="vec4(0.0)";r!=null&&($e(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&($e(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},kD="return areal * breal - aimag * bimag;",RD="return areal * bimag + aimag * breal;",tm=function(e,n,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=$e(n,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},fl="return a + b;",dl="return a - b;",nm="return a * b;",u1="return (a < 0.) ? b * a : a;",yt=function(e,n,t){this.variableNames=["A","B"],this.outputShape=$e(n,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},c1=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Nr=function(e,n,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=$e(n,t);var o=this.outputShape.length,a="";if(r)if(o===0||we(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+ut(o)+` coords = getOutputCoords();
        `,o===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=dn("coords",o);a+=`
            bool nextRowOutOfBounds =
              (`+i[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+i[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},ID=function(){function e(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(n,t){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,n),o.gl.uniform1f(r.maxLoc,t)}},e}(),AD=function(){function e(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(n,t){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,n),o.gl.uniform1f(r.maxLoc,t)}},e}(),TD=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},DD=function(e){this.outputShape=[],this.outputShape=Wa(e,1),this.variableNames=e.map(function(s,u){return"T"+u});var n=new Array(e.length-1);n[0]=e[0][1];for(var t=1;t<n.length;t++)n[t]=n[t-1]+e[t][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<n.length;t++){var o=n[t-1];r.push("else if (yC < "+n[t]+") setOutput(getT"+t+"(yR, yC-"+o+"));")}var a=n.length,i=n[n.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},FD=function(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Wa(e,n);var t=this.outputShape,r=t.length,o=ut(r),a=dn("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(m,g){return"T"+g});var s=new Array(e.length-1);s[0]=e[0][n];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][n];var c=i[n],l=i.slice(-2),f=i.join(),d="if ("+c+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+l.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];d+=`
        if (`+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+_s(i,c,h)+`),
            vec2(`+_s(l,c,h)+`));
        }`}var p=s.length,v=s[s.length-1];d+=`
        return getChannel(
          getT`+p+"("+_s(i,c,v)+`),
          vec2(`+_s(l,c,v)+"));",this.userCode=`
      float getValue(`+i.map(function(m){return"int "+m})+`) {
        `+d+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+t[r-2]+` &&
            `+a[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function _s(e,n,t){var r=e.indexOf(n);return e.map(function(o,a){return a===r?o+" - "+t:o}).join()}var PD=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ND=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dataFormat==="channelsLast",i=n-1-e.padInfo.top,s=t-1-e.padInfo.left,u=a?1:2,c=a?2:3,l=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+l+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+c+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},OD=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideDepth,t=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+o+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+a+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},MD=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=n-1-e.padInfo.front,u=t-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},BD=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},LD=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=n-1-e.padInfo.top,i=t-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},rm=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,a=e.padInfo.left,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),h=e.inChannels%4,p=e.dataFormat==="channelsLast",v=p?1:2,m=p?2:3,g=p?3:1,y="",x="";t&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,x="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+v+"], coords["+m+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+d+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+d+`) *
                    getW(wR, wC, `+d+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+d+`, xR, xC) *
                    getW(wR, wC, `+d+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2),
                getW(wR, wC, `+d+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1),
                  getX(batch, xR, xC, `+d+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC),
                  getX(batch, `+d+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+x+`
        setOutput(result);
      }
    `},VD=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.padInfo.front,t=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,f=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+n+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+l+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`; wC++) {
              int xC = xCCorner + wC * `+c+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},om=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=e.outChannels/e.inChannels,v="",m="";t&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,m="result = activation(result);");var g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+m+`
        setOutput(result);
      }
    `},am=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=h,v="int xR; int xC; int xCOffset;",m=0;m<d;m++)for(var g=0;g<h;g++)v+=`
          vec4 xTexelR`+m+"C"+2*g+` = vec4(0.);
          vec4 wR`+m+"C"+g+` = vec4(0.);
          vec4 xR`+m+"C"+g+" = vec4(0.);";for(m=0;m<d;m++)for(var y=0;y<p;y++){if(v+=`
          xR = xRCorner + `+m*l+`;
          xC = xCCorner + `+(g=2*y)*f+`;
        `,c===1){if(g<h&&(v+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+m+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+`.xy);
                } else {
                  xR`+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xR`+m+"C"+g+" = xTexelR"+m+"C"+g+`;
              `,g+1<h)){var x=s%2==0?Rb(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(v+=`
                  xCOffset = xC + `+s%2+" + "+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+m+"C"+g+` = vec4(0.);
                    }
                  `),v+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.xy);
                `):v+=`
                  xCOffset = xC + `+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+`;
                `}}else g<h&&(v+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(v+=`
                xCOffset = xC + 1 - `+c+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
              `,g+1<h&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+c+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+`.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+c+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+`.xy);
              `,g+1<h&&(v+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
                `)),v+="}");g<h&&(v+=`
            vec4 wTexelR`+m+"C"+g+" = getW("+m+", "+g+`, d1, q);
            wR`+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+`.xz);
          `,g+1<h&&(v+=`
              vec4 wTexelR`+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+`, d1, q);
              wR`+m+"C"+(g+1)+` =
                vec4(wTexelR`+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<d;m++)for(g=0;g<h;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var b="",_="";t&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,_="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+v+`

        vec4 result = dotProd;
        `+w+`
        `+_+`
        setOutput(result);
      }
    `},WD=function(e,n,t,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],i=e[1],s=e[2],u=e[3],c=n[0],l=t[0],f=t[1];this.outputShape=[c,l,f,u];var d=r==="bilinear"?1:0,h=[i-1+".0",s-1+".0"],p=h[0],v=h[1],m=l>1?[""+(i-1)/(l-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=m[0],y=m[1],x=m[2],b=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],_=b[0],w=b[1],S=b[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+_+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+y+`;
        float width_scale = `+w+`;

        float in_y = `+x+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+S+`;
        if( in_x < 0.0 || in_x > `+v+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+d+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},UD=function(e,n,t){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],a=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+ut(r)+` coords = getOutputCoords();
        int end = `+im(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+im(r,"coords")+` = idx;
          val += getX(`+function(i,s){if(i===1)return""+s;if(i===2)return s+".x, "+s+".y";if(i===3)return s+".x, "+s+".y, "+s+".z";if(i===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function im(e,n){if(e===1)return""+n;if(e===2)return n+".y";if(e===3)return n+".z";if(e===4)return n+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var zD=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Mi.DENSE;var n=gi(e),t=Qt();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Po(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},HD=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Mi.DENSE;var n=gi(e),t=Qt();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Po(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},$D=function(){function e(n,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),jD=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},GD=function(e){this.variableNames=["A"],this.outTexUsage=En.DOWNLOAD;var n=Qt();this.outputShape=e,this.userCode=`
      `+i1+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},qD=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=En.DOWNLOAD;var n=Qt();this.outputShape=e,this.userCode=`
      `+i1+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},KD=function(e,n,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=Qt(),o=n[0],a=n[1];this.outputShape=e;var i="result";t&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+Od(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},XD=function(e,n,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Qt(),o=n[0],a=n[1];this.outputShape=e;var i="",s="result";t&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;i+=`
          localCoords = coords;
          if(localCoords[2] + `+c+" < "+e[2]+`) {
            localCoords[2] += `+c+`;
            if(localCoords[1] + `+u+" < "+e[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+l+`] = values[0];
              } else if(offset == 1) {
                result[`+l+`] = values[1];
              } else if(offset == 2) {
                result[`+l+`] = values[2];
              } else {
                result[`+l+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Od(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+s+`;
      }
    `},YD="return real * expR - imag * expI;",JD="return real * expI + imag * expR;",sm=function(e,n,t){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var o=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},QD=function(){function e(n,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;return function(r,o){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(t.valueLoc,n)}},e}(),ZD=function(e,n,t){this.variableNames=["A","indices"];var r=e.slice();r[t]=n,this.outputShape=r,this.rank=r.length;var o=ut(this.rank),a=function(i,s){var u=i.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],f=0;f<i.length;f++)f===s?l.push("int(getIndices("+c[f]+"))"):l.push(""+c[f]);return l.join()}(e,t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},eF=function(e,n,t){this.sliceDim=e,this.strides=n,this.variableNames=["x","indices"],this.outputShape=t;var r=ut(n.length),o=ut(t.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function tF(e,n){var t=Qt();return YA(e,n,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function nF(e,n){return tT(e,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function rF(e,n){return nT(e,n,new Uint16Array([0,1,2,2,1,3]))}function ns(e,n,t,r,o,a,i){oT(t,r);var s=rT(e,n),u=e.TEXTURE_2D;return _e(e,n,function(){return e.bindTexture(u,s)}),_e(e,n,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),_e(e,n,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),_e(e,n,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),_e(e,n,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),_e(e,n,function(){return e.texImage2D(u,0,o,t,r,0,a,i,null)}),_e(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function oF(e,n,t,r,o){var a=dc(t,r);return ns(e,n,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function aF(e,n,t,r,o){var a=dc(t,r);return ns(e,n,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function iF(e,n,t,r,o){var a=dc(t,r);return ns(e,n,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function sF(e,n,t,r,o){var a=ts(t,r);return ns(e,n,a[0],a[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function uF(e,n,t,r,o){var a=ts(t,r);return ns(e,n,a[0],a[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function cF(e,n,t,r){return _e(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Kv(e,n,t,"clipSpacePos",r,3,20,0)&&Kv(e,n,t,"uv",r,2,20,12)}function lF(e,n,t,r,o,a,i){var s,u,c;_e(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)}),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,c=i.internalFormatPackedFloat),s.set(a),_e(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,o,0,e.RGBA,u,s)}),_e(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function fF(e,n,t,r){_e(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)}),r.data instanceof Uint8Array?_e(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):_e(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),_e(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function dF(e,n,t,r,o){var a=e.createBuffer();_e(e,n,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)});var i=16*t*r;return _e(e,n,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)}),_e(e,n,function(){return e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0)}),_e(e,n,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),a}function hF(e,n,t){var r=e,o=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function pF(e,n,t,r,o){var a=dc(t,r),i=a[0],s=a[1],u=new Uint8Array(t*r*4);return _e(e,n,function(){return e.readPixels(0,0,i,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function vF(e,n,t,r,o,a,i,s){var u=e,c=new Float32Array(function(l,f){var d=ts(l,f);return d[0]*d[1]*4}(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,n),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function mF(e,n,t,r){var o=new Float32Array(t*r*4);return _e(e,n,function(){return e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,o)}),o}var gF=function(){function e(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Q().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,jA(t,n)):this.gl=kr(t);var r="WEBGL_color_buffer_float";if(Q().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=ys(this.gl,this.debug,"OES_texture_float"),Ln(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=ys(this.gl,this.debug,"OES_texture_half_float");else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ln(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ys(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ln(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Ln(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=nF(this.gl,this.debug),this.indexBuffer=rF(this.gl,this.debug),this.framebuffer=aT(this.gl,this.debug),this.textureConfig=Sd(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Q().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;_e(t,this.debug,function(){return t.finish()}),_e(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),_e(t,this.debug,function(){return t.deleteFramebuffer(n.framebuffer)}),_e(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),_e(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),_e(t,this.debug,function(){return t.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(n,t){return this.throwIfDisposed(),oF(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(n,t){return this.throwIfDisposed(),aF(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(n,t){return this.throwIfDisposed(),iF(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(n,t){this.throwIfDisposed(),fF(this.gl,this.debug,n,t)},e.prototype.uploadDenseMatrixToTexture=function(n,t,r,o){this.throwIfDisposed(),lF(this.gl,this.debug,n,t,r,o,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(n,t){return this.throwIfDisposed(),uF(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(n,t){return this.throwIfDisposed(),sF(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(n){var t=this;this.throwIfDisposed(),this.outputTexture===n&&(Xv(this.gl,this.debug,this.framebuffer),this.outputTexture=null),_e(this.gl,this.debug,function(){return t.gl.deleteTexture(n)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,t,r){var o=this;return this.downloadMatrixDriver(n,function(){return pF(o.gl,o.debug,t,r,o.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(n,t,r,o,a,i){return vF(this.gl,n,0,0,0,a,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(n,t){return hF(this.gl,n,t)},e.prototype.createBufferFromTexture=function(n,t,r){this.bindTextureToFrameBuffer(n);var o=dF(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},e.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},e.prototype.createFence=function(n){var t,r,o=this;if(Q().getBool("WEBGL_FENCE_API_ENABLED")){var a=n,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},t=i}else Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(t,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(n,t,r){var o=this;return this.downloadMatrixDriver(n,function(){return mF(o.gl,o.debug,t,r)})},e.prototype.createProgram=function(n){this.throwIfDisposed();var t=this.gl,r=JA(t,this.debug,n),o=tF(t,this.debug),a=ZA(t,this.debug);return _e(t,this.debug,function(){return t.attachShader(a,o)}),_e(t,this.debug,function(){return t.attachShader(a,r)}),eT(t,this.debug,a),this.debug&&sl(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=cF(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(n){var t=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&_e(this.gl,this.debug,function(){return t.gl.deleteProgram(n)})},e.prototype.setProgram=function(n){var t=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&sl(this.gl,this.debug,this.program),_e(this.gl,this.debug,function(){return t.gl.useProgram(n)})},e.prototype.getUniformLocation=function(n,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?sT(this.gl,this.debug,n,t):uT(this.gl,n,t)},e.prototype.getAttributeLocation=function(n,t){var r=this;return this.throwIfDisposed(),_e(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,t)})},e.prototype.getUniformLocationNoThrow=function(n,t){return this.throwIfDisposed(),this.gl.getUniformLocation(n,t)},e.prototype.setInputMatrixTexture=function(n,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),cT(this.gl,this.debug,this.program,n,t,r)},e.prototype.setOutputMatrixTexture=function(n,t,r){this.setOutputMatrixTextureDriver(n,r,t)},e.prototype.setOutputPackedMatrixTexture=function(n,t,r){this.throwIfDisposed();var o=ts(t,r),a=o[0],i=o[1];this.setOutputMatrixTextureDriver(n,a,i)},e.prototype.setOutputMatrixWriteRegion=function(n,t,r,o){this.setOutputMatrixWriteRegionDriver(r,n,o,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(n,t,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&sl(this.gl,this.debug,this.program),bs(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),_e(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),_e(this.gl,this.debug,function(){return n.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ys(this.gl,this.debug,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(t.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),a=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(n){return ge(this,void 0,void 0,function(){var t=this;return ye(this,function(r){switch(r.label){case 0:return[4,zv(function(){return t.disposed||t.isQueryAvailable(n,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(n,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(n,t){if(t===0)return!0;if(t===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(n){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var n=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=n;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},e.prototype.addItemToPoll=function(n,t){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:t}),this.itemsToPoll.length>1||zv(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),ul(this.gl,this.debug,n,this.framebuffer),this.debug&&bs(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(ul(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&bs(this.gl)):Xv(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(n,t){this.bindTextureToFrameBuffer(n);var r=t();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(n,t,r){this.throwIfDisposed();var o=this.gl;ul(o,this.debug,n,this.framebuffer),this.debug&&bs(o),this.outputTexture=n,_e(o,this.debug,function(){return o.viewport(0,0,t,r)}),_e(o,this.debug,function(){return o.scissor(0,0,t,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(n,t,r,o){var a=this;this.throwIfDisposed(),_e(this.gl,this.debug,function(){return a.gl.scissor(n,t,r,o)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function um(e,n){if(e.length!==n.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+n.length+" inputs");e.forEach(function(t,r){var o=t.logicalShape,a=n[r],i=a.shape;if(!Nt(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!t.isUniform||!a.isUniform){var s=t.texShape,u=a.isUniform?null:a.texData.texShape;if(!Nt(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var yF=function(e,n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=t.filterWidth,o=t.inChannels,a=t.strideWidth,i=t.strideHeight,s=t.padInfo,u=t.outWidth,c=t.dilationWidth,l=t.dilationHeight,f=t.dataFormat,d=s.left,h=s.top,p=o*r,v=Qt(),m=f==="channelsLast",g=m?0:1,y=m?1:2,x="",b=0;b<=1;b++)for(var _=0;_<=1;_++)x+=`
          blockIndex = rc.y + `+_+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+i+" - "+h+`;
            d0 = offsetY + `+l+" * (pos / "+p+`);

            if(d0 < `+n[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+d+`.);
              d1 = offsetX + `+c+" * (int(mod(float(pos), "+p+".) / "+o+`.));

              if(d1 < `+n[y]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+m+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+_)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+_)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+x+`

        `+v.output+` = result;
      }
    `},bF=function(e,n,t,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=n,s=e[3]-1;this.outputShape=e;var u="float("+t+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},xF=function(e,n,t,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=t,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},wF=function(e,n,t,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=n,s=e[3]-1;this.outputShape=e;var u="float("+t+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},_F=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideHeight,t=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,u=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},CF=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideDepth,t=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.front,f=u-1-e.padInfo.top,d=c-1-e.padInfo.left,h=s*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+f+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+c+` +
                  wR * `+c+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},hl=function(e,n,t,r,o,a,i){t===void 0&&(t=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=t?e[1]:e[2],u=Math.ceil(s/2),c=t?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";a&&(h=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,p="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+c+`);
          vec4 b = getMatrixB(rc.x, `+l+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+d[0]+`);
          result += (`+f[1]+" * "+d[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+v+`

        `+p+`

        setOutput(result);
      }
    `},EF=function(){function e(n,t,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;return function(r,o){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(t.seedLoc,n)}},e}(),SF=function(e,n,t,r){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},kF=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var n=e.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=dn("rc",n),r=ut(n),o=function(s,u,c){if(s===1)return"rc > "+u[0];for(var l="",f=s-2;f<s;f++)l+=c[f]+" >= "+u[f],f<s-1&&(l+="||");return l}(n,e,t),a=function(s,u,c,l){if(s===1)return"";var f=l.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+c+`;
  `}(n,e[e.length-1],e[e.length-2],t),i=function(s,u){var c=s.length,l=function(f,d){for(var h=[],p=0;p<=1;p++)for(var v=0;v<=1;v++){for(var m=(p===0?"r":"rp1")+", "+(v===0?"c":"cp1"),g=2;g<f;g++)m=d[d.length-1-g]+","+m;h.push(m)}return h}(c,u);return c===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+l[0]+`),
          cEdge ? 0. : getA(`+l[1]+`),
          rEdge ? 0. : getA(`+l[2]+`),
          rEdge || cEdge ? 0. : getA(`+l[3]+")"}(e,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},RF=function(e,n,t){this.variableNames=["x"],this.outputShape=n.map(function(u,c){return u[0]+e[c]+u[1]});var r=e.length,o=ut(r),a=n.map(function(u){return u[0]}).join(","),i=n.map(function(u,c){return u[0]+e[c]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+a+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},IF=function(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(m,g){return m[0]+e[g]+m[1]});for(var r=e.length,o=ut(r),a=n.map(function(m){return m[0]}).join(","),i=n.map(function(m,g){return m[0]+e[g]}).join(","),s=dn("rc",r),u=dn("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+c+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+c+") {"],d=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,v=r===1?2:4;p<v;p++)h+=`
        `+f[p]+`
        if (`+d+`) {
          result[`+p+"] = float("+t+`);
        } else {
          `+o+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+l+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+a+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},pl=function(e,n,t){if(this.variableNames=["x"],n==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var d=n==="avg",h="0.0";if(d||(h="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+a+`);
        const ivec2 pads = ivec2(`+l+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+c+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(p="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g=`
      if (`+d+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+a+`);
      const ivec2 pads = ivec2(`+l+", "+f+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+v+`;
          if (`+(m===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(m===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(m===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+p+`);
      }
    `}},vl=function(e,n,t){if(this.variableNames=["x"],n==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var m=n==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+a+", "+i+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+l+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+d+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+d+` +
                      wR * `+d+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),b=r%4,_=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+l+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+_+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+_+`
            }
          }
          setOutput(`+y+`);
        }
      }
    `}},AF=function(e,n){this.variableNames=["x"];var t=e.windowSize,r=e.batchSize,o=e.inSize,a=Math.ceil(o/t);this.outputShape=[r,a];var i="0.0",s="";n==="prod"?i="1.0":n==="min"?(i="1.0 / 1e-20",s="min"):n==="max"&&(i="-1.0 / 1e-20",s="max");var u=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");var c=4*Math.floor(t/4),l=t%4,f=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,d="vec4";n==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):n==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");var h="";o%t>0&&(h=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+c+`; i += 4) {
          int inIdx = inOffset + i;
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+c+`;
        if (`+(l===1)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(l===2)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(l===3)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},TF=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var t="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),t+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Po(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+Od(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+t+`

        setOutput(result);
      }
    `},DF=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],c=[t&&s>1?o-1:o,t&&u>1?a-1:a],l=[t&&s>1?s-1:s,t&&u>1?u-1:u],f=c[0]/l[0],d=c[1]/l[1],h=1/f,p=1/d,v=2*Math.ceil(h)+2,m=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},FF=function(e,n,t,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,n,t,s];var u=[r&&n>1?a-1:a,r&&t>1?i-1:i],c=[r&&n>1?n-1:n,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},PF=function(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,n,t,s];var u=[r&&n>1?a-1:a,r&&t>1?i-1:i],c=[r&&n>1?n-1:n,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`,
          `+u[1]/c[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},NF=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],c=[t&&s>1?o-1:o,t&&u>1?a-1:a],l=[t&&s>1?s-1:s,t&&u>1?u-1:u],f=c[0]/l[0],d=c[1]/l[1],h=1/f,p=1/d,v=2*Math.ceil(h)+2,m=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+c[0]+`) *
                (float(dyR) / float(`+l[0]+`));

            float sourceFracCol =
                float(`+c[1]+`) *
                  (float(dyC) / float(`+l[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},OF=function(e,n,t,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,n,t,s];var u=[r&&n>1?a-1:a,r&&t>1?i-1:i],c=[r&&n>1?n-1:n,r&&t>1?t-1:t],l=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+l+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},MF=function(e,n){this.variableNames=["x"];var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=e,t!==1){var r=e.map(function(a,i){return function(s){return n.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(i)}).join(","),o=ut(t);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},BF=function(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=e;var r=dn("rc",t),o=r[t-1]+" + 1 < "+this.outputShape[t-1],a=r[t-2]+" + 1 < "+this.outputShape[t-2],i=ut(t);function s(u){var c=e.map(function(l,f){return function(d,h){return n.indexOf(d)!==-1&&e[d]!==1?e[d]+" - "+h[d]+" - 1":""+h[d]}(f,u)});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(u){return u[t-1]="("+u[t-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[t-2]="("+u[t-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(u){return u[t-1]="("+u[t-1]+" + 1)",u[t-2]="("+u[t-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},cm=function(e,n,t,r,o,a,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=ut(o.length),u=ut(a.length),c="";t===1?c="i":t===2&&(c="i, j");var l="getIndices("+c+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var d="getUpdates("+f+")",h=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+l+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+d+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},LF=function(e,n){this.variableNames=["x","segmentIds"];var t=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/t);this.outputShape=[r,i];var s=4*Math.floor(t/4),u=t%4,c=`
        sumValue += dot(values, segFilter);
    `,l="";o%t>0&&(l=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%t>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+l+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+c+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+c+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+c+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+c+`
        }
        setOutput(sumValue);
      }
    `},VF=function(e,n,t){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=n,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<n.length;u++)s.push(""+a[u]),u<e&&i.push(""+a[u]);r=i.join(),o=s.join()}var c=ut(t);this.userCode=`
      void main() {
        `+c+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},WF=function(){function e(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var t,r=ut(this.rank),o="uniform int start["+this.rank+"];",a=function(i){if(i===1)return"sourceLoc";if(i<=6)return ml.slice(0,i).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+i+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(i,s){return"sourceLoc."+ml[s]+" = start["+s+"] + coords."+ml[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+t+`
        setOutput(getSource(`+a+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,o){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(o,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,n)}},e}(),ml=["x","y","z","w","u","v"],UF=function(){function e(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var t=ut(this.rank),r=dn("coords",this.rank),o=dn("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+a+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            `+t+"("+n.map(function(l,f){return"start["+f+"]"}).join()+");":n.map(function(l,f){return o[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+c+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,o){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(o,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,n)}},e}(),zF=function(e,n,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=ut(t.length),a=ut(t.length),i="";if(r===1)i="coords * strides + begin";else{var s=0;i=t.map(function(u,c){return s++,t.length===1?"coords * strides["+c+"] + begin["+c+"]":"coords["+(s-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+e+`);
      `+o+" strides = "+o+"("+n+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},HF=function(){function e(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(n,t,r){var o,a=lm(t,r),i=fm(n,a,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),a===bn.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):a===bn.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):a===bn.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):a===bn.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):a===bn.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[i].push(o),o},e.prototype.releaseTexture=function(n,t,r,o){if(this.freeTextures!=null){var a=fm(t,lm(r,o),o);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(n),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],s=i.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(o){n.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function lm(e,n){if(e===En.UPLOAD)return bn.PACKED_2X2_FLOAT32;if(e===En.RENDER||e==null)return function(t){return Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?bn.PACKED_2X2_FLOAT32:bn.UNPACKED_FLOAT32:t?bn.PACKED_2X2_FLOAT16:bn.UNPACKED_FLOAT16}(n);if(e===En.DOWNLOAD||e===En.PIXELS)return bn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function fm(e,n,t){return e[0]+"_"+e[1]+"_"+n+"_"+t}var $F=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[r]*n[r];this.outputShape=t,this.rank=t.length;var o=ut(this.rank),a=function(i){var s=i.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+i[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],l=0;l<i.length;l++)c.push("imod("+u[l]+", "+i[l]+")");return c.join()}(e);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},jF=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[n[r]];this.outputShape=t,this.rank=t.length;var o=ut(this.rank),a=function(i){var s=i.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(s),l=0;l<i.length;l++)c[i[l]]=u[l];return c.join()}(n);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},GF=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[n[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=ut(this.rank),a=a1("rc",this.rank),i=new Array(this.rank);for(r=0;r<n.length;r++)i[n[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+t[this.rank-1],c="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+c+`;
      if(`+u+`) {
        result[1] = `+c+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+c+`;
        if(`+u+`) {
          result[3] = `+c+`;
        }
      }
      setOutput(result);
    }
    `},Md=1.7580993408473768,Bd=1.0507009873554805,Ve=function(e,n){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},er="if (isnan(x)) return x;",qF="return x;",dm="return abs(x);",l1=er+`
  return (x < 0.0) ? 0.0 : x;
`,f1=er+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,d1="return (x >= 0.0) ? x : (exp(x) - 1.0);",KF=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Md+`;
  float scale = `+Bd+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,hm="return -x;",pm="return ceil(x);",vm="return floor(x);",mm="return exp(x);",gm="return exp(x) - 1.0;",XF=er+`
  return sin(x);
`,YF=er+`
  return cos(x);
`,JF=er+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,QF=er+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,ZF=er+`
  return atan(x);
`,eP=er+"return log(x + sqrt(x * x + 1.0));",tP=er+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,nP=er+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Cs="return x;",rP="return x;",h1=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,p1=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,v1=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,oi=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},oP=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var n=e.length,t=dn("rc",n),r=ut(n),o=function(s,u){if(s===1)return"rc";for(var c="",l=0;l<s;l++)c+=u[l],l<s-1&&(c+=",");return c}(n,t),a=t.slice(-2),i=n<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},Es={};function Ss(e,n){if(n===void 0&&(n=!1),e==="linear")return n?rP:qF;if(e==="relu")return n?h1:l1;if(e==="elu")return n?v1:d1;if(e==="relu6")return n?p1:f1;if(e==="prelu")return n?c1:u1;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var aP=600,iP=function(e){function n(t){var r,o=e.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!Q().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var a=kr(Q().getNumber("WEBGL_VERSION"));o.binaryCache=((r=Q().getNumber("WEBGL_VERSION"))in Es||(Es[r]={}),Es[r]),o.gpgpu=new gF(a),o.canvas=a.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=t,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=t.gl.canvas;return o.textureManager=new HF(o.gpgpu),o.numMBBeforeWarning=Q().global.screen==null?1024:Q().global.screen.height*Q().global.screen.width*window.devicePixelRatio*aP/1024/1024,o.texData=new Yb(o,M),o}return Zn(n,e),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(t,r,o){if(Q().getBool("DEBUG")&&this.checkNumericalProblems(t),o==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:o,values:t,usage:En.UPLOAD}),a},n.prototype.move=function(t,r,o,a){if(Q().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:o,dtype:a,values:r,usage:En.UPLOAD})},n.prototype.readSync=function(t){var r=this.texData.get(t),o=r.values,a=r.dtype,i=r.complexTensors,s=r.slice,u=r.shape,c=r.isPacked;if(s!=null){var l=void 0;l=c?new oi(u,Cs):new Ve(u,Cs);var f=this.runWebGLProgram(l,[{dataId:t,shape:u,dtype:a}],a),d=this.readSync(f.dataId);return this.disposeData(f.dataId),d}if(o!=null)return this.convertAndCacheOnCPU(t);if(a==="string")return o;var h,p,v=this.activeTimers!=null;return v&&(h=cr()),a==="complex64"?p=Ef(i.real.dataSync(),i.imag.dataSync()):p=this.getValuesFromTexture(t),v&&(this.downloadWaitMs+=cr()-h),this.convertAndCacheOnCPU(t,p)},n.prototype.read=function(t){return ge(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f,d,h,p,v,m,g,y,x,b,_,w,S,E;return ye(this,function(C){switch(C.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(k){return r.push(k)})];if(o=this.texData.get(t),a=o.values,i=o.shape,s=o.slice,u=o.dtype,c=o.complexTensors,l=o.isPacked,s!=null)return f=void 0,f=l?new oi(i,Cs):new Ve(i,Cs),d=this.runWebGLProgram(f,[{dataId:t,shape:i,dtype:u}],u),h=this.read(d.dataId),this.disposeData(d.dataId),[2,h];if(a!=null)return[2,this.convertAndCacheOnCPU(t)];if(!Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Q().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&Q().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),m=this.texData.get(v.dataId),p=(E=this.gpgpu).createBufferFromTexture.apply(E,[m.texture].concat(gi(i)))),this.pendingRead.set(t,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return y=C.sent(),x=y[0],b=y[1],g=Ef(x,b),[3,5];case 4:p==null?g=this.getValuesFromTexture(t):(_=we(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,_)),C.label=5;case 5:return v!=null&&this.disposeData(v.dataId),w=this.convertAndCacheOnCPU(t,g),S=this.pendingRead.get(t),this.pendingRead.delete(t),S.forEach(function(k){return k(w)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,w]}})})},n.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var o=t[r];if(!KA(o))throw Q().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(t){var r,o=this.texData.get(t),a=o.shape,i=o.dtype,s=o.isPacked,u=we(a);if(Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(t),l=this.texData.get(c.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[l.texture].concat(gi(a))).subarray(0,u);return this.disposeData(c.dataId),f}var d=Q().getBool("WEBGL_PACK")&&s===!0,h=d?cl(a):a,p=d?new qD(h):new GD(h),v=this.runWebGLProgram(p,[{shape:h,dtype:i,dataId:t}],"float32"),m=this.texData.get(v.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,u);return this.disposeData(v.dataId),g},n.prototype.time=function(t){return ge(this,void 0,void 0,function(){var r,o,a,i,s,u,c;return ye(this,function(l){switch(l.label){case 0:return r=this.activeTimers,o=[],a=!1,this.programTimersStack==null?(this.programTimersStack=o,a=!0):this.activeTimers.push(o),this.activeTimers=o,t(),i=La(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=La(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return c=l.sent(),u.kernelMs=IA(c),u.getExtraProfileInfo=function(){return c.map(function(f,d){return{name:s[d],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:cr(),endMs:null}},n.prototype.endTimer=function(t){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=cr(),t)},n.prototype.getQueryTime=function(t){return ge(this,void 0,void 0,function(){var r;return ye(this,function(o){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},n.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},n.prototype.releaseGPUData=function(t){var r=this.texData.get(t),o=r.texture,a=r.dtype,i=r.texShape,s=r.usage,u=r.isPacked,c=r.slice,l=c&&c.origDataId||t,f=this.dataRefCount.get(l);f>1?this.dataRefCount.set(l,f-1):(this.dataRefCount.delete(l),o!=null&&(this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(o,i,s,u)));var d=this.texData.get(t);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},n.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},n.prototype.getDataInfo=function(t){return this.texData.get(t)},n.prototype.getCPUBackend=function(){return Q().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=M.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(t,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(a){return o.texData.get(a.dataId).texture==null&&a.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(t,r){var o=this.makeOutput(t.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:M.keep(t.clone()),imag:M.keep(r.clone())},o},n.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},n.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},n.prototype.slice=function(t,r,o){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,o);if(we(o)===0)return zt([],o,t.dtype);var a=this.texData.get(t.dataId).isPacked,i=Kb(t.shape,r,o);if(a||!i){var s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UF(o):new WF(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[t],null,u)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,o)},n.prototype.shallowSlice=function(t,r,o){var a=this.texData.get(t.dataId),i=this.makeOutput(o,t.dtype),s=this.texData.get(i.dataId);Object.assign(s,a),s.shape=o,s.dtype=t.dtype;var u=Xb(r,t.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||t.dataId};var c=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,c+1),i},n.prototype.stridedSlice=function(t,r,o,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,o,a);var i=Td(r,o,a);if(i.some(function(u){return u===0}))return zt([],i);var s=new zF(r,a,i);return this.compileAndRun(s,[t])},n.prototype.reverse=function(t,r){var o=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BF(t.shape,r):new MF(t.shape,r);return this.compileAndRun(o,[t])},n.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var o=t.map(function(h){return Bn(h)}),a=t.map(function(h){return fr(h)});return Wt(this.concat(o,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>Q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(t.length/2),s=this.concat(t.slice(0,i),r),u=this.concat(t.slice(i),r);return this.concat([s,u],r)}if(Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var c=new FD(t.map(function(h){return h.shape}),r);return this.compileAndRun(c,t)}var l=Wa(t.map(function(h){return h.shape}),r),f=t.map(function(h){return h.as2D(-1,we(h.shape.slice(r)))}),d=new DD(f.map(function(h){return h.shape}));return this.compileAndRun(d,f).reshape(l)},n.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,hm,t.dtype);var r=new Ve(t.shape,hm);return this.compileAndRun(r,[t])},n.prototype.batchMatMul=function(t,r,o,a){var i=o?t.shape[2]:t.shape[1],s=a?r.shape[1]:r.shape[2],u=o?t.shape[1]:t.shape[2],c=t.shape[0];if((i===1||s===1)&&u>1e3){o&&(t=t.transpose([0,2,1])),a&&(r=r.transpose([0,2,1]));var l=s===1?t:t.as3D(c,u,1),f=s===1?2:1,d=s===1?r.as3D(c,1,u):r;return this.multiply(l,d).sum(f,!0)}var h=Ut(t.dtype,r.dtype),p=new hl(t.shape,[c,i,s],o,a);return this.compileAndRun(p,[t,r],h)},n.prototype.fusedBatchMatMul=function(t){var r=t.a,o=t.b,a=t.transposeA,i=t.transposeB,s=t.bias,u=t.activation,c=t.preluActivationWeights,l=a?r.shape[2]:r.shape[1],f=i?o.shape[1]:o.shape[2],d=r.shape[0],h=Ut(r.dtype,o.dtype),p=s!=null,v=c!=null,m=u?Ss(u,!0):null,g=new hl(r.shape,[d,l,f],a,i,p,m,v),y=[r,o];return s&&y.push(s),c&&y.push(c),this.compileAndRun(g,y,h)},n.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var o=this.texData.get(t.dataId),a=this.texData.get(r.dataId),i=new tm(kD,t.shape,r.shape),s=new tm(RD,t.shape,r.shape),u=[this.makeComplexComponentTensorInfo(t,o.complexTensors.real),this.makeComplexComponentTensorInfo(t,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],c=this.compileAndRun(i,u),l=this.compileAndRun(s,u),f=this.complex(c,l);return c.dispose(),l.dispose(),f}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,nm,t.dtype);var d=new yt(nm,t.shape,r.shape);return this.compileAndRun(d,[t,r],t.dtype)},n.prototype.batchNormalization=function(t,r,o,a,i,s){var u=[t,r,o],c=null;s!=null&&(c=s.shape,u.push(s));var l=null;if(i!=null&&(l=i.shape,u.push(i)),Q().getBool("WEBGL_PACK_NORMALIZATION")){var f=new SD(t.shape,r.shape,o.shape,c,l,a);return this.compileAndRun(f,u)}var d=new ED(t.shape,r.shape,o.shape,c,l,a);return this.compileAndRun(d,u)},n.prototype.localResponseNormalization4D=function(t,r,o,a,i){var s=Q().getBool("WEBGL_PACK_NORMALIZATION")?new wF(t.shape,r,o,a,i):new bF(t.shape,r,o,a,i);return this.compileAndRun(s,[t])},n.prototype.LRNGrad=function(t,r,o,a,i,s,u){var c=new xF(r.shape,a,i,s,u);return this.compileAndRun(c,[r,o,t])},n.prototype.tile=function(t,r){if(t.dtype==="string"){var o=this.readSync(t.dataId).map(function(i){return pu(i)});return r1(Be(t.shape,t.dtype,o),r)}var a=new $F(t.shape,r);return this.compileAndRun(a,[t])},n.prototype.pad=function(t,r,o){var a=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new IF(t.shape,r,o):new RF(t.shape,r,o);return this.compileAndRun(a,[t])},n.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var o=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GF(t.shape,r):new jF(t.shape,r);return this.compileAndRun(o,[t])},n.prototype.gather=function(t,r,o){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,o);var a=new ZD(t.shape,r.size,o);return this.compileAndRun(a,[t,r])},n.prototype.batchToSpaceND=function(t,r,o){D(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,d){return f*d}),i=xu(t.shape,r,a),s=wu(i.length,r.length),u=_u(t.shape,r,a),c=$b(o,r.length),l=jb(u,o,r.length);return t.reshape(i).transpose(s).reshape(u).slice(c,l)},n.prototype.spaceToBatchND=function(t,r,o){D(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(d,h){return d*h}),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<t.shape.length;++s)i.push([0,0]);var u=t.pad(i),c=xu(u.shape,r,a,!1),l=wu(c.length,r.length,!1),f=_u(u.shape,r,a,!1);return u.reshape(c).transpose(l).reshape(f)},n.prototype.reduce=function(t,r,o){var a=t.shape[0],i=t.shape[1],s=ll(i),u=new AF({windowSize:s,inSize:i,batchSize:a},r),c=this.compileAndRun(u,[t],o);return c.shape[1]===1?c:this.reduce(c,r,o)},n.prototype.argReduce=function(t,r,o){o===void 0&&(o=null);var a=t.shape[0],i=t.shape[1];o!=null&&(a=o.shape[0],i=o.shape[1]);var s=ll(i),u=new vD({windowSize:s,inSize:i,batchSize:a},r,o==null),c=[t];o!=null&&c.push(o);var l=this.compileAndRun(u,c,"int32");return l.shape[1]===1?l:this.argReduce(t,r,l)},n.prototype.argReducePacked=function(t,r,o){o===void 0&&(o=null);var a=o!=null?o.shape:t.shape,i=ll(a[a.length-1]),s=new wD(a,i,r,o==null),u=o==null?[t]:[t,o],c=this.compileAndRun(s,u,"int32");return c.rank===t.rank?this.argReducePacked(t,r,c):c},n.prototype.sum=function(t,r){yn("sum",r,t.rank);var o=qt(t.shape,r),a=o[0],i=we(o[1]),s=t.as2D(-1,i),u=nl(t.dtype);return this.reduce(s,"sum",u).reshape(a)},n.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var o=qt(t.shape,r),a=o[0],i=we(o[1]),s=t.as2D(-1,i),u=nl(t.dtype);return this.reduce(s,"prod",u).reshape(a)},n.prototype.unsortedSegmentSum=function(t,r,o){var a=0,i=Rr([a],t.rank),s=t;i!=null&&(s=t.transpose(i),a=Ir(1,t.rank)[0]);var u=function(h,p,v){for(var m=[],g=h.length,y=0;y<g;y++)y!==p?m.push(h[y]):m.push(v);return m}(s.shape,a,o),c=we([s.shape[a]]),l=s.as2D(-1,c),f=nl(t.dtype),d=this.segOpCompute(l,"unsortedSegmentSum",r,f,o).reshape(u);return i!=null&&(d=d.transpose(kd(i))),d},n.prototype.segOpCompute=function(t,r,o,a,i){var s=t.shape[0],u=t.shape[1],c=function(d,h){var p,v=!1;for(d<=qb?(p=d,v=!0):p=vf(d,Math.floor(Math.sqrt(d)));!v;)p>h||p===d?v=!0:p=vf(d,p+1);return p}(u,i),l=new LF({windowSize:c,inSize:u,batchSize:s,numSegments:i}),f=this.compileAndRun(l,[t,o],a);return f.shape[1]===i?f:(o=bu(0,i).tile([u/c]),this.segOpCompute(f,r,o,a,i))},n.prototype.argMinMaxReduce=function(t,r,o){var a=[r];if(yn("arg"+o.charAt(0).toUpperCase()+o.slice(1),a,t.rank),!Q().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var i=qt(t.shape,a),s=i[0],u=we(i[1]),c=t.as2D(-1,u);return this.argReduce(c,o).reshape(s)}return this.argReducePacked(t,o)},n.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},n.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},n.prototype.cumsum=function(t,r,o,a){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var i=new UD(t.shape,o,a);return this.compileAndRun(i,[t])},n.prototype.equal=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var o=new yt("return float(a == b);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.notEqual=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new yt("return float(a != b);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new yt("return float(a < b);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.lessEqual=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new yt("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new yt("return float(a > b);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.greaterEqual=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new yt("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.logicalNot=function(t){var r=new Ve(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},n.prototype.logicalAnd=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new yt("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.logicalOr=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new yt("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(o,[t,r],"bool")},n.prototype.select=function(t,r,o){var a=new VF(t.rank,r.shape,r.rank);return this.compileAndRun(a,[t,r,o],Ut(r.dtype,o.dtype))},n.prototype.where=function(t){gu("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return Nd(t.shape,r)},n.prototype.topk=function(t,r,o){return o1(t.dataSync(),t.shape,t.dtype,r)},n.prototype.min=function(t,r){yn("min",r,t.rank);var o=qt(t.shape,r),a=o[0],i=we(o[1]),s=t.as2D(-1,i);return this.reduce(s,"min",s.dtype).reshape(a)},n.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new yt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(o,[t,r])},n.prototype.mod=function(t,r){var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new yt(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(o,[t,r])},n.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);yn("max",r,t.rank);var o=qt(t.shape,r),a=o[0],i=we(o[1]),s=t.as2D(-1,i);return this.reduce(s,"max",s.dtype).reshape(a)},n.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new yt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(o,[t,r])},n.prototype.all=function(t,r){yn("all",r,t.rank);var o=qt(t.shape,r),a=o[0],i=we(o[1]),s=t.as2D(-1,i);return this.reduce(s,"all",s.dtype).reshape(a)},n.prototype.any=function(t,r){yn("any",r,t.rank);var o=qt(t.shape,r),a=o[0],i=we(o[1]),s=t.as2D(-1,i);return this.reduce(s,"any",s.dtype).reshape(a)},n.prototype.realDivide=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new yt(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(o,[t,r],"float32")},n.prototype.floorDiv=function(t,r){if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new yt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(o,[t,r],"int32")},n.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,fl);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var o=Ut(t.dtype,r.dtype);if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,fl,o);var a=new yt(fl,t.shape,r.shape);return this.compileAndRun(a,[t,r],o)},n.prototype.packedUnaryOp=function(t,r,o){var a=new oi(t.shape,r);return this.compileAndRun(a,[t],o)},n.prototype.packedBinaryOp=function(t,r,o,a,i){i===void 0&&(i=!1);var s=new Nr(o,t.shape,r.shape,i);return this.compileAndRun(s,[t,r],a)},n.prototype.complexSeparableBinaryOp=function(t,r,o){var a=this,i=this.texData.get(t.dataId),s=this.texData.get(r.dataId),u=[[i.complexTensors.real,s.complexTensors.real],[i.complexTensors.imag,s.complexTensors.imag]].map(function(d){var h=d[0],p=d[1],v=a.makeComplexComponentTensorInfo(t,h),m=a.makeComplexComponentTensorInfo(r,p),g=new yt(o,t.shape,r.shape);return a.compileAndRun(g,[v,m],Ut(h.dtype,p.dtype))}),c=u[0],l=u[1],f=this.complex(c,l);return c.dispose(),l.dispose(),f},n.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},n.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>Q().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),o=this.addN(t.slice(0,r)),a=this.addN(t.slice(r));return this.addN([o,a])}var i=t.map(function(c){return c.dtype}).reduce(function(c,l){return Ut(c,l)}),s=t.map(function(c){return c.shape}),u=Q().getBool("WEBGL_PACK")?new pD(t[0].shape,s):new hD(t[0].shape,s);return this.compileAndRun(u,t,i)},n.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,dl);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var o=Ut(t.dtype,r.dtype);if(Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,dl,t.dtype);var a=new yt(dl,t.shape,r.shape);return this.compileAndRun(a,[t,r],o)},n.prototype.pow=function(t,r){var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new yt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),a=Ut(t.dtype,r.dtype);return this.compileAndRun(o,[t,r],a)},n.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,pm,t.dtype);var r=new Ve(t.shape,pm);return this.compileAndRun(r,[t])},n.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,vm,t.dtype);var r=new Ve(t.shape,vm);return this.compileAndRun(r,[t])},n.prototype.sign=function(t){var r=new Ve(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},n.prototype.isNaN=function(t){var r=new Ve(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.isInf=function(t){var r=new Ve(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.isFinite=function(t){var r=new Ve(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.round=function(t){var r=new Ve(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},n.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,mm,t.dtype);var r=new Ve(t.shape,mm);return this.compileAndRun(r,[t])},n.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,gm,t.dtype);var r=new Ve(t.shape,gm);return this.compileAndRun(r,[t])},n.prototype.softmax=function(t,r){var o=Tt([r],t.shape),a=this.max(t,o),i=mn(a.shape,o),s=this.subtract(t,a.reshape(i)),u=this.exp(s),c=this.sum(u,o).reshape(i);return this.realDivide(u,c)},n.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new Ve(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},n.prototype.log1p=function(t){var r=new Ve(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},n.prototype.sqrt=function(t){var r=new Ve(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},n.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new Ve(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},n.prototype.reciprocal=function(t){var r=new Ve(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},n.prototype.relu=function(t){var r;return r=Q().getBool("WEBGL_PACK")?new oi(t.shape,h1):new Ve(t.shape,l1),this.compileAndRun(r,[t])},n.prototype.relu6=function(t){var r;return r=Q().getBool("WEBGL_PACK")?new oi(t.shape,p1):new Ve(t.shape,f1),this.compileAndRun(r,[t])},n.prototype.prelu=function(t,r){var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(c1,t.shape,r.shape):new yt(u1,t.shape,r.shape);return this.compileAndRun(o,[t,r])},n.prototype.elu=function(t){if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,v1,t.dtype);var r=new Ve(t.shape,d1);return this.compileAndRun(r,[t])},n.prototype.eluDer=function(t,r){var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new yt("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(o,[t,r])},n.prototype.selu=function(t){var r=new Ve(t.shape,KF);return this.compileAndRun(r,[t])},n.prototype.int=function(t){var r=new Ve(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},n.prototype.clip=function(t,r,o){var a,i=(a=Q().getBool("WEBGL_PACK_CLIP")?new AD(t.shape):new ID(t.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(a,[t],null,i)},n.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,dm,t.dtype);var r=new Ve(t.shape,dm);return this.compileAndRun(r,[t])},n.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),o=new TD(t.shape),a=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(o,a)},n.prototype.sigmoid=function(t){var r=new Ve(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},n.prototype.softplus=function(t){var r=new Ve(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},n.prototype.sin=function(t){var r=new Ve(t.shape,XF);return this.compileAndRun(r,[t])},n.prototype.cos=function(t){var r=new Ve(t.shape,YF);return this.compileAndRun(r,[t])},n.prototype.tan=function(t){var r=new Ve(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},n.prototype.asin=function(t){var r=new Ve(t.shape,JF);return this.compileAndRun(r,[t])},n.prototype.acos=function(t){var r=new Ve(t.shape,QF);return this.compileAndRun(r,[t])},n.prototype.atan=function(t){var r=new Ve(t.shape,ZF);return this.compileAndRun(r,[t])},n.prototype.atan2=function(t,r){var o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new yt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(o,[t,r])},n.prototype.sinh=function(t){var r=new Ve(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},n.prototype.cosh=function(t){var r=new Ve(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},n.prototype.tanh=function(t){var r=new Ve(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},n.prototype.asinh=function(t){var r=new Ve(t.shape,eP);return this.compileAndRun(r,[t])},n.prototype.acosh=function(t){var r=new Ve(t.shape,tP);return this.compileAndRun(r,[t])},n.prototype.atanh=function(t){var r=new Ve(t.shape,nP);return this.compileAndRun(r,[t])},n.prototype.erf=function(t){var r=new Ve(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},n.prototype.step=function(t,r){var o=new Ve(t.shape,function(a){return a===void 0&&(a=0),er+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(o,[t])},n.prototype.conv2dByMatMul=function(t,r,o,a,i,s){var u=t.shape,c=this.texData.get(t.dataId),l=o.inChannels,f=u[0]*u[1]*u[2],d=o.outChannels,h=o.dataFormat==="channelsLast",p=(f===1||d===1)&&l>1e3,v=u[2]%2!=0&&!!c.isPacked;if(p||!Q().getBool("WEBGL_LAZILY_UNPACK")||!Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!v){var m=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],g=this.reshape(t,[1,m,o.inChannels]),y=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:y,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),o.outShape)}var x=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),b={dataId:t.dataId,shape:[1,x,o.inChannels],dtype:t.dtype},_=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,D(ws(c.shape,b.shape),function(){return"packed reshape "+c.shape+" to "+b.shape+" isn't free"});var w=this.reshape(r,[1,o.inChannels,o.outChannels]),S=this.fusedBatchMatMul({a:b,b:w,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),E=this.texData.get(S.dataId);return D(E.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=_,E.shape=o.outShape,M.makeTensorFromDataId(S.dataId,o.outShape,S.dtype)},n.prototype.conv2dWithIm2Row=function(t,r,o,a,i,s){var u=o.filterWidth,c=o.filterHeight,l=o.inChannels,f=o.outWidth,d=o.outHeight,h=o.dataFormat==="channelsLast",p=u*c*l,v=d*f,m=[p,v],g=t.squeeze([0]),y=r.reshape([1,p,-1]),x=new yF(m,g.shape,o),b=this.compileAndRun(x,[g]).reshape([1,m[0],m[1]]),_=a!=null,w=s!=null,S=i?Ss(i,!0):null,E=new hl(b.shape,[1,v,o.outChannels],!0,!1,_,S,w),C=[b,y];a&&C.push(a),w&&C.push(s);var k=this.compileAndRun(E,C);return h?k.reshape([1,d,f,o.outChannels]):k.reshape([1,o.outChannels,d,f])},n.prototype.fusedConv2d=function(t){var r=t.input,o=t.filter,a=t.convInfo,i=t.bias,s=t.activation,u=t.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,a,i,s,u);if(Q().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,a,i,s,u);var c=i!=null,l=u!=null,f=s?Ss(s,!1):null,d=new rm(a,c,f,l),h=[r,o];return i&&h.push(i),u&&h.push(u),this.compileAndRun(d,h)},n.prototype.conv2d=function(t,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,o);if(Q().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,o);var a=new rm(o);return this.compileAndRun(a,[t,r])},n.prototype.conv2dDerInput=function(t,r,o){var a=new ND(o);return this.compileAndRun(a,[t,r])},n.prototype.conv2dDerFilter=function(t,r,o){var a=new PD(o);return this.compileAndRun(a,[t,r])},n.prototype.fusedDepthwiseConv2D=function(t){var r,o=t.input,a=t.filter,i=t.convInfo,s=t.bias,u=t.activation,c=t.preluActivationWeights,l=Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,f=u?Ss(u,l):null,d=[o,a],h=s!=null,p=c!=null;return h&&d.push(s),p&&d.push(c),l?(r=new am(i,h,f,p),this.compileAndRun(r,d)):(r=new om(i,h,f,p),this.compileAndRun(r,d))},n.prototype.depthwiseConv2D=function(t,r,o){var a;return Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(a=new am(o),this.compileAndRun(a,[t,r])):(a=new om(o),this.compileAndRun(a,[t,r]))},n.prototype.depthwiseConv2DDerInput=function(t,r,o){var a=new LD(o);return this.compileAndRun(a,[t,r])},n.prototype.depthwiseConv2DDerFilter=function(t,r,o){var a=new BD(o);return this.compileAndRun(a,[t,r])},n.prototype.conv3d=function(t,r,o){var a=new VD(o);return this.compileAndRun(a,[t,r])},n.prototype.conv3dDerInput=function(t,r,o){var a=new MD(o);return this.compileAndRun(a,[t,r])},n.prototype.conv3dDerFilter=function(t,r,o){var a=new OD(o);return this.compileAndRun(a,[t,r])},n.prototype.maxPool=function(t,r){var o=new pl(r,"max",!1);return this.compileAndRun(o,[t])},n.prototype.avgPool=function(t,r){var o=new pl(r,"avg",!1);return this.compileAndRun(o,[t],"float32")},n.prototype.maxPoolBackprop=function(t,r,o,a){var i=new pl(a,"max",!0),s=this.compileAndRun(i,[r]),u=new _F(a),c=this.compileAndRun(u,[t,s],r.dtype);return s.dispose(),c},n.prototype.avgPoolBackprop=function(t,r,o){var a=new _D(o);return this.compileAndRun(a,[t],r.dtype)},n.prototype.cast=function(t,r){return Zb(t,r,this)},n.prototype.unstack=function(t,r){for(var o=t.shape[r],a=new Array(t.rank-1),i=0,s=0;s<t.rank;s++)s!==r&&(a[i++]=t.shape[s]);var u=new Array(t.rank).fill(0),c=t.shape.slice();c[r]=1;var l=new Array(o);for(s=0;s<l.length;s++)u[r]=s,l[s]=this.slice(t,u,c).reshape(a);return l},n.prototype.avgPool3d=function(t,r){var o=new vl(r,"avg",!1);return this.compileAndRun(o,[t],"float32")},n.prototype.avgPool3dBackprop=function(t,r,o){var a=new CD(o);return this.compileAndRun(a,[t],r.dtype)},n.prototype.maxPool3d=function(t,r){var o=new vl(r,"max",!1);return this.compileAndRun(o,[t],"float32")},n.prototype.maxPool3dBackprop=function(t,r,o,a){var i=new vl(a,"max",!0),s=this.compileAndRun(i,[r]),u=new CF(a),c=this.compileAndRun(u,[t,s],r.dtype);return s.dispose(),c},n.prototype.reshape=function(t,r){var o=this.texData.get(t.dataId);if(o.isPacked&&!ws(t.shape,r)&&(o.texture===null||!ws(o.shape,r))){var a=this.packedReshape(t,r);return M.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return Cf(t,r)},n.prototype.resizeBilinear=function(t,r,o,a){var i=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new PF(t.shape,r,o,a):new FF(t.shape,r,o,a);return this.compileAndRun(i,[t],"float32")},n.prototype.resizeBilinearBackprop=function(t,r,o){var a=new DF(t,r,o);return this.compileAndRun(a,[t])},n.prototype.resizeNearestNeighbor=function(t,r,o,a){var i=new OF(t.shape,r,o,a);return this.compileAndRun(i,[t])},n.prototype.resizeNearestNeighborBackprop=function(t,r,o){var a=new NF(t,r,o);return this.compileAndRun(a,[t])},n.prototype.multinomial=function(t,r,o,a){var i=r?t:$r(t),s=i.shape[0],u=i.shape[1],c=new EF(s,u,o),l=c.getCustomSetupFunc(a);return this.compileAndRun(c,[i],"int32",l)},n.prototype.oneHot=function(t,r,o,a){var i=new SF(t.size,r,o,a);return this.compileAndRun(i,[t])},n.prototype.diag=function(t){var r=new jD(t.size);return this.compileAndRun(r,[t])},n.prototype.nonMaxSuppression=function(t,r,o,a,i){return gu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Fd(t.dataSync(),r.dataSync(),o,a,i)},n.prototype.cropAndResize=function(t,r,o,a,i,s){var u=new WD(t.shape,r.shape,a,i,s);return this.compileAndRun(u,[t,r,o],"float32")},n.prototype.depthToSpace=function(t,r,o){D(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=t.shape[0],i=o==="NHWC"?t.shape[1]:t.shape[2],s=o==="NHWC"?t.shape[2]:t.shape[3],u=o==="NHWC"?t.shape[3]:t.shape[1],c=i*r,l=s*r,f=u/(r*r),d=new $D(o==="NHWC"?[a,c,l,f]:[a,f,c,l],r,o);return this.compileAndRun(d,[t])},n.prototype.split=function(t,r,o){return n1(t,r,o)},n.prototype.scatterND=function(t,r,o){var a=Cu(0,t,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,c=a.strides,l=a.outputSize,f=[l/u,u],d=t.reshape([s,i]),h=r.reshape([s,u]);if(l===0)return Cf(zt([]),o);var p=he(0),v=new cm(s,i,d.rank,h.rank,c,f);return this.compileAndRun(v,[h,d,p]).reshape(o)},n.prototype.sparseToDense=function(t,r,o,a){var i=Cu(0,t,o),s=i.sliceRank,u=i.numUpdates,c=i.strides,l=i.outputSize,f=new cm(u,s,t.rank,r.rank,c,[l,1]);return this.compileAndRun(f,[r,t,a]).reshape(o)},n.prototype.fft=function(t){return this.fftImpl(t,!1)},n.prototype.ifft=function(t){return this.fftImpl(t,!0)},n.prototype.fftImpl=function(t,r){var o=this.texData.get(t.dataId),a=new sm(YD,t.shape,r),i=new sm(JD,t.shape,r),s=[this.makeComplexComponentTensorInfo(t,o.complexTensors.real),this.makeComplexComponentTensorInfo(t,o.complexTensors.imag)],u=this.compileAndRun(a,s),c=this.compileAndRun(i,s),l=this.complex(u,c).as2D(t.shape[0],t.shape[1]);return u.dispose(),c.dispose(),l},n.prototype.gatherND=function(t,r){var o=r.shape,a=o[o.length-1],i=Gb(t,r),s=i[0],u=i[1],c=i[2],l=i[3],f=r.reshape([u,a]),d=t.reshape([t.size/c,c]),h=new eF(a,l,[u,c]);return this.compileAndRun(h,[d,f]).reshape(s)},n.prototype.fill=function(t,r,o){if((o=o||Zi(r))==="string"){var a=hu(o,we(t));return a.fill(r),M.makeTensor(a,t,o,this)}var i=new QD(t,r),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],o,s)},n.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},n.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},n.prototype.linspace=function(t,r,o){return e1(t,r,o)},n.prototype.makeTensorInfo=function(t,r){var o=this.write(null,t,r);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:r}},n.prototype.makeOutput=function(t,r){var o=this.makeTensorInfo(t,r).dataId;return M.makeTensorFromDataId(o,t,r,this)},n.prototype.unpackTensor=function(t){var r=new oP(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},n.prototype.packTensor=function(t){var r=new kF(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},n.prototype.packedReshape=function(t,r){var o=[vu(t.shape)].concat(mu(t.shape)),a={dtype:t.dtype,shape:o,dataId:t.dataId},i=[vu(r)].concat(mu(r)),s=new TF(i,o),u=this.runWebGLProgram(s,[a],t.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},n.prototype.decode=function(t){var r,o=this.texData.get(t),a=o.isPacked,i=o.shape,s=o.dtype,u=cl(i);return r=a?new HD(u):new zD(u),{dtype:s,shape:i,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:t}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(t,r,o,a,i){var s=this;i===void 0&&(i=!1);var u=this.makeTensorInfo(t.outputShape,o),c=this.texData.get(u.dataId);if(t.packedOutput&&(c.isPacked=!0),t.outPackingScheme===Mi.DENSE){var l=gi(t.outputShape);c.texShape=l.map(function(x){return 2*x})}if(t.outTexUsage!=null&&(c.usage=t.outTexUsage),we(u.shape)===0)return c.values=Ni(u.dtype,0),u;var f=[],d=r.map(function(x){if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(x.dataId);if(b.texture==null){if(!t.packedInputs&&we(x.shape)<=Q().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=x.shape)}else if(!!b.isPacked!=!!t.packedInputs)x=b.isPacked?s.unpackTensor(x):s.packTensor(x),f.push(x),b=s.texData.get(x.dataId);else if(b.isPacked&&!ws(b.shape,x.shape)){var _=x,w=x.shape;x.shape=b.shape,x=s.packedReshape(x,w),f.push(x),b=s.texData.get(x.dataId),_.shape=w}return s.uploadToGPU(x.dataId),{shape:x.shape,texData:b,isUniform:!1}});this.uploadToGPU(u.dataId);var h,p={shape:u.shape,texData:c,isUniform:!1},v=function(x,b,_){var w="";b.concat(_).forEach(function(C){var k=C.texData!=null&&C.texData.slice!=null&&C.texData.slice.flatOffset>0,I=C.isUniform?"uniform":C.texData.texShape;w+=C.shape+"_"+I+"_"+k});var S=x.userCode,E=x.constructor.name;return E+="_"+w+"_"+S}(t,d,p),m=this.getAndSaveBinary(v,function(){return function(x,b,_,w){var S=b.userCode,E=_.map(function(W,j){var Z={logicalShape:W.shape,texShape:W.isUniform?null:W.texData.texShape,isUniform:W.isUniform,isPacked:!W.isUniform&&W.texData.isPacked,flatOffset:null};return W.texData!=null&&W.texData.slice!=null&&W.texData.slice.flatOffset>0&&(Z.flatOffset=W.texData.slice.flatOffset),{name:b.variableNames[j],shapeInfo:Z}}),C=E.map(function(W){return W.shapeInfo}),k={logicalShape:w.shape,texShape:w.texData.texShape,isUniform:!1,isPacked:w.texData.isPacked,flatOffset:null},I=mD(E,k,S,b.packedInputs),R=x.createProgram(I),T=null,N=x.getUniformLocation(R,"NAN",!1);Q().getNumber("WEBGL_VERSION")===1&&(T=x.getUniformLocation(R,"INFINITY",!1));for(var B={},H=0;H<b.variableNames.length;H++){var z=b.variableNames[H];B[z]=x.getUniformLocation(R,z,!1),B["offset"+z]=x.getUniformLocation(R,"offset"+z,!1)}return{program:b,source:I,webGLProgram:R,uniformLocations:B,inShapeInfos:C,outShapeInfo:k,infLoc:T,nanLoc:N}}(s.gpgpu,t,d,p)}),g=this.activeTimers!=null;if(g&&(h=this.startTimer()),function(x,b,_,w,S){um(b.inShapeInfos,_),um([b.outShapeInfo],[w]);var E=w.texData.texture,C=w.texData.texShape;w.texData.isPacked?x.setOutputPackedMatrixTexture(E,C[0],C[1]):x.setOutputMatrixTexture(E,C[0],C[1]),x.setProgram(b.webGLProgram),Q().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&x.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&x.gl.uniform1f(b.nanLoc,NaN),_.forEach(function(k,I){var R=b.program.variableNames[I],T=b.uniformLocations[R],N=b.uniformLocations["offset"+R];if(T!=null)if(k.isUniform)if(we(k.shape)<2)x.gl.uniform1f(T,k.uniformValues[0]);else{var B=k.uniformValues;B instanceof Float32Array||(B=new Float32Array(B)),x.gl.uniform1fv(T,B)}else k.texData.slice!=null&&N!=null&&x.gl.uniform1i(N,k.texData.slice.flatOffset),x.setInputMatrixTexture(k.texData.texture,T,I)}),S!=null&&S(x,b.webGLProgram),x.executeProgram()}(this.gpgpu,m,d,p,a),f.forEach(function(x){return s.disposeData(x.dataId)}),g&&(h=this.endTimer(h),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(h)})),!Q().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&i===!1){var y=this.unpackTensor(u);return this.disposeData(u.dataId),y}return u},n.prototype.compileAndRun=function(t,r,o,a,i){i===void 0&&(i=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(t,r,o,a,i);return M.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var t=this;this.disposed||(Q().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=me(function(){if(!Q().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Q().getBool("DEBUG");Q().set("DEBUG",!1);var o=t.abs(he(1e-8)).dataSync()[0];if(Q().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(t){var r,o=this.texData.get(t),a=o.shape,i=o.dtype,s=o.values,u=o.texture,c=o.usage,l=o.isPacked;if(u==null){var f,d=this.activeTimers!=null;d&&(f=cr());var h=o.texShape;if(h==null&&(h=dT(a,l),o.texShape=h),s!=null){var p=cl(a),v=void 0,m=h[1],g=h[0],y=s instanceof Uint8Array;l?(m=(r=ts(h[0],h[1]))[0],g=r[1],v=new XD(p,[g,m],y)):v=new KD(p,[g,m],y);var x=this.makeTensorInfo([g,m],i);this.texData.get(x.dataId).usage=y?En.PIXELS:En.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,g,s);var b=this.runWebGLProgram(v,[x],i,null,!0),_=this.texData.get(b.dataId);o.texture=_.texture,o.texShape=_.texShape,o.isPacked=_.isPacked,o.usage=_.usage,this.disposeData(x.dataId),this.texData.delete(b.dataId),o.values=null,d&&(this.uploadWaitMs+=cr()-f)}else{var w=this.acquireTexture(h,c,i,l);o.texture=w}}},n.prototype.convertAndCacheOnCPU=function(t,r){var o=this.texData.get(t),a=o.dtype;return this.releaseGPUData(t),r!=null&&(o.values=function(i,s){if(s==="float32"||s==="complex64")return i;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(i.length):new Uint8Array(i.length),c=0;c<u.length;++c)u[c]=Math.round(i[c]);return u}throw new Error("Unknown dtype "+s)}(r,a)),o.values},n.prototype.acquireTexture=function(t,r,o,a){if(this.numBytesInGPU+=this.computeBytes(t,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,a)},n.prototype.computeBytes=function(t,r){return t[0]*t[1]*Ib(r)},n}(Jb);Ob()&&M.registerBackend("webgl",function(){return new iP},2);var sP=O({square_:function(e){var n=A(e,"x","square"),t=[n];return M.runKernelFunc(function(r,o){return o([n]),r.square(n)},{x:n},null,"Square",{},t,[])}}),Li="SquaredDifference",m1=O({squaredDifference_:function(e,n){var t,r=A(e,"a","squaredDifference"),o=A(n,"b","squaredDifference");t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return M.runKernelFunc(function(s,u){var c=s.squaredDifference(r,o);return u([r,o]),c},a,function(s,u){var c=u[0],l=u[1],f=he(2);return{a:function(){return s.mul(c.sub(l).mul(f))},b:function(){return s.mul(l.sub(c).mul(f))}}},Li,{},i,[])}}),uP=O({abs_:function(e){var n=A(e,"x","abs");return n.dtype==="complex64"?M.runKernelFunc(function(t){return t.complexAbs(n)},{$x:n}):M.runKernelFunc(function(t,r){var o=t.abs(n);return r([n]),o},{x:n},function(t,r){var o=r[0];return{x:function(){return t.mul(o.toFloat().step(-1))}}},"Abs")}}),cP=O({acos_:function(e){var n=A(e,"x","acos");return M.runKernelFunc(function(t,r){var o=t.acos(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.divStrict(he(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),lP=O({acosh_:function(e){var n=A(e,"x","acosh");return M.runKernelFunc(function(t,r){var o=t.acosh(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),fP=O({asin_:function(e){var n=A(e,"x","asin");return M.runKernelFunc(function(t,r){var o=t.asin(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.divStrict(he(1).sub(o.toFloat().square()).sqrt())}}})}}),dP=O({asinh_:function(e){var n=A(e,"x","asinh");return M.runKernelFunc(function(t,r){var o=t.asinh(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.divStrict(he(1).add(o.toFloat().square()).sqrt())}}})}}),hP=O({atan_:function(e){var n=A(e,"x","atan");return M.runKernelFunc(function(t,r){var o=t.atan(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.div(o.toFloat().square().add(1))}}})}}),pP=O({atanh_:function(e){var n=A(e,"x","atanh");return M.runKernelFunc(function(t,r){var o=t.atanh(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.div(he(1).sub(o.toFloat().square()))}}})}}),vP=O({ceil_:function(e){var n=A(e,"x","ceil");return M.runKernelFunc(function(t){return t.ceil(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),Ld=O({clipByValue_:function(e,n,t){var r=A(e,"x","clipByValue");D(n<=t,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+t+")."});var o=[r],a={min:n,max:t};return M.runKernelFunc(function(i,s){var u=i.clip(r,n,t);return s([r]),u},{x:r},function(i,s){var u=s[0];return{x:function(){return i.where(u.greaterEqual(n).logicalAnd(u.lessEqual(t)),Ke(i))}}},"ClipByValue",a,o)}}),mP=O({cos_:function(e){var n=A(e,"x","cos"),t=[n];return M.runKernelFunc(function(r,o){var a=r.cos(n);return o([n]),a},{x:n},function(r,o){var a=o[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),gP=O({cosh_:function(e){var n=A(e,"x","cosh");return M.runKernelFunc(function(t,r){var o=t.cosh(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(t)}}})}}),yP=O({erf_:function(e){var n=A(e,"x","erf");return D(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),M.runKernelFunc(function(t,r){var o=t.erf(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Sf=O({exp_:function(e){var n=A(e,"x","exp");return M.runKernelFunc(function(t,r){var o=t.exp(n);return r([o]),o},{x:n},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),bP=O({expm1_:function(e){var n=A(e,"x","expm1");return M.runKernelFunc(function(t,r){var o=t.expm1(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.mul(o.exp())}}})}}),xP=O({floor_:function(e){var n=A(e,"x","floor");return M.runKernelFunc(function(t){return t.floor(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),wP=O({log_:function(e){var n=A(e,"x","log"),t=[n];return M.runKernelFunc(function(r,o){var a=r.log(n);return o([n]),a},{x:n},function(r,o){var a=o[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},t)}}),_P=O({log1p_:function(e){var n=A(e,"x","log1p");return M.runKernelFunc(function(t,r){var o=t.log1p(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.div(o.add(1))}}})}}),CP=O({logSigmoid_:function(e){var n=A(e,"x","logSigmoid");return M.runKernelFunc(function(t,r){var o=t.softplus(n.neg()).neg();return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.mul(o.neg().sigmoid())}}})}}),Ru=O({neg_:function(e){var n=A(e,"x","neg"),t=[n];return M.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),EP=O({reciprocal_:function(e){var n=A(e,"x","reciprocal");return M.runKernelFunc(function(t,r){var o=t.reciprocal(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.div(o.square().neg())}}})}}),SP=O({round_:function(e){var n=A(e,"x","round");return M.runKernelFunc(function(t){return t.round(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),g1=O({rsqrt_:function(e){var n=A(e,"x","rsqrt"),t=[n];return M.runKernelFunc(function(r,o){var a=r.rsqrt(n);return o([n]),a},{x:n},function(r,o){var a=o[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),y1=O({sigmoid_:function(e){var n=A(e,"x","sigmoid");return M.runKernelFunc(function(t,r){var o=t.sigmoid(n);return r([o]),o},{x:n},function(t,r){var o=r[0];return{x:function(){return t.mul(o.mul(he(1).sub(o)))}}},"Sigmoid")}}),kP=O({sign_:function(e){var n=A(e,"x","sign");return M.runKernelFunc(function(t){return t.sign(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),RP=O({isNaN_:function(e){var n=A(e,"x","isNaN");return M.runKernelFunc(function(t){return t.isNaN(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),IP=O({isInf_:function(e){var n=A(e,"x","isInf");return M.runKernelFunc(function(t){return t.isInf(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),AP=O({isFinite_:function(e){var n=A(e,"x","isFinite");return M.runKernelFunc(function(t){return t.isFinite(n)},{$x:n},function(t){return{$x:function(){return Ke(t)}}})}}),TP=O({sin_:function(e){var n=A(e,"x","sin"),t=[n];return M.runKernelFunc(function(r,o){var a=r.sin(n);return o([n]),a},{x:n},function(r,o){var a=o[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},t)}}),DP=O({sinh_:function(e){var n=A(e,"x","sinh");return M.runKernelFunc(function(t,r){var o=t.sinh(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(t)}}})}}),FP=O({softplus_:function(e){var n=A(e,"x","softplus");return M.runKernelFunc(function(t,r){var o=t.softplus(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.mul(o.sigmoid())}}})}}),PP=O({sqrt_:function(e){var n=A(e,"x","sqrt");return M.runKernelFunc(function(t,r){var o=t.sqrt(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.div(o.toFloat().sqrt().mul(2))}}})}}),NP=O({step_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","step");return M.runKernelFunc(function(r){return r.step(t,n)},{$x:t},function(r){return{$x:function(){return Ke(r)}}})}}),OP=O({tan_:function(e){var n=A(e,"x","tan");return M.runKernelFunc(function(t,r){var o=t.tan(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return t.div(o.cos().square())}}})}}),MP=O({tanh_:function(e){var n=A(e,"x","tanh");return M.runKernelFunc(function(t,r){var o=t.tanh(n);return r([o]),o},{x:n},function(t,r){var o=r[0];return{x:function(){return he(1).sub(o.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function b1(e,n,t,r,o,a){var i,s,u=A(e,"x","batchNorm"),c=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");return o!=null&&(i=A(o,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),D(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),D(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),D(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),i!=null&&D(i.rank===2||i.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),s!=null&&D(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),rs(u,c,l,s,i,a)}function x1(e,n,t,r,o,a){var i,s,u=A(e,"x","batchNorm"),c=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");return o!=null&&(i=A(o,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),D(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),D(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),D(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),i!=null&&D(i.rank===3||i.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),s!=null&&D(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),rs(u,c,l,s,i,a)}function w1(e,n,t,r,o,a){var i,s,u=A(e,"x","batchNorm"),c=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");return o!=null&&(i=A(o,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),D(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),D(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),D(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),i!=null&&D(i.rank===4||i.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),s!=null&&D(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),rs(u,c,l,s,i,a)}function rs(e,n,t,r,o,a){a==null&&(a=.001);var i,s,u,c=A(e,"x","batchNorm"),l=A(n,"mean","batchNorm"),f=A(t,"variance","batchNorm");o!=null&&(i=A(o,"scale","batchNorm")),r!=null&&(s=A(r,"offset","batchNorm")),D(l.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),D(s==null||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),D(i==null||l.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=c.rank===0||c.rank===1?c.as4D(1,1,1,c.size):c.rank===2?c.as4D(1,1,c.shape[0],c.shape[1]):c.rank===3?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var d=[c,l,f,i];return M.runKernelFunc(function(h,p){var v=h.batchNormalization(u,ks(l),ks(f),a,ks(i),ks(s));return p([c,l,f,i]),v},{x:c,mean:l,variance:f,scale:i,offset:s},function(h,p){var v=p,m=v[0],g=v[1],y=v[2],x=v[3],b=x??he(1),_=It(g.shape,u.shape),w=[];if(g.rank===1){for(var S=0;S<u.shape.length-1;++S)w.push(u.shape[S]);w.push(1)}var E=m.sub(g),C=h.mul(b),k=g1(y.add(he(a))),I=k.mul(k).mul(k).mul(he(-.5));return{x:function(){return g.rank===1?h.mul(ka(k.as4D(1,1,1,g.shape[0]),w)).mul(b).reshape(m.shape):h.mul(k).mul(b).reshape(m.shape)},mean:function(){var R=k.mul(he(-1)).mul(C);return g.rank===1&&(R=R.sum(_)),R.reshape(g.shape)},variance:function(){var R=I.mul(E).mul(C);return g.rank===1&&(R=R.sum(_)),R.reshape(g.shape)},scale:function(){var R=E.mul(k),T=h.mul(R);return g.rank===1&&(T=T.sum(_)),T.reshape(g.shape)},offset:function(){var R=h;return g.rank===1&&(R=R.sum(_)),R.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:a},d).reshape(c.shape)}function ks(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function vc(){Mb("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var BP=O({batchNormalization2d_:function(e,n,t,r,o,a){return r===void 0&&(r=.001),vc(),b1(e,n,t,a,o,r)}}),LP=O({batchNormalization3d_:function(e,n,t,r,o,a){return r===void 0&&(r=.001),vc(),x1(e,n,t,a,o,r)}}),VP=O({batchNormalization4d_:function(e,n,t,r,o,a){return r===void 0&&(r=.001),vc(),w1(e,n,t,a,o,r)}}),WP=O({batchNormalization_:function(e,n,t,r,o,a){return r===void 0&&(r=.001),vc(),rs(e,n,t,a,o,r)}}),_1=O({batchNorm_:rs}),UP=O({batchNorm2d_:b1}),zP=O({batchNorm3d_:x1}),HP=O({batchNorm4d_:w1}),mc=O({logicalAnd_:function(e,n){var t=A(e,"a","logicalAnd","bool"),r=A(n,"b","logicalAnd","bool");return $e(t.shape,r.shape),M.runKernelFunc(function(o){return o.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),$P=O({logicalNot_:function(e){var n=A(e,"x","logicalNot","bool");return M.runKernelFunc(function(t){return t.logicalNot(n)},{$x:n})}}),C1=O({logicalOr_:function(e,n){var t=A(e,"a","logicalOr","bool"),r=A(n,"b","logicalOr","bool");return $e(t.shape,r.shape),M.runKernelFunc(function(o){return o.logicalOr(t,r)},{$a:t,$b:r})}}),jP=O({logicalXor_:function(e,n){var t=A(e,"a","logicalXor","bool"),r=A(n,"b","logicalXor","bool");return $e(t.shape,r.shape),C1(e,n).logicalAnd(mc(e,n).logicalNot())}}),jo=O({where_:function(e,n,t){var r=A(n,"a","where"),o=A(t,"b","where"),a=A(e,"condition","where","bool");return nt(r.shape,o.shape,"Error in where: "),a.rank===1?D(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):nt(a.shape,o.shape,"Error in where: "),M.runKernelFunc(function(i,s){var u=i.select(a,r,o);return s([a]),u},{$condition:a,$a:r,$b:o},function(i,s){var u=s[0];return{$condition:function(){return Ke(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}})}}),E1=function(e){return ge(this,void 0,void 0,function(){var n,t,r;return ye(this,function(o){switch(o.label){case 0:return[4,(n=A(e,"condition","whereAsync","bool")).data()];case 1:return t=o.sent(),r=Nd(n.shape,t),e!==n&&n.dispose(),[2,r]}})})},He=O({add_:function(e,n){var t,r=A(e,"a","add"),o=A(n,"b","add");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i){return i.add(r,o)},{a:r,b:o},function(i){return{a:function(){var s=i,u=It(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=It(o.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}},"Add")}}),GP=O({addN_:function(e){D(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),D(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var n=e.map(function(o,a){return A(o,"tensors"+a,"addN")}),t=n[0];n.forEach(function(o){if(o.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(o){if(!Nt(o.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return M.runKernelFunc(function(o){return o.addN(n)},r,function(o){var a={};return n.forEach(function(i,s){a[s]=function(){return o.clone()}}),a},"AddN")}}),qP=O({addStrict_:function(e,n){var t=A(e,"a","addStrict"),r=A(n,"b","addStrict");return nt(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),KP=O({atan2_:function(e,n){var t,r=A(e,"a","atan2"),o=A(n,"b","atan2");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i,s){var u=i.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],c=s[1];return{$a:function(){var l=He(u.square(),c.square()),f=i.mul(c.div(l)),d=It(u.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)},$b:function(){var l=He(u.square(),c.square()),f=Ru(i.mul(u.div(l))),d=It(c.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(c.shape)}}})}}),zn=O({div_:function(e,n){var t,r=A(e,"a","div"),o=A(n,"b","div");if(t=vt(r,o),r=t[0],o=t[1],r.dtype==="int32"&&o.dtype==="int32")return S1(r,o);var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i,s){var u=i.realDivide(r,o);return s([r,o]),u},{a:r,b:o},function(i,s){var u=s[0],c=s[1];return{a:function(){var l=i.div(c.toFloat()),f=It(u.shape,a);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=i.mul(u.toFloat()),f=It(c.shape,a);f.length>0&&(l=l.sum(f).reshape(c.shape));var d=c.square();return l.div(d.toFloat()).neg()}}},"Div")}}),XP=O({divNoNan_:function(e,n){var t,r=A(e,"a","div"),o=A(n,"b","div");r=(t=vt(r,o))[0],o=t[1];var a=zn(r,o),i=Ke(a),s=o.equal(i);return jo(s,i,a)}}),YP=O({divStrict_:function(e,n){var t=A(e,"a","div"),r=A(n,"b","div");return nt(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),S1=O({floorDiv_:function(e,n){var t,r=A(e,"a","floorDiv"),o=A(n,"b","floorDiv");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i,s){var u=i.floorDiv(r,o);return s([r,o]),u},{a:r,b:o},function(i,s){var u=s[0],c=s[1];return{a:function(){var l=i.div(c.toFloat()),f=It(u.shape,a);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=i.mul(u.toFloat()),f=It(c.shape,a);f.length>0&&(l=l.sum(f).reshape(c.shape));var d=c.square();return l.div(d.toFloat()).neg()}}},"FloorDiv")}}),Vd=O({maximum_:function(e,n){var t,r=A(e,"a","maximum"),o=A(n,"b","maximum");return t=vt(r,o),r=t[0],o=t[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),$e(r.shape,o.shape),M.runKernelFunc(function(a,i){var s=a.maximum(r,o);return i([r,o]),s},{a:r,b:o},function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),JP=O({maximumStrict_:function(e,n){var t=A(e,"a","maximumStrict"),r=A(n,"b","maximumStrict");return nt(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),k1=O({minimum_:function(e,n){var t,r=A(e,"a","minimum"),o=A(n,"b","minimum");return t=vt(r,o),r=t[0],o=t[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),$e(r.shape,o.shape),M.runKernelFunc(function(a,i){var s=a.minimum(r,o);return i([r,o]),s},{a:r,b:o},function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),QP=O({minimumStrict_:function(e,n){var t=A(e,"a","minimumStrict"),r=A(n,"b","minimumStrict");return nt(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),ZP=O({mod_:function(e,n){var t,r=A(e,"a","mod"),o=A(n,"b","mod");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i,s){var u=i.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],c=s[1];return{$a:function(){var l=It(u.shape,a);return l.length>0?i.sum(l).reshape(u.shape):i},$b:function(){var l=i.mul(u.div(c).floor().neg()),f=It(c.shape,a);return f.length>0?l.sum(f).reshape(c.shape):l}}})}}),eN=O({modStrict_:function(e,n){var t=A(e,"a","modStrict"),r=A(n,"b","modStrict");return nt(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),en=O({mul_:function(e,n){var t,r=A(e,"a","mul"),o=A(n,"b","mul");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i,s){var u=i.multiply(r,o);return s([r,o]),u},{a:r,b:o},function(i,s){var u=s[0],c=s[1];return{a:function(){var l=i.mul(c.toFloat()),f=It(u.shape,a);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=i.mul(u.toFloat()),f=It(c.shape,a);return f.length>0?l.sum(f).reshape(c.shape):l}}},"Mul")}}),tN=O({mulStrict_:function(e,n){var t=A(e,"a","mul"),r=A(n,"b","mul");return nt(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),Iu=O({pow_:function(e,n){var t,r=A(e,"base","pow"),o=A(n,"exp","pow");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape),i=[r,o];return M.runKernelFunc(function(s,u){var c=s.pow(r,o);return u([r,o,c]),c},{a:r,b:o},function(s,u){var c=u[0],l=u[1],f=u[2];return{a:function(){var d=l.toFloat(),h=s.mul(d.mul(c.pow(d.sub(he(1))))),p=It(c.shape,a);return p.length>0&&(h=h.sum(p)),h.reshape(c.shape)},b:function(){var d=c.greater(0),h=c.log().where(d,Ke(c)),p=s.mul(f.mul(h)),v=It(l.shape,a);return v.length>0&&(p=p.sum(v)),p.reshape(l.shape)}}},"Pow",{},i,[!0])}}),nN=O({powStrict_:function(e,n){return nt(e.shape,n.shape,"Error in powStrict: "),e.pow(n)}}),rN=O({squaredDifferenceStrict_:function(e,n){var t=A(e,"a","squaredDifferenceStrict"),r=A(n,"b","squaredDifferenceStrict");return nt(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),At=O({sub_:function(e,n){var t,r=A(e,"a","sub"),o=A(n,"b","sub");t=vt(r,o),r=t[0],o=t[1];var a=$e(r.shape,o.shape);return M.runKernelFunc(function(i){return i.subtract(r,o)},{a:r,b:o},function(i){return{a:function(){var s=i,u=It(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=It(o.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}},"Sub")}}),oN=O({subStrict_:function(e,n){var t=A(e,"a","subStrict"),r=A(n,"b","subStrict");return nt(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),R1=O({equal_:function(e,n){var t,r=A(e,"a","equal"),o=A(n,"b","equal");return t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape),M.runKernelFunc(function(a){return a.equal(r,o)},{$a:r,$b:o})}}),aN=O({equalStrict_:function(e,n){var t=A(e,"a","equalStrict"),r=A(n,"b","equalStrict");return nt(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),iN=O({greater_:function(e,n){var t,r=A(e,"a","greater"),o=A(n,"b","greater");return t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape),M.runKernelFunc(function(a){return a.greater(r,o)},{a:r,b:o},null,"Greater")}}),I1=O({greaterEqual_:function(e,n){var t,r=A(e,"a","greaterEqual"),o=A(n,"b","greaterEqual");return t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape),M.runKernelFunc(function(a,i){var s=a.greaterEqual(r,o);return i([r,o]),s},{a:r,b:o},function(a,i){var s=i[0],u=i[1];return{a:function(){return Ke(s)},b:function(){return Ke(u)}}},"GreaterEqual")}}),sN=O({greaterEqualStrict_:function(e,n){var t=A(e,"a","greaterEqualStrict"),r=A(n,"b","greaterEqualStrict");return nt(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),uN=O({greaterStrict_:function(e,n){var t=A(e,"a","greaterStrict"),r=A(n,"b","greaterStrict");return nt(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),cN=O({less_:function(e,n){var t,r=A(e,"a","less"),o=A(n,"b","less");return t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape),M.runKernelFunc(function(a){return a.less(r,o)},{a:r,b:o},null,"Less")}}),lN=O({lessEqual_:function(e,n){var t,r=A(e,"a","lessEqual"),o=A(n,"b","lessEqual");return t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape),M.runKernelFunc(function(a,i){var s=a.lessEqual(r,o);return i([r,o]),s},{a:r,b:o},null,"LessEqual")}}),fN=O({lessEqualStrict_:function(e,n){var t=A(e,"a","lessEqualStrict"),r=A(n,"b","lessEqualStrict");return nt(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),dN=O({lessStrict_:function(e,n){var t=A(e,"a","lessStrict"),r=A(n,"b","lessStrict");return nt(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),hN=O({notEqual_:function(e,n){var t,r=A(e,"a","notEqual"),o=A(n,"b","notEqual");return t=vt(r,o),r=t[0],o=t[1],$e(r.shape,o.shape),M.runKernelFunc(function(a){return a.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),pN=O({notEqualStrict_:function(e,n){var t=A(e,"a","notEqualStrict"),r=A(n,"b","notEqualStrict");return nt(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function ym(e,n){for(var t=[],r=e;r<n;++r)t.push(r);return t}function bm(e){for(var n=[],t=0;t<e.length;++t)for(var r=0;r<e[t].length;++r)n.push(e[t][r]);return n}var Wd=O({gather_:function(e,n,t){t===void 0&&(t=0);var r=A(e,"x","gather"),o=A(n,"indices","gather","int32");t=Tt(t,r.shape)[0];var a=function(i,s,u){for(var c=i.shape[u],l=[],f=1,d=1,h=0;h<u;h++)l.push(i.shape[h]),f*=i.shape[h];for(h=0;h<s.rank;h++)l.push(s.shape[h]);for(h=u+1;h<i.rank;h++)l.push(i.shape[h]),d*=i.shape[h];return{batchSize:f,sliceSize:d,dimSize:c,outputShape:l}}(r,o,t);return M.runKernelFunc(function(i,s){var u=i.gather(r,o.flatten(),t);return s([o]),u},{x:r,indices:o},function(i,s){var u=s[0];return{x:function(){var c=r.shape,l=u.size,f=c.slice(0,t),d=f.length,h=c.slice(t,c.length).slice(1),p=h.length,v=ym(0,d),m=ym(d+1,d+1+p),g=bm([f,[l],h]),y=i.reshape(g),x=u.reshape([l]),b=bm([[d],v,m]),_=y.transpose(b),w=A1(_,x,r.shape[t]),S=kd(b);return w=w.transpose(S)},indices:function(){return u}}},"Gather",{axis:t}).reshape(a.outputShape)}}),A1=O({unsortedSegmentSum_:function(e,n,t){var r=A(e,"x","unsortedSegmentSum"),o=A(n,"segmentIds","unsortedSegmentSum","int32");return D(xt(t),function(){return"numSegments must be of dtype int"}),M.runKernelFunc(function(a,i){var s=a.unsortedSegmentSum(r,o,t);return i([o]),s},{$x:r},function(a,i){var s=i[0];return{$x:function(){return function(u,c){for(var l=Vd(c,Ke(c)),f=Wd(u,l),d=I1(c,he(0,"int32")),h=f.rank-d.rank,p=0;p<h;++p)d=Mn(d,p+1);d=mc(d,Ka(f.shape,"bool"));var v=Ke(f);return jo(d,f,v)}(a,s)}}})}}),vN=function(e,n,t){return ge(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f,d,h,p,v;return ye(this,function(m){switch(m.label){case 0:for(r=A(e,"tensor","boolMask"),o=A(n,"mask","boolMask","bool"),a=t??0,i=o.rank,s=r.shape,D(i>0,function(){return"mask cannot be scalar"}),nt(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=a;c<a+i;c++)u*=s[c];return l=s.slice(0,a).concat([u],s.slice(a+i)),f=r.reshape(l),d=o.reshape([-1]),[4,E1(d)];case 1:return h=m.sent(),p=h.squeeze([1]),v=Wd(f,p,a),e!==r&&r.dispose(),n!==o&&o.dispose(),p.dispose(),f.dispose(),d.dispose(),h.dispose(),[2,v]}})})};function T1(e,n,t,r,o,a,i){a===void 0&&(a="NHWC"),D(e.length===n.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+n.rank+") must match"});var s=e,u=n,c=!1;n.rank===3&&(c=!0,u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,e[0],e[1],e[2]]),D(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),D(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),D(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var l=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];D(l===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+t.shape[2]+"."}),D(f===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+t.shape[3]+"."}),i!=null&&D(xt(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var d=Dd(a),h=Zo(s,t.shape,r,1,o,i,!1,d),p=M.runKernelFunc(function(v,m){var g=v.conv2dDerInput(u,t,h);return m([t,u]),g},{dy4D:u,filter:t},function(v,m){var g=m[0],y=m[1];return{dy4D:function(){return Un(v,g,r,o,a,1,i)},filter:function(){return Ud(v,y,g.shape,r,o,a,i)}}});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function gl(e){var n=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(e),t=n[0],r=n[1],o=n[2];return t===1&&r===1&&o===1}function D1(e,n,t,r,o){D(e.length===n.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+n.rank+") must match"});var a=e,i=n,s=!1;n.rank===4&&(s=!0,i=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var u=a[4],c=i.shape[4];D(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),D(i.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),D(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),D(u===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+t.shape[3]+"."}),D(c===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+t.shape[4]+"."});var l=Su(a,t.shape,r,1,o),f=M.runKernelFunc(function(d){return d.conv3dDerInput(i,t,l)},{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var mN=O({conv1d_:function(e,n,t,r,o,a,i){o===void 0&&(o="NWC"),a===void 0&&(a=1);var s=A(e,"x","conv1d"),u=A(n,"filter","conv1d"),c=s,l=!1;s.rank===2&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),D(c.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),D(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),i!=null&&D(xt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),D(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),D(gn(t,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+a+"'"}),D(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),h=Un(d,f,[1,t],r,"NHWC",[1,a],i);return l?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),Un=O({conv2d_:function(e,n,t,r,o,a,i){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]);var s=A(e,"x","conv2d"),u=A(n,"filter","conv2d"),c=s,l=!1;s.rank===3&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(c.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),D(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),i!=null&&D(xt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=o==="NHWC"?c.shape[3]:c.shape[1];D(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),D(gn(t,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"});var d=Dd(o),h=Zo(c.shape,u.shape,t,a,r,i,!1,d),p=[u,c],v=M.runKernelFunc(function(m,g){var y=m.conv2d(c,u,h);return g([u,c]),y},{x:c,filter:u},function(m,g){var y=g,x=y[0],b=y[1];return D(Ua(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return F1(b.shape,m,x,t,r,o)},filter:function(){return Ud(b,m,x.shape,t,r,o)}}},"Conv2D",h,p);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),gN=O({conv3d_:function(e,n,t,r,o,a){o===void 0&&(o="NDHWC"),a===void 0&&(a=[1,1,1]);var i=A(e,"x","conv3d"),s=A(n,"filter","conv3d"),u=i,c=!1;i.rank===4&&(c=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),D(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),D(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),D(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),D(function(d,h){return gl(d)||gl(h)}(t,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"}),D(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var l=Su(u.shape,s.shape,t,a,r),f=M.runKernelFunc(function(d,h){var p=d.conv3d(u,s,l);return h([u,s]),p},{x:u,$filter:s},function(d,h){D(gl(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var p=h[0],v=h[1];return{x:function(){return D1(p.shape,d,v,t,r)},$filter:function(){return function(m,g,y,x,b){var _=m;m.rank===4&&(_=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]));var w=g;w.rank===4&&(w=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),D(_.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_.shape+"."}),D(w.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+w.shape+"."}),D(y.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+y+"."}),D(_.shape[4]===y[3],function(){return"Error in conv3dDerFilter: depth of input "+_.shape[4]+") must match input depth in filter ("+y[3]+"."}),D(w.shape[4]===y[4],function(){return"Error in conv3dDerFilter: depth of dy ("+w.shape[4]+") must match output depth for filter ("+y[4]+")."});var S=Su(_.shape,y,x,1,b);return M.runKernelFunc(function(E){return E.conv3dDerFilter(_,w,S)},{x5D:_,dy5D:w})}(p,d,v.shape,t,r)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ud=O({conv2dDerFilter_:function(e,n,t,r,o,a,i){a===void 0&&(a="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=n;u.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),D(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),D(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),D(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var c=a==="NHWC"?s.shape[3]:s.shape[1],l=a==="NHWC"?u.shape[3]:u.shape[1];D(c===t[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+t[2]+"."}),D(l===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+t[3]+")."}),i!=null&&D(xt(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var f=Dd(a),d=Zo(s.shape,t,r,1,o,i,!1,f);return M.runKernelFunc(function(h){return h.conv2dDerFilter(s,u,d)},{x4D:s,dy4D:u})}}),F1=O({conv2dDerInput_:T1}),gc=O({depthwiseConv2d_:function(e,n,t,r,o,a,i){a===void 0&&(a=[1,1]);var s=A(e,"x","depthwiseConv2d"),u=A(n,"filter","depthwiseConv2d"),c=s,l=!1;s.rank===3&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(c.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),D(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),D(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),D(gn(t,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+a+"'"}),i!=null&&D(xt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=Zo(c.shape,u.shape,t,a,r,i,!0),d=[c,u],h=M.runKernelFunc(function(p,v){var m=p.depthwiseConv2D(c,u,f);return v([c,u]),m},{x:c,filter:u},function(p,v){D(Ua(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var m=v[0],g=v[1];return{x:function(){return P1(m.shape,p,g,f)},filter:function(){return N1(m,p,g.shape,f)}}},"DepthwiseConv2dNative",f,d);return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),P1=O({depthwiseConv2dDerInput_:function(e,n,t,r){var o=n,a=!1;n.rank===3&&(a=!0,o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var i=M.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(o,t,r)},{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),N1=O({depthwiseConv2dDerFilter_:function(e,n,t,r){var o=e;e.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=n;return a.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),M.runKernelFunc(function(i){return i.depthwiseConv2DDerFilter(o,a,r)},{x4D:o,dy4D:a})}}),zd=O({separableConv2d_:function(e,n,t,r,o,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var s=A(e,"x","separableConv2d"),u=A(n,"depthwiseFilter","separableConv2d"),c=A(t,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(s.rank===3&&(f=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(l.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),D(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),D(c.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),D(c.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),D(c.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var d=u.shape[2],h=u.shape[3];D(c.shape[2]===d*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+c.shape[2]+"."});var p=gc(l,u,r,o,i,a),v=Un(p,c,1,"valid",i);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),yN=O({conv2dTranspose_:function(e,n,t,r,o,a){return T1(t,A(e,"x","conv2dTranspose"),A(n,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),bN=O({conv3dTranspose_:function(e,n,t,r,o){return D1(t,A(e,"x","conv3dTranspose"),A(n,"filter","conv3dTranspose"),r,o)}}),yc=O({matMul_:function(e,n,t,r){var o;t===void 0&&(t=!1),r===void 0&&(r=!1);var a=A(e,"a","matMul"),i=A(n,"b","matMul");o=vt(a,i),a=o[0],i=o[1];var s=t?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=t?a.shape[a.rank-1]:a.shape[a.rank-2],l=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=a.shape.slice(0,-2),d=i.shape.slice(0,-2),h=we(f),p=we(d);D(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),D(Nt(f,d),function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),D(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var v=a.shape.slice(0,-2).concat([c,l]),m=t?a.as3D(h,s,c):a.as3D(h,c,s),g=r?i.as3D(p,l,u):i.as3D(p,u,l),y={transposeA:t,transposeB:r};return M.runKernelFunc(function(x,b){var _=x.batchMatMul(m,g,t,r);return b([m,g]),_},{a:m,b:g},function(x,b){var _=b,w=_[0],S=_[1];return t||r?!t&&r?{a:function(){return x.matMul(S,!1,!1)},b:function(){return x.matMul(w,!0,!1)}}:t&&!r?{a:function(){return S.matMul(x,!1,!0)},b:function(){return w.matMul(x,!1,!1)}}:{a:function(){return S.matMul(x,!0,!0)},b:function(){return x.matMul(w,!0,!0)}}:{a:function(){return x.matMul(S,!1,!0)},b:function(){return w.matMul(x,!0,!1)}}},"BatchMatMul",y).reshape(v)}}),xN=O({dot_:function(e,n){var t=A(e,"t1","dot"),r=A(n,"t2","dot");D(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var o=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];return D(o===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),wN=O({outerProduct_:function(e,n){var t=A(e,"v1","outerProduct"),r=A(n,"v2","outerProduct");return D(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),os=O({reverse_:function(e,n){var t=A(e,"x","reverse");if(t.rank===0)return t.clone();var r=Tt(n,t.shape);return M.runKernelFunc(function(o){return o.reverse(t,r)},{$x:t},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(t)}}),_N=O({reverse1d_:function(e){var n=A(e,"x","reverse");return D(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),os(n,0)}}),CN=O({reverse2d_:function(e,n){var t=A(e,"x","reverse");return D(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),os(t,n)}}),EN=O({reverse3d_:function(e,n){var t=A(e,"x","reverse");return D(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),os(t,n)}}),SN=O({reverse4d_:function(e,n){var t=A(e,"x","reverse");return D(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),os(t,n)}});function O1(e,n,t,r,o,a){var i=A(e,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),D(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),D(gn(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),a!=null&&D(xt(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=Bi(s.shape,n,t,r,o,a);if(c.filterWidth===1&&c.filterHeight===1&&Nt(c.inShape,c.outShape))return i.clone();var l=[s],f=M.runKernelFunc(function(d,h){var p=d.maxPool(s,c);return h([s,p]),p},{x:s},function(d,h){var p=h[0],v=h[1];return{x:function(){return function(m,g,y,x,b,_,w,S){var E=A(m,"dy","maxPoolBackprop"),C=A(g,"input","maxPoolBackprop"),k=A(y,"output","maxPoolBackprop");D(C.rank===E.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+E.rank+")"}),D(gn(b,_),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+_+"'"}),D(E.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+E.rank+"."}),D(C.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+C.rank+"."});var I=Bi(C.shape,x,b,_,w,S);return M.runKernelFunc(function(R){return R.maxPoolBackprop(E,C,k,I)},{$dy:E,$input:C})}(d,p,v,n,t,r,o)}}},"MaxPool",c,l);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function M1(e,n,t,r,o,a){var i=A(e,"x","avgPool","float32");D(gn(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),D(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&D(xt(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=Bi(s.shape,n,t,r,o,a);if(c.filterWidth===1&&c.filterHeight===1&&Nt(c.inShape,c.outShape))return i.clone();var l=M.runKernelFunc(function(f){return f.avgPool(s,c)},{x:s},function(f){return{x:function(){return function(d,h,p,v,m,g){var y=A(d,"dy","avgPoolBackprop"),x=A(h,"input","avgPoolBackprop");D(x.rank===y.rank,function(){return"Rank of input ("+x.rank+") does not match rank of dy ("+y.rank+")"}),D(gn(v,m),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+m+"'"});var b=x,_=y,w=!1;x.rank===3&&(w=!0,b=x.as4D(1,x.shape[0],x.shape[1],x.shape[2]),_=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),D(_.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_.rank+"."}),D(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var S=Bi(b.shape,p,v,m,g),E=M.runKernelFunc(function(C){return C.avgPoolBackprop(_,b,S)},{dy4D:_,input4D:b});return w?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}(f,s,n,t,r,o)}}},"AvgPool",c);return l=l.cast(i.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var Dt=O({maxPool_:function(e,n,t,r,o){return O1(e,n,t,1,r,o)}}),as=O({avgPool_:function(e,n,t,r,o){return M1(e,n,t,1,r,o)}}),kN=O({pool_:function(e,n,t,r,o,a){o==null&&(o=[1,1]),a==null&&(a=1),r===0&&(r="valid");var i=A(e,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),D(gn(a,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"});var c,l=Bi(s.shape,n,a,o,r),f=[l.dilationHeight,l.dilationWidth];c=r==="same"?function(b,_){var w=b.map(function(C,k){return C+(C-1)*(_[k]-1)}).map(function(C){return C-1}),S=w.map(function(C){return Math.floor(C/2)}),E=w.map(function(C,k){return C-S[k]});return w.map(function(C,k){return[S[k],E[k]]})}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var d=f[0]===1&&f[1]===1,h=function(b,_,w){var S=w.map(function(N){return N[0]}),E=w.map(function(N){return N[1]}),C=b.concat(S,E),k=_.map(function(N,B){return(N-C[B]%N)%N}),I=E.map(function(N,B){return N+k[B]}),R=_.map(function(N,B){return[S[B],I[B]]}),T=_.map(function(N,B){return[0,k[B]]});return[R,T]}([l.inHeight,l.inWidth],f,c),p=h[0],v=h[1],m=d?r:"valid",g=d?s:zb(s,f,p),y=(t==="avg"?function(){return M1(g,n,a,1,m)}:function(){return O1(g,n,a,1,m)})(),x=d?y:Vb(y,f,v);return u?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),RN=O({maxPool3d_:function(e,n,t,r,o,a,i){a===void 0&&(a="NDHWC");var s=A(e,"x","maxPool3d"),u=s,c=!1;s.rank===4&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),D(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),D(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),D(gn(t,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),o!=null&&D(xt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=Eu(u.shape,n,t,i,r,o,a),f=M.runKernelFunc(function(d,h){var p=d.maxPool3d(u,l);return h([u,p]),p},{x:u},function(d,h){var p=h[0],v=h[1];return{x:function(){return function(m,g,y,x,b,_,w,S){var E=A(m,"dy","maxPool3dBackprop"),C=A(g,"input","maxPool3dBackprop"),k=A(y,"output","maxPool3dBackprop"),I=E,R=C,T=k,N=!1;C.rank===4&&(N=!0,I=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3]),R=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),T=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3])),D(I.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+I.rank+"."}),D(R.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+R.rank+"."}),D(T.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+T.rank+"."}),_==null&&(_=[1,1,1]),D(gn(b,_),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+_+"'"}),S!=null&&D(xt(w),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+S+" but got pad "+w+"."});var B=Eu(R.shape,x,b,_,w,S),H=M.runKernelFunc(function(z){return z.maxPool3dBackprop(I,R,T,B)},{dy5D:I,input5D:R});return N?H.as4D(H.shape[1],H.shape[2],H.shape[3],H.shape[4]):H}(d,p,v,n,t,i,r,o)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),IN=O({avgPool3d_:function(e,n,t,r,o,a,i){a===void 0&&(a="NDHWC");var s=A(e,"x","avgPool3d","float32"),u=s,c=!1;s.rank===4&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),D(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),D(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),D(gn(t,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),o!=null&&D(xt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=Eu(u.shape,n,t,i,r,o,a),f=M.runKernelFunc(function(d){return d.avgPool3d(u,l)},{x:u},function(d){return{x:function(){return function(h,p,v,m,g,y,x){var b=A(h,"dy","avgPool3dBackprop"),_=A(p,"input","avgPool3dBackprop"),w=b,S=_,E=!1;_.rank===4&&(E=!0,w=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),S=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),D(w.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+w.rank+"."}),D(S.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+S.rank+"."}),g==null&&(g=[1,1,1]),D(gn(m,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"}),x!=null&&D(xt(y),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+x+" but got pad "+y+"."});var C=Eu(S.shape,v,m,g,y,x),k=M.runKernelFunc(function(I){return I.avgPool3dBackprop(w,S,C)},{dy5D:w,input5D:S});return E?k.as4D(k.shape[1],k.shape[2],k.shape[3],k.shape[4]):k}(d,u,n,t,i,r,o)}}});return f=f.cast(u.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),xr=O({slice_:function(e,n,t){var r,o,a=A(e,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(a.rank-1).fill(0)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(0)):n.slice()).forEach(function(u){D(u!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=t==null?new Array(a.rank).fill(-1):typeof t=="number"?[t].concat(new Array(a.rank-1).fill(-1)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(-1)):t).map(function(u,c){return u>=0?u:(D(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+c+"."}),a.shape[c]-r[c])}),nD(a,r,o);var i=a.shape,s={begin:r,size:o};return M.runKernelFunc(function(u){return u.slice(a,r,o)},{x:a},function(u){for(var c=[],l=0;l<u.rank;l++)c.push([r[l],i[l]-r[l]-o[l]]);return{x:function(){return u.pad(c)}}},"Slice",s)}}),AN=O({slice1d_:function(e,n,t){var r=A(e,"x","slice1d");return D(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),xr(r,[n],[t])}}),TN=O({slice2d_:function(e,n,t){var r=A(e,"x","slice2d");return D(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),xr(r,n,t)}}),B1=O({slice3d_:function(e,n,t){var r=A(e,"x","slice3d");return D(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),xr(r,n,t)}}),DN=O({slice4d_:function(e,n,t){var r=A(e,"x","slice4d");return D(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),xr(r,n,t)}});function L1(e,n,t,r,o){return n.rank<t.rank&&(n=n.reshape(mn(n.shape,r))),e.rank<t.rank&&(e=e.reshape(mn(e.shape,r))),{x:function(){var a=e.mul(t.equal(n).cast(e.dtype));return o==null?a:a.transpose(o)}}}var FN=O({all_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","all","bool"),o=Tt(n,r.shape),a=o,i=Rr(a,r.rank);i!=null&&(r=r.transpose(i),a=Ir(a.length,r.rank));var s=M.runKernelFunc(function(c){return c.all(r,a)},{$x:r});if(t){var u=mn(s.shape,o);return s.reshape(u)}return s}}),PN=O({any_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","any","bool"),o=Tt(n,r.shape),a=o,i=Rr(a,r.rank);i!=null&&(r=r.transpose(i),a=Ir(a.length,r.rank));var s=M.runKernelFunc(function(c){return c.any(r,a)},{$x:r});if(t){var u=mn(s.shape,o);return s.reshape(u)}return s}}),NN=O({argMax_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","argMax");n==null&&(n=0);var r=Tt(n,t.shape),o=Rr(r,t.rank);o!=null&&(t=t.transpose(o),r=Ir(r.length,t.rank));var a={axis:r[0]},i=[t];return M.runKernelFunc(function(s,u){var c=s.argMax(t,r[0]);return u([t]),c},{x:t},function(s,u){var c=u[0];return{x:function(){return Ke(c)}}},"ArgMax",a,i)}}),ON=O({argMin_:function(e,n){n===void 0&&(n=0);var t=A(e,"x","argMin");n==null&&(n=0);var r=Tt(n,t.shape),o=Rr(r,t.rank);return o!=null&&(t=t.transpose(o),r=Ir(r.length,t.rank)),M.runKernelFunc(function(a,i){var s=a.argMin(t,r[0]);return i([t]),s},{$x:t},function(a,i){var s=i[0];return{$x:function(){return Ke(s)}}})}}),MN=O({logSumExp_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","logSumExp"),o=Tt(n,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(t){var u=mn(s.shape,o);return s.reshape(u)}return s}}),bc=O({max_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","max"),o=r,a=Tt(n,r.shape),i=a,s=Rr(i,r.rank);s!=null&&(r=r.transpose(s),i=Ir(i.length,r.rank));var u=[r],c=M.runKernelFunc(function(f,d){var h=f.max(r,i);return d([o,h]),h},{x:r},function(f,d){return L1(f,d[1],d[0],a,s)},"Max",{axes:i},u,[!0]);if(t){var l=mn(c.shape,a);c=c.reshape(l)}return c}}),BN=O({mean_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","mean"),o=Tt(n,r.shape),a=we(qt(r.shape,o)[1]);return pc(function(i){var s=he(a);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(n,t),gradFunc:function(u){var c=i.shape.slice();return o.forEach(function(l){c[l]=1}),u.reshape(c).mul(Ka(i.shape,"float32")).div(a)}}})(r)}}),LN=O({min_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","min"),o=r,a=Tt(n,r.shape),i=a,s=Rr(i,r.rank);s!=null&&(r=r.transpose(s),i=Ir(i.length,r.rank));var u=[r],c=M.runKernelFunc(function(f,d){var h=f.min(r,i);return d([o,h]),h},{x:r},function(f,d){return L1(f,d[1],d[0],a,s)},"Min",{axes:i},u,[!0]);if(t){var l=mn(c.shape,a);c=c.reshape(l)}return c}}),VN=O({moments_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=Tt(n,(e=A(e,"x","moments")).shape),o=e.mean(r,t),a=o.shape;t||(a=mn(o.shape,r));var i=e.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,t)}}}),V1=O({sum_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=Tt(n,r.shape);return pc(function(a){var i=Rr(o,a.rank),s=o,u=a;i!=null&&(u=a.transpose(i),s=Ir(s.length,a.rank));var c=function(h){var p=a.shape.slice();return o.forEach(function(v){p[v]=1}),h.reshape(p).mul(Ka(a.shape,"float32"))},l={axes:s},f=M.runKernelFunc(function(h){return h.sum(u,s)},{x:u},function(h){return{x:function(){return c(h)}}},"Sum",l);if(t){var d=mn(f.shape,o);f=f.reshape(d)}return{value:f,gradFunc:c}})(r)}}),WN=O({prod_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=A(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=Tt(n,r.shape),a=Rr(o,r.rank),i=o,s=r;a!=null&&(s=r.transpose(a),i=Ir(i.length,r.rank));var u=M.runKernelFunc(function(l){return l.prod(s,i)},{permutedX:s});if(t){var c=mn(u.shape,o);u=u.reshape(c)}return u}}),W1=O({elu_:function(e){var n=A(e,"x","elu");return M.runKernelFunc(function(t,r){var o=t.elu(n);return r([o]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){return M.runKernelFunc(function(a){return a.eluDer(t,o)},{dy:t,y:o})}}})}}),UN=O({leakyRelu_:function(e,n){n===void 0&&(n=.2);var t=A(e,"x","leakyRelu");return Vd(he(n).mul(t),t)}}),U1=O({prelu_:function(e,n){var t=A(e,"x","prelu"),r=A(n,"alpha","prelu");return M.runKernelFunc(function(o,a){var i=o.prelu(t,r);return a([t,r]),i},{x:t,alpha:r},function(o,a){var i=a[0],s=a[1],u=i.greater(0);return{x:function(){return jo(u,o,o.mul(s))},alpha:function(){var c=jo(u,Ke(o),o.mul(i)),l=It(s.shape,o.shape);return l.length>0&&(c=c.sum(l)),c.reshape(s.shape)}}},"Prelu")}}),ht=O({relu_:function(e){var n=A(e,"x","relu");return n.dtype==="bool"?n.toInt():M.runKernelFunc(function(t,r){var o=t.relu(n);return r([n]),o},{x:n},function(t,r){var o=r[0];return{x:function(){return t.mulStrict(o.step().toFloat())}}},"Relu")}}),z1=O({relu6_:function(e){var n=A(e,"x","relu6");return n.dtype==="bool"?n.toInt():M.runKernelFunc(function(t,r){var o=t.relu6(n);return r([n]),o},{x:n},function(t,r){var o=r[0],a=o.lessEqual(6).mul(o.step());return{x:function(){return t.mulStrict(a.toFloat())}}},"Relu6")}}),zN=O({selu_:function(e){var n=A(e,"x","selu");return M.runKernelFunc(function(t,r){var o=t.selu(n);return r([n]),o},{$x:n},function(t,r){var o=r[0];return{$x:function(){var a=o.greater(he(0)),i=he(Md),s=he(Bd),u=t.mul(s),c=t.mul(i).mul(o.toFloat().exp());return jo(a,u,c)}}})}}),ho=O({transpose_:function(e,n){var t=A(e,"x","transpose");if(n==null&&(n=t.shape.map(function(o,a){return a}).reverse()),D(t.rank===n.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+n+"."}),n.forEach(function(o){D(o>=0&&o<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+n})}),t.rank<=1)return t.clone();var r={perm:n};return M.runKernelFunc(function(o){return o.transpose(t,n)},{x:t},function(o){var a=kd(n);return{x:function(){return o.transpose(a)}}},"Transpose",r)}}),HN=O({localResponseNormalization_:function(e,n,t,r,o){n===void 0&&(n=5),t===void 0&&(t=1),r===void 0&&(r=1),o===void 0&&(o=.5);var a=A(e,"x","localResponseNormalization");D(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),D(xt(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var i=a,s=!1;a.rank===3&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=M.runKernelFunc(function(c,l){var f=c.localResponseNormalization4D(i,n,t,r,o);return l([i,f]),f},{x4D:i},function(c,l){var f=l[0],d=l[1];return{x4D:function(){return M.runKernelFunc(function(h){return h.LRNGrad(c,f,d,n,t,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),H1=O({norm_:function(e,n,t,r){n===void 0&&(n="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var o=function s(u,c,l){if(l===void 0&&(l=null),u.rank===0)return u.abs();if(u.rank!==1&&l===null)return s(u.reshape([-1]),c,l);if(u.rank===1||typeof l=="number"||Array.isArray(l)&&l.length===1){if(c===1)return u.abs().sum(l);if(c===1/0)return u.abs().max(l);if(c===-1/0)return u.abs().min(l);if(c==="euclidean"||c===2)return u.abs().pow(he(2,"int32")).sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(l)&&l.length===2){if(c===1)return u.abs().sum(l[0]).max(l[1]-1);if(c===1/0)return u.abs().sum(l[1]).max(l[0]);if(c===-1/0)return u.abs().sum(l[1]).min(l[0]);if(c==="fro"||c==="euclidean")return u.square().sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+l)}(e=A(e,"x","norm"),n,t),a=o.shape;if(r){var i=Tt(t,e.shape);a=mn(o.shape,i)}return o.reshape(a)}}),$N=O({basicLSTMCell_:function(e,n,t,r,o,a){var i=A(e,"forgetBias","basicLSTMCell"),s=A(n,"lstmKernel","basicLSTMCell"),u=A(t,"lstmBias","basicLSTMCell"),c=A(r,"data","basicLSTMCell"),l=A(o,"c","basicLSTMCell"),f=A(a,"h","basicLSTMCell"),d=c.concat(f,1).matMul(s).add(u),h=d.shape[0],p=d.shape[1]/4,v=[h,p],m=d.slice([0,0],v),g=d.slice([0,p],v),y=d.slice([0,2*p],v),x=d.slice([0,3*p],v),b=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(i.add(y).sigmoid())),_=b.tanh().mulStrict(x.sigmoid());return[b,_]}}),jN=O({multiRNNCell_:function(e,n,t,r){for(var o=A(n,"data","multiRNNCell"),a=yu(t,"c","multiRNNCell"),i=yu(r,"h","multiRNNCell"),s=o,u=[],c=0;c<e.length;c++){var l=e[c](s,a[c],i[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var f=[],d=[];for(c=0;c<u.length;c+=2)f.push(u[c]),d.push(u[c+1]);return[f,d]}}),GN=O({movingAverage_:function(e,n,t,r,o){o===void 0&&(o=!0);var a=A(e,"v","movingAverage"),i=A(n,"x","movingAverage"),s=A(t,"decay","movingAverage");HA(a,i),D(Nt(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=he(1),c=u.sub(s),l=i.sub(a).mul(c);if(o){D(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=A(r,"step","movingAverage");l=l.div(u.sub(Iu(s,f)))}return a.add(l)}}),qN=O({stridedSlice_:function(e,n,t,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(n.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var c=A(e,"x","stridedSlice"),l=Qv(s),f=c.shape.slice();l.forEach(function(m){n[m]=0,t[m]=1,f.splice(m,0,1)}),c=c.reshape(f);for(var d=0;d<c.rank;d++)n[d]=rD(o,n,r,c.shape,d),t[d]=oD(a,t,r,c.shape,d),r[d]=r[d]||1;var h=Qv(u);h.forEach(function(m){t[m]=n[m]+1,r[m]=1});var p=Td(n,t,r),v=p.filter(function(m,g){return h.indexOf(g)===-1});return r.every(function(m){return m===1})?xr(c,n,p).reshape(v):M.runKernelFunc(function(m){return m.stridedSlice(c,n,t,r)},{$x:c}).reshape(v)}}),KN=O({topk_:function(e,n,t){n===void 0&&(n=1),t===void 0&&(t=!0);var r=A(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(n>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+n);var a=M.runKernelFunc(function(i){return i.topk(r,n,t)},{$x:r});return{values:a[0],indices:a[1]}}}),XN=O({scatterND_:function(e,n,t){var r=A(e,"indices","scatterND","int32"),o=A(n,"updates","scatterND");return tD(o,r,t),M.runKernelFunc(function(a){return a.scatterND(r,o,t)},{indices:r,updates:o},null,"ScatterNd",{shape:t})}}),Hd=O({fft_:function(e){D(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var n=e.shape[e.shape.length-1],t=e.size/n,r=e.as2D(t,n);return M.runKernelFunc(function(o){return o.fft(r)},{input:e}).reshape(e.shape)}}),Au=O({ifft_:function(e){D(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var n=e.shape[e.shape.length-1],t=e.size/n,r=e.as2D(t,n);return M.runKernelFunc(function(o){return o.ifft(r)},{input:e}).reshape(e.shape)}}),$d=O({rfft_:function(e,n){D(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var t,r=e.shape[e.shape.length-1],o=e.size/r;if(n!=null&&n<r){var a=e.shape.map(function(g){return 0}),i=e.shape.map(function(g){return g});i[e.shape.length-1]=n,t=e.slice(a,i),r=n}else if(n!=null&&n>r){var s=e.shape.map(function(g){return g});s[e.shape.length-1]=n-r,t=e.concat(ct(s),e.shape.length-1),r=n}else t=e;var u=t.zerosLike(),c=Wt(t,u).as2D(o,r),l=Hd(c),f=Math.floor(r/2)+1,d=Bn(l),h=fr(l),p=d.split([f,r-f],d.shape.length-1),v=h.split([f,r-f],h.shape.length-1),m=t.shape.slice();return m[t.shape.length-1]=f,Wt(p[0],v[0]).reshape(m)}}),$1=O({irfft_:function(e){var n=e.shape[e.shape.length-1],t=e.size/n;if(n<=2){var r=e.as2D(t,n),o=Au(r);return Bn(o)}var a=[t,2*(n-1)],i=Bn(e).as2D(t,n),s=fr(e).as2D(t,n),u=i.slice([0,1],[t,n-2]).reverse(1),c=s.slice([0,1],[t,n-2]).reverse(1).mul(he(-1)),l=i.concat(u,1),f=s.concat(c,1);return r=Wt(l,f).as2D(a[0],a[1]),o=Au(r),Bn(o)}}),YN=Object.freeze({fft:Hd,ifft:Au,rfft:$d,irfft:$1}),JN=O({sparseToDense_:function(e,n,t,r){r===void 0&&(r=0);var o=A(e,"sparseIndices","sparseToDense","int32"),a=A(n,"sparseValues","sparseToDense"),i=A(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,c,l){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,d=s.rank>1?s.shape[1]:1;if(c.length!==d)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+d+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==l.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,t,i),M.runKernelFunc(function(s){return s.sparseToDense(o,a,t,i)},{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),QN=O({gatherND_:function(e,n){var t=A(n,"indices","gatherND","int32"),r=A(e,"x","gatherND");return M.runKernelFunc(function(o){return o.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),ZN=O({diag_:function(e){var n=A(e,"x","diag").flatten(),t=e.shape.concat(e.shape);return M.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(t)}}),eO=O({dropout_:function(e,n,t,r){var o=A(e,"x","dropout");if(D(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),D(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return e instanceof dt?o.clone():o;var a=function(u,c){if(c==null)return u.shape.slice();if(Nt(u.shape,c))return c;if(u.shape.length===c.length){for(var l=[],f=0;f<u.shape.length;f++)c[f]==null&&u.shape[f]!=null?l.push(u.shape[f]):l.push(c[f]);return l}return c}(o,t),i=1-n,s=Ub(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function j1(e,n,t){for(var r=1-e%2,o=new Float32Array(e),a=0;a<e;++a){var i=2*Math.PI*a/(e+r-1);o[a]=n-t*Math.cos(i)}return _t(o,"float32")}var jd=O({hannWindow_:function(e){return j1(e,.5,.5)}}),G1=O({hammingWindow_:function(e){return j1(e,.54,.46)}}),Gd=O({frame_:function(e,n,t,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var a=0,i=[];a+n<=e.size;)i.push(xr(e,a,n)),a+=t;if(r)for(;a<e.size;){var s=a+n-e.size,u=St([xr(e,a,n-s),br([s],o)]);i.push(u),a+=t}return i.length===0?uo([],[0,n]):St(i).as2D(i.length,n)}}),q1=O({stft_:function(e,n,t,r,o){var a;o===void 0&&(o=jd),r==null&&(a=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=Gd(e,n,t),s=en(i,o(n)),u=[],c=0;c<i.shape[0];c++)u.push($d(s.slice([c,0],[1,n]),r));return St(u)}}),tO=Object.freeze({hannWindow:jd,hammingWindow:G1,frame:Gd,stft:q1}),Zt,nO=function(e,n,t){return t===void 0&&(t=1),ge(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f,d,h,p,v,m;return ye(this,function(g){switch(g.label){case 0:return r=A(e,"predictions","inTopK"),o=A(n,"targets","inTopK"),D(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),D(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),nt(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],D(t>0&&t<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+t}),[4,r.data()];case 1:return i=g.sent(),[4,o.data()];case 2:for(s=g.sent(),u=[i.length/a,a],l=u[1],f=Ni("bool",c=u[0]),d=0;d<c;d++){for(h=d*l,p=i.subarray(h,h+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});for(v.sort(function(y,x){return x.value-y.value}),f[d]=0,m=0;m<t;m++)if(v[m].index===s[d]){f[d]=1;break}}return e!==r&&r.dispose(),n!==o&&o.dispose(),[2,zt(f,o.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Zt||(Zt={}));var rO=O({absoluteDifference_:function(e,n,t,r){r===void 0&&(r=Zt.SUM_BY_NONZERO_WEIGHTS);var o=A(e,"labels","absoluteDifference"),a=A(n,"predictions","absoluteDifference"),i=null;t!=null&&(i=A(t,"weights","absoluteDifference")),nt(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return jr(s,i,r)}}),jr=O({computeWeightedLoss_:function(e,n,t){t===void 0&&(t=Zt.SUM_BY_NONZERO_WEIGHTS);var r=A(e,"losses","computeWeightedLoss"),o=null;n!=null&&(o=A(n,"weights","computeWeightedLoss"));var a=o==null?r:r.mul(o);if(t===Zt.NONE)return a;if(t===Zt.SUM)return a.sum();if(t===Zt.MEAN){if(o==null)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(he(i)):s}if(t===Zt.SUM_BY_NONZERO_WEIGHTS){if(o==null)return a.sum().div(he(r.size));var u=o.mul(Ka(r.shape)).notEqual(he(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+t)}}),oO=O({cosineDistance_:function(e,n,t,r,o){o===void 0&&(o=Zt.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"labels","cosineDistance"),i=A(n,"predictions","cosineDistance"),s=null;r!=null&&(s=A(r,"weights","cosineDistance")),nt(a.shape,i.shape,"Error in cosineDistance: ");var u=he(1).sub(a.mul(i).sum(t,!0));return jr(u,s,o)}}),aO=O({hingeLoss_:function(e,n,t,r){r===void 0&&(r=Zt.SUM_BY_NONZERO_WEIGHTS);var o=A(e,"labels","hingeLoss"),a=A(n,"predictions","hingeLoss"),i=null;t!=null&&(i=A(t,"weights","hingeLoss")),nt(o.shape,a.shape,"Error in hingeLoss: ");var s=he(1);o=he(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return jr(u,i,r)}}),iO=O({huberLoss_:function(e,n,t,r,o){r===void 0&&(r=1),o===void 0&&(o=Zt.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"labels","huberLoss"),i=A(n,"predictions","huberLoss"),s=null;t!=null&&(s=A(t,"weights","huberLoss")),nt(a.shape,i.shape,"Error in huberLoss: ");var u=he(r),c=i.sub(a).abs(),l=k1(c,u),f=c.sub(l),d=he(.5).mul(l.square()).add(u.mul(f));return jr(d,s,o)}}),sO=O({logLoss_:function(e,n,t,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=Zt.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"labels","logLoss"),i=A(n,"predictions","logLoss"),s=null;t!=null&&(s=A(t,"weights","logLoss")),nt(a.shape,i.shape,"Error in logLoss: ");var u=he(1),c=he(r),l=a.mul(i.add(c).log()).neg().sub(u.sub(a).mul(u.sub(i).add(c).log()));return jr(l,s,o)}}),uO=O({meanSquaredError_:function(e,n,t,r){r===void 0&&(r=Zt.SUM_BY_NONZERO_WEIGHTS);var o=A(e,"labels","meanSquaredError"),a=A(n,"predictions","meanSquaredError"),i=null;t!=null&&(i=A(t,"weights","meanSquaredError")),nt(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return jr(s,i,r)}}),cO=O({sigmoidCrossEntropy_:function(e,n,t,r,o){r===void 0&&(r=0),o===void 0&&(o=Zt.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"multiClassLabels","sigmoidCrossEntropy"),i=A(n,"logits","sigmoidCrossEntropy"),s=null;if(t!=null&&(s=A(t,"weights","sigmoidCrossEntropy")),nt(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=he(r),c=he(1),l=he(.5);a=a.mul(c.sub(u)).add(l.mul(u))}var f=function(d,h){var p=A(d,"labels","sigmoidCrossEntropyWithLogits"),v=A(h,"logits","sigmoidCrossEntropyWithLogits");nt(p.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var m=v.relu(),g=v.mul(p),y=v.abs().neg().exp().log1p();return m.sub(g).add(y)}(a,i);return jr(f,s,o)}}),lO=O({softmaxCrossEntropy_:function(e,n,t,r,o){r===void 0&&(r=0),o===void 0&&(o=Zt.SUM_BY_NONZERO_WEIGHTS);var a=A(e,"onehotLabels","softmaxCrossEntropy"),i=A(n,"logits","softmaxCrossEntropy"),s=null;if(t!=null&&(s=A(t,"weights","softmaxCrossEntropy")),nt(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=he(r),c=he(1),l=he(a.shape[1]);a=a.mul(c.sub(u)).add(u.div(l))}var f=function(d,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return pc(function(v,m,g){var y=m.logSumExp([p],!0),x=m.toFloat().sub(y);return g([v,x]),{value:x.mul(v).neg().sum([p]),gradFunc:function(b,_){var w=_[0],S=_[1],E=mn(b.shape,[p]);return[b.reshape(E).mul(w.toFloat().sub(S.exp())),b.reshape(E).mul(S.exp().sub(w.toFloat()))]}}})(d,h)}(a,i);return jr(f,s,o)}}),fO=Object.freeze({get Reduction(){return Zt},absoluteDifference:rO,computeWeightedLoss:jr,cosineDistance:oO,hingeLoss:aO,huberLoss:iO,logLoss:sO,meanSquaredError:uO,sigmoidCrossEntropy:cO,softmaxCrossEntropy:lO});function xm(e,n){return n===void 0&&(n=!1),M.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var t=e.shape[0],r=e.shape[1],o=Wb(t),a=e.clone(),i=uo([[1]],[1,1]),s=i.clone(),u=t>=r?r:t,c=function(f){var d,h=a,p=s,v=o;d=M.tidy(function(){var m=a.slice([f,f],[t-f,1]),g=m.norm(),y=a.slice([f,f],[1,1]),x=uo([[-1]]).where(y.greater(0),uo([[1]])),b=y.sub(x.mul(g)),_=m.div(b);s=_.shape[0]===1?i.clone():i.concat(_.slice([1,0],[_.shape[0]-1,_.shape[1]]),0);var w=x.matMul(b).div(g).neg(),S=a.slice([f,0],[t-f,r]),E=w.mul(s);if(f===0)a=S.sub(E.matMul(s.transpose().matMul(S)));else{var C=S.sub(E.matMul(s.transpose().matMul(S)));a=a.slice([0,0],[f,r]).concat(C,0)}var k=o.slice([0,f],[t,o.shape[1]-f]);if(f===0)o=k.sub(k.matMul(s).matMul(E.transpose()));else{var I=k.sub(k.matMul(s).matMul(E.transpose()));o=o.slice([0,0],[t,f]).concat(I,1)}return[s,a,o]}),s=d[0],a=d[1],o=d[2],pn([h,p,v])},l=0;l<u;++l)c(l);return!n&&t>r&&(o=o.slice([0,0],[t,r]),a=a.slice([0,0],[r,r])),[o,a]})}var dO=O({bandPart_:function(e,n,t){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=A(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(n<=i))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+i+").");if(!(t<=s))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+s+").");n<0&&(n=i),t<0&&(t=s);var u=bu(0,i,1,"int32").reshape([-1,1]),c=bu(0,s,1,"int32"),l=At(u,c),f=mc(l.lessEqual(he(+n,"int32")),l.greaterEqual(he(-t,"int32"))),d=ct([i,s],r.dtype);return An(kt(r.reshape([-1,i,s])).map(function(h){return jo(f,h,d)})).reshape(o)}}),hO=O({gramSchmidt_:function(e){var n;if(Array.isArray(e)){n=!1,D(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=e[0].shape[0],r=function(u){D(e[u].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[u].shape[0]+" vs. "+t+")"})},o=1;o<e.length;++o)r(o)}else n=!0,e=Id(e,e.shape[0],0).map(function(u){return Hb(u,[0])});D(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var a=[],i=e,s=function(u){a.push(M.tidy(function(){var c=i[u];if(u>0)for(var l=0;l<u;++l){var f=V1(a[l].mulStrict(c)).mul(a[l]);c=c.sub(f)}return c.div(H1(c,"euclidean"))}))};for(o=0;o<e.length;++o)s(o);return n?An(a,0):a}}),pO=O({qr_:function(e,n){if(n===void 0&&(n=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return xm(e,n);var t=e.shape.slice(0,e.shape.length-2).reduce(function(i,s){return i*s}),r=kt(e.reshape([t,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];return r.forEach(function(i){var s=xm(i,n),u=s[0],c=s[1];o.push(u),a.push(c)}),[An(o,0).reshape(e.shape),An(a,0).reshape(e.shape)]}}),vO=Object.freeze({bandPart:dO,gramSchmidt:hO,qr:pO});function xc(e,n,t,r,o,a){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),a==null&&(a=0);var i=e.shape[0];return t=Math.min(t,i),D(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),D(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),D(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),D(n.rank===1,function(){return"scores must be a 1D tensor"}),D(n.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+n.shape[0]}),D(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}var mO=O({resizeBilinear_:function(e,n,t){t===void 0&&(t=!1);var r=A(e,"images","resizeBilinear");D(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),D(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=n[0],s=n[1],u=M.runKernelFunc(function(c,l){return l([o]),c.resizeBilinear(o,i,s,t)},{x:o},function(c,l){return{x:function(){return M.runKernelFunc(function(f){return f.resizeBilinearBackprop(c,l[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),gO=O({resizeNearestNeighbor_:function(e,n,t){t===void 0&&(t=!1);var r=A(e,"images","resizeNearestNeighbor");D(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),D(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),D(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=n[0],s=n[1],u=M.runKernelFunc(function(c,l){return l([o]),c.resizeNearestNeighbor(o,i,s,t)},{batchImages:o},function(c,l){return{batchImages:function(){return M.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(c,l[0],t)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),yO=O({nonMaxSuppression_:function(e,n,t,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var a=A(e,"boxes","nonMaxSuppression"),i=A(n,"scores","nonMaxSuppression"),s=xc(a,i,t,r,o);t=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:t,iouThreshold:r,scoreThreshold:o};return M.runKernelFunc(function(c){return c.nonMaxSuppression(a,i,t,r,o)},{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),bO=function(e,n,t,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),ge(this,void 0,void 0,function(){var a,i,s,u,c,l,f;return ye(this,function(d){switch(d.label){case 0:return a=A(e,"boxes","nonMaxSuppressionAsync"),i=A(n,"scores","nonMaxSuppressionAsync"),s=xc(a,i,t,r,o),t=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([a.data(),i.data()])];case 1:return u=d.sent(),c=u[0],l=u[1],f=Fd(c,l,t,r,o),a!==e&&a.dispose(),i!==n&&i.dispose(),[2,f]}})})},xO=O({nonMaxSuppressionWithScore_:function(e,n,t,r,o,a){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var i=A(e,"boxes","nonMaxSuppression"),s=A(n,"scores","nonMaxSuppression"),u=xc(i,s,t,r,o,a),c={maxOutputSize:t=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},l=M.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),wO=function(e,n,t,r,o,a){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),ge(this,void 0,void 0,function(){var i,s,u,c,l,f,d;return ye(this,function(h){switch(h.label){case 0:return i=A(e,"boxes","nonMaxSuppressionAsync"),s=A(n,"scores","nonMaxSuppressionAsync"),u=xc(i,s,t,r,o,a),t=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return c=h.sent(),l=c[0],f=c[1],d=Pd(l,f,t,r,o,a),i!==e&&i.dispose(),s!==n&&s.dispose(),[2,d]}})})},_O=O({cropAndResize_:function(e,n,t,r,o,a){var i=A(e,"image","cropAndResize"),s=A(n,"boxes","cropAndResize","float32"),u=A(t,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var c=s.shape[0];return D(i.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),D(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),D(u.rank===1&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),D(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),D(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),D(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),M.runKernelFunc(function(l,f){return l.cropAndResize(i,s,u,r,o,a)},{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),qd=Object.freeze({resizeBilinear:mO,resizeNearestNeighbor:gO,nonMaxSuppression:yO,nonMaxSuppressionAsync:bO,nonMaxSuppressionWithScore:xO,nonMaxSuppressionWithScoreAsync:wO,cropAndResize:_O}),Kd=function(e,n){return!(e>0)||n==="linear"},Xd=function(e,n,t){if(t==null||t==="linear")return e;if(t==="relu")return e.mul(n.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},Yd=function(e,n){var t=n,r=It(e.shape,n.shape);return r.length>0&&(t=t.sum(r)),t.reshape(e.shape)},Jd=function(e,n,t){if(n==="linear")return e;if(n==="relu")return ht(e);if(n==="elu")return W1(e);if(n==="relu6")return z1(e);if(n==="prelu")return U1(e,t);throw new Error("Unknown fused activation "+n+".")},CO=O({fusedMatMul_:function(e){var n,t=e.a,r=e.b,o=e.transposeA,a=o!==void 0&&o,i=e.transposeB,s=i!==void 0&&i,u=e.bias,c=e.activation,l=c===void 0?"linear":c,f=e.preluActivationWeights;if(Kd(M.state.gradientDepth,l)===!1){var d=yc(t,r,a,s);return u!=null&&(d=He(d,u)),Jd(d,l,f)}var h=A(t,"a","fused matMul"),p=A(r,"b","fused matMul");n=vt(h,p),h=n[0],p=n[1];var v=a?h.shape[h.rank-2]:h.shape[h.rank-1],m=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=a?h.shape[h.rank-1]:h.shape[h.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],x=h.shape.slice(0,-2),b=p.shape.slice(0,-2),_=we(x),w=we(b);D(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),D(Nt(x,b),function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),D(v===m,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var S,E,C=h.shape.slice(0,-2).concat([g,y]),k=a?h.as3D(_,v,g):h.as3D(_,g,v),I=s?p.as3D(w,y,m):p.as3D(w,m,y);u!=null&&$e(C,(S=vt(S=A(u,"bias","fused matMul"),h)[0]).shape),f!=null&&(E=A(f,"prelu weights","fused matMul"));var R={a:k,b:I};u!=null&&(R.bias=S),f!=null&&(R.preluActivationWeights=E);var T=[k,I];return M.runKernelFunc(function(N,B){var H=N.fusedBatchMatMul({a:k,b:I,transposeA:a,transposeB:s,bias:S,activation:l,preluActivationWeights:E});return B([k,I,H]),H},R,function(N,B){var H=B[0],z=B[1],W=B[2],j=Xd(N,W,l),Z={};return u!=null&&(Z={bias:function(){return Yd(S,j)}}),Object.assign(a||s?!a&&s?{a:function(){return j.matMul(z,!1,!1)},b:function(){return j.matMul(H,!0,!1)}}:a&&!s?{a:function(){return z.matMul(j,!1,!0)},b:function(){return H.matMul(j,!1,!1)}}:{a:function(){return z.matMul(j,!0,!0)},b:function(){return j.matMul(H,!0,!0)}}:{a:function(){return j.matMul(z,!1,!0)},b:function(){return H.matMul(j,!0,!1)}},Z)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:l},T,[!0]).reshape(C)}}),EO=O({fusedConv2d_:function(e){var n=e.x,t=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=a===void 0?"NHWC":a,s=e.dilations,u=s===void 0?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=f===void 0?"linear":f,h=e.preluActivationWeights;if(d=d||"linear",Kd(M.state.gradientDepth,d)===!1){var p=Un(n,t,r,o,i,u,c);return l!=null&&(p=He(p,l)),Jd(p,d,h)}var v=A(n,"x","conv2d"),m=A(t,"filter","conv2d"),g=v,y=!1;v.rank===3&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),D(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),D(m.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),c!=null&&D(xt(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."}),D(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),D(gn(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),D(i==="NHWC",function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var x,b,_=Zo(g.shape,m.shape,r,u,o,c);l!=null&&(x=vt(x=A(l,"bias","fused conv2d"),v)[0],$e(_.outShape,x.shape)),h!=null&&(b=A(h,"prelu weights","fused conv2d"));var w={x:g,filter:m};l!=null&&(w.bias=x),h!=null&&(w.preluActivationWeights=b);var S=[m,g],E=M.runKernelFunc(function(C,k){var I=C.fusedConv2d({input:g,filter:m,convInfo:_,bias:x,activation:d,preluActivationWeights:b});return k([m,g,I]),I},w,function(C,k){var I=k,R=I[0],T=I[1],N=I[2],B=Xd(C,N,d);D(Ua(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var H={};return l!=null&&(H={bias:function(){return Yd(x,B)}}),Object.assign({x:function(){return F1(T.shape,B,R,r,o)},filter:function(){return Ud(T,B,R.shape,r,o)}},H)},"FusedConv2D",{convInfo:_,activation:d},S,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),SO=O({fusedDepthwiseConv2d_:function(e){var n=e.x,t=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=a===void 0?"NHWC":a,s=e.dilations,u=s===void 0?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=f===void 0?"linear":f,h=e.preluActivationWeights;if(Kd(M.state.gradientDepth,d)===!1){var p=gc(n,t,r,o,i,u,c);return l!=null&&(p=He(p,l)),Jd(p,d,h)}var v=A(n,"x","depthwiseConv2d"),m=A(t,"filter","depthwiseConv2d"),g=v,y=!1;v.rank===3&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),D(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),D(m.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),D(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),u==null&&(u=[1,1]),D(gn(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),c!=null&&D(xt(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."});var x,b,_=Zo(g.shape,m.shape,r,u,o,c,!0);l!=null&&(x=vt(x=A(l,"bias","fused conv2d"),v)[0],$e(_.outShape,x.shape)),h!=null&&(b=A(h,"prelu weights","fused depthwiseConv2d"));var w={x:g,filter:m};l!=null&&(w.bias=x),h!=null&&(w.preluActivationWeights=b);var S=[m,g],E=M.runKernelFunc(function(C,k){var I=C.fusedDepthwiseConv2D({input:g,filter:m,convInfo:_,bias:x,activation:d,preluActivationWeights:b});return k([m,g,I]),I},w,function(C,k){D(Ua(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var I=k[0],R=k[1],T=k[2],N=Xd(C,T,d),B={};return l!=null&&(B={bias:function(){return Yd(x,N)}}),Object.assign({x:function(){return P1(R.shape,N,I,_)},filter:function(){return N1(R,N,I.shape,_)}},B)},"FusedDepthwiseConv2D",{convInfo:_,activation:d},S,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),kO=Object.freeze({matMul:CO,conv2d:EO,depthwiseConv2d:SO}),RO=Object.freeze({image:qd,linalg:vO,losses:fO,spectral:YN,fused:kO,signal:tO,square:sP,squaredDifference:m1,conv1d:mN,conv2d:Un,conv3d:gN,depthwiseConv2d:gc,separableConv2d:zd,conv2dTranspose:yN,conv3dTranspose:bN,op:O,batchNormalization2d:BP,batchNormalization3d:LP,batchNormalization4d:VP,batchNormalization:WP,batchNorm:_1,batchNorm2d:UP,batchNorm3d:zP,batchNorm4d:HP,booleanMaskAsync:vN,complex:Wt,real:Bn,imag:fr,concat:St,concat1d:kT,concat2d:RT,concat3d:IT,concat4d:AT,split:Id,matMul:yc,dot:xN,outerProduct:wN,reverse:os,reverse1d:_N,reverse2d:CN,reverse3d:EN,reverse4d:SN,maxPool:Dt,avgPool:as,pool:kN,maxPool3d:RN,avgPool3d:IN,slice:xr,slice1d:AN,slice2d:TN,slice3d:B1,slice4d:DN,abs:uP,acos:cP,acosh:lP,asin:fP,asinh:dP,atan:hP,atanh:pP,ceil:vP,clipByValue:Ld,cos:mP,cosh:gP,erf:yP,exp:Sf,expm1:bP,floor:xP,log:wP,log1p:_P,logSigmoid:CP,neg:Ru,reciprocal:EP,round:SP,rsqrt:g1,sigmoid:y1,sign:kP,isNaN:RP,isInf:IP,isFinite:AP,sin:TP,sinh:DP,softplus:FP,sqrt:PP,step:NP,tan:OP,tanh:MP,all:FN,any:PN,argMax:NN,argMin:ON,logSumExp:MN,max:bc,mean:BN,min:LN,moments:VN,sum:V1,prod:WN,equal:R1,equalStrict:aN,greater:iN,greaterEqual:I1,greaterEqualStrict:sN,greaterStrict:uN,less:cN,lessEqual:lN,lessEqualStrict:fN,lessStrict:dN,notEqual:hN,notEqualStrict:pN,add:He,addN:GP,addStrict:qP,atan2:KP,div:zn,divNoNan:XP,divStrict:YP,floorDiv:S1,maximum:Vd,maximumStrict:JP,minimum:k1,minimumStrict:QP,mod:ZP,modStrict:eN,mul:en,mulStrict:tN,pow:Iu,powStrict:nN,squaredDifferenceStrict:rN,sub:At,subStrict:oN,elu:W1,leakyRelu:UN,prelu:U1,relu:ht,relu6:z1,selu:zN,logicalAnd:mc,logicalNot:$P,logicalOr:C1,logicalXor:jP,where:jo,whereAsync:E1,buffer:Be,print:LT,batchToSpaceND:Vb,broadcastTo:VT,cast:WT,clone:UT,cumsum:zT,depthToSpace:HT,expandDims:Mn,eye:Wb,multinomial:$T,oneHot:wf,pad:Qo,pad1d:jT,pad2d:GT,pad3d:qT,pad4d:KT,rand:XT,randomNormal:YT,randomGamma:JT,randomUniform:Ub,reshape:Hn,spaceToBatchND:zb,squeeze:Hb,stack:An,tile:ka,truncatedNormal:QT,unstack:kt,setdiff1dAsync:ZT,fill:br,linspace:ST,ones:Ka,range:bu,scalar:he,tensor:zt,tensor1d:_t,tensor2d:uo,tensor3d:Rd,tensor4d:fn,tensor5d:_T,tensor6d:CT,variable:ET,zeros:ct,onesLike:Lb,zerosLike:Ke,transpose:ho,softmax:$r,logSoftmax:iD,localResponseNormalization:HN,norm:H1,gather:Wd,unsortedSegmentSum:A1,basicLSTMCell:$N,multiRNNCell:jN,movingAverage:GN,stridedSlice:qN,topk:KN,scatterND:XN,fft:Hd,ifft:Au,rfft:$d,irfft:$1,sparseToDense:JN,gatherND:QN,diag:ZN,dropout:eO,hannWindow:jd,hammingWindow:G1,frame:Gd,stft:q1,inTopKAsync:nO});function re(e,n){Array.isArray(e)||(e=[e]),e.forEach(function(t){t!=null&&D(t.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function yl(e,n,t,r){if(t==="linear")return e.linear(n);if(t==="relu")return e.relu(n);if(t==="elu")return e.elu(n);if(t==="relu6")return e.relu6(n);if(t==="prelu")return e.prelu(n,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var IO=function(e){function n(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new Yb(t,M),t}return Zn(n,e),n.prototype.write=function(t,r,o){this.firstUse&&(this.firstUse=!1,Q().get("IS_NODE")&&gu(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:t,dtype:o}),a},n.prototype.move=function(t,r,o,a){this.data.set(t,{values:r,dtype:a})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(t){return ge(this,void 0,void 0,function(){return ye(this,function(r){return[2,this.readSync(t)]})})},n.prototype.readSync=function(t){var r=this.data.get(t),o=r.dtype,a=r.complexTensors;return o==="complex64"?Ef(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(t).values},n.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),o=r;if(t.dtype==="string")try{o=r.map(function(a){return pu(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Be(t.shape,t.dtype,o)},n.prototype.makeOutput=function(t,r,o){var a=this.write(t,r,o);return M.makeTensorFromDataId(a,r,o,this)},n.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},n.prototype.time=function(t){return ge(this,void 0,void 0,function(){var r;return ye(this,function(o){return r=cr(),t(),[2,{kernelMs:cr()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(t,r){var o=this.makeOutput(null,t.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:M.keep(t.clone()),imag:M.keep(r.clone())},o},n.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},n.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},n.prototype.slice=function(t,r,o){if(re(t,"slice"),Kb(t.shape,r,o)){var a=Xb(r,t.strides),i=we(o);return zt(this.readSync(t.dataId).subarray(a,a+i),o,t.dtype)}for(var s=Be(o,t.dtype),u=this.bufferSync(t),c=0;c<s.size;++c){var l=s.indexToLoc(c).map(function(f,d){return f+r[d]});s.values[c]=u.get.apply(u,l)}return s.toTensor()},n.prototype.stridedSlice=function(t,r,o,a){re(t,"stridedSlice");var i=Td(r,o,a);if(i.some(function(h){return h===0}))return zt([],i);for(var s=Be(i,t.dtype),u=this.bufferSync(t),c=0;c<s.size;c++){for(var l=s.indexToLoc(c),f=new Array(l.length),d=0;d<f.length;d++)f[d]=l[d]*a[d]+r[d];s.set.apply(s,[u.get.apply(u,f)].concat(l))}return s.toTensor()},n.prototype.diag=function(t){for(var r=this.readSync(t.dataId),o=Be([t.size,t.size],t.dtype),a=o.values,i=0;i<r.length;i++)a[i*t.size+i]=r[i];return o.toTensor()},n.prototype.unstack=function(t,r){for(var o=t.shape[r],a=new Array(t.rank-1),i=0,s=0;s<t.rank;s++)s!==r&&(a[i++]=t.shape[s]);var u=new Array(t.rank).fill(0),c=t.shape.slice();c[r]=1;var l=new Array(o);for(s=0;s<l.length;s++)u[r]=s,l[s]=this.slice(t,u,c).reshape(a);return l},n.prototype.reverse=function(t,r){re(t,"reverse");for(var o=Be(t.shape,t.dtype),a=this.bufferSync(t),i=function(u){var c=o.indexToLoc(u),l=c.slice();r.forEach(function(f){return l[f]=t.shape[f]-1-l[f]}),o.set.apply(o,[a.get.apply(a,l)].concat(c))},s=0;s<o.size;s++)i(s);return o.toTensor()},n.prototype.concat=function(t,r){var o=this;if(t[0].dtype==="complex64"){var a=t.map(function(h){return Bn(h)}),i=t.map(function(h){return fr(h)});return Wt(this.concat(a,r),this.concat(i,r))}var s=t.map(function(h){var p=we(h.shape.slice(r));return h.as2D(-1,p)}),u=Wa(s.map(function(h){return h.shape}),1),c=Be(u,t[0].dtype).values;if(s[0].shape[0]===1){var l=0;s.forEach(function(h){c.set(o.readSync(h.dataId),l),l+=h.size})}else{var f=0;s.forEach(function(h){for(var p=o.readSync(h.dataId),v=0,m=0;m<h.shape[0];++m)for(var g=m*u[1]+f,y=0;y<h.shape[1];++y)c[g+y]=p[v++];f+=h.shape[1]})}var d=Wa(t.map(function(h){return h.shape}),r);return zt(c,d,t[0].dtype)},n.prototype.neg=function(t){return re(t,"neg"),this.multiply(he(-1),t)},n.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(o,a,i,s){return{real:o+i,imag:a+s}}):this.broadcastedBinaryOp(t,r,Ut(t.dtype,r.dtype),function(o,a){return o+a})},n.prototype.addN=function(t){var r=this;re(t,"addN");for(var o=t.map(function(l){return r.readSync(l.dataId)}),a=Be(t[0].shape,t[0].dtype),i=a.values,s=0;s<t.length;s++)for(var u=o[s],c=0;c<i.length;c++)i[c]+=u[c];return a.toTensor()},n.prototype.softmax=function(t,r){var o=Tt([r],t.shape),a=this.max(t,o),i=mn(a.shape,o),s=this.subtract(t,a.reshape(i)),u=this.exp(s),c=this.sum(u,o).reshape(i);return this.realDivide(u,c)},n.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(o,a,i,s){return{real:o-i,imag:a-s}}):this.broadcastedBinaryOp(t,r,Ut(t.dtype,r.dtype),function(o,a){return o-a})},n.prototype.pow=function(t,r){return re([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){return Math.pow(o,a)})},n.prototype.batchMatMul=function(t,r,o,a){re([t,r],"matMul");for(var i=o?t.shape[1]:t.shape[2],s=o?t.shape[2]:t.shape[1],u=a?r.shape[1]:r.shape[2],c=t.shape[0],l=this.readSync(t.dataId),f=this.readSync(r.dataId),d=o?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],h=d[0],p=d[1],v=d[2],m=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=m[0],y=m[1],x=m[2],b=s*u,_=Be([c,s,u],t.dtype),w=_.values,S=this.blockSize,E=0;E<c;E++)for(var C=0;C<s;C+=S)for(var k=0;k<u;k+=S)for(var I=0;I<i;I+=S)for(var R=Math.min(C+S,s),T=Math.min(k+S,u),N=Math.min(I+S,i),B=C;B<R;B++)for(var H=k;H<T;H++){for(var z=0,W=I;W<N;W++)z+=l[E*h+B*p+W*v]*f[W*g+H*y+E*x];w[E*b+(B*u+H)]+=z}return _.toTensor()},n.prototype.fusedBatchMatMul=function(t){var r=t.a,o=t.b,a=t.transposeA,i=t.transposeB,s=t.bias,u=t.activation,c=t.preluActivationWeights,l=this.batchMatMul(r,o,a,i);return s&&(l=this.add(l,s)),u&&(l=yl(this,l,u,c)),l},n.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(o,a,i,s){return{real:o*i-a*s,imag:o*s+a*i}}):this.broadcastedBinaryOp(t,r,Ut(t.dtype,r.dtype),function(o,a){return o*a})},n.prototype.realDivide=function(t,r){return re([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(o,a){return o/a})},n.prototype.floorDiv=function(t,r){return re([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(o,a){return Math.floor(o/a)})},n.prototype.sum=function(t,r){re(t,"sum"),yn("sum",r,t.rank);for(var o=qt(t.shape,r),a=o[0],i=o[1],s=ct(a,Ut(t.dtype,"int32")),u=we(i),c=this.readSync(s.dataId),l=this.readSync(t.dataId),f=0;f<c.length;++f){for(var d=f*u,h=0,p=0;p<u;++p)h+=l[d+p];c[f]=h}return s},n.prototype.prod=function(t,r){re(t,"sum");for(var o=qt(t.shape,r),a=o[0],i=o[1],s=ct(a,Ut(t.dtype,"int32")),u=we(i),c=this.readSync(s.dataId),l=this.readSync(t.dataId),f=0;f<c.length;++f){for(var d=f*u,h=1,p=0;p<u;++p)h*=l[d+p];c[f]=h}return s},n.prototype.unsortedSegmentSum=function(t,r,o){re(t,"unsortedSegmentSum");for(var a=[],i=t.rank-r.rank,s=0;s<i;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=he(s,"int32"),c=R1(u,r).asType("float32").mul(t).sum(0);a.push(c)}return An(a)},n.prototype.argMin=function(t,r){re(t,"argMin");var o=[r];yn("argMin",o,t.rank);for(var a=qt(t.shape,o),i=a[0],s=a[1],u=ct(i,"int32"),c=we(s),l=this.readSync(u.dataId),f=this.readSync(t.dataId),d=0;d<l.length;++d){for(var h=d*c,p=f[h],v=0,m=0;m<c;++m){var g=f[h+m];g<p&&(p=g,v=m)}l[d]=v}return u},n.prototype.argMax=function(t,r){re(t,"argMax");var o=[r];yn("argMax",o,t.rank);for(var a=qt(t.shape,o),i=a[0],s=a[1],u=ct(i,"int32"),c=we(s),l=this.readSync(u.dataId),f=this.readSync(t.dataId),d=0;d<l.length;++d){for(var h=d*c,p=f[h],v=0,m=0;m<c;++m){var g=f[h+m];g>p&&(p=g,v=m)}l[d]=v}return u},n.prototype.cumsum=function(t,r,o,a){if(re(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var i=Ut(t.dtype,"int32"),s=ct(t.shape,i),u=this.readSync(s.dataId),c=this.readSync(t.dataId),l=t.shape[t.rank-1],f=a?function(m,g){return m+l-g-1}:function(m,g){return m+g},d=0;d<c.length;d+=l)for(var h=0;h<l;h++){var p=f(d,h);if(h===0)u[p]=o?0:c[p];else{var v=f(d,h-1);u[p]=o?c[v]+u[v]:c[p]+u[v]}}return s},n.prototype.equal=function(t,r){return re([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o===a?1:0})},n.prototype.notEqual=function(t,r){return re([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o!==a?1:0})},n.prototype.less=function(t,r){return re([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o<a?1:0})},n.prototype.lessEqual=function(t,r){return re([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o<=a?1:0})},n.prototype.greater=function(t,r){return re([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o>a?1:0})},n.prototype.greaterEqual=function(t,r){return re([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o>=a?1:0})},n.prototype.logicalNot=function(t){re(t,"logicalNot");for(var r=this.readSync(t.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)o[a]=r[a]?0:1;return this.makeOutput(o,t.shape,"bool")},n.prototype.logicalAnd=function(t,r){return re([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o&&a})},n.prototype.logicalOr=function(t,r){return re([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(o,a){return o||a})},n.prototype.select=function(t,r,o){re([t,r,o],"select");for(var a=this.readSync(t.dataId),i=this.readSync(r.dataId),s=this.readSync(o.dataId),u=ct(r.shape,Ut(r.dtype,o.dtype)),c=this.readSync(u.dataId),l=0,f=t.rank===0||t.rank>1||r.rank===1?1:we(r.shape.slice(1)),d=0;d<a.length;d++)for(var h=0;h<f;h++)a[d]===1?c[l++]=i[d]:c[l++]=s[d];return u},n.prototype.where=function(t){re([t],"where");var r=this.readSync(t.dataId);return Nd(t.shape,r)},n.prototype.topk=function(t,r,o){return re(t,"topk"),o1(this.readSync(t.dataId),t.shape,t.dtype,r)},n.prototype.min=function(t,r){re(t,"min"),yn("min",r,t.rank);for(var o=qt(t.shape,r),a=o[0],i=o[1],s=ct(a,t.dtype),u=we(i),c=this.readSync(s.dataId),l=this.readSync(t.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var v=l[d+p];v<h&&(h=v)}c[f]=h}return s},n.prototype.minimum=function(t,r){return re([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){return Math.min(o,a)})},n.prototype.mod=function(t,r){return re([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){var i=o%a;return o<0&&a<0||o>=0&&a>=0?i:(i+a)%a})},n.prototype.max=function(t,r){re(t,"max"),yn("max",r,t.rank);for(var o=qt(t.shape,r),a=o[0],i=o[1],s=ct(a,t.dtype),u=we(i),c=this.readSync(s.dataId),l=this.readSync(t.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var v=l[d+p];v>h&&(h=v)}c[f]=h}return s},n.prototype.maximum=function(t,r){return re([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){return Math.max(o,a)})},n.prototype.all=function(t,r){re(t,"all"),yn("all",r,t.rank);for(var o=qt(t.shape,r),a=o[0],i=o[1],s=ct(a,t.dtype),u=we(i),c=this.readSync(s.dataId),l=this.readSync(t.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var v=l[d+p];h=h&&v}c[f]=h}return s},n.prototype.any=function(t,r){re(t,"any"),yn("any",r,t.rank);for(var o=qt(t.shape,r),a=o[0],i=o[1],s=ct(a,t.dtype),u=we(i),c=this.readSync(s.dataId),l=this.readSync(t.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var v=l[d+p];h=h||v}c[f]=h}return s},n.prototype.squaredDifference=function(t,r){return re([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){var i=o-a;return i*i})},n.prototype.ceil=function(t){re(t,"ceil");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.ceil(r[a]);return this.makeOutput(o,t.shape,"float32")},n.prototype.floor=function(t){re(t,"floor");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.floor(r[a]);return this.makeOutput(o,t.shape,"float32")},n.prototype.sign=function(t){re(t,"x");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?o[a]=-1:r[a]>0?o[a]=1:o[a]=0;return this.makeOutput(o,t.shape,"float32")},n.prototype.isNaN=function(t){re(t,"x");for(var r=this.readSync(t.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(o[a]=1);return this.makeOutput(o,t.shape,"bool")},n.prototype.isInf=function(t){re(t,"x");for(var r=this.readSync(t.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(o[a]=1);return this.makeOutput(o,t.shape,"bool")},n.prototype.isFinite=function(t){re(t,"x");for(var r=this.readSync(t.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(o[a]=1);return this.makeOutput(o,t.shape,"bool")},n.prototype.round=function(t){re(t,"round");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=Math.floor(r[a]);r[a]-i<.5?o[a]=Math.floor(r[a]):r[a]-i>.5?o[a]=Math.ceil(r[a]):o[a]=i%2==0?i:i+1}return this.makeOutput(o,t.shape,"float32")},n.prototype.exp=function(t){re(t,"exp");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.exp(r[a]);return this.makeOutput(o,t.shape,"float32")},n.prototype.expm1=function(t){re(t,"expm1");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.expm1(r[a]);return this.makeOutput(o,t.shape,"float32")},n.prototype.log=function(t){re(t,"log");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log(i)}return this.makeOutput(o,t.shape,"float32")},n.prototype.log1p=function(t){re(t,"log1p");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log1p(i)}return this.makeOutput(o,t.shape,"float32")},n.prototype.sqrt=function(t){re(t,"sqrt");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.sqrt(i)}return this.makeOutput(o,t.shape,"float32")},n.prototype.rsqrt=function(t){re(t,"rsqrt");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=1/Math.sqrt(i)}return this.makeOutput(o,t.shape,"float32")},n.prototype.reciprocal=function(t){re(t,"reciprocal");for(var r=this.readSync(t.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=1/r[a];return this.makeOutput(o,t.shape,"float32")},n.prototype.linear=function(t){return t},n.prototype.relu=function(t){re(t,"relu");for(var r=ct(t.shape,t.dtype),o=this.readSync(r.dataId),a=this.readSync(t.dataId),i=0;i<a.length;++i)o[i]=Math.max(0,a[i]);return r},n.prototype.relu6=function(t){re(t,"relu");for(var r=ct(t.shape,t.dtype),o=this.readSync(r.dataId),a=this.readSync(t.dataId),i=0;i<a.length;++i)o[i]=Math.min(Math.max(0,a[i]),6);return r},n.prototype.prelu=function(t,r){return re([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){return o<0?a*o:o})},n.prototype.elu=function(t){re(t,"elu");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,t.shape,"float32")},n.prototype.eluDer=function(t,r){re([t,r],"eluDer");for(var o=new Float32Array(r.size),a=this.readSync(r.dataId),i=this.readSync(t.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=1?i[s]:i[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},n.prototype.selu=function(t){re(t,"selu");for(var r=Md,o=Bd,a=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(a,t.shape,"float32")},n.prototype.clip=function(t,r,o){re(t,"clip");for(var a=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>o?o:u<r?r:u}return this.makeOutput(a,t.shape,"float32")},n.prototype.abs=function(t){for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.abs(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<t.size;++a){var i=o[2*a],s=o[2*a+1];r[a]=Math.hypot(i,s)}return this.makeOutput(r,t.shape,"float32")},n.prototype.int=function(t){re(t,"int");for(var r=new Int32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=o[a];return this.makeOutput(r,t.shape,"int32")},n.prototype.sigmoid=function(t){re(t,"sigmoid");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=1/(1+Math.exp(-o[a]));return this.makeOutput(r,t.shape,"float32")},n.prototype.softplus=function(t){re(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var s=a[i]>-r,u=a[i]<r,c=Math.exp(a[i]),l=void 0;l=u?c:s?a[i]:Math.log(1+c),o[i]=l}return this.makeOutput(o,t.shape,"float32")},n.prototype.sin=function(t){re(t,"sin");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.sin(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.cos=function(t){re(t,"cos");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.cos(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.tan=function(t){re(t,"tan");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.tan(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.asin=function(t){re(t,"asin");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.asin(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.acos=function(t){re(t,"acos");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.acos(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atan=function(t){re(t,"atan");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.atan(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atan2=function(t,r){return re([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(o,a){return Math.atan2(o,a)})},n.prototype.sinh=function(t){re(t,"sinh");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.sinh(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.cosh=function(t){re(t,"cosh");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.cosh(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.tanh=function(t){re(t,"tanh");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=AA(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.asinh=function(t){re(t,"asinh");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.asinh(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.acosh=function(t){re(t,"acosh");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.acosh(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atanh=function(t){re(t,"atanh");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a)r[a]=Math.atanh(o[a]);return this.makeOutput(r,t.shape,"float32")},n.prototype.erf=function(t){re(t,"erf");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a){var i=Math.sign(o[a]),s=Math.abs(o[a]),u=1/(1+.3275911*s);r[a]=i*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,t.shape,"float32")},n.prototype.step=function(t,r){r===void 0&&(r=0),re(t,"step");for(var o=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var s=a[i];isNaN(s)?o[i]=NaN:o[i]=s>0?1:r}return this.makeOutput(o,t.shape,"float32")},n.prototype.fusedConv2d=function(t){var r=t.input,o=t.filter,a=t.convInfo,i=t.bias,s=t.activation,u=t.preluActivationWeights,c=this.conv2d(r,o,a);return i&&(c=this.add(c,i)),s&&(c=yl(this,c,s,u)),c},n.prototype.conv2d=function(t,r,o){re([t,r],"conv2d");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,c=o.padInfo.left,l=o.padInfo.top,f=o.dataFormat==="channelsLast",d=Be(o.outShape,t.dtype),h=t.strides[0],p=f?t.strides[1]:t.strides[2],v=f?t.strides[2]:1,m=f?1:t.strides[1],g=d.strides[0],y=f?d.strides[1]:d.strides[2],x=f?d.strides[2]:1,b=f?1:d.strides[1],_=this.readSync(t.dataId),w=this.readSync(r.dataId),S=d.values,E=0;E<o.batchSize;++E)for(var C=E*h,k=E*g,I=0;I<o.outHeight;++I)for(var R=k+I*y,T=I*o.strideHeight-l,N=0;N<a;N++){var B=T+N*s;if(!(B<0||B>=o.inHeight))for(var H=N*r.strides[0],z=C+B*p,W=0;W<o.outWidth;++W)for(var j=R+W*x,Z=W*o.strideWidth-c,ae=0;ae<i;ae++){var se=Z+ae*u;if(!(se<0||se>=o.inWidth))for(var pe=z+se*v,Te=H+ae*r.strides[1],Re=0;Re<o.inChannels;++Re){for(var de=_[pe+Re*m],$=0;$<o.outChannels;++$)S[j+$*b]+=de*w[Te+$];Te+=o.outChannels}}}return d.toTensor()},n.prototype.conv3d=function(t,r,o){for(var a=o.filterDepth,i=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,c=o.dilationHeight,l=o.dilationWidth,f=o.padInfo.front,d=o.padInfo.left,h=o.padInfo.top,p=Be(o.outShape,t.dtype),v=this.readSync(t.dataId),m=this.readSync(r.dataId),g=p.values,y=0;y<o.batchSize;++y)for(var x=y*t.strides[0],b=y*p.strides[0],_=0;_<o.outDepth;++_)for(var w=b+_*p.strides[1],S=_*o.strideDepth-f,E=0;E<a;E++){var C=S+E*u;if(!(C<0||C>=o.inDepth))for(var k=E*r.strides[0],I=x+C*t.strides[1],R=0;R<o.outHeight;++R)for(var T=w+R*p.strides[2],N=R*o.strideHeight-h,B=0;B<i;B++){var H=N+B*c;if(!(H<0||H>=o.inHeight))for(var z=k+B*r.strides[1],W=I+H*t.strides[2],j=0;j<o.outWidth;++j)for(var Z=T+j*o.outChannels,ae=j*o.strideWidth-d,se=0;se<s;se++){var pe=ae+se*l;if(!(pe<0||pe>=o.inWidth))for(var Te=z+se*r.strides[2],Re=W+pe*o.inChannels,de=Te,$=0;$<o.inChannels;++$){for(var te=v[Re+$],ne=0;ne<o.outChannels;++ne)g[Z+ne]+=te*m[de+ne];de+=o.outChannels}}}}return p.toTensor()},n.prototype.conv2dDerInput=function(t,r,o){re([t,r],"conv2dDerInput");for(var a=Be(o.inShape,"float32"),i=a.values,s=this.readSync(t.dataId),u=this.readSync(r.dataId),c=r.strides,l=c[0],f=c[1],d=c[2],h=o.batchSize,p=o.filterHeight,v=o.filterWidth,m=o.inChannels,g=o.inHeight,y=o.inWidth,x=o.outChannels,b=o.outHeight,_=o.outWidth,w=o.strideHeight,S=o.strideWidth,E=o.dataFormat,C=p-1-o.padInfo.top,k=v-1-o.padInfo.left,I=E==="channelsLast",R=a.strides[0],T=I?a.strides[1]:a.strides[2],N=I?a.strides[2]:1,B=I?1:a.strides[1],H=t.strides[0],z=I?t.strides[1]:t.strides[2],W=I?t.strides[2]:1,j=I?1:t.strides[1],Z=0;Z<h;++Z)for(var ae=0;ae<m;++ae)for(var se=0;se<g;++se)for(var pe=se-C,Te=Math.max(0,Math.ceil(pe/w)),Re=Math.min(b,(p+pe)/w),de=0;de<y;++de){for(var $=de-k,te=Math.max(0,Math.ceil($/S)),ne=Math.min(_,(v+$)/S),le=0,be=Te;be<Re;++be)for(var F=be*w-pe,P=te;P<ne;++P)for(var L=H*Z+z*be+W*P,K=l*(p-1-F)+f*(v-1-(P*S-$))+d*ae,J=0;J<x;++J)le+=s[L+j*J]*u[K+J];i[R*Z+T*se+N*de+B*ae]=le}return a.toTensor()},n.prototype.conv3dDerInput=function(t,r,o){for(var a=Be(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],c=s[1],l=s[2],f=s[3],d=this.readSync(t.dataId),h=t.strides,p=h[0],v=h[1],m=h[2],g=h[3],y=this.readSync(r.dataId),x=r.strides,b=x[0],_=x[1],w=x[2],S=x[3],E=o.batchSize,C=o.filterDepth,k=o.filterHeight,I=o.filterWidth,R=o.inChannels,T=o.inDepth,N=o.inHeight,B=o.inWidth,H=o.outChannels,z=o.outDepth,W=o.outHeight,j=o.outWidth,Z=o.strideDepth,ae=o.strideHeight,se=o.strideWidth,pe=C-1-o.padInfo.front,Te=k-1-o.padInfo.top,Re=I-1-o.padInfo.left,de=0;de<E;++de)for(var $=0;$<R;++$)for(var te=0;te<T;++te)for(var ne=te-pe,le=Math.max(0,Math.ceil(ne/Z)),be=Math.min(z,(C+ne)/Z),F=0;F<N;++F)for(var P=F-Te,L=Math.max(0,Math.ceil(P/ae)),K=Math.min(W,(k+P)/ae),J=0;J<B;++J){for(var ee=J-Re,ce=Math.max(0,Math.ceil(ee/se)),ie=Math.min(j,(I+ee)/se),ue=0,oe=le;oe<be;++oe)for(var ke=oe*Z-ne,fe=L;fe<K;++fe)for(var Se=fe*ae-P,Ie=ce;Ie<ie;++Ie)for(var ze=p*de+v*oe+m*fe+g*Ie,Xe=b*(C-1-ke)+_*(k-1-Se)+w*(I-1-(Ie*se-ee))+S*$,We=0;We<H;++We)ue+=d[ze+We]*y[Xe+We];i[u*de+c*te+l*F+f*J+$]=ue}return a.toTensor()},n.prototype.conv2dDerFilter=function(t,r,o){re([t,r],"conv2dDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,c=o.dataFormat==="channelsLast",l=Be(o.filterShape,"float32"),f=o.padInfo.left,d=o.padInfo.top,h=this.bufferSync(t),p=this.bufferSync(r),v=0;v<s;++v)for(var m=Math.max(0,Math.ceil((d-v)/a)),g=Math.min(o.outHeight,(o.inHeight+d-v)/a),y=0;y<u;++y)for(var x=Math.max(0,Math.ceil((f-y)/i)),b=Math.min(o.outWidth,(o.inWidth+f-y)/i),_=0;_<o.inChannels;++_)for(var w=0;w<o.outChannels;++w){for(var S=0,E=0;E<o.batchSize;++E)for(var C=m;C<g;++C)for(var k=v+C*a-d,I=x;I<b;++I){var R=y+I*i-f;S+=c?h.get(E,k,R,_)*p.get(E,C,I,w):h.get(E,_,k,R)*p.get(E,w,C,I)}l.set(S,v,y,_,w)}return l.toTensor()},n.prototype.conv3dDerFilter=function(t,r,o){for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,c=o.filterHeight,l=o.filterWidth,f=Be(o.filterShape,"float32"),d=f.values,h=f.strides,p=h[0],v=h[1],m=h[2],g=h[3],y=this.readSync(r.dataId),x=r.strides,b=x[0],_=x[1],w=x[2],S=x[3],E=this.readSync(t.dataId),C=t.strides,k=C[0],I=C[1],R=C[2],T=C[3],N=o.padInfo.front,B=o.padInfo.left,H=o.padInfo.top,z=0;z<u;++z)for(var W=Math.max(0,Math.ceil((N-z)/a)),j=Math.min(o.outDepth,(o.inDepth+N-z)/a),Z=z*p,ae=0;ae<c;++ae)for(var se=Math.max(0,Math.ceil((H-ae)/i)),pe=Math.min(o.outHeight,(o.inHeight+H-ae)/i),Te=ae*v+Z,Re=0;Re<l;++Re)for(var de=Math.max(0,Math.ceil((B-Re)/s)),$=Math.min(o.outWidth,(o.inWidth+B-Re)/s),te=Re*m+Te,ne=0;ne<o.inChannels;++ne)for(var le=ne*g+te,be=0;be<o.outChannels;++be){for(var F=0,P=0;P<o.batchSize;++P)for(var L=P*k,K=P*b,J=W;J<j;++J)for(var ee=(z+J*a-N)*I+L,ce=J*_+K,ie=se;ie<pe;++ie)for(var ue=(ae+ie*i-H)*R+ee,oe=ie*w+ce,ke=de;ke<$;++ke){var fe=ke*S+oe;F+=E[(Re+ke*s-B)*T+ue+ne]*y[fe+be]}d[le+be]=F}return f.toTensor()},n.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,o=t.filter,a=t.convInfo,i=t.bias,s=t.activation,u=t.preluActivationWeights,c=this.depthwiseConv2D(r,o,a);return i&&(c=this.add(c,i)),s&&(c=yl(this,c,s,u)),c},n.prototype.depthwiseConv2D=function(t,r,o){re([t,r],"depthwiseConv2D");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,c=o.padInfo.left,l=o.padInfo.top,f=o.outChannels/o.inChannels,d=Be(o.outShape,t.dtype),h=this.readSync(t.dataId),p=this.readSync(r.dataId),v=d.values,m=0;m<o.batchSize;++m)for(var g=m*t.strides[0],y=m*d.strides[0],x=0;x<o.outHeight;++x)for(var b=y+x*d.strides[1],_=x*o.strideHeight-c,w=0;w<a;++w){var S=_+w*s;if(!(S<0||S>=o.inHeight))for(var E=w*r.strides[0],C=g+S*t.strides[1],k=0;k<o.outWidth;++k)for(var I=b+k*d.strides[2],R=k*o.strideWidth-l,T=0;T<i;++T){var N=R+T*u;if(!(N<0||N>=o.inWidth))for(var B=E+T*r.strides[1],H=C+N*o.inChannels,z=I,W=B,j=0;j<o.inChannels;++j){for(var Z=h[H+j],ae=0;ae<f;++ae)v[z+ae]+=Z*p[W+ae];z+=f,W+=f}}}return d.toTensor()},n.prototype.depthwiseConv2DDerInput=function(t,r,o){re([t,r],"depthwiseConv2DDerInput");for(var a=Be(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],c=s[1],l=s[2],f=this.readSync(t.dataId),d=t.strides,h=d[0],p=d[1],v=d[2],m=this.readSync(r.dataId),g=r.strides,y=g[0],x=g[1],b=g[2],_=o.batchSize,w=o.filterHeight,S=o.filterWidth,E=o.inChannels,C=o.inHeight,k=o.inWidth,I=o.outChannels,R=o.outHeight,T=o.outWidth,N=o.strideHeight,B=o.strideWidth,H=w-1-o.padInfo.top,z=S-1-o.padInfo.left,W=I/E,j=0;j<_;++j)for(var Z=0;Z<E;++Z)for(var ae=0;ae<C;++ae)for(var se=ae-H,pe=Math.max(0,Math.ceil(se/N)),Te=Math.min(R,(w+se)/N),Re=0;Re<k;++Re){for(var de=Re-z,$=Math.max(0,Math.ceil(de/B)),te=Math.min(T,(S+de)/B),ne=0,le=pe;le<Te;++le)for(var be=le*N-se,F=$;F<te;++F)for(var P=h*j+p*le+v*F,L=y*(w-1-be)+x*(S-1-(F*B-de))+b*Z,K=0;K<W;++K)ne+=f[P+(Z*W+K)]*m[L+K];i[u*j+c*ae+l*Re+Z]=ne}return a.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(t,r,o){re([t,r],"depthwiseConv2DDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,c=Be(o.filterShape,"float32"),l=o.padInfo.left,f=o.padInfo.top,d=o.outChannels/o.inChannels,h=this.bufferSync(t),p=this.bufferSync(r),v=0;v<s;++v)for(var m=Math.max(0,Math.ceil((f-v)/a)),g=Math.min(o.outHeight,(o.inHeight+f-v)/a),y=0;y<u;++y)for(var x=Math.max(0,Math.ceil((l-y)/i)),b=Math.min(o.outWidth,(o.inWidth+l-y)/i),_=0;_<o.outChannels;++_){for(var w=Math.trunc(_/d),S=_%d,E=0,C=0;C<o.batchSize;++C)for(var k=m;k<g;++k)for(var I=v+k*a-f,R=x;R<b;++R){var T=y+R*i-l;E+=h.get(C,I,T,w)*p.get(C,k,R,_)}c.set(E,v,y,w,S)}return c.toTensor()},n.prototype.tile=function(t,r){return re(t,"tile"),r1(this.bufferSync(t),r)},n.prototype.pad=function(t,r,o){re(t,"pad");var a=r.map(function(d,h){return d[0]+t.shape[h]+d[1]}),i=r.map(function(d){return d[0]}),s=this.bufferSync(t),u=Be(a,t.dtype);o!==0&&u.values.fill(o);for(var c=0;c<t.size;c++){var l=s.indexToLoc(c),f=l.map(function(d,h){return d+i[h]});u.set.apply(u,[s.get.apply(s,l)].concat(f))}return u.toTensor()},n.prototype.transpose=function(t,r){re(t,"transpose");for(var o=new Array(t.rank),a=0;a<o.length;a++)o[a]=t.shape[r[a]];var i=this.readSync(t.dataId),s=Be(o,t.dtype),u=this.bufferSync(t);for(a=0;a<t.size;++a){for(var c=u.indexToLoc(a),l=new Array(c.length),f=0;f<l.length;f++)l[f]=c[r[f]];var d=s.locToIndex(l);s.values[d]=i[a]}return s.toTensor()},n.prototype.gather=function(t,r,o){re([t,r],"gather");var a=t.shape.slice(),i=this.readSync(r.dataId);a[o]=i.length;for(var s=Be(a,t.dtype),u=this.bufferSync(t),c=0;c<s.size;++c){var l=s.indexToLoc(c),f=l.slice();f[o]=i[l[o]];var d=u.locToIndex(f);s.values[c]=u.values[d]}return s.toTensor()},n.prototype.batchToSpaceND=function(t,r,o){re([t],"batchToSpaceND");var a=r.reduce(function(f,d){return f*d}),i=xu(t.shape,r,a),s=wu(i.length,r.length),u=_u(t.shape,r,a),c=$b(o,r.length),l=jb(u,o,r.length);return t.reshape(i).transpose(s).reshape(u).slice(c,l)},n.prototype.spaceToBatchND=function(t,r,o){re([t],"spaceToBatchND");var a=r.reduce(function(d,h){return d*h}),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<t.shape.length;++s)i.push([0,0]);var u=t.pad(i),c=xu(u.shape,r,a,!1),l=wu(c.length,r.length,!1),f=_u(u.shape,r,a,!1);return u.reshape(c).transpose(l).reshape(f)},n.prototype.pool=function(t,r,o){re(t,"pool");for(var a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(t.dataId),v=Be(r.outShape,t.dtype),m=v.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],y=r.outShape[2]*r.outShape[3],x=r.outShape[3],b=0;b<r.batchSize;++b)for(var _=b*g,w=b*t.strides[0],S=0;S<r.inChannels;++S)for(var E=0;E<r.outHeight;++E)for(var C=E*a-f,k=Math.max(0,C),I=Math.min(r.inHeight,c+C),R=_+E*y,T=0;T<r.outWidth;++T){for(var N=T*i-d,B=Math.max(0,N),H=Math.min(r.inWidth,l+N),z=h,W=0,j=0,Z=k;Z<I;Z+=s){for(var ae=w+Z*t.strides[1],se=B;se<H;se+=u){var pe=p[ae+se*t.strides[2]+S];o==="max"&&pe>z?z=pe:o==="avg"&&(W+=pe,j++)}if(isNaN(z))break}m[R+T*x+S]=o==="avg"?W/j:z}return v.toTensor()},n.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},n.prototype.maxPoolPositions=function(t,r){for(var o=Be(r.outShape,"int32"),a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=this.bufferSync(t),p=0;p<r.batchSize;++p)for(var v=0;v<r.inChannels;++v)for(var m=0;m<r.outHeight;++m){for(var g=m*a-f,y=g;y<0;)y+=s;for(var x=Math.min(r.inHeight,c+g),b=0;b<r.outWidth;++b){for(var _=b*i-d,w=_;w<0;)w+=u;for(var S=Math.min(r.inWidth,l+_),E=Number.NEGATIVE_INFINITY,C=-1,k=y;k<x;k+=s)for(var I=k-g,R=w;R<S;R+=u){var T=R-_,N=h.get(p,k,R,v);N>E&&(E=N,C=I*l+T)}o.set(C,p,m,b,v)}}return o.toTensor()},n.prototype.maxPoolBackprop=function(t,r,o,a){re([r,o],"maxPoolBackprop");for(var i=this.maxPoolPositions(r,a),s=a.strideHeight,u=a.strideWidth,c=a.dilationHeight,l=a.dilationWidth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=d-1-a.padInfo.left,p=f-1-a.padInfo.top,v=Be(r.shape,"float32"),m=this.bufferSync(i),g=this.bufferSync(t),y=0;y<a.batchSize;++y)for(var x=0;x<a.inChannels;++x)for(var b=0;b<a.inHeight;++b)for(var _=0;_<a.inWidth;++_){for(var w=b-p,S=_-h,E=0,C=0;C<f;C+=c){var k=(w+C)/s;if(!(k<0||k>=a.outHeight||Math.floor(k)!==k))for(var I=0;I<d;I+=l){var R=(S+I)/u;if(!(R<0||R>=a.outWidth||Math.floor(R)!==R)){var T=f*d-1-m.get(y,k,R,x)===C*d+I?1:0;T!==0&&(E+=g.get(y,k,R,x)*T)}}}v.set(E,y,b,_,x)}return v.toTensor()},n.prototype.avgPoolBackprop=function(t,r,o){re([t,r],"avgPoolBackprop");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,c=o.dilationHeight,l=o.dilationWidth,f=o.effectiveFilterHeight,d=o.effectiveFilterWidth,h=d-1-o.padInfo.left,p=f-1-o.padInfo.top,v=Be(r.shape,"float32"),m=1/(s*u),g=this.bufferSync(t),y=0;y<o.batchSize;++y)for(var x=0;x<o.inChannels;++x)for(var b=0;b<o.inHeight;++b)for(var _=0;_<o.inWidth;++_){for(var w=b-p,S=_-h,E=0,C=0;C<f;C+=c){var k=(w+C)/a;if(!(k<0||k>=o.outHeight||Math.floor(k)!==k))for(var I=0;I<d;I+=l){var R=(S+I)/i;R<0||R>=o.outWidth||Math.floor(R)!==R||(E+=g.get(y,k,R,x))}}v.set(E*m,y,b,_,x)}return v.toTensor()},n.prototype.pool3d=function(t,r,o){re(t,"pool3d");for(var a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,m=r.padInfo.left,g=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(t.dataId),x=Be(r.outShape,t.dtype),b=x.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],w=r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[3]*r.outShape[4],E=r.outShape[4],C=0;C<r.batchSize;++C)for(var k=C*_,I=C*t.strides[0],R=0;R<r.inChannels;++R)for(var T=0;T<r.outDepth;++T){for(var N=T*a-p,B=N;B<0;)B+=u;for(var H=Math.min(r.inDepth,f+N),z=k+T*w,W=0;W<r.outHeight;++W){for(var j=W*i-v,Z=j;Z<0;)Z+=c;for(var ae=Math.min(r.inHeight,d+j),se=z+W*S,pe=0;pe<r.outWidth;++pe){for(var Te=pe*s-m,Re=Te;Re<0;)Re+=l;for(var de=Math.min(r.inWidth,h+Te),$=se+pe*E,te=g,ne=0,le=0,be=B;be<H;be+=u){for(var F=I+be*t.strides[1],P=Z;P<ae;P+=c){for(var L=F+P*t.strides[2],K=Re;K<de;K+=l){var J=y[L+K*t.strides[3]+R];if(o==="max"&&J>te?te=J:o==="avg"&&(ne+=J,le++),isNaN(te))break}if(isNaN(te))break}if(isNaN(te))break}b[$+R]=o==="avg"?ne/le:te}}}return x.toTensor()},n.prototype.avgPool3d=function(t,r){return re(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(t,r,o){re([t,r],"avgPool3dBackprop");for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,c=o.filterHeight,l=o.filterWidth,f=o.dilationDepth,d=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterDepth,v=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=p-1-o.padInfo.front,y=m-1-o.padInfo.left,x=v-1-o.padInfo.top,b=Be(r.shape,"float32"),_=1/(u*c*l),w=this.bufferSync(t),S=0;S<o.batchSize;++S)for(var E=0;E<o.inChannels;++E)for(var C=0;C<o.inDepth;++C)for(var k=0;k<o.inHeight;++k)for(var I=0;I<o.inWidth;++I){for(var R=C-g,T=k-x,N=I-y,B=0,H=0;H<p;H+=f){var z=(R+H)/a;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var W=0;W<v;W+=d){var j=(T+W)/i;if(!(j<0||j>=o.outHeight||Math.floor(j)!==j))for(var Z=0;Z<m;Z+=h){var ae=(N+Z)/s;ae<0||ae>=o.outWidth||Math.floor(ae)!==ae||(B+=w.get(S,z,j,ae,E))}}}b.set(B*_,S,C,k,I,E)}return b.toTensor()},n.prototype.maxPool3d=function(t,r){return re(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(t,r){for(var o=Be(r.outShape,"int32"),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(t),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var b=0;b<r.outDepth;++b){for(var _=b*a-p,w=_;w<0;)w+=u;for(var S=Math.min(r.inDepth,f+_),E=0;E<r.outHeight;++E){for(var C=E*i-v,k=C;k<0;)k+=c;for(var I=Math.min(r.inHeight,d+C),R=0;R<r.outWidth;++R){for(var T=R*s-m,N=T;N<0;)N+=l;for(var B=Math.min(r.inWidth,h+T),H=Number.NEGATIVE_INFINITY,z=-1,W=w;W<S;W+=u)for(var j=W-_,Z=k;Z<I;Z+=c)for(var ae=Z-C,se=N;se<B;se+=l){var pe=se-T,Te=g.get(y,W,Z,se,x);Te>=H&&(H=Te,z=j*d*h+ae*d+pe)}o.set(z,y,b,E,R,x)}}}return o.toTensor()},n.prototype.maxPool3dBackprop=function(t,r,o,a){re([r,o],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,c=a.strideWidth,l=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,v=a.effectiveFilterWidth,m=h-1-a.padInfo.front,g=v-1-a.padInfo.left,y=p-1-a.padInfo.top,x=Be(r.shape,"float32"),b=this.bufferSync(i),_=this.bufferSync(t),w=0;w<a.batchSize;++w)for(var S=0;S<a.inChannels;++S)for(var E=0;E<a.inDepth;++E)for(var C=0;C<a.inHeight;++C)for(var k=0;k<a.inWidth;++k){for(var I=E-m,R=C-y,T=k-g,N=0,B=0;B<h;B+=l){var H=(I+B)/s;if(!(H<0||H>=a.outDepth||Math.floor(H)!==H))for(var z=0;z<p;z+=f){var W=(R+z)/u;if(!(W<0||W>=a.outHeight||Math.floor(W)!==W))for(var j=0;j<v;j+=d){var Z=(T+j)/c;if(!(Z<0||Z>=a.outWidth||Math.floor(Z)!==Z)){var ae=h*p*v-1-b.get(w,H,W,Z,S)===B*p*v+z*v+j?1:0;ae!==0&&(N+=_.get(w,H,W,Z,S)*ae)}}}}x.set(N,w,E,C,k,S)}return x.toTensor()},n.prototype.cast=function(t,r){return Zb(t,r,this)},n.prototype.reshape=function(t,r){return Cf(t,r)},n.prototype.avgPool=function(t,r){return re(t,"avgPool"),this.pool(t,r,"avg").toFloat()},n.prototype.resizeBilinear=function(t,r,o,a){re(t,"resizeBilinear");for(var i=t.shape,s=i[0],u=i[1],c=i[2],l=i[3],f=this.readSync(t.dataId),d=new Float32Array(we([s,r,o,l])),h=[a&&r>1?u-1:u,a&&o>1?c-1:c],p=[a&&r>1?r-1:r,a&&o>1?o-1:o],v=0,m=h[0]/p[0],g=h[1]/p[1],y=0;y<s;y++)for(var x=0;x<r;x++)for(var b=m*x,_=Math.floor(b),w=b-_,S=Math.min(u-1,Math.ceil(b)),E=y*t.strides[0]+_*t.strides[1],C=y*t.strides[0]+S*t.strides[1],k=0;k<o;k++)for(var I=g*k,R=Math.floor(I),T=I-R,N=Math.min(c-1,Math.ceil(I)),B=E+R*t.strides[2],H=C+R*t.strides[2],z=E+N*t.strides[2],W=C+N*t.strides[2],j=0;j<l;j++){var Z=f[B+j],ae=f[H+j],se=Z+(f[z+j]-Z)*T,pe=se+(ae+(f[W+j]-ae)*T-se)*w;d[v++]=pe}return zt(d,[s,r,o,l])},n.prototype.resizeBilinearBackprop=function(t,r,o){re([t,r],"resizeBilinearBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],c=a[3],l=t.shape,f=l[1],d=l[2],h=new Float32Array(i*s*u*c),p=[o&&f>1?s-1:s,o&&d>1?u-1:u],v=[o&&f>1?f-1:f,o&&d>1?d-1:d],m=p[0]/v[0],g=p[1]/v[1],y=this.readSync(t.dataId),x=0,b=0;b<i;b++)for(var _=b*r.strides[0],w=0;w<f;w++)for(var S=w*m,E=Math.floor(S),C=Math.min(Math.ceil(S),s-1),k=_+E*r.strides[1],I=_+C*r.strides[1],R=S-E,T=1-R,N=0;N<d;N++)for(var B=N*g,H=Math.floor(B),z=Math.min(Math.ceil(B),u-1),W=B-H,j=1-W,Z=k+H*r.strides[2],ae=k+z*r.strides[2],se=I+H*r.strides[2],pe=I+z*r.strides[2],Te=T*j,Re=T*W,de=R*j,$=R*W,te=0;te<c;te++){var ne=y[x++];h[Z+te]+=ne*Te,h[ae+te]+=ne*Re,h[se+te]+=ne*de,h[pe+te]+=ne*$}return fn(h,[i,u,s,c],r.dtype)},n.prototype.resizeNearestNeighbor=function(t,r,o,a){re(t,"resizeNearestNeighbor");for(var i=t.shape,s=i[0],u=i[1],c=i[2],l=i[3],f=this.readSync(t.dataId),d=new Float32Array(s*r*o*l),h=[a&&r>1?u-1:u,a&&o>1?c-1:c],p=[a&&r>1?r-1:r,a&&o>1?o-1:o],v=h[0]/p[0],m=h[1]/p[1],g=0,y=0;y<s;y++)for(var x=y*t.strides[0],b=0;b<r;b++)for(var _=v*b,w=x+Math.min(u-1,a?Math.round(_):Math.floor(_))*t.strides[1],S=0;S<o;S++)for(var E=m*S,C=w+Math.min(c-1,a?Math.round(E):Math.floor(E))*t.strides[2],k=0;k<l;k++){var I=f[C+k];d[g++]=I}return zt(d,[s,r,o,l],t.dtype)},n.prototype.resizeNearestNeighborBackprop=function(t,r,o){re([t,r],"resizeNearestNeighborBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],c=a[3],l=t.shape,f=l[1],d=l[2],h=new Float32Array(i*s*u*c),p=this.readSync(t.dataId),v=[o&&f>1?s-1:s,o&&d>1?u-1:u],m=[o&&f>1?f-1:f,o&&d>1?d-1:d],g=v[0]/m[0],y=v[1]/m[1],x=1/g,b=1/y,_=2*Math.ceil(x)+2,w=2*Math.ceil(b)+2,S=0;S<i;S++)for(var E=S*r.strides[0],C=0;C<s;C++)for(var k=E+C*r.strides[1],I=Math.floor(C*x),R=Math.floor(I-_/2),T=0;T<u;T++)for(var N=k+T*r.strides[2],B=Math.floor(T*b),H=Math.floor(B-w/2),z=0;z<c;z++){for(var W=0,j=0;j<_;j++){var Z=j+R;if(!(Z<0||Z>=f)){var ae=E+Z*t.strides[1],se=Z*g;if(C===Math.min(s-1,o?Math.round(se):Math.floor(se)))for(var pe=0;pe<w;pe++){var Te=pe+H;if(!(Te<0||Te>=d)){var Re=ae+Te*t.strides[2],de=Te*y;T===Math.min(u-1,o?Math.round(de):Math.floor(de))&&(W+=p[Re+z])}}}}h[N+z]=W}return fn(h,r.shape,r.dtype)},n.prototype.batchNormalization=function(t,r,o,a,i,s){re([t,r,o,i,s],"batchNorm");for(var u=this.readSync(t.dataId),c=this.readSync(r.dataId),l=this.readSync(o.dataId),f=i?this.readSync(i.dataId):new Float32Array([1]),d=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),p=d.length,v=f.length,m=l.length,g=c.length,y=0,x=0,b=0,_=0,w=0;w<u.length;++w)h[w]=d[y++]+(u[w]-c[x++])*f[b++]/Math.sqrt(l[_++]+a),y>=p&&(y=0),x>=g&&(x=0),b>=v&&(b=0),_>=m&&(_=0);return fn(h,t.shape)},n.prototype.localResponseNormalization4D=function(t,r,o,a,i){re(t,"localResponseNormalization4D");var s=t.shape[3],u=s-1,c=this.readSync(t.dataId),l=t.size,f=new Float32Array(l);function d(m){for(var g=m%s,y=m-g+Math.max(0,g-r),x=m-g+Math.min(g+r,u),b=0;y<=x;y++){var _=c[y];b+=_*_}return b}for(var h=0;h<l;h++){var p=d(h),v=c[h]*Math.pow(o+a*p,-i);f[h]=v}return fn(f,t.shape)},n.prototype.LRNGrad=function(t,r,o,a,i,s,u){re(t,"LRNGrad");for(var c=t.shape[3],l=this.readSync(t.dataId),f=this.readSync(r.dataId),d=this.readSync(o.dataId),h=new Float32Array(t.size),p=t.size,v=0;v<p;v++){for(var m=v%c,g=v-m+Math.max(0,m-a),y=v-m+Math.min(c,m+a+1),x=0,b=g;b<y;b++)x+=Math.pow(f[b],2);for(x=s*x+i,b=g;b<y;b++){var _=-2*s*u*f[b]*d[v]/x;v===b&&(_+=Math.pow(x,-u)),_*=l[v],h[b]+=_}}return fn(h,t.shape)},n.prototype.multinomial=function(t,r,o,a){re(t,"multinomial");for(var i=r?t:$r(t),s=i.shape[0],u=i.shape[1],c=ct([s,o],"int32"),l=this.readSync(c.dataId),f=this.readSync(i.dataId),d=0;d<s;++d){var h=d*u,p=new Float32Array(u-1);p[0]=f[h];for(var v=1;v<p.length;++v)p[v]=p[v-1]+f[h+v];for(var m=hc(a.toString()),g=d*o,y=0;y<o;++y){var x=m();l[g+y]=p.length;for(var b=0;b<p.length;b++)if(x<p[b]){l[g+y]=b;break}}}return c},n.prototype.oneHot=function(t,r,o,a){re(t,"oneHot");var i=new Float32Array(t.size*r);i.fill(a);for(var s=this.readSync(t.dataId),u=0;u<t.size;++u)s[u]>=0&&s[u]<r&&(i[u*r+s[u]]=o);return uo(i,[t.size,r],"int32")},n.prototype.nonMaxSuppression=function(t,r,o,a,i){return re(t,"nonMaxSuppression"),Fd(this.readSync(t.dataId),this.readSync(r.dataId),o,a,i)},n.prototype.fft=function(t){return this.fftBatch(t,!1)},n.prototype.ifft=function(t){return this.fftBatch(t,!0)},n.prototype.fftBatch=function(t,r){for(var o=t.shape[0],a=t.shape[1],i=Be(t.shape,"float32"),s=Be(t.shape,"float32"),u=Bn(t).as2D(o,a),c=fr(t).as2D(o,a),l=0;l<o;l++)for(var f=u.slice([l,0],[1,a]),d=c.slice([l,0],[1,a]),h=Wt(f,d),p=this.readSync(this.fftImpl(h,r).dataId),v=0;v<a;v++){var m=Zv(p,v);i.values[l*a+v]=m.real,s.values[l*a+v]=m.imag}return Wt(i.toTensor(),s.toTensor()).as2D(o,a)},n.prototype.fftImpl=function(t,r){var o=t.as1D(),a=o.size;if(this.isExponentOf2(a)){var i=this.fftRadix2(o,a,r).as2D(t.shape[0],t.shape[1]);return r&&(i=Wt(Bn(i).div(he(a)),fr(i).div(he(a)))),i}var s=this.readSync(t.dataId),u=function(c){for(var l=new Float32Array(c.length/2),f=new Float32Array(c.length/2),d=0;d<c.length;d+=2)l[d/2]=c[d],f[d/2]=c[d+1];return{real:l,imag:f}}(this.fourierTransformByMatmul(s,a,r));return Wt(u.real,u.imag).as2D(t.shape[0],t.shape[1])},n.prototype.isExponentOf2=function(t){return(t&t-1)==0},n.prototype.fftRadix2=function(t,r,o){if(r===1)return t;var a=this.readSync(t.dataId),i=r/2,s=function(g){for(var y=Math.ceil(g.length/4),x=new Float32Array(y),b=new Float32Array(y),_=0;_<g.length;_+=4)x[Math.floor(_/4)]=g[_],b[Math.floor(_/4)]=g[_+1];return{real:x,imag:b}}(a),u=Wt(s.real,s.imag).as1D(),c=function(g){for(var y=Math.floor(g.length/4),x=new Float32Array(y),b=new Float32Array(y),_=2;_<g.length;_+=4)x[Math.floor(_/4)]=g[_],b[Math.floor(_/4)]=g[_+1];return{real:x,imag:b}}(a),l=Wt(c.real,c.imag).as1D();u=this.fftRadix2(u,i,o),l=this.fftRadix2(l,i,o);var f=function(g,y){for(var x=new Float32Array(g/2),b=new Float32Array(g/2),_=0;_<Math.ceil(g/2);_++){var w=(y?2:-2)*Math.PI*(_/g);x[_]=Math.cos(w),b[_]=Math.sin(w)}return{real:x,imag:b}}(r,o),d=Wt(f.real,f.imag).mul(l),h=u.add(d),p=u.sub(d),v=Bn(h).concat(Bn(p)),m=fr(h).concat(fr(p));return Wt(v,m).as1D()},n.prototype.fourierTransformByMatmul=function(t,r,o){for(var a=new Float32Array(2*r),i=0;i<r;i++){for(var s=0,u=0,c=0;c<r;c++){var l=uD(i*c,r,o),f=Zv(t,c);s+=f.real*l.real-f.imag*l.imag,u+=f.real*l.imag+f.imag*l.real}o&&(s/=r,u/=r),sD(a,s,u,i)}return a},n.prototype.depthToSpace=function(t,r,o){D(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),D(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=t.shape[0],i=t.shape[1],s=t.shape[2],u=t.shape[3],c=i*r,l=s*r,f=u/(r*r),d=this.readSync(t.dataId),h=new Float32Array(a*c*l*f),p=0,v=0;v<a;++v)for(var m=0;m<c;++m)for(var g=Math.floor(m/r),y=m%r,x=0;x<l;++x)for(var b=Math.floor(x/r),_=(y*r+x%r)*f,w=0;w<f;++w){var S=w+_+u*(b+s*(g+i*v));h[p++]=d[S]}return fn(h,[a,c,l,f])},n.prototype.broadcastedBinaryOp=function(t,r,o,a){var i=$e(t.shape,r.shape),s=Be(i,o),u=this.readSync(t.dataId),c=this.readSync(r.dataId),l=oo(t.shape,i),f=oo(r.shape,i),d=s.values;if(l.length+f.length===0)for(var h=0;h<d.length;++h)d[h]=a(u[h%u.length],c[h%c.length]);else{var p=this.bufferSync(t),v=this.bufferSync(r),m=function(g){var y=s.indexToLoc(g),x=y.slice(-t.rank);l.forEach(function(S){return x[S]=0});var b=p.locToIndex(x),_=y.slice(-r.rank);f.forEach(function(S){return _[S]=0});var w=v.locToIndex(_);d[g]=a(u[b],c[w])};for(h=0;h<d.length;++h)m(h)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(t,r,o){var a=$e(t.shape,r.shape),i=Be(a,"float32"),s=Be(a,"float32"),u=this.readSync(t.dataId),c=this.readSync(r.dataId),l=oo(t.shape,a),f=oo(r.shape,a),d=i.values,h=s.values;if(l.length+f.length===0)for(var p=0;p<d.length;p++){var v=p%u.length,m=p%c.length,g=o(u[2*v],u[2*v+1],c[2*m],c[2*m+1]);d[p]=g.real,h[p]=g.imag}else{var y=this.bufferSync(this.data.get(t.dataId).complexTensors.real),x=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(_){var w=i.indexToLoc(_),S=w.slice(-t.rank);l.forEach(function(R){return S[R]=0});var E=y.locToIndex(S),C=w.slice(-r.rank);f.forEach(function(R){return C[R]=0});var k=x.locToIndex(C),I=o(u[2*E],u[2*E+1],c[2*k],c[2*k+1]);d[_]=I.real,h[_]=I.imag};for(p=0;p<d.length;p++)b(p)}return this.complex(i.toTensor(),s.toTensor())},n.prototype.split=function(t,r,o){return n1(t,r,o)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(t,r,o,a,i,s){for(var u=t.shape,c=u[0],l=u[1],f=u[2],d=u[3],h=r.shape[0],p=a[0],v=a[1],m=Be([h,p,v,d],"float32"),g=this.readSync(r.dataId),y=this.readSync(o.dataId),x=this.readSync(t.dataId),b=t.strides,_=m.strides,w=0;w<h;w++){var S=4*w,E=g[S],C=g[S+1],k=g[S+2],I=g[S+3],R=y[w];if(!(R>=c))for(var T=p>1?(k-E)*(l-1)/(p-1):0,N=v>1?(I-C)*(f-1)/(v-1):0,B=0;B<p;B++){var H=p>1?E*(l-1)+B*T:.5*(E+k)*(l-1);if(H<0||H>l-1)for(var z=0;z<v;z++)for(var W=0;W<d;W++){var j=W+z*_[2]+B*_[1]+w*_[0];m.values[j]=s}else if(i==="bilinear"){var Z=Math.floor(H),ae=Math.ceil(H),se=H-Z;for(z=0;z<v;z++)if((be=v>1?C*(f-1)+z*N:.5*(C+I)*(f-1))<0||be>f-1)for(W=0;W<d;W++)j=W+z*_[2]+B*_[1]+w*_[0],m.values[j]=s;else{var pe=Math.floor(be),Te=Math.ceil(be),Re=be-pe;for(W=0;W<d;W++){var de=x[j=W+pe*b[2]+Z*b[1]+R*b[0]],$=x[j=W+Te*b[2]+Z*b[1]+R*b[0]],te=x[j=W+pe*b[2]+ae*b[1]+R*b[0]],ne=de+($-de)*Re,le=te+(x[j=W+Te*b[2]+ae*b[1]+R*b[0]]-te)*Re;j=W+z*_[2]+B*_[1]+w*_[0],m.values[j]=ne+(le-ne)*se}}}else for(z=0;z<v;++z){var be;if((be=v>1?C*(f-1)+z*N:.5*(C+I)*(f-1))<0||be>f-1)for(W=0;W<d;W++)j=W+z*_[2]+B*_[1]+w*_[0],m.values[j]=s;else{var F=Math.round(be),P=Math.round(H);for(W=0;W<d;W++){var L=W+F*b[2]+P*b[1]+R*b[0],K=W+z*_[2]+B*_[1]+w*_[0];m.values[K]=x[L]}}}}}return m.toTensor()},n.prototype.sparseToDense=function(t,r,o,a){var i=Cu(0,t,o),s=i.sliceRank,u=i.numUpdates,c=i.sliceSize,l=i.strides,f=i.outputSize;return this.scatter(t,r,o,f,c,u,s,l,a,!1)},n.prototype.gatherND=function(t,r){var o=r.shape,a=o[o.length-1],i=Gb(t,r),s=i[0],u=i[1],c=i[2],l=i[3];if(u===0)return zt([],s,t.dtype);for(var f=new Oi([u,c],t.dtype),d=this.readSync(r.dataId),h=this.readSync(t.dataId),p=0;p<u;p++){for(var v=[],m=0,g=0;g<a;g++){var y=d[p*a+g];m+=y*l[g],v.push(y)}if(m<0||m>=t.size/c)throw new Error("Invalid indices: "+v+" does not index into "+t.shape);for(var x=0;x<c;x++)f.values[p*c+x]=h[m*c+x]}return f.toTensor().reshape(s)},n.prototype.scatterND=function(t,r,o){var a=Cu(0,t,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,c=a.strides,l=a.outputSize,f=he(0);return this.scatter(t,r,o,l,u,s,i,c,f,!0)},n.prototype.fill=function(t,r,o){var a=hu(o=o||Zi(r),we(t));return a.fill(r),M.makeTensor(a,t,o,this)},n.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},n.prototype.zerosLike=function(t){var r=hu(t.dtype,we(t.shape));return this.makeOutput(r,t.shape,t.dtype)},n.prototype.linspace=function(t,r,o){return e1(t,r,o)},n.prototype.scatter=function(t,r,o,a,i,s,u,c,l,f){var d=[a/i,i],h=this.readSync(t.dataId),p=this.readSync(r.dataId);if(a===0)return zt([],o,r.dtype);var v=new Oi(d,r.dtype);v.values.fill(this.readSync(l.dataId)[0]);for(var m=0;m<s;m++){for(var g=[],y=0,x=0;x<u;x++){var b=h[m*u+x];g.push(b),y+=b*c[x]}if(y<0||y>=a/i)throw new Error("Invalid indices: "+g+" does not index into "+o);for(var _=0;_<i;_++)f?v.values[y*i+_]+=p[m*i+_]:v.values[y*i+_]=r.rank===0?p[0]:p[m*i+_]}return v.toTensor().reshape(o)},n}(Jb);M.registerBackend("cpu",function(){return new IO},1);for(var bl=0,wm=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs,o=n,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,f=s.softNmsSigma,d=t;re(a,"NonMaxSuppressionWithScore");var h=Pd(d.data.get(a.dataId).values,d.data.get(i.dataId).values,u,c,l,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n.x,o=t;re(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Li,backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n,o=r.a,a=r.b,i=t;re([o,a],Li);var s=i.data.get(o.dataId).values,u=i.data.get(a.dataId).values,c=function(d,h,p,v,m,g){var y=$e(d,h),x=y.length,b=yr(y),_=Ni(m,we(y)),w=d.length,S=h.length,E=yr(d),C=yr(h),k=oo(d,y),I=oo(h,y);if(k.length+I.length===0)for(var R=0;R<_.length;++R)_[R]=g(p[R%p.length],v[R%v.length]);else{var T=function(N){var B=LA(N,x,b),H=B.slice(-w);k.forEach(function(Z){return H[Z]=0});var z=$v(H,w,E),W=B.slice(-S);I.forEach(function(Z){return W[Z]=0});var j=$v(W,S,C);_[N]=g(p[z],v[j])};for(R=0;R<_.length;++R)T(R)}return[_,y]}(o.shape,a.shape,s,u,o.dtype,function(d,h){var p=d-h;return p*p}),l=c[0],f=c[1];return{dataId:i.write(l,f,o.dtype),shape:f,dtype:o.dtype}}}];bl<wm.length;bl++)Sb(wm[bl]);var sa,AO=function(e){this.variableNames=["A"];var n=Qt(),t=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},TO=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Qt(),t=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(var xl=0,_m=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs,o=n.pixels,a=r.numChannels,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=u[0],l=u[1],f=[l,c],d=[l,c,a];(s||i)&&(sa==null&&(sa=document.createElement("canvas").getContext("2d")),sa.canvas.width=c,sa.canvas.height=l,sa.drawImage(o,0,0,c,l),o=sa.canvas);var h=t.makeTensorInfo(f,"int32");t.texData.get(h.dataId).usage=En.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(h.dataId),o);var p=Q().getBool("WEBGL_PACK")?new TO(d):new AO(d),v=t.runWebGLProgram(p,[h],"int32");return t.disposeData(h.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs;gu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=n,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,f=s.softNmsSigma,d=t,h=Pd(d.readSync(a.dataId),d.readSync(i.dataId),u,c,l,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n.x,o=t,a=new Ve(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:Li,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n,o=r.a,a=r.b,i=t,s=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nr("return (a - b) * (a - b);",o.shape,a.shape):new yt("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}}];xl<_m.length;xl++)Sb(_m[xl]);for(var wl=0,Cm=[{kernelName:"Square",gradFunc:function(e,n){var t=n[0];return{x:function(){return e.mul(t.toFloat().mul(2))}}}},{kernelName:Li,gradFunc:function(e,n){var t=n[0],r=n[1],o=he(2);return{a:function(){return en(e,en(o,At(t,r)))},b:function(){return en(e,en(o,At(r,t)))}}}}];wl<Cm.length;wl++)RA(Cm[wl]);var DO=function(){function e(){}return e.prototype.fetch=function(n,t){return fetch(n,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(n,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},e.prototype.decode=function(n,t){return new TextDecoder(t).decode(n)},e}();Q().get("IS_BROWSER")&&Q().setPlatform("browser",new DO);var _l,FO=function(){return require("node-fetch")},PO=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(n,t){return Q().global.fetch!=null?Q().global.fetch(n,t):(_l==null&&(_l=FO()),_l(n,t))},e.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},e.prototype.encode=function(n,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(n)},e.prototype.decode=function(n,t){return n.length===0?"":new this.util.TextDecoder(t).decode(n)},e}();Q().get("IS_NODE")&&Q().setPlatform("node",new PO);var kf={float32:4,int32:4,uint16:2,uint8:1,bool:1},Tu=4;function K1(e,n){for(var t={},r=0,o=function(s){var u=s.name,c=s.dtype,l=s.shape,f=we(l),d=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=kf[h.dtype],v=e.slice(r,r+f*p),m=h.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(c==="float32")d=Float32Array.from(m,function(w){return w*h.scale+h.min});else{if(c!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+c);d=Int32Array.from(m,function(w){return Math.round(w*h.scale+h.min)})}r+=f*p}else if(c==="string"){var g=we(s.shape);d=[];for(var y=0;y<g;y++){var x=new Uint32Array(e.slice(r,r+Tu))[0];r+=Tu;var b=new Uint8Array(e.slice(r,r+x));d.push(b),r+=x}}else{var _=kf[c];if(v=e.slice(r,r+f*_),c==="float32")d=new Float32Array(v);else if(c==="int32")d=new Int32Array(v);else{if(c!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+c);d=new Uint8Array(v)}r+=f*_}t[u]=zt(d,l,c)},a=0,i=n;a<i.length;a++)o(i[a]);return t}function NO(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var n=0,t=[];e.forEach(function(a){if(n+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(n),o=0;return t.forEach(function(a){r.set(new Uint8Array(a.buffer),o),o+=a.byteLength}),r.buffer}var Rf=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Em(e){return Rf?Buffer.byteLength(e):new Blob([e]).size}function Qd(e){var n=0;e.forEach(function(o){n+=o.byteLength});var t=new Uint8Array(n),r=0;return e.forEach(function(o){t.set(new Uint8Array(o),r),r+=o.byteLength}),t.buffer}function Sm(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var n=e.split("/");return n[n.length-1]}function is(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Em(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Em(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Sn=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(n){e.getInstance().saveRouters.push(n)},e.registerLoadRouter=function(n){e.getInstance().loadRouters.push(n)},e.getSaveHandlers=function(n){return e.getHandlers(n,"save")},e.getLoadHandlers=function(n,t){return e.getHandlers(n,"load",t)},e.getHandlers=function(n,t,r){var o=[];return(t==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(a){var i=a(n,r);i!==null&&o.push(i)}),o},e}(),Ia="://",co=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(n,t){D(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(Ia)&&(n=n.slice(0,n.indexOf(Ia))),D(n.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();D(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=t},e.getManager=function(n){var t=this.getInstance().managers[n];if(t==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function $s(e){if(e.indexOf(Ia)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+co.getSchemes().join(","));return{scheme:e.split(Ia)[0],path:e.split(Ia)[1]}}function km(e,n,t){return t===void 0&&(t=!1),ge(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f;return ye(this,function(d){switch(d.label){case 0:return D(e!==n,function(){return"Old path and new path are the same: '"+e+"'"}),D((r=Sn.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),D(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),o=r[0],D((a=Sn.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),D(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),i=a[0],s=$s(e).scheme,u=$s(e).path,c=s===$s(e).scheme,[4,o.load()];case 1:return l=d.sent(),t&&c?[4,co.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,i.save(l)];case 4:return f=d.sent(),!t||c?[3,6]:[4,co.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var No="models_store",ao="model_info_store";function X1(){if(!Q().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,n=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function If(e){var n=e.result;n.createObjectStore(No,{keyPath:"modelPath"}),n.createObjectStore(ao,{keyPath:"modelPath"})}var Aa=function(){function e(n){if(this.indexedDB=X1(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return e.prototype.save=function(n){return ge(this,void 0,void 0,function(){return ye(this,function(t){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},e.prototype.load=function(){return ge(this,void 0,void 0,function(){return ye(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(n,t){var r=this;return new Promise(function(o,a){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return If(i)},i.onsuccess=function(){var s=i.result;if(t==null){var u=s.transaction(No,"readonly"),c=u.objectStore(No).get(r.modelPath);c.onsuccess=function(){if(c.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(c.result.modelArtifacts)},c.onerror=function(v){return s.close(),a(c.error)},u.oncomplete=function(){return s.close()}}else{var l,f=is(t),d=s.transaction(ao,"readwrite"),h=d.objectStore(ao),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:f});p.onsuccess=function(){var v=(l=s.transaction(No,"readwrite")).objectStore(No).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:f});v.onsuccess=function(){return o({modelArtifactsInfo:f})},v.onerror=function(m){var g=(h=d.objectStore(ao)).delete(r.modelPath);g.onsuccess=function(){return s.close(),a(v.error)},g.onerror=function(y){return s.close(),a(v.error)}}},p.onerror=function(v){return s.close(),a(p.error)},d.oncomplete=function(){l==null?s.close():l.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return a(i.error)}})},e.URL_SCHEME="indexeddb://",e}(),Rm=function(e){return Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Aa.URL_SCHEME)?(n=e.slice(Aa.URL_SCHEME.length),new Aa(n)):null;var n};Sn.registerSaveRouter(Rm),Sn.registerLoadRouter(Rm);var OO=function(){function e(){this.indexedDB=X1()}return e.prototype.listModels=function(){return ge(this,void 0,void 0,function(){var n=this;return ye(this,function(t){return[2,new Promise(function(r,o){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return If(a)},a.onsuccess=function(){var i=a.result,s=i.transaction(ao,"readonly"),u=s.objectStore(ao).getAll();u.onsuccess=function(){for(var c={},l=0,f=u.result;l<f.length;l++){var d=f[l];c[d.modelPath]=d.modelArtifactsInfo}r(c)},u.onerror=function(c){return i.close(),o(u.error)},s.oncomplete=function(){return i.close()}},a.onerror=function(i){return o(a.error)}})]})})},e.prototype.removeModel=function(n){return ge(this,void 0,void 0,function(){var t=this;return ye(this,function(r){var o;return n=(o=n).startsWith(Aa.URL_SCHEME)?o.slice(Aa.URL_SCHEME.length):o,[2,new Promise(function(a,i){var s=t.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return If(s)},s.onsuccess=function(){var u,c=s.result,l=c.transaction(ao,"readwrite"),f=l.objectStore(ao),d=f.get(n);d.onsuccess=function(){if(d.result==null)return c.close(),i(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var h=f.delete(n),p=function(){var v=(u=c.transaction(No,"readwrite")).objectStore(No).delete(n);v.onsuccess=function(){return a(d.result.modelArtifactsInfo)},v.onerror=function(m){return i(d.error)}};h.onsuccess=p,h.onerror=function(v){return p(),c.close(),i(d.error)}},d.onerror=function(h){return c.close(),i(d.error)},l.oncomplete=function(){u==null?c.close():u.oncomplete=function(){return c.close()}}},s.onerror=function(u){return i(s.error)}})]})})},e}();if(Q().getBool("IS_BROWSER"))try{co.registerManager(Aa.URL_SCHEME,new OO)}catch{}var Lr="/",va="tensorflowjs_models",Y1="info",MO="model_topology",BO="weight_specs",LO="weight_data",VO="model_metadata";function J1(e){return{info:[va,e,Y1].join(Lr),topology:[va,e,MO].join(Lr),weightSpecs:[va,e,BO].join(Lr),weightData:[va,e,LO].join(Lr),modelMetadata:[va,e,VO].join(Lr)}}function WO(e){var n=e.split(Lr);if(n.length<3)throw new Error("Invalid key format: "+e);return n.slice(1,n.length-1).join(Lr)}var Ta=function(){function e(n){if(!Q().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=J1(this.modelPath)}return e.prototype.save=function(n){return ge(this,void 0,void 0,function(){var t,r,o;return ye(this,function(a){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),o=is(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(i){if(Rf)return Buffer.from(i).toString("base64");for(var s=new Uint8Array(i),u="",c=0,l=s.length;c<l;c++)u+=String.fromCharCode(s[c]);return btoa(u)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return ge(this,void 0,void 0,function(){var n,t,r,o,a,i,s;return ye(this,function(u){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=o,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(a),t.format=i.format,t.generatedBy=i.generatedBy,t.convertedBy=i.convertedBy,t.userDefinedMetadata=i.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(c){if(Rf){var l=Buffer.from(c,"base64");return l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)}for(var f=atob(c),d=new Uint8Array(f.length),h=0;h<f.length;++h)d.set([f.charCodeAt(h)],h);return d.buffer}(s),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),Im=function(e){return Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ta.URL_SCHEME)?(n=e.slice(Ta.URL_SCHEME.length),new Ta(n)):null;var n};Sn.registerSaveRouter(Im),Sn.registerLoadRouter(Im);var UO=function(){function e(){D(Q().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),D(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return ge(this,void 0,void 0,function(){var n,t,r,o,a,i;return ye(this,function(s){for(n={},t=va+Lr,r=Lr+Y1,o=0;o<this.LS.length;++o)(a=this.LS.key(o)).startsWith(t)&&a.endsWith(r)&&(i=WO(a),n[i]=JSON.parse(this.LS.getItem(a)));return[2,n]})})},e.prototype.removeModel=function(n){return ge(this,void 0,void 0,function(){var t,r;return ye(this,function(o){var a;if(n=(a=n).startsWith(Ta.URL_SCHEME)?a.slice(Ta.URL_SCHEME.length):a,t=J1(n),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},e}();if(Q().getBool("IS_BROWSER"))try{co.registerManager(Ta.URL_SCHEME,new UO)}catch{}var zO="model",HO=".json",$O=".weights.bin";function Am(e){return new Promise(function(n){return setTimeout(n)}).then(e)}var Cl=function(){function e(n){if(!Q().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(e.URL_SCHEME)&&(n=n.slice(e.URL_SCHEME.length)),n!=null&&n.length!==0||(n=zO),this.modelTopologyFileName=n+HO,this.weightDataFileName=n+$O}return e.prototype.save=function(n){return ge(this,void 0,void 0,function(){var t,r,o,a,i,s;return ye(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],o={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,Am(function(){return i.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=t,[4,Am(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:is(n)}]}})})},e.URL_SCHEME="downloads://",e}(),jO=function(){function e(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return e.prototype.load=function(){return ge(this,void 0,void 0,function(){var n,t,r=this;return ye(this,function(o){return n=this.files[0],t=this.files.slice(1),[2,new Promise(function(a,i){var s=new FileReader;s.onload=function(u){var c=JSON.parse(u.target.result),l=c.modelTopology;if(l!=null){t.length===0&&a({modelTopology:l});var f=c.weightsManifest;if(f!=null){var d;try{d=r.checkManifestAndWeightFiles(f,t)}catch(m){return void i(m)}var h=[],p=[],v=[];f.forEach(function(m){m.paths.forEach(function(g){p.push(g),v.push(null)}),h.push.apply(h,m.weights)}),f.forEach(function(m){m.paths.forEach(function(g){var y=new FileReader;y.onload=function(x){var b=x.target.result,_=p.indexOf(g);v[_]=b,v.indexOf(null)===-1&&a({modelTopology:l,weightSpecs:h,weightData:Qd(v),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},y.onerror=function(x){return i("Failed to weights data from file of path '"+g+"'.")},y.readAsArrayBuffer(d[g])})})}else i(new Error("weightManifest field is missing from file "+n.name))}else i(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(u){return i("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},e.prototype.checkManifestAndWeightFiles=function(n,t){for(var r=[],o=t.map(function(u){return Sm(u.name)}),a={},i=0,s=n;i<s.length;i++)s[i].paths.forEach(function(u){var c=Sm(u);if(r.indexOf(c)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),o.indexOf(c)===-1)throw new Error("Weight file with basename '"+c+"' is not provided.");a[u]=t[o.indexOf(c)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return a},e}();function Tm(e,n,t,r){(function(a){D(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(e),function(a,i){D(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),D(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i}),D(i>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+i})}(t=t??0,r=r??1);var o=0;return Promise.all(e.map(function(a){return a.then(function(i){var s=t+ ++o/e.length*(r-t);return n(s),i}),a}))}function Q1(e,n){return ge(this,void 0,void 0,function(){var t,r,o,a,i,s,u,c,l;return ye(this,function(f){switch(f.label){case 0:return n==null&&(n={}),t=n.fetchFunc==null?Q().platform.fetch:n.fetchFunc,r=e.map(function(d){return t(d,n.requestInit,{isBinary:!0})}),o=0,a=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,Tm(r,n.onProgress,o,a)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map(function(d){return d.arrayBuffer()}),u=.5,c=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return l=f.sent(),[3,8];case 6:return[4,Tm(s,n.onProgress,u,c)];case 7:l=f.sent(),f.label=8;case 8:return[2,l]}})})}function Dm(e){var n=this;return function(t,r,o){return r===void 0&&(r=""),ge(n,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p;return ye(this,function(v){switch(v.label){case 0:if(a=t.map(function(){return!1}),i={},s=o!=null?o.map(function(){return!1}):[],u=[],t.forEach(function(m,g){var y=0;m.weights.forEach(function(x){var b="quantization"in x?x.quantization.dtype:x.dtype,_=kf[b]*we(x.shape),w=function(){a[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:x,groupOffset:y,sizeBytes:_})};o!=null?o.forEach(function(S,E){S===x.name&&(w(),s[E]=!0)}):w(),u.push(x.name),y+=_})}),!s.every(function(m){return m}))throw c=o.filter(function(m,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return l=a.reduce(function(m,g,y){return g&&m.push(y),m},[]),f=[],l.forEach(function(m){t[m].paths.forEach(function(g){var y=r+(r.endsWith("/")?"":"/")+g;f.push(y)})}),[4,e(f)];case 1:return d=v.sent(),h={},p=0,l.forEach(function(m){for(var g=t[m].paths.length,y=0,x=0;x<g;x++)y+=d[p+x].byteLength;for(var b=new ArrayBuffer(y),_=new Uint8Array(b),w=0,S=0;S<g;S++){var E=new Uint8Array(d[p+S]);_.set(E,w),w+=E.byteLength}i[m].forEach(function(C){var k=K1(b.slice(C.groupOffset,C.groupOffset+C.sizeBytes),[C.manifestEntry]);for(var I in k)h[I]=k[I]}),p+=g}),[2,h]}})})}}Sn.registerSaveRouter(function(e){return Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Cl.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new Cl(n)}(e.slice(Cl.URL_SCHEME.length)):null});var Z1=function(){function e(n,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(D(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=Q().platform.fetch,D(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&D(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(n){return ge(this,void 0,void 0,function(){var t,r,o,a;return ye(this,function(i){switch(i.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],o={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),n.weightData!=null&&t.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:is(n),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},e.prototype.load=function(){return ge(this,void 0,void 0,function(){var n,t,r,o,a,i,s,u,c,l,f,d;return ye(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,n.json()];case 3:return t=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=t.modelTopology,a=t.weightsManifest,i=t.generatedBy,s=t.convertedBy,u=t.format,c=t.userDefinedMetadata,o==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:d=h.sent(),l=d[0],f=d[1],h.label=7;case 7:return[2,{modelTopology:o,weightSpecs:l,weightData:f,userDefinedMetadata:c,generatedBy:i,convertedBy:s,format:u}]}})})},e.prototype.loadWeights=function(n){return ge(this,void 0,void 0,function(){var t,r,o,a,i,s,u,c,l,f,d;return ye(this,function(h){switch(h.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var v=p.lastIndexOf("/"),m=p.lastIndexOf("?"),g=p.substring(0,v),y=m>v?p.substring(m):"";return[g+"/",y]}(t),o=r[0],a=r[1],i=this.weightPathPrefix||o,s=[],u=0,c=n;u<c.length;u++)l=c[u],s.push.apply(s,l.weights);return f=[],n.forEach(function(p){p.paths.forEach(function(v){f.push(i+v+a)})}),[4,Q1(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[s,Qd(d)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Af(e){return e.match(Z1.URL_SCHEME_REGEX)!=null}var Fm=function(e,n){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(t){return Af(t)}):Af(e))?Tf(e,{onProgress:n}):null};function Tf(e,n){return new Z1(e,n)}Sn.registerSaveRouter(Fm),Sn.registerLoadRouter(Fm);var El=function(){function e(n){this.modelArtifacts=n}return e.prototype.load=function(){return ge(this,void 0,void 0,function(){return ye(this,function(n){return[2,this.modelArtifacts]})})},e}(),GO=function(){function e(n){this.saveHandler=n}return e.prototype.save=function(n){return ge(this,void 0,void 0,function(){return ye(this,function(t){return[2,this.saveHandler(n)]})})},e}(),ex=Object.freeze({browserFiles:function(e){return new jO(e)},browserHTTPRequest:function(e,n){return Tf(e,n)},concatenateArrayBuffers:Qd,decodeWeights:K1,encodeWeights:function(e,n){return ge(this,void 0,void 0,function(){var t,r,o,a,i,s=this;return ye(this,function(u){switch(u.label){case 0:for(t=[],r=[],o=Array.isArray(e)?e.map(function(c){return c.name}):Object.keys(e),a=function(c){var l=o[c],f=Array.isArray(e)?e[c].tensor:e[l];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+l+"': "+f.dtype);var d={name:l,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var h=new Promise(function(p){return ge(s,void 0,void 0,function(){var v,m,g,y,x,b,_;return ye(this,function(w){switch(w.label){case 0:return[4,f.bytes()];case 1:for(v=w.sent(),m=v.reduce(function(S,E){return S+E.length},0)+Tu*v.length,g=new Uint8Array(m),y=0,x=0;x<v.length;x++)b=v[x],_=new Uint8Array(new Uint32Array([b.length]).buffer),g.set(_,y),y+=Tu,g.set(b,y),y+=b.length;return p(g),[2]}})})});r.push(h)}else r.push(f.data());n!=null&&(d.group=n),t.push(d)},i=0;i<o.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:NO(u.sent()),specs:t}]}})})},fromMemory:function(e,n,t,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new El(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new El({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new El({modelTopology:e,weightSpecs:n,weightData:t,trainingConfig:r}))},getLoadHandlers:function(e,n){return Sn.getLoadHandlers(e,n)},getModelArtifactsInfoForJSON:is,getSaveHandlers:function(e){return Sn.getSaveHandlers(e)},http:Tf,isHTTPScheme:Af,loadWeights:function(e,n,t,r){return n===void 0&&(n=""),ge(this,void 0,void 0,function(){return ye(this,function(o){return[2,Dm(function(a){return Q1(a,{requestInit:r})})(e,n,t)]})})},registerLoadRouter:function(e){return Sn.registerLoadRouter(e)},registerSaveRouter:function(e){return Sn.registerSaveRouter(e)},weightsLoaderFactory:Dm,withSaveHandler:function(e){return new GO(e)},copyModel:function(e,n){return ge(this,void 0,void 0,function(){return ye(this,function(t){return[2,km(e,n,!1)]})})},listModels:function(){return ge(this,void 0,void 0,function(){var e,n,t,r,o,a,i;return ye(this,function(s){switch(s.label){case 0:e=co.getSchemes(),n={},t=0,r=e,s.label=1;case 1:return t<r.length?(o=r[t],[4,co.getManager(o).listModels()]):[3,4];case 2:for(i in a=s.sent())n[o+Ia+i]=a[i];s.label=3;case 3:return t++,[3,1];case 4:return[2,n]}})})},moveModel:function(e,n){return ge(this,void 0,void 0,function(){return ye(this,function(t){return[2,km(e,n,!0)]})})},removeModel:function(e){return ge(this,void 0,void 0,function(){var n;return ye(this,function(t){return n=$s(e),[2,co.getManager(n.scheme).removeModel(n.path)]})})}}),ua;O({confusionMatrix_:function(e,n,t){var r=A(e,"labels","confusionMatrix"),o=A(n,"predictions","confusionMatrix");D(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),D(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),D(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),D(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),D(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var a=wf(r.asType("int32"),t),i=wf(o.asType("int32"),t);return a.transpose().matMul(i).asType("int32")}});var qO=O({fromPixels_:function(e,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,o=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)a=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(Eb("FromPixels",M.backendName)!=null)return M.runKernel("FromPixels",{pixels:e},{numChannels:n});var s,u,c=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],f=c[1];if(i?s=e.getContext("2d").getImageData(0,0,l,f).data:r||t?s=e.data:(a||o)&&(ua==null&&(ua=document.createElement("canvas").getContext("2d")),ua.canvas.width=l,ua.canvas.height=f,ua.drawImage(e,0,0,l,f),s=ua.getImageData(0,0,l,f).data),n===4)u=new Int32Array(s);else{var d=l*f;u=new Int32Array(d*n);for(var h=0;h<d;h++)for(var p=0;p<n;++p)u[h*n+p]=s[4*h+p]}return Rd(u,[f,l,n],"int32")}}),Zd=Object.freeze({toPixels:function(e,n){return ge(this,void 0,void 0,function(){var t,r,o,a,i,s,u,c,l,f,d,h,p,v,m,g,y,x,b,_,w,S,E;return ye(this,function(C){switch(C.label){case 0:if(t=A(e,"img","toPixels"),e instanceof dt||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),o=r[0],a=r[1],(i=t.rank===2?1:t.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,t.data()];case 1:return s=C.sent(),u=t.min(),c=t.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=C.sent(),f=l[0],d=l[1],h=f[0],p=d[0],u.dispose(),c.dispose(),t.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(v=t.dtype==="float32"?255:1,m=new Uint8ClampedArray(a*o*4),g=0;g<o*a;++g)y=void 0,x=void 0,b=void 0,_=void 0,i===1?(y=s[g]*v,x=s[g]*v,b=s[g]*v,_=255):i===3?(y=s[3*g]*v,x=s[3*g+1]*v,b=s[3*g+2]*v,_=255):i===4&&(y=s[4*g]*v,x=s[4*g+1]*v,b=s[4*g+2]*v,_=s[4*g+3]*v),m[(w=4*g)+0]=Math.round(y),m[w+1]=Math.round(x),m[w+2]=Math.round(b),m[w+3]=Math.round(_);return n!=null&&(n.width=a,n.height=o,S=n.getContext("2d"),E=new ImageData(m,a,o),S.putImageData(E,0,0)),t!==e&&t.dispose(),[2,m]}})})},fromPixels:qO}),KO=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(n,t){return new n(t)},e}(),XO=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(n){e.getMap().classNameMap[n.className]=[n,n.fromConfig]},e}();function ea(e){D(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),D(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),D(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),XO.register(e)}var ta=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return Zn(n,e),n.prototype.minimize=function(t,r,o){r===void 0&&(r=!1);var a=this.computeGradients(t,o),i=a.value,s=a.grads;if(o!=null){var u=o.map(function(c){return{name:c.name,tensor:s[c.name]}});this.applyGradients(u)}else this.applyGradients(s);return pn(s),r?i:(i.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(t,r){return aD(t,r)},n.prototype.dispose=function(){this.iterations_!=null&&pn(this.iterations_)},n.prototype.saveIterations=function(){return ge(this,void 0,void 0,function(){return ye(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:he(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){return ye(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){return ye(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(t){return ge(this,void 0,void 0,function(){var r;return ye(this,function(o){switch(o.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,t.slice(1)]}})})},n}(KO);Object.defineProperty(ta,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var YO=function(e){function n(t,r,o){o===void 0&&(o=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],o==null&&(a.epsilon=M.backend.epsilon()),a}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t)).forEach(function(o,a){var i=M.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accum_grad",variable:me(function(){return Ke(i).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:o+"/accum_var",variable:me(function(){return Ke(i).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[o];if(s!=null){var u=r.accumulatedGrads[a].variable,c=r.accumulatedUpdates[a].variable;me(function(){var l=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),d=c.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(l),c.assign(d);var h=f.mul(-r.learningRate).add(i);i.assign(h)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(pn(this.accumulatedGrads.map(function(t){return t.variable})),pn(this.accumulatedUpdates.map(function(t){return t.variable})))},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){var t;return ye(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){var r;return ye(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(t)];case 1:return t=o.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(ta);ea(YO);var JO=function(e){function n(t,r){r===void 0&&(r=.1);var o=e.call(this)||this;return o.learningRate=t,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t)).forEach(function(o,a){var i=M.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accumulator",variable:me(function(){return br(i.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[o];if(s!=null){var u=r.accumulatedGrads[a].variable;me(function(){var c=u.add(s.square());u.assign(c);var l=s.div(c.add(M.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(l)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&pn(this.accumulatedGrads.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){return ye(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){return ye(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(ta);ea(JO);var QO=function(e){function n(t,r,o,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=r,i.beta2=o,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],me(function(){i.accBeta1=he(r).variable(),i.accBeta2=he(o).variable()}),a==null&&(i.epsilon=M.backend.epsilon()),i}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this,o=Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t);me(function(){var a=At(1,r.accBeta1),i=At(1,r.accBeta2);o.forEach(function(s,u){var c=M.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:me(function(){return Ke(c).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:me(function(){return Ke(c).variable(!1)})});var l=Array.isArray(t)?t[u].tensor:t[s];if(l!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedSecondMoment[u].variable,h=f.mul(r.beta1).add(l.mul(1-r.beta1)),p=d.mul(r.beta2).add(l.square().mul(1-r.beta2)),v=h.div(a),m=p.div(i);f.assign(h),d.assign(p);var g=v.div(m.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&pn(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&pn(this.accumulatedSecondMoment.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){var t;return ye(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){var r,o=this;return ye(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),me(function(){o.accBeta1.assign(Iu(o.beta1,o.iterations_+1)),o.accBeta2.assign(Iu(o.beta2,o.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(ta);ea(QO);var ZO=function(e){function n(t,r,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var s=e.call(this)||this;return s.learningRate=t,s.beta1=r,s.beta2=o,s.epsilon=a,s.decay=i,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],me(function(){s.iteration=he(0).variable(),s.accBeta1=he(r).variable()}),a==null&&(s.epsilon=M.backend.epsilon()),s}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this,o=Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t);me(function(){var a=At(1,r.accBeta1),i=zn(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(s,u){var c=M.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Ke(c).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Ke(c).variable(!1)});var l=Array.isArray(t)?t[u].tensor:t[s];if(l!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedWeightedInfNorm[u].variable,h=f.mul(r.beta1).add(l.mul(1-r.beta1)),p=d.mul(r.beta2),v=l.abs(),m=p.maximum(v);f.assign(h),d.assign(m);var g=i.div(a).mul(h.div(m.add(r.epsilon))).add(c);c.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&pn(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&pn(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){return ye(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){return ye(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(ta);ea(ZO);var tx=function(e){function n(t){var r=e.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t)).forEach(function(o,a){var i=Array.isArray(t)?t[a].tensor:t[o];if(i!=null){var s=M.registeredVariables[o];me(function(){var u=r.c.mul(i).add(s);s.assign(u)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=bT(he(-t))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){return ye(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){return ye(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(t,r){return new t(r.learningRate)},n.className="SGD",n}(ta);ea(tx);var e3=function(e){function n(t,r,o){o===void 0&&(o=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=he(a.momentum),a}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t)).forEach(function(o,a){var i=M.registeredVariables[o];r.accumulations[a]==null&&(r.accumulations[a]={originalName:o+"/momentum",variable:me(function(){return Ke(i).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(t)?t[a].tensor:t[o];u!=null&&me(function(){var c,l=r.m.mul(s).add(u);c=r.useNesterov?r.c.mul(u.add(l.mul(r.m))).add(i):r.c.mul(l).add(i),s.assign(l),i.assign(c)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&pn(this.accumulations.map(function(t){return t.variable}))},n.prototype.setMomentum=function(t){this.momentum=t},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){return ye(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){return ye(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(tx);ea(e3);var t3=function(e){function n(t,r,o,a,i){r===void 0&&(r=.9),o===void 0&&(o=0),a===void 0&&(a=null),i===void 0&&(i=!1);var s=e.call(this)||this;if(s.learningRate=t,s.decay=r,s.momentum=o,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=i,a==null&&(s.epsilon=M.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Zn(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(o){return o.name}):Object.keys(t)).forEach(function(o,a){var i=M.registeredVariables[o];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:o+"/rms",variable:me(function(){return Ke(i).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:o+"/momentum",variable:me(function(){return Ke(i).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:o+"/mg",variable:me(function(){return Ke(i).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[o];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,c=r.accumulatedMoments[a].variable;me(function(){var l=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,d=f.mul(r.decay).add(s.mul(1-r.decay)),h=c.mul(r.momentum).add(s.mul(r.learningRate).div(l.sub(d.square().add(r.epsilon)).sqrt()));u.assign(l),f.assign(d),c.assign(h);var p=i.sub(h);i.assign(p)}else{var v=u.mul(r.decay).add(s.square().mul(1-r.decay));h=c.mul(r.momentum).add(s.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),u.assign(v),c.assign(h),p=i.sub(h),i.assign(p)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&pn(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&pn(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&pn(this.accumulatedMoments.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return ge(this,void 0,void 0,function(){var t;return ye(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},n.prototype.setWeights=function(t){return ge(this,void 0,void 0,function(){var r;return ye(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(t)];case 1:return t=o.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(ta);ea(t3);dt.prototype.squaredDifference=function(e){return m1(this,e)},q=RO;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Df=function(e,n){return Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Df(e,n)};function Me(e,n){Df(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var Yt=function(){return Yt=Object.assign||function(n){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},Yt.apply(this,arguments)};function Ce(e,n,t,r){function o(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function s(l){try{c(r.next(l))}catch(f){i(f)}}function u(l){try{c(r.throw(l))}catch(f){i(f)}}function c(l){l.done?a(l.value):o(l.value).then(s,u)}c((r=r.apply(e,[])).next())})}function Ee(e,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,o=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(e,t)}catch(l){c=[6,l],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function bi(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var r=Array(e),o=0,n=0;n<t;n++)for(var a=arguments[n],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}var Da=function(){function e(n,t){if(!Wo(n)||!Wo(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:t}));this._width=n,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function wc(e,n){return e instanceof dt&&e.shape.length===n}function n3(e){return wc(e,2)}function _c(e){return wc(e,3)}function lo(e){return wc(e,4)}function r3(e){return e%1!==0}function Pm(e){return e%2===0}function o3(e,n){n===void 0&&(n=2);var t=Math.pow(10,n);return Math.floor(e*t)/t}function Nm(e){return e&&e.width&&e.height}function a3(e,n){var t=e.width,r=e.height,o=n/Math.max(r,t);return new Da(Math.round(t*o),Math.round(r*o))}function eh(e){return e.reduce(function(n,t){return n.add(t)},new Qe(0,0)).div(new Qe(e.length,e.length))}function Vi(e,n,t){return Array(e).fill(0).map(function(r,o){return n+o*t})}function Wo(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function Om(e){return Wo(e)&&0<=e&&e<=1}var Qe=function(){function e(n,t){this._x=n,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(n){return new e(this.x+n.x,this.y+n.y)},e.prototype.sub=function(n){return new e(this.x-n.x,this.y-n.y)},e.prototype.mul=function(n){return new e(this.x*n.x,this.y*n.y)},e.prototype.div=function(n){return new e(this.x/n.x,this.y/n.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),po=function(){function e(n,t){t===void 0&&(t=!0);var r=n||{},o=[r.left,r.top,r.right,r.bottom].every(Wo),a=[r.x,r.y,r.width,r.height].every(Wo);if(!a&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],c=i[2],l=i[3];e.assertIsValidBox({x:s,y:u,width:c,height:l},"Box.constructor",t),this._x=s,this._y=u,this._width=c,this._height=l}return e.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(Wo)},e.assertIsValidBox=function(n,t,r){if(r===void 0&&(r=!1),!e.isRect(n))throw new Error(t+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(t+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Qe(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Qe(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Qe(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Qe(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),t=n[0],r=n[1],o=n[2],a=n[3];return new e({x:t,y:r,width:o,height:a})},e.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),t=n[0],r=n[1],o=n[2],a=n[3];return new e({x:t,y:r,width:o,height:a})},e.prototype.toSquare=function(){var n=this,t=n.x,r=n.y,o=n.width,a=n.height,i=Math.abs(o-a);return o<a&&(t-=i/2,o+=i),a<o&&(r-=i/2,a+=i),new e({x:t,y:r,width:o,height:a})},e.prototype.rescale=function(n){var t=Nm(n)?n.width:n,r=Nm(n)?n.height:n;return new e({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},e.prototype.pad=function(n,t){var r=[this.x-n/2,this.y-t/2,this.width+n,this.height+t],o=r[0],a=r[1],i=r[2],s=r[3];return new e({x:o,y:a,width:i,height:s})},e.prototype.clipAtImageBorders=function(n,t){var r=this,o=r.x,a=r.y,i=r.right,s=r.bottom,u=Math.max(o,0),c=Math.max(a,0),l=i-u,f=s-c,d=Math.min(l,n-u),h=Math.min(f,t-c);return new e({x:u,y:c,width:d,height:h}).floor()},e.prototype.shift=function(n,t){var r=this,o=r.width,a=r.height,i=this.x+n,s=this.y+t;return new e({x:i,y:s,width:o,height:a})},e.prototype.padAtBorders=function(n,t){var r=this.width+1,o=this.height+1,a=1,i=1,s=r,u=o,c=this.left,l=this.top,f=this.right,d=this.bottom;return f>t&&(s=-f+t+r,f=t),d>n&&(u=-d+n+o,d=n),c<1&&(u=2-c,c=1),l<1&&(u=2-l,l=1),{dy:i,edy:u,dx:a,edx:s,y:l,ey:d,x:c,ex:f,w:r,h:o}},e.prototype.calibrate=function(n){return new e({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},e}(),Cc=function(e){Me(n,e);function n(t,r,o,a,i){return i===void 0&&(i=!1),e.call(this,{left:t,top:r,right:o,bottom:a},i)||this}return n}(po),nx=function(){function e(n,t,r,o,a){this._imageDims=new Da(a.width,a.height),this._score=n,this._classScore=t,this._className=r,this._box=new po(o).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new po(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(n,t){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:t})},e}(),Ar=function(e){Me(n,e);function n(t,r,o){return e.call(this,t,t,"",r,o)||this}return n.prototype.forSize=function(t,r){var o=e.prototype.forSize.call(this,t,r),a=o.score,i=o.relativeBox,s=o.imageDims;return new n(a,i,s)},n}(nx);function i3(e,n,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(e.right,n.right)-Math.max(e.left,n.left)),o=Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),a=r*o;return t?a/(e.area+n.area-a):a/Math.min(e.area,n.area)}function s3(e){var n=e.map(function(s){return s.x}),t=e.map(function(s){return s.y}),r=n.reduce(function(s,u){return u<s?u:s},1/0),o=t.reduce(function(s,u){return u<s?u:s},1/0),a=n.reduce(function(s,u){return s<u?u:s},0),i=t.reduce(function(s,u){return s<u?u:s},0);return new Cc(r,o,a,i)}function Wi(e,n,t,r){r===void 0&&(r=!0);for(var o=n.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],i=function(){var s=o.pop();a.push(s);for(var u=o,c=[],l=0;l<u.length;l++){var f=u[l],d=e[s],h=e[f];c.push(i3(d,h,r))}o=o.filter(function(p,v){return c[v]<=t})};o.length>0;)i();return a}function ss(e,n){return me(function(){var t=n[0],r=n[1],o=n[2],a=br(bi(e.shape.slice(0,3),[1]),t),i=br(bi(e.shape.slice(0,3),[1]),r),s=br(bi(e.shape.slice(0,3),[1]),o),u=St([a,i,s],3);return At(e,u)})}function u3(e,n){return n===void 0&&(n=!1),me(function(){var t=e.shape.slice(1),r=t[0],o=t[1];if(r===o)return e;var a=Math.abs(r-o),i=Math.round(a*(n?.5:1)),s=r>o?2:1,u=function(h){var p=e.shape.slice();return p[s]=h,br(p,0)},c=u(i),l=a-c.shape[s],f=n&&l?u(l):null,d=[f,e,c].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return St(d,s)})}function Sl(e){return 1/(1+Math.exp(-e))}var th=function(e){Me(n,e);function n(t,r,o,a,i){return i===void 0&&(i=!1),e.call(this,{x:t,y:r,width:o,height:a},i)||this}return n}(po),c3=.5,l3=.43,f3=.45,Du=function(){function e(n,t,r){r===void 0&&(r=new Qe(0,0));var o=t.width,a=t.height;this._imgDims=new Da(o,a),this._shift=r,this._positions=n.map(function(i){return i.mul(new Qe(o,a)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Qe(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(t){return t.sub(n._shift).div(new Qe(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(n,t){return new this.constructor(this.relativePositions,{width:n,height:t})},e.prototype.shiftBy=function(n,t){return new this.constructor(this.relativePositions,this._imgDims,new Qe(n,t))},e.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},e.prototype.align=function(n,t){if(t===void 0&&(t={}),n){var r=n instanceof Ar?n.box.floor():new po(n);return this.shiftBy(r.x,r.y).align(null,t)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=o.useDlibAlignment,i=o.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),t=n[0],r=n[1],o=n[2],a=function(f){return o.sub(f).magnitude()},i=(a(t)+a(r))/2,s=Math.floor(i/f3),u=eh(n),c=Math.floor(Math.max(0,u.x-c3*s)),l=Math.floor(Math.max(0,u.y-l3*s));return new th(c,l,Math.min(s,this.imageWidth+c),Math.min(s,this.imageHeight+l))},e.prototype.alignMinBbox=function(n){var t=s3(this.positions);return t.pad(t.width*n,t.height*n)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),d3=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],eh([t[3],t[4]])]},n}(Du),h3=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(eh)},n}(Du),Mm=function(){function e(n,t){this._label=n,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+o3(this.distance)+")":"")},e}(),Bm=function(e){Me(n,e);function n(t,r){var o=e.call(this,t)||this;return o._label=r,o}return n.assertIsValidLabeledBox=function(t,r){if(po.assertIsValidBox(t,r),!Wo(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(po),Rs=function(){function e(n,t){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},e.fromJSON=function(n){var t=n.descriptors.map(function(r){return new Float32Array(r)});return new e(n.label,t)},e}();(function(e){Me(n,e);function n(t,r,o,a){var i=e.call(this,t,r)||this;return i._score=o,i._classScore=a,i}return n.assertIsValidPredictedBox=function(t,r){if(Bm.assertIsValidLabeledBox(t,r),!Om(t.score)||!Om(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n})(Bm);function p3(e){return e.detection instanceof Ar}function nh(e,n){var t={detection:n};return Object.assign({},e,t)}function rx(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:n}}function ox(e){var n="";if(!e)try{e=require("fs")}catch(r){n=r.toString()}var t=e?function(r){return new Promise(function(o,a){e.readFile(r,function(i,s){return i?a(i):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:t}}function ax(){var e=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,t=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=ox();return Yt({Canvas:e||function(){function i(){}return i}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function i(){}return i}(),Image:n||function(){function i(){}return i}(),ImageData:global.ImageData||function(){function i(){}return i}(),Video:global.HTMLVideoElement||function(){function i(){}return i}(),createCanvasElement:t,createImageElement:r,fetch:o},a)}function ix(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function sx(){return typeof global=="object"&&typeof require=="function"&&typeof Vx<"u"&&typeof process<"u"&&!!process.version}var Ct;function v3(){if(!Ct)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Ct}function Ff(e){Ct=e}function rh(){ix()&&Ff(rx()),sx()&&Ff(ax())}function m3(e){if(Ct||rh(),!Ct)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=e.Canvas,t=n===void 0?Ct.Canvas:n,r=e.Image,o=r===void 0?Ct.Image:r;Ct.Canvas=t,Ct.Image=o,Ct.createCanvasElement=e.createCanvasElement||function(){return new t},Ct.createImageElement=e.createImageElement||function(){return new o},Ct.ImageData=e.ImageData||Ct.ImageData,Ct.Video=e.Video||Ct.Video,Ct.fetch=e.fetch||Ct.fetch,Ct.readFile=e.readFile||Ct.readFile}var tn={getEnv:v3,setEnv:Ff,initialize:rh,createBrowserEnv:rx,createFileSystem:ox,createNodejsEnv:ax,monkeyPatch:m3,isBrowser:ix,isNodejs:sx};rh();function ux(e){return!tn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Go(e){var n=tn.getEnv(),t=n.Canvas,r=n.CanvasRenderingContext2D;if(e instanceof r)return e;var o=ux(e);if(!(o instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=o.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var Lm;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Lm||(Lm={}));function cx(e){var n=tn.getEnv(),t=n.Image,r=n.Video;return e instanceof t&&e.complete||e instanceof r&&e.readyState>=3}function g3(e){return new Promise(function(n,t){if(e instanceof tn.getEnv().Canvas||cx(e))return n();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),n(a))}function o(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),t(a))}e.addEventListener("load",r),e.addEventListener("error",o)})}function lx(e){var n=tn.getEnv(),t=n.Image,r=n.Video;return e instanceof t?new Da(e.naturalWidth,e.naturalHeight):e instanceof r?new Da(e.videoWidth,e.videoHeight):new Da(e.width,e.height)}function Ec(e){var n=e.width,t=e.height,r=tn.getEnv().createCanvasElement,o=r();return o.width=n,o.height=t,o}function oh(e,n){var t=tn.getEnv().ImageData;if(!(e instanceof t)&&!cx(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=lx(e),o=r.width,a=r.height,i=Ec({width:o,height:a});return e instanceof t?Go(i).putImageData(e,0,0):Go(i).drawImage(e,0,0,o,a),i}function y3(e,n){return Ce(this,void 0,void 0,function(){var t,r,o,a,i,s;return Ee(this,function(u){switch(u.label){case 0:return t=tn.getEnv().createCanvasElement(),r=e.shape.slice(lo(e)?1:0),o=r[0],a=r[1],i=r[2],s=me(function(){return e.as3D(o,a,i).toInt()}),[4,Zd.toPixels(s,t)];case 1:return u.sent(),s.dispose(),[2,t]}})})}function Vm(e){var n=tn.getEnv(),t=n.Image,r=n.Canvas,o=n.Video;return e instanceof t||e instanceof r||e instanceof o}function b3(e,n,t){t===void 0&&(t=!1);var r=tn.getEnv(),o=r.Image,a=r.Canvas;if(!(e instanceof o||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=lx(e),s=n/Math.max(i.height,i.width),u=s*i.width,c=s*i.height,l=Ec({width:n,height:n}),f=e instanceof a?e:oh(e),d=Math.abs(u-c)/2,h=t&&u<c?d:0,p=t&&c<u?d:0;return Go(l).drawImage(f,h,p,u,c),l}var Fu=function(){function e(n,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=t,this._batchSize=n.length,n.forEach(function(o,a){if(_c(o)){r._imageTensors[a]=o,r._inputDimensions[a]=o.shape;return}if(lo(o)){var i=o.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[a]=o,r._inputDimensions[a]=o.shape.slice(1);return}var s=o instanceof tn.getEnv().Canvas?o:oh(o);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var n=this;return Vi(this.batchSize,0,1).map(function(t,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},e.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},e.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},e.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},e.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(n),r=this.getInputHeight(n);return a3({width:t,height:r},this.inputSize)},e.prototype.toBatchTensor=function(n,t){var r=this;return t===void 0&&(t=!0),this._inputSize=n,me(function(){var o=Vi(r.batchSize,0,1).map(function(i){var s=r.getInput(i);if(s instanceof dt){var u=lo(s)?s:s.expandDims();return u=u3(u,t),(u.shape[1]!==n||u.shape[2]!==n)&&(u=qd.resizeBilinear(u,[n,n])),u.as3D(n,n,3)}if(s instanceof tn.getEnv().Canvas)return Zd.fromPixels(b3(s,n,t));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=An(o.map(function(i){return i.toFloat()})).as4D(r.batchSize,n,n,3);return a})},e}();function Ot(e){return Ce(this,void 0,void 0,function(){var n,t,r;return Ee(this,function(o){switch(o.label){case 0:if(e instanceof Fu)return[2,e];if(n=Array.isArray(e)?e:[e],!n.length)throw new Error("toNetInput - empty array passed as input");return t=function(a){return Array.isArray(e)?" at input index "+a+":":""},r=n.map(ux),r.forEach(function(a,i){if(!Vm(a)&&!_c(a)&&!lo(a))throw typeof n[i]=="string"?new Error("toNetInput -"+t(i)+" string passed, but could not resolve HTMLElement for element id "+n[i]):new Error("toNetInput -"+t(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(lo(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+t(i)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return Vm(a)&&g3(a)}))];case 1:return o.sent(),[2,new Fu(r,Array.isArray(e))]}})})}function ah(e,n){return Ce(this,void 0,void 0,function(){var t,r,o,a,i,s,u;return Ee(this,function(c){switch(c.label){case 0:return t=tn.getEnv().Canvas,r=e,e instanceof t?[3,5]:[4,Ot(e)];case 1:if(o=c.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=o.getInput(0),a instanceof t?(i=a,[3,4]):[3,2];case 2:return[4,y3(a)];case 3:i=c.sent(),c.label=4;case 4:r=i,c.label=5;case 5:return s=Go(r),u=n.map(function(l){return l instanceof Ar?l.forSize(r.width,r.height).box.floor():l}).map(function(l){return l.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(l){var f=l.x,d=l.y,h=l.width,p=l.height,v=Ec({width:h,height:p});return Go(v).putImageData(s.getImageData(f,d,h,p),0,0),v})]}})})}function ih(e,n){return Ce(this,void 0,void 0,function(){return Ee(this,function(t){if(!_c(e)&&!lo(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(lo(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,me(function(){var r=e.shape.slice(lo(e)?1:0),o=r[0],a=r[1],i=r[2],s=n.map(function(c){return c instanceof Ar?c.forSize(a,o).box:c}).map(function(c){return c.clipAtImageBorders(a,o)}),u=s.map(function(c){var l=c.x,f=c.y,d=c.width,h=c.height;return B1(e.as3D(o,a,i),[f,l,0],[h,d,i])});return u})]})})}function x3(e,n){return Ce(this,void 0,void 0,function(){var t,r;return Ee(this,function(o){switch(o.label){case 0:return t=tn.getEnv().fetch,[4,t(e,n)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function w3(e){return Ce(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,x3(e)];case 1:return[2,n.sent().json()]}})})}function fx(e,n){var t=n+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:t};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var o=e.split("/").filter(function(s){return s}),a=e.endsWith(".json")?o[o.length-1]:t,i=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return i=e.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+a:i+"/"+a}}function _3(e,n){return Ce(this,void 0,void 0,function(){var t,r,o,a;return Ee(this,function(i){switch(i.label){case 0:return t=fx(e,n),r=t.manifestUri,o=t.modelBaseUri,[4,w3(r)];case 1:return a=i.sent(),[2,ex.loadWeights(a,o)]}})})}var Gr=function(){function e(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(n){var t=this.traversePropertyPath(n),r=t.obj,o=t.objProp;return r[o]},e.prototype.reassignParamFromPath=function(n,t){var r=this.traversePropertyPath(n),o=r.obj,a=r.objProp;o[a].dispose(),o[a]=t},e.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof Va})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof Va)})},e.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(t){var r=t.path,o=t.tensor;n.reassignParamFromPath(r,o.variable())})},e.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(t){var r=t.path,o=t.tensor,a=zt(o.dataSync());o.dispose(),n.reassignParamFromPath(r,a)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(t){if(n&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var t=n.tensor;return Array.from(t.dataSync())}).reduce(function(n,t){return n.concat(t)}))},e.prototype.load=function(n){return Ce(this,void 0,void 0,function(){return Ee(this,function(t){switch(t.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(n){return Ce(this,void 0,void 0,function(){var t;return Ee(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,_3(n,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(n){return Ce(this,void 0,void 0,function(){var t,r,o,a,i,s,u,c,l,f;return Ee(this,function(d){switch(d.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=tn.getEnv().readFile,r=fx(n,this.getDefaultModelName()),o=r.manifestUri,a=r.modelBaseUri,i=function(h){return Promise.all(h.map(function(p){return t(p).then(function(v){return v.buffer})}))},s=ex.weightsLoaderFactory(i),l=(c=JSON).parse,[4,t(o)];case 1:return u=l.apply(c,[d.sent().toString()]),[4,s(u,a)];case 2:return f=d.sent(),this.loadFromWeightMap(f),[2]}})})},e.prototype.loadFromWeightMap=function(n){var t=this.extractParamsFromWeigthMap(n),r=t.paramMappings,o=t.params;this._paramMappings=r,this._params=o},e.prototype.extractWeights=function(n){var t=this.extractParams(n),r=t.paramMappings,o=t.params;this._paramMappings=r,this._params=o},e.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=n.split("/").reduce(function(a,i){if(!a.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+n);return{obj:a.nextObj,objProp:i,nextObj:a.nextObj[i]}},{nextObj:this.params}),r=t.obj,o=t.objProp;if(!r||!o||!(r[o]instanceof dt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:o}},e}();function kn(e,n,t){return me(function(){var r=zd(e,n.depthwise_filter,n.pointwise_filter,t,"same");return r=He(r,n.bias),r})}function kl(e,n,t){return t===void 0&&(t=!1),me(function(){var r=ht(t?He(Un(e,n.conv0.filters,[2,2],"same"),n.conv0.bias):kn(e,n.conv0,[2,2])),o=kn(r,n.conv1,[1,1]),a=ht(He(r,o)),i=kn(a,n.conv2,[1,1]);return ht(He(r,He(o,i)))})}function Is(e,n,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),me(function(){var o=ht(t?He(Un(e,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):kn(e,n.conv0,r?[2,2]:[1,1])),a=kn(o,n.conv1,[1,1]),i=ht(He(o,a)),s=kn(i,n.conv2,[1,1]),u=ht(He(o,He(a,s))),c=kn(u,n.conv3,[1,1]);return ht(He(o,He(a,He(s,c))))})}function qn(e,n,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),me(function(){var o=He(Un(e,n.filters,[1,1],t),n.bias);return r?ht(o):o})}function qr(e,n){Object.keys(e).forEach(function(t){n.some(function(r){return r.originalPath===t})||e[t].dispose()})}function Sc(e,n){return function(t,r,o,a){var i=fn(e(t*r*o*o),[o,o,t,r]),s=_t(e(r));return n.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}}function sh(e,n){return function(t,r,o){var a=uo(e(t*r),[t,r]),i=_t(e(r));return n.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:i}}}var dx=function(){function e(n,t,r){this.depthwise_filter=n,this.pointwise_filter=t,this.bias=r}return e}();function uh(e,n){return function(t,r,o){var a=fn(e(9*t),[3,3,t,1]),i=fn(e(t*r),[1,1,t,r]),s=_t(e(r));return n.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new dx(a,i,s)}}function ch(e){return function(n){var t=e(n+"/depthwise_filter",4),r=e(n+"/pointwise_filter",4),o=e(n+"/bias",1);return new dx(t,r,o)}}function xo(e,n){return function(t,r,o){var a=e[t];if(!wc(a,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+a);return n.push({originalPath:t,paramPath:o||t}),a}}function Kr(e){var n=e;function t(o){var a=n.slice(0,o);return n=n.slice(o),a}function r(){return n}return{extractWeights:t,getRemainingWeights:r}}function hx(e,n){var t=Sc(e,n),r=uh(e,n);function o(i,s,u,c){c===void 0&&(c=!1);var l=c?t(i,s,3,u+"/conv0"):r(i,s,u+"/conv0"),f=r(s,s,u+"/conv1"),d=r(s,s,u+"/conv2");return{conv0:l,conv1:f,conv2:d}}function a(i,s,u,c){c===void 0&&(c=!1);var l=o(i,s,u,c),f=l.conv0,d=l.conv1,h=l.conv2,p=r(s,s,u+"/conv3");return{conv0:f,conv1:d,conv2:h,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function C3(e){var n=[],t=Kr(e),r=t.extractWeights,o=t.getRemainingWeights,a=hx(r,n).extractDenseBlock4Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),c=a(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{dense0:i,dense1:s,dense2:u,dense3:c}}}function px(e){return function(n){var t=e(n+"/filters",4),r=e(n+"/bias",1);return{filters:t,bias:r}}}function vx(e,n){var t=xo(e,n),r=px(t),o=ch(t);function a(s,u){u===void 0&&(u=!1);var c=u?r(s+"/conv0"):o(s+"/conv0"),l=o(s+"/conv1"),f=o(s+"/conv2");return{conv0:c,conv1:l,conv2:f}}function i(s,u){u===void 0&&(u=!1);var c=u?r(s+"/conv0"):o(s+"/conv0"),l=o(s+"/conv1"),f=o(s+"/conv2"),d=o(s+"/conv3");return{conv0:c,conv1:l,conv2:f,conv3:d}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function E3(e){var n=[],t=vx(e,n).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return qr(e,n),{params:r,paramMappings:n}}var mx=function(e){Me(n,e);function n(){return e.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return me(function(){var o=t.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=ss(o,a).div(he(255)),s=Is(i,r.dense0,!0);return s=Is(s,r.dense1),s=Is(s,r.dense2),s=Is(s,r.dense3),s=as(s,[7,7],[2,2],"valid"),s})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(t){return E3(t)},n.prototype.extractParams=function(t){return C3(t)},n}(Gr);function pr(e,n){return me(function(){return He(yc(e,n.weights),n.bias)})}function S3(e,n,t){var r=[],o=Kr(e),a=o.extractWeights,i=o.getRemainingWeights,s=sh(a,r),u=s(n,t,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function k3(e){var n=[],t=xo(e,n);function r(a){var i=t(a+"/weights",2),s=t(a+"/bias",1);return{weights:i,bias:s}}var o={fc:r("fc")};return qr(e,n),{params:o,paramMappings:n}}function gx(e){var n={},t={};return Object.keys(e).forEach(function(r){var o=r.startsWith("fc")?t:n;o[r]=e[r]}),{featureExtractorMap:n,classifierMap:t}}var yx=function(e){Me(n,e);function n(t,r){var o=e.call(this,t)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(t){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return me(function(){var a=t instanceof Fu?r.faceFeatureExtractor.forwardInput(t):t;return pr(a.as2D(a.shape[0],-1),o.fc)})},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},n.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},n.prototype.extractClassifierParams=function(t){return S3(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(t){var r=gx(t),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),k3(a)},n.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),a=o*r+o,i=t.slice(0,t.length-a),s=t.slice(t.length-a);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(s)},n}(Gr),Wm=["neutral","happy","sad","angry","fearful","disgusted","surprised"],R3=function(){function e(n){var t=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);Wm.forEach(function(r,o){t[r]=n[o]})}return e.prototype.asSortedArray=function(){var n=this;return Wm.map(function(t){return{expression:t,probability:n[t]}}).sort(function(t,r){return r.probability-t.probability})},e}(),I3=function(e){Me(n,e);function n(t){return t===void 0&&(t=new mx),e.call(this,"FaceExpressionNet",t)||this}return n.prototype.forwardInput=function(t){var r=this;return me(function(){return $r(r.runNet(t))})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.predictExpressions=function(t){return Ce(this,void 0,void 0,function(){var r,o,a,i,s=this;return Ee(this,function(u){switch(u.label){case 0:return[4,Ot(t)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(kt(o).map(function(c){return Ce(s,void 0,void 0,function(){var l;return Ee(this,function(f){switch(f.label){case 0:return[4,c.data()];case 1:return l=f.sent(),c.dispose(),[2,l]}})})}))];case 3:return a=u.sent(),o.dispose(),i=a.map(function(c){return new R3(c)}),[2,r.isBatchInput?i:i[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(yx);function bx(e,n){var t={expressions:n};return Object.assign({},e,t)}function A3(e){return p3(e)&&e.landmarks instanceof Du&&e.unshiftedLandmarks instanceof Du&&e.alignedRect instanceof Ar}function lh(e,n){var t=e.detection.box,r=n.shiftBy(t.x,t.y),o=r.align(),a=e.detection.imageDims,i=new Ar(e.detection.score,o.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:n,alignedRect:i};return Object.assign({},e,s)}function T3(e,n){var t=Sc(e,n),r=uh(e,n);function o(i,s,u){var c=r(i,s,u+"/separable_conv0"),l=r(s,s,u+"/separable_conv1"),f=t(i,s,1,u+"/expansion_conv");return{separable_conv0:c,separable_conv1:l,expansion_conv:f}}function a(i,s){var u=r(i,i,s+"/separable_conv0"),c=r(i,i,s+"/separable_conv1"),l=r(i,i,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:l}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:a}}function D3(e,n){var t=[],r=Kr(e),o=r.extractWeights,a=r.getRemainingWeights,i=T3(o,t),s=i.extractConvParams,u=i.extractSeparableConvParams,c=i.extractReductionBlockParams,l=i.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),d=c(32,64,"entry_flow/reduction_block_0"),h=c(64,128,"entry_flow/reduction_block_1"),p={conv_in:f,reduction_block_0:d,reduction_block_1:h},v={};Vi(n,0,1).forEach(function(x){v["main_block_"+x]=l(128,"middle_flow/main_block_"+x)});var m=c(128,256,"exit_flow/reduction_block"),g=u(256,512,"exit_flow/separable_conv"),y={reduction_block:m,separable_conv:g};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{entry_flow:p,middle_flow:v,exit_flow:y}}}function F3(e,n){var t=xo(e,n),r=px(t),o=ch(t);function a(s){var u=o(s+"/separable_conv0"),c=o(s+"/separable_conv1"),l=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:l}}function i(s){var u=o(s+"/separable_conv0"),c=o(s+"/separable_conv1"),l=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:l}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:a,extractMainBlockParams:i}}function P3(e,n){var t=[],r=F3(e,t),o=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),c=i("entry_flow/reduction_block_0"),l=i("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:c,reduction_block_1:l},d={};Vi(n,0,1).forEach(function(m){d["main_block_"+m]=s("middle_flow/main_block_"+m)});var h=i("exit_flow/reduction_block"),p=a("exit_flow/separable_conv"),v={reduction_block:h,separable_conv:p};return qr(e,t),{params:{entry_flow:f,middle_flow:d,exit_flow:v},paramMappings:t}}function xx(e,n,t){return He(Un(e,n.filters,t,"same"),n.bias)}function Rl(e,n,t){t===void 0&&(t=!0);var r=t?ht(e):e;return r=kn(r,n.separable_conv0,[1,1]),r=kn(ht(r),n.separable_conv1,[1,1]),r=Dt(r,[3,3],[2,2],"same"),r=He(r,xx(e,n.expansion_conv,[2,2])),r}function N3(e,n){var t=kn(ht(e),n.separable_conv0,[1,1]);return t=kn(ht(t),n.separable_conv1,[1,1]),t=kn(ht(t),n.separable_conv2,[1,1]),t=He(t,e),t}var O3=function(e){Me(n,e);function n(t){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return n.prototype.forwardInput=function(t){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return me(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=ss(a,i).div(he(256)),u=ht(xx(s,o.entry_flow.conv_in,[2,2]));return u=Rl(u,o.entry_flow.reduction_block_0,!1),u=Rl(u,o.entry_flow.reduction_block_1),Vi(r._numMainBlocks,0,1).forEach(function(c){u=N3(u,o.middle_flow["main_block_"+c])}),u=Rl(u,o.exit_flow.reduction_block),u=ht(kn(u,o.exit_flow.separable_conv,[1,1])),u})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(t){return P3(t,this._numMainBlocks)},n.prototype.extractParams=function(t){return D3(t,this._numMainBlocks)},n}(Gr);function M3(e){var n=[],t=Kr(e),r=t.extractWeights,o=t.getRemainingWeights,a=sh(r,n),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{fc:{age:i,gender:s}}}}function B3(e){var n=[],t=xo(e,n);function r(a){var i=t(a+"/weights",2),s=t(a+"/bias",1);return{weights:i,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return qr(e,n),{params:o,paramMappings:n}}var Pu;(function(e){e.FEMALE="female",e.MALE="male"})(Pu||(Pu={}));var L3=function(e){Me(n,e);function n(t){t===void 0&&(t=new O3(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(t){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return me(function(){var a=t instanceof Fu?r.faceFeatureExtractor.forwardInput(t):t,i=as(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=pr(i,o.fc.age).as1D(),u=pr(i,o.fc.gender);return{age:s,gender:u}})},n.prototype.forwardInput=function(t){var r=this;return me(function(){var o=r.runNet(t),a=o.age,i=o.gender;return{age:a,gender:$r(i)}})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.predictAgeAndGender=function(t){return Ce(this,void 0,void 0,function(){var r,o,a,i,s,u,c=this;return Ee(this,function(l){switch(l.label){case 0:return[4,Ot(t)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return o=l.sent(),a=kt(o.age),i=kt(o.gender),s=a.map(function(f,d){return{ageTensor:f,genderTensor:i[d]}}),[4,Promise.all(s.map(function(f){var d=f.ageTensor,h=f.genderTensor;return Ce(c,void 0,void 0,function(){var p,v,m,g,y;return Ee(this,function(x){switch(x.label){case 0:return[4,d.data()];case 1:return p=x.sent()[0],[4,h.data()];case 2:return v=x.sent()[0],m=v>.5,g=m?Pu.MALE:Pu.FEMALE,y=m?v:1-v,d.dispose(),h.dispose(),[2,{age:p,gender:g,genderProbability:y}]}})})}))];case 3:return u=l.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},n.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},n.prototype.extractClassifierParams=function(t){return M3(t)},n.prototype.extractParamsFromWeigthMap=function(t){var r=gx(t),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),B3(a)},n.prototype.extractParams=function(t){var r=1539,o=t.slice(0,t.length-r),a=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},n}(Gr),wx=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.postProcess=function(t,r,o){var a=o.map(function(s){var u=s.width,c=s.height,l=r/Math.max(c,u);return{width:u*l,height:c*l}}),i=a.length;return me(function(){var s=function(d,h){return An([br([68],d),br([68],h)],1).as2D(1,136).as1D()},u=function(d,h){var p=a[d],v=p.width,m=p.height;return h(v,m)?Math.abs(v-m)/2:0},c=function(d){return u(d,function(h,p){return h<p})},l=function(d){return u(d,function(h,p){return p<h})},f=t.mul(br([i,136],r)).sub(An(Array.from(Array(i),function(d,h){return s(c(h),l(h))}))).div(An(Array.from(Array(i),function(d,h){return s(a[h].width,a[h].height)})));return f})},n.prototype.forwardInput=function(t){var r=this;return me(function(){var o=r.runNet(t);return r.postProcess(o,t.inputSize,t.inputDimensions.map(function(a){var i=a[0],s=a[1];return{height:i,width:s}}))})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.detectLandmarks=function(t){return Ce(this,void 0,void 0,function(){var r,o,a,i=this;return Ee(this,function(s){switch(s.label){case 0:return[4,Ot(t)];case 1:return r=s.sent(),o=me(function(){return kt(i.forwardInput(r))}),[4,Promise.all(o.map(function(u,c){return Ce(i,void 0,void 0,function(){var l,f,d,h,p;return Ee(this,function(v){switch(v.label){case 0:return d=(f=Array).from,[4,u.data()];case 1:return l=d.apply(f,[v.sent()]),h=l.filter(function(m,g){return Pm(g)}),p=l.filter(function(m,g){return!Pm(g)}),[2,new h3(Array(68).fill(0).map(function(m,g){return new Qe(h[g],p[g])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(yx),_x=function(e){Me(n,e);function n(t){return t===void 0&&(t=new mx),e.call(this,"FaceLandmark68Net",t)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(wx);function V3(e){var n=[],t=vx(e,n).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return qr(e,n),{params:r,paramMappings:n}}function W3(e){var n=[],t=Kr(e),r=t.extractWeights,o=t.getRemainingWeights,a=hx(r,n).extractDenseBlock3Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{dense0:i,dense1:s,dense2:u}}}var U3=function(e){Me(n,e);function n(){return e.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return me(function(){var o=t.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=ss(o,a).div(he(255)),s=kl(i,r.dense0,!0);return s=kl(s,r.dense1),s=kl(s,r.dense2),s=as(s,[14,14],[2,2],"valid"),s})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(t){return V3(t)},n.prototype.extractParams=function(t){return W3(t)},n}(Gr),z3=function(e){Me(n,e);function n(t){return t===void 0&&(t=new U3),e.call(this,"FaceLandmark68TinyNet",t)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(wx);(function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n})(_x);function H3(e,n){return He(en(e,n.weights),n.biases)}function fh(e,n,t,r,o){o===void 0&&(o="same");var a=n.conv,i=a.filters,s=a.bias,u=Un(e,i,t,o);return u=He(u,s),u=H3(u,n.scale),r?ht(u):u}function $3(e,n){return fh(e,n,[1,1],!0)}function Cx(e,n){return fh(e,n,[1,1],!1)}function Ex(e,n){return fh(e,n,[2,2],!0,"valid")}function j3(e,n){function t(s,u,c){var l=e(s),f=l.length/(u*c*c);if(r3(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+l.length+", numFilters: "+u+", filterSize: "+c);return me(function(){return ho(fn(l,[u,f,c,c]),[2,3,1,0])})}function r(s,u,c,l){var f=t(s,u,c),d=_t(e(u));return n.push({paramPath:l+"/filters"},{paramPath:l+"/bias"}),{filters:f,bias:d}}function o(s,u){var c=_t(e(s)),l=_t(e(s));return n.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:c,biases:l}}function a(s,u,c,l){var f=r(s,u,c,l+"/conv"),d=o(u,l+"/scale");return{conv:f,scale:d}}function i(s,u,c,l,f){f===void 0&&(f=!1);var d=a((f?.5:1)*s,u,c,l+"/conv1"),h=a(s,u,c,l+"/conv2");return{conv1:d,conv2:h}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function G3(e){var n=Kr(e),t=n.extractWeights,r=n.getRemainingWeights,o=[],a=j3(t,o),i=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),l=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),m=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),x=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),_=s(589824,256,3,"conv256_2"),w=s(589824,256,3,"conv256_down_out"),S=me(function(){return ho(uo(t(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var E={conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:f,conv64_down:d,conv64_1:h,conv64_2:p,conv64_3:v,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:x,conv256_1:b,conv256_2:_,conv256_down_out:w,fc:S};return{params:E,paramMappings:o}}function q3(e,n){var t=xo(e,n);function r(i){var s=t(i+"/scale/weights",1),u=t(i+"/scale/biases",1);return{weights:s,biases:u}}function o(i){var s=t(i+"/conv/filters",4),u=t(i+"/conv/bias",1),c=r(i);return{conv:{filters:s,bias:u},scale:c}}function a(i){return{conv1:o(i+"/conv1"),conv2:o(i+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function K3(e){var n=[],t=q3(e,n),r=t.extractConvLayerParams,o=t.extractResidualLayerParams,a=r("conv32_down"),i=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),c=o("conv64_down"),l=o("conv64_1"),f=o("conv64_2"),d=o("conv64_3"),h=o("conv128_down"),p=o("conv128_1"),v=o("conv128_2"),m=o("conv256_down"),g=o("conv256_1"),y=o("conv256_2"),x=o("conv256_down_out"),b=e.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!n3(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var _={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:f,conv64_3:d,conv128_down:h,conv128_1:p,conv128_2:v,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:x,fc:b};return qr(e,n),{params:_,paramMappings:n}}function or(e,n){var t=$3(e,n.conv1);return t=Cx(t,n.conv2),t=He(t,e),t=ht(t),t}function As(e,n){var t=Ex(e,n.conv1);t=Cx(t,n.conv2);var r=as(e,2,2,"valid"),o=ct(r.shape),a=r.shape[3]!==t.shape[3],i=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(i){var s=bi(t.shape);s[1]=1;var u=ct(s);t=St([t,u],1);var c=bi(t.shape);c[2]=1;var l=ct(c);t=St([t,l],2)}return r=a?St([r,o],3):r,t=He(r,t),t=ht(t),t}var X3=function(e){Me(n,e);function n(){return e.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return me(function(){var o=t.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],i=ss(o,a).div(he(256)),s=Ex(i,r.conv32_down);s=Dt(s,3,2,"valid"),s=or(s,r.conv32_1),s=or(s,r.conv32_2),s=or(s,r.conv32_3),s=As(s,r.conv64_down),s=or(s,r.conv64_1),s=or(s,r.conv64_2),s=or(s,r.conv64_3),s=As(s,r.conv128_down),s=or(s,r.conv128_1),s=or(s,r.conv128_2),s=As(s,r.conv256_down),s=or(s,r.conv256_1),s=or(s,r.conv256_2),s=As(s,r.conv256_down_out);var u=s.mean([1,2]),c=yc(u,r.fc);return c})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.computeFaceDescriptor=function(t){return Ce(this,void 0,void 0,function(){var r,o,a,i=this;return Ee(this,function(s){switch(s.label){case 0:return[4,Ot(t)];case 1:return r=s.sent(),o=me(function(){return kt(i.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(t){return K3(t)},n.prototype.extractParams=function(t){return G3(t)},n}(Gr);function Sx(e,n){var t={descriptor:n};return Object.assign({},e,t)}function kx(e,n){var t={age:n};return Object.assign({},e,t)}function Rx(e,n,t){var r={gender:n,genderProbability:t};return Object.assign({},e,r)}var Ix=function(){function e(n){var t=n===void 0?{}:n,r=t.minFaceSize,o=t.scaleFactor,a=t.maxNumScales,i=t.scoreThresholds,s=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function Y3(e,n){function t(u,c){var l=fn(e(9*u),[3,3,u,1]),f=_t(e(u)),d=_t(e(u)),h=_t(e(u)),p=_t(e(u));return n.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:l,batch_norm_scale:f,batch_norm_offset:d,batch_norm_mean:h,batch_norm_variance:p}}function r(u,c,l,f,d){var h=fn(e(u*c*l*l),[l,l,u,c]),p=_t(e(c));return n.push({paramPath:f+"/filters"},{paramPath:f+"/"+(d?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function o(u,c,l,f){var d=r(u,c,l,f,!0),h=d.filters,p=d.bias;return{filters:h,batch_norm_offset:p}}function a(u,c,l){var f=t(u,l+"/depthwise_conv"),d=o(u,c,1,l+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:d}}function i(){var u=o(3,32,3,"mobilenetv1/conv_0"),c=a(32,64,"mobilenetv1/conv_1"),l=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),d=a(128,256,"mobilenetv1/conv_4"),h=a(256,256,"mobilenetv1/conv_5"),p=a(256,512,"mobilenetv1/conv_6"),v=a(512,512,"mobilenetv1/conv_7"),m=a(512,512,"mobilenetv1/conv_8"),g=a(512,512,"mobilenetv1/conv_9"),y=a(512,512,"mobilenetv1/conv_10"),x=a(512,512,"mobilenetv1/conv_11"),b=a(512,1024,"mobilenetv1/conv_12"),_=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:c,conv_2:l,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:v,conv_8:m,conv_9:g,conv_10:y,conv_11:x,conv_12:b,conv_13:_}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),c=o(256,512,3,"prediction_layer/conv_1"),l=o(512,128,1,"prediction_layer/conv_2"),f=o(128,256,3,"prediction_layer/conv_3"),d=o(256,128,1,"prediction_layer/conv_4"),h=o(128,256,3,"prediction_layer/conv_5"),p=o(256,64,1,"prediction_layer/conv_6"),v=o(64,128,3,"prediction_layer/conv_7"),m=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),y=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),x=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),_=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),w=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),S=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),E=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),C=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),k=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),I=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),R={box_encoding_predictor:m,class_predictor:g},T={box_encoding_predictor:y,class_predictor:x},N={box_encoding_predictor:b,class_predictor:_},B={box_encoding_predictor:w,class_predictor:S},H={box_encoding_predictor:E,class_predictor:C},z={box_encoding_predictor:k,class_predictor:I};return{conv_0:u,conv_1:c,conv_2:l,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:v,box_predictor_0:R,box_predictor_1:T,box_predictor_2:N,box_predictor_3:B,box_predictor_4:H,box_predictor_5:z}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function J3(e){var n=[],t=Kr(e),r=t.extractWeights,o=t.getRemainingWeights,a=Y3(r,n),i=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=i(),c=s(),l=Rd(r(5118*4),[1,5118,4]),f={extra_dim:l};if(n.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:f},paramMappings:n}}function Q3(e,n){var t=xo(e,n);function r(c,l,f){var d=t(c+"/Conv2d_"+l+"_pointwise/weights",4,f+"/filters"),h=t(c+"/Conv2d_"+l+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:d,batch_norm_offset:h}}function o(c){var l="mobilenetv1/conv_"+c,f="MobilenetV1/Conv2d_"+c+"_depthwise",d=l+"/depthwise_conv",h=l+"/pointwise_conv",p=t(f+"/depthwise_weights",4,d+"/filters"),v=t(f+"/BatchNorm/gamma",1,d+"/batch_norm_scale"),m=t(f+"/BatchNorm/beta",1,d+"/batch_norm_offset"),g=t(f+"/BatchNorm/moving_mean",1,d+"/batch_norm_mean"),y=t(f+"/BatchNorm/moving_variance",1,d+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:v,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:y},pointwise_conv:r("MobilenetV1",c,h)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function i(c,l){var f=t(c+"/weights",4,l+"/filters"),d=t(c+"/biases",1,l+"/bias");return{filters:f,bias:d}}function s(c){var l=i("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),f=i("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor");return{box_encoding_predictor:l,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function Z3(e){var n=[],t=Q3(e,n),r=t.extractMobilenetV1Params,o=t.extractPredictionLayerParams,a=e["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!_c(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:a}};return qr(e,n),{params:i,paramMappings:n}}function sr(e,n,t){return me(function(){var r=Un(e,n.filters,t,"same");return r=He(r,n.batch_norm_offset),Ld(r,0,6)})}var e4=.0010000000474974513;function t4(e,n,t){return me(function(){var r=gc(e,n.filters,t,"same");return r=_1(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,e4),Ld(r,0,6)})}function n4(e){return[2,4,6,12].some(function(n){return n===e})?[2,2]:[1,1]}function r4(e,n){return me(function(){var t=null,r=sr(e,n.conv_0,[2,2]),o=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(o.forEach(function(a,i){var s=i+1,u=n4(s);r=t4(r,a.depthwise_conv,u),r=sr(r,a.pointwise_conv,[1,1]),s===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function o4(e,n,t,r,o){var a=e.shape[0],i=Math.min(t,a),s=n.map(function(l,f){return{score:l,boxIndex:f}}).filter(function(l){return l.score>o}).sort(function(l,f){return f.score-l.score}),u=function(l){return l<=r?1:0},c=[];return s.forEach(function(l){if(!(c.length>=i)){for(var f=l.score,d=c.length-1;d>=0;--d){var h=a4(e,l.boxIndex,c[d]);if(h!==0&&(l.score*=u(h),l.score<=o))break}f===l.score&&c.push(l.boxIndex)}}),c}function a4(e,n,t){var r=e.arraySync(),o=Math.min(r[n][0],r[n][2]),a=Math.min(r[n][1],r[n][3]),i=Math.max(r[n][0],r[n][2]),s=Math.max(r[n][1],r[n][3]),u=Math.min(r[t][0],r[t][2]),c=Math.min(r[t][1],r[t][3]),l=Math.max(r[t][0],r[t][2]),f=Math.max(r[t][1],r[t][3]),d=(i-o)*(s-a),h=(l-u)*(f-c);if(d<=0||h<=0)return 0;var p=Math.max(o,u),v=Math.max(a,c),m=Math.min(i,l),g=Math.min(s,f),y=Math.max(m-p,0)*Math.max(g-v,0);return y/(d+h-y)}function i4(e){var n=kt(ho(e,[1,0])),t=[At(n[2],n[0]),At(n[3],n[1])],r=[He(n[0],zn(t[0],he(2))),He(n[1],zn(t[1],he(2)))];return{sizes:t,centers:r}}function s4(e,n){var t=i4(e),r=t.sizes,o=t.centers,a=kt(ho(n,[1,0])),i=zn(en(Sf(zn(a[2],he(5))),r[0]),he(2)),s=He(en(zn(a[0],he(10)),r[0]),o[0]),u=zn(en(Sf(zn(a[3],he(5))),r[1]),he(2)),c=He(en(zn(a[1],he(10)),r[1]),o[1]);return ho(An([At(s,i),At(c,u),He(s,i),He(c,u)]),[1,0])}function u4(e,n,t){return me(function(){var r=e.shape[0],o=s4(Hn(ka(t.extra_dim,[r,1,1]),[-1,4]),Hn(e,[-1,4]));o=Hn(o,[r,o.shape[0]/r,4]);var a=y1(xr(n,[0,0,1],[-1,-1,-1])),i=xr(a,[0,0,0],[-1,-1,1]);i=Hn(i,[r,i.shape[1]]);var s=kt(o),u=kt(i);return{boxes:s,scores:u}})}function ca(e,n){return me(function(){var t=e.shape[0],r=Hn(qn(e,n.box_encoding_predictor),[t,-1,1,4]),o=Hn(qn(e,n.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function c4(e,n,t){return me(function(){var r=sr(e,t.conv_0,[1,1]),o=sr(r,t.conv_1,[2,2]),a=sr(o,t.conv_2,[1,1]),i=sr(a,t.conv_3,[2,2]),s=sr(i,t.conv_4,[1,1]),u=sr(s,t.conv_5,[2,2]),c=sr(u,t.conv_6,[1,1]),l=sr(c,t.conv_7,[2,2]),f=ca(n,t.box_predictor_0),d=ca(e,t.box_predictor_1),h=ca(o,t.box_predictor_2),p=ca(i,t.box_predictor_3),v=ca(u,t.box_predictor_4),m=ca(l,t.box_predictor_5),g=St([f.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding],1),y=St([f.classPrediction,d.classPrediction,h.classPrediction,p.classPrediction,v.classPrediction,m.classPrediction],1);return{boxPredictions:g,classPredictions:y}})}var kc=function(){function e(n){var t=n===void 0?{}:n,r=t.minConfidence,o=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),Ax=function(e){Me(n,e);function n(){return e.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return me(function(){var o=t.toBatchTensor(512,!1).toFloat(),a=At(en(o,he(.007843137718737125)),he(1)),i=r4(a,r.mobilenetv1),s=c4(i.out,i.conv11,r.prediction_layer),u=s.boxPredictions,c=s.classPredictions;return u4(u,c,r.output_layer)})},n.prototype.forward=function(t){return Ce(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ot(t)];case 1:return[2,r.apply(this,[o.sent()])]}})})},n.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Ce(this,void 0,void 0,function(){var o,a,i,s,u,c,l,f,d,h,p,v,m,g,y,x,b,_,w,S,E;return Ee(this,function(C){switch(C.label){case 0:return o=new kc(r),a=o.maxResults,i=o.minConfidence,[4,Ot(t)];case 1:for(s=C.sent(),u=this.forwardInput(s),c=u.boxes,l=u.scores,f=c[0],d=l[0],h=1;h<c.length;h++)c[h].dispose(),l[h].dispose();return m=(v=Array).from,[4,d.data()];case 2:return p=m.apply(v,[C.sent()]),g=.5,y=o4(f,p,a,g,i),x=s.getReshapedInputDimensions(0),b=s.inputSize,_=b/x.width,w=b/x.height,S=f.arraySync(),E=y.map(function(k){var I=[Math.max(0,S[k][0]),Math.min(1,S[k][2])].map(function(z){return z*w}),R=I[0],T=I[1],N=[Math.max(0,S[k][1]),Math.min(1,S[k][3])].map(function(z){return z*_}),B=N[0],H=N[1];return new Ar(p[k],new th(B,R,H-B,T-R),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),d.dispose(),[2,E]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(t){return Z3(t)},n.prototype.extractParams=function(t){return J3(t)},n}(Gr);(function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n})(Ax);var l4=.4,f4=[new Qe(.738768,.874946),new Qe(2.42204,2.65704),new Qe(4.30971,7.04493),new Qe(10.246,4.59428),new Qe(12.6868,11.8741)],d4=[new Qe(1.603231,2.094468),new Qe(6.041143,7.080126),new Qe(2.882459,3.518061),new Qe(4.266906,5.178857),new Qe(9.041765,10.66308)],h4=[117.001,114.697,97.404],p4="tiny_yolov2_model",v4="tiny_yolov2_separable_conv_model",Ts=function(e){return typeof e=="number"};function m4(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Ts(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(n){return n||{}}).every(function(n){return Ts(n.x)&&Ts(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Ts)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function dh(e){return me(function(){var n=en(e,he(.10000000149011612));return He(ht(At(e,n)),n)})}function Jr(e,n){return me(function(){var t=Qo(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Un(t,n.conv.filters,[1,1],"valid"),t=At(t,n.bn.sub),t=en(t,n.bn.truediv),t=He(t,n.conv.bias),dh(t)})}function Qr(e,n){return me(function(){var t=Qo(e,[[0,0],[1,1],[1,1],[0,0]]);return t=zd(t,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),t=He(t,n.bias),dh(t)})}function g4(e,n){var t=Sc(e,n);function r(i,s){var u=_t(e(i)),c=_t(e(i));return n.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:c}}function o(i,s,u){var c=t(i,s,3,u+"/conv"),l=r(s,u+"/bn");return{conv:c,bn:l}}var a=uh(e,n);return{extractConvParams:t,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function y4(e,n,t,r){var o=Kr(e),a=o.extractWeights,i=o.getRemainingWeights,s=[],u=g4(a,s),c=u.extractConvParams,l=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,d;if(n.withSeparableConvs){var h=r[0],p=r[1],v=r[2],m=r[3],g=r[4],y=r[5],x=r[6],b=r[7],_=r[8],w=n.isFirstLayerConv2d?c(h,p,3,"conv0"):f(h,p,"conv0"),S=f(p,v,"conv1"),E=f(v,m,"conv2"),C=f(m,g,"conv3"),k=f(g,y,"conv4"),I=f(y,x,"conv5"),R=b?f(x,b,"conv6"):void 0,T=_?f(b,_,"conv7"):void 0,N=c(_||b||x,5*t,1,"conv8");d={conv0:w,conv1:S,conv2:E,conv3:C,conv4:k,conv5:I,conv6:R,conv7:T,conv8:N}}else{var h=r[0],p=r[1],v=r[2],m=r[3],g=r[4],y=r[5],x=r[6],b=r[7],_=r[8],w=l(h,p,"conv0"),S=l(p,v,"conv1"),E=l(v,m,"conv2"),C=l(m,g,"conv3"),k=l(g,y,"conv4"),I=l(y,x,"conv5"),R=l(x,b,"conv6"),T=l(b,_,"conv7"),N=c(_,5*t,1,"conv8");d={conv0:w,conv1:S,conv2:E,conv3:C,conv4:k,conv5:I,conv6:R,conv7:T,conv8:N}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:d,paramMappings:s}}function b4(e,n){var t=xo(e,n);function r(s){var u=t(s+"/sub",1),c=t(s+"/truediv",1);return{sub:u,truediv:c}}function o(s){var u=t(s+"/filters",4),c=t(s+"/bias",1);return{filters:u,bias:c}}function a(s){var u=o(s+"/conv"),c=r(s+"/bn");return{conv:u,bn:c}}var i=ch(t);return{extractConvParams:o,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function x4(e,n){var t=[],r=b4(e,t),o=r.extractConvParams,a=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,s;if(n.withSeparableConvs){var u=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?o("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:o("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:o("conv8")};return qr(e,t),{params:s,paramMappings:t}}var Um;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(Um||(Um={}));var hh=function(){function e(n){var t=n===void 0?{}:n,r=t.inputSize,o=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),Tx=function(e){Me(n,e);function n(t){var r=e.call(this,"TinyYolov2")||this;return m4(t),r._config=t,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(t,r){var o=Jr(t,r.conv0);return o=Dt(o,[2,2],[2,2],"same"),o=Jr(o,r.conv1),o=Dt(o,[2,2],[2,2],"same"),o=Jr(o,r.conv2),o=Dt(o,[2,2],[2,2],"same"),o=Jr(o,r.conv3),o=Dt(o,[2,2],[2,2],"same"),o=Jr(o,r.conv4),o=Dt(o,[2,2],[2,2],"same"),o=Jr(o,r.conv5),o=Dt(o,[2,2],[1,1],"same"),o=Jr(o,r.conv6),o=Jr(o,r.conv7),qn(o,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(t,r){var o=this.config.isFirstLayerConv2d?dh(qn(t,r.conv0,"valid",!1)):Qr(t,r.conv0);return o=Dt(o,[2,2],[2,2],"same"),o=Qr(o,r.conv1),o=Dt(o,[2,2],[2,2],"same"),o=Qr(o,r.conv2),o=Dt(o,[2,2],[2,2],"same"),o=Qr(o,r.conv3),o=Dt(o,[2,2],[2,2],"same"),o=Qr(o,r.conv4),o=Dt(o,[2,2],[2,2],"same"),o=Qr(o,r.conv5),o=Dt(o,[2,2],[1,1],"same"),o=r.conv6?Qr(o,r.conv6):o,o=r.conv7?Qr(o,r.conv7):o,qn(o,r.conv8,"valid",!1)},n.prototype.forwardInput=function(t,r){var o=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return me(function(){var i=t.toBatchTensor(r,!1).toFloat();return i=o.config.meanRgb?ss(i,o.config.meanRgb):i,i=i.div(he(256)),o.config.withSeparableConvs?o.runMobilenet(i,a):o.runTinyYolov2(i,a)})},n.prototype.forward=function(t,r){return Ce(this,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,Ot(t)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},n.prototype.detect=function(t,r){return r===void 0&&(r={}),Ce(this,void 0,void 0,function(){var o,a,i,s,u,c,l,f,d,h,p,v,m,g,y=this;return Ee(this,function(x){switch(x.label){case 0:return o=new hh(r),a=o.inputSize,i=o.scoreThreshold,[4,Ot(t)];case 1:return s=x.sent(),[4,this.forwardInput(s,a)];case 2:return u=x.sent(),c=me(function(){return kt(u)[0].expandDims()}),l={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(c,s.getReshapedInputDimensions(0),i)];case 3:return f=x.sent(),u.dispose(),c.dispose(),d=f.map(function(b){return b.box}),h=f.map(function(b){return b.score}),p=f.map(function(b){return b.classScore}),v=f.map(function(b){return y.config.classes[b.label]}),m=Wi(d.map(function(b){return b.rescale(a)}),h,this.config.iouThreshold,!0),g=m.map(function(b){return new nx(h[b],p[b],v[b],d[b],l)}),[2,g]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(t){return x4(t,this.config)},n.prototype.extractParams=function(t){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return y4(t,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(t,r,o){return Ce(this,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p,v,m,g,y,x,b,_,w,S,E,C,k,I,R,T,N,B,H,z,W=this;return Ee(this,function(j){switch(j.label){case 0:return a=r.width,i=r.height,s=Math.max(a,i),u=s/a,c=s/i,l=t.shape[1],f=this.config.anchors.length,d=me(function(){var Z=t.reshape([l,l,f,W.boxEncodingSize]),ae=Z.slice([0,0,0,0],[l,l,f,4]),se=Z.slice([0,0,0,4],[l,l,f,1]),pe=W.withClassScores?$r(Z.slice([0,0,0,5],[l,l,f,W.config.classes.length]),3):he(0);return[ae,se,pe]}),h=d[0],p=d[1],v=d[2],m=[],[4,p.array()];case 1:return g=j.sent(),[4,h.array()];case 2:y=j.sent(),x=0,j.label=3;case 3:if(!(x<l))return[3,12];b=0,j.label=4;case 4:if(!(b<l))return[3,11];_=0,j.label=5;case 5:return _<f?(w=Sl(g[x][b][_][0]),!o||w>o?(S=(b+Sl(y[x][b][_][0]))/l*u,E=(x+Sl(y[x][b][_][1]))/l*c,C=Math.exp(y[x][b][_][2])*this.config.anchors[_].x/l*u,k=Math.exp(y[x][b][_][3])*this.config.anchors[_].y/l*c,I=S-C/2,R=E-k/2,T={row:x,col:b,anchor:_},this.withClassScores?[4,this.extractPredictedClass(v,T)]:[3,7]):[3,9]):[3,10];case 6:return z=j.sent(),[3,8];case 7:z={classScore:1,label:0},j.label=8;case 8:N=z,B=N.classScore,H=N.label,m.push(Yt({box:new Cc(I,R,I+C,R+k),score:w,classScore:w*B,label:H},T)),j.label=9;case 9:return _++,[3,5];case 10:return b++,[3,4];case 11:return x++,[3,3];case 12:return h.dispose(),p.dispose(),v.dispose(),[2,m]}})})},n.prototype.extractPredictedClass=function(t,r){return Ce(this,void 0,void 0,function(){var o,a,i,s;return Ee(this,function(u){switch(u.label){case 0:return o=r.row,a=r.col,i=r.anchor,[4,t.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,l){return s[o][a][i][l]}).map(function(c,l){return{classScore:c,label:l}}).reduce(function(c,l){return c.classScore>l.classScore?c:l})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(Gr),w4=function(e){Me(n,e);function n(t){t===void 0&&(t=!0);var r=this,o=Object.assign({},{withSeparableConvs:t,iouThreshold:l4,classes:["face"]},t?{anchors:d4,meanRgb:h4}:{anchors:f4,withClassScores:!0});return r=e.call(this,o)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(t,r){return Ce(this,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return[4,this.detect(t,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new Ar(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?v4:p4},n.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},n}(Tx),Dx=function(e){Me(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return n}(hh),us=function(){function e(){}return e.prototype.then=function(n){return Ce(this,void 0,void 0,function(){var t;return Ee(this,function(r){switch(r.label){case 0:return t=n,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return Ce(this,void 0,void 0,function(){return Ee(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},e}();function Rc(e,n,t,r,o){return o===void 0&&(o=function(a){var i=a.alignedRect;return i}),Ce(this,void 0,void 0,function(){var a,i,s,u,c;return Ee(this,function(l){switch(l.label){case 0:return a=e.map(function(f){return A3(f)?o(f):f.detection}),s=r,s?[3,5]:n instanceof dt?[4,ih(n,a)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,ah(n,a)];case 3:u=l.sent(),l.label=4;case 4:s=u,l.label=5;case 5:return i=s,[4,t(i)];case 6:return c=l.sent(),i.forEach(function(f){return f instanceof dt&&f.dispose()}),[2,c]}})})}function ph(e,n,t,r,o){return Ce(this,void 0,void 0,function(){var a=this;return Ee(this,function(i){return[2,Rc([e],n,function(s){return Ce(a,void 0,void 0,function(){return Ee(this,function(u){return[2,t(s[0])]})})},r,o)]})})}function _4(e){return me(function(){return An(kt(e,3).reverse(),3)})}var Ds=2,Nu=12;function C4(e,n){var t=Sc(e,n),r=sh(e,n);function o(c,l){var f=_t(e(c));return n.push({paramPath:l}),f}function a(c,l,f){f===void 0&&(f=!1);var d=t(c[0],c[1],3,l+"/conv1"),h=o(c[1],l+"/prelu1_alpha"),p=t(c[1],c[2],3,l+"/conv2"),v=o(c[2],l+"/prelu2_alpha"),m=t(c[2],c[3],f?2:3,l+"/conv3"),g=o(c[3],l+"/prelu3_alpha");return{conv1:d,prelu1_alpha:h,conv2:p,prelu2_alpha:v,conv3:m,prelu3_alpha:g}}function i(){var c=a([3,10,16,32],"pnet"),l=t(32,2,1,"pnet/conv4_1"),f=t(32,4,1,"pnet/conv4_2");return Yt(Yt({},c),{conv4_1:l,conv4_2:f})}function s(){var c=a([3,28,48,64],"rnet",!0),l=r(576,128,"rnet/fc1"),f=o(128,"rnet/prelu4_alpha"),d=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return Yt(Yt({},c),{fc1:l,prelu4_alpha:f,fc2_1:d,fc2_2:h})}function u(){var c=a([3,32,64,64],"onet"),l=t(64,128,2,"onet/conv4"),f=o(128,"onet/prelu4_alpha"),d=r(1152,256,"onet/fc1"),h=o(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),v=r(256,4,"onet/fc2_2"),m=r(256,10,"onet/fc2_3");return Yt(Yt({},c),{conv4:l,prelu4_alpha:f,fc1:d,prelu5_alpha:h,fc2_1:p,fc2_2:v,fc2_3:m})}return{extractPNetParams:i,extractRNetParams:s,extractONetParams:u}}function E4(e){var n=Kr(e),t=n.extractWeights,r=n.getRemainingWeights,o=[],a=C4(t,o),i=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,c=i(),l=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:l,onet:f},paramMappings:o}}function S4(e,n){var t=xo(e,n);function r(l){var f=t(l+"/weights",4,l+"/filters"),d=t(l+"/bias",1);return{filters:f,bias:d}}function o(l){var f=t(l+"/weights",2),d=t(l+"/bias",1);return{weights:f,bias:d}}function a(l){return t(l,1)}function i(l){var f=r(l+"/conv1"),d=a(l+"/prelu1_alpha"),h=r(l+"/conv2"),p=a(l+"/prelu2_alpha"),v=r(l+"/conv3"),m=a(l+"/prelu3_alpha");return{conv1:f,prelu1_alpha:d,conv2:h,prelu2_alpha:p,conv3:v,prelu3_alpha:m}}function s(){var l=i("pnet"),f=r("pnet/conv4_1"),d=r("pnet/conv4_2");return Yt(Yt({},l),{conv4_1:f,conv4_2:d})}function u(){var l=i("rnet"),f=o("rnet/fc1"),d=a("rnet/prelu4_alpha"),h=o("rnet/fc2_1"),p=o("rnet/fc2_2");return Yt(Yt({},l),{fc1:f,prelu4_alpha:d,fc2_1:h,fc2_2:p})}function c(){var l=i("onet"),f=r("onet/conv4"),d=a("onet/prelu4_alpha"),h=o("onet/fc1"),p=a("onet/prelu5_alpha"),v=o("onet/fc2_1"),m=o("onet/fc2_2"),g=o("onet/fc2_3");return Yt(Yt({},l),{conv4:f,prelu4_alpha:d,fc1:h,prelu5_alpha:p,fc2_1:v,fc2_2:m,fc2_3:g})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:c}}function k4(e){var n=[],t=S4(e,n),r=t.extractPNetParams,o=t.extractRNetParams,a=t.extractONetParams,i=r(),s=o(),u=a();return qr(e,n),{params:{pnet:i,rnet:s,onet:u},paramMappings:n}}function Pf(e,n){var t=n[0],r=n[1];return{height:Math.floor(t*e),width:Math.floor(r*e)}}function R4(e,n,t){for(var r=t[0],o=t[1],a=Nu/e,i=[],s=Math.min(r,o)*a,u=0;s>=12;)i.push(a*Math.pow(n,u)),s=s*n,u+=1;return i}var vh=function(e){Me(n,e);function n(t,r,o,a){return e.call(this,{left:t,top:r,right:o,bottom:a},!0)||this}return n}(po);function Fx(e){return me(function(){return en(At(e,he(127.5)),he(.0078125))})}function Fa(e,n){return me(function(){return He(ht(e),en(n,Ru(ht(Ru(e)))))})}function mh(e,n,t){return t===void 0&&(t=!1),me(function(){var r=qn(e,n.conv1,"valid");return r=Fa(r,n.prelu1_alpha),r=Dt(r,t?[2,2]:[3,3],[2,2],"same"),r=qn(r,n.conv2,"valid"),r=Fa(r,n.prelu2_alpha),r=t?r:Dt(r,[3,3],[2,2],"valid"),r=qn(r,n.conv3,"valid"),r=Fa(r,n.prelu3_alpha),r})}function I4(e,n){return me(function(){var t=mh(e,n,!0),r=qn(t,n.conv4_1,"valid"),o=Mn(bc(r,3),3),a=$r(At(r,o),3),i=qn(t,n.conv4_2,"valid");return{prob:a,regions:i}})}function A4(e,n){return me(function(){var t=Pf(n,e.shape.slice(1)),r=t.height,o=t.width,a=qd.resizeBilinear(e,[r,o]),i=Fx(a);return ho(i,[0,2,1,3])})}function T4(e,n,t,r){for(var o=[],a=e.arraySync(),i=0;i<e.shape[0];i++)for(var s=0;s<e.shape[1];s++)a[i][s]>=r&&o.push(new Qe(s,i));var u=o.map(function(c){var l=new Cc(Math.round((c.y*Ds+1)/t),Math.round((c.x*Ds+1)/t),Math.round((c.y*Ds+Nu)/t),Math.round((c.x*Ds+Nu)/t)),f=a[c.y][c.x],d=n.arraySync(),h=new vh(d[c.y][c.x][0],d[c.y][c.x][1],d[c.y][c.x][2],d[c.y][c.x][3]);return{cell:l,score:f,region:h}});return u}function D4(e,n,t,r,o){o.stage1=[];var a=n.map(function(d){return me(function(){var h={scale:d},p=A4(e,d),v=Date.now(),m=I4(p,r),g=m.prob,y=m.regions;h.pnet=Date.now()-v;var x=kt(kt(g,3)[1])[0],b=kt(y)[0];return{scoresTensor:x,regionsTensor:b,scale:d,statsForScale:h}})}),i=a.map(function(d){var h=d.scoresTensor,p=d.regionsTensor,v=d.scale,m=d.statsForScale,g=T4(h,p,v,t);if(h.dispose(),p.dispose(),!g.length)return o.stage1.push(m),[];var y=Date.now(),x=Wi(g.map(function(b){return b.cell}),g.map(function(b){return b.score}),.5);return m.nms=Date.now()-y,m.numBoxes=x.length,o.stage1.push(m),x.map(function(b){return g[b]})}),s=i.reduce(function(d,h){return d.concat(h)},[]),u=[],c=[];if(s.length>0){var l=Date.now(),f=Wi(s.map(function(d){return d.cell}),s.map(function(d){return d.score}),.7);o.stage1_nms=Date.now()-l,c=f.map(function(d){return s[d].score}),u=f.map(function(d){return s[d]}).map(function(d){var h=d.cell,p=d.region;return new Cc(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:u,scores:c}}function Px(e,n,t){var r=t.width,o=t.height;return Ce(this,void 0,void 0,function(){var a,i,s,u=this;return Ee(this,function(c){switch(c.label){case 0:return a=Go(e),[4,Promise.all(n.map(function(l){return Ce(u,void 0,void 0,function(){var f,d,h,p,v,m,g,y;return Ee(this,function(x){return f=l.padAtBorders(e.height,e.width),d=f.y,h=f.ey,p=f.x,v=f.ex,m=p-1,g=d-1,y=a.getImageData(m,g,v-m,h-g),[2,tn.isNodejs()?oh(y):createImageBitmap(y)]})})}))];case 1:return i=c.sent(),s=[],i.forEach(function(l){var f=Ec({width:r,height:o}),d=Go(f);d.drawImage(l,0,0,r,o);for(var h=d.getImageData(0,0,r,o).data,p=[],v=0;v<h.length;v+=4)p.push(h[v+2]),p.push(h[v+1]),p.push(h[v]);s.push(p)}),[2,s.map(function(l){var f=me(function(){var d=ho(fn(l,[1,r,o,3]),[0,2,1,3]).toFloat();return Fx(d)});return f})]}})})}function F4(e,n){return me(function(){var t=mh(e,n),r=Hn(t,[t.shape[0],n.fc1.weights.shape[0]]),o=pr(r,n.fc1),a=Fa(o,n.prelu4_alpha),i=pr(a,n.fc2_1),s=Mn(bc(i,1),1),u=$r(At(i,s),1),c=pr(a,n.fc2_2),l=kt(u,1)[1];return{scores:l,regions:c}})}function P4(e,n,t,r,o){return Ce(this,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p,v,m,g,y;return Ee(this,function(x){switch(x.label){case 0:return a=Date.now(),[4,Px(e,n,{width:24,height:24})];case 1:return i=x.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(b){var _=F4(b,r);return b.dispose(),_}),o.stage2_rnet=Date.now()-a,u=s.length>1?St(s.map(function(b){return b.scores})):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[x.sent()]),u.dispose(),d=c.map(function(b,_){return{score:b,idx:_}}).filter(function(b){return b.score>t}).map(function(b){var _=b.idx;return _}),h=d.map(function(b){return n[b]}),p=d.map(function(b){return c[b]}),v=[],m=[],h.length>0&&(a=Date.now(),g=Wi(h,p,.7),o.stage2_nms=Date.now()-a,y=g.map(function(b){var _=s[d[b]].regions.arraySync();return new vh(_[0][0],_[0][1],_[0][2],_[0][3])}),m=g.map(function(b){return p[b]}),v=g.map(function(b,_){return h[b].calibrate(y[_])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:v,scores:m}]}})})}function N4(e,n){return me(function(){var t=mh(e,n);t=Dt(t,[2,2],[2,2],"same"),t=qn(t,n.conv4,"valid"),t=Fa(t,n.prelu4_alpha);var r=Hn(t,[t.shape[0],n.fc1.weights.shape[0]]),o=pr(r,n.fc1),a=Fa(o,n.prelu5_alpha),i=pr(a,n.fc2_1),s=Mn(bc(i,1),1),u=$r(At(i,s),1),c=pr(a,n.fc2_2),l=pr(a,n.fc2_3),f=kt(u,1)[1];return{scores:f,regions:c,points:l}})}function O4(e,n,t,r,o){return Ce(this,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p,v,m,g,y,x;return Ee(this,function(b){switch(b.label){case 0:return a=Date.now(),[4,Px(e,n,{width:48,height:48})];case 1:return i=b.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(_){var w=N4(_,r);return _.dispose(),w}),o.stage3_onet=Date.now()-a,u=s.length>1?St(s.map(function(_){return _.scores})):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[b.sent()]),u.dispose(),d=c.map(function(_,w){return{score:_,idx:w}}).filter(function(_){return _.score>t}).map(function(_){var w=_.idx;return w}),h=d.map(function(_){var w=s[_].regions.arraySync();return new vh(w[0][0],w[0][1],w[0][2],w[0][3])}),p=d.map(function(_,w){return n[_].calibrate(h[w])}),v=d.map(function(_){return c[_]}),m=[],g=[],y=[],p.length>0&&(a=Date.now(),x=Wi(p,v,.7,!1),o.stage3_nms=Date.now()-a,m=x.map(function(_){return p[_]}),g=x.map(function(_){return v[_]}),y=x.map(function(_,w){return Array(5).fill(0).map(function(S,E){var C=s[_].points.arraySync();return new Qe(C[0][E]*(m[w].width+1)+m[w].left,C[0][E+5]*(m[w].height+1)+m[w].top)})})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose(),_.points.dispose()}),[2,{boxes:m,scores:g,points:y}]}})})}var M4=function(e){Me(n,e);function n(){return e.call(this,"Mtcnn")||this}return n.prototype.load=function(t){return Ce(this,void 0,void 0,function(){return Ee(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},n.prototype.loadFromDisk=function(t){return Ce(this,void 0,void 0,function(){return Ee(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},n.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Ce(this,void 0,void 0,function(){var o,a,i,s,u,c,l,f,d,h,p,v,m,g,y,x,b,_,w,S,E;return Ee(this,function(C){switch(C.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(a=t.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},s=Date.now(),u=me(function(){return _4(Mn(Zd.fromPixels(a)).toFloat())}),c=function(k){return u.dispose(),i.total=Date.now()-s,k},l=u.shape.slice(1),f=l[0],d=l[1],h=new Ix(r),p=h.minFaceSize,v=h.scaleFactor,m=h.maxNumScales,g=h.scoreThresholds,y=h.scaleSteps,x=(y||R4(p,v,[f,d])).filter(function(k){var I=Pf(k,[f,d]);return Math.min(I.width,I.height)>Nu}).slice(0,m),i.scales=x,i.pyramid=x.map(function(k){return Pf(k,[f,d])}),b=Date.now(),[4,D4(u,x,g[0],o.pnet,i)];case 1:return _=C.sent(),i.total_stage1=Date.now()-b,_.boxes.length?(i.stage2_numInputBoxes=_.boxes.length,b=Date.now(),[4,P4(a,_.boxes,g[1],o.rnet,i)]):[2,c({results:[],stats:i})];case 2:return w=C.sent(),i.total_stage2=Date.now()-b,w.boxes.length?(i.stage3_numInputBoxes=w.boxes.length,b=Date.now(),[4,O4(a,w.boxes,g[2],o.onet,i)]):[2,c({results:[],stats:i})];case 3:return S=C.sent(),i.total_stage3=Date.now()-b,E=S.boxes.map(function(k,I){return lh(nh({},new Ar(S.scores[I],new th(k.left/d,k.top/f,k.width/d,k.height/f),{height:f,width:d})),new d3(S.points[I].map(function(R){return R.sub(new Qe(k.left,k.top)).div(new Qe(k.width,k.height))}),{width:k.width,height:k.height}))}),[2,c({results:E,stats:i})]}})})},n.prototype.forward=function(t,r){return r===void 0&&(r={}),Ce(this,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,Ot(t)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},n.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Ce(this,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,Ot(t)];case 1:return[2,o.apply(this,[a.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(t){return k4(t)},n.prototype.extractParams=function(t){return E4(t)},n}(Gr),B4=.4,L4=[new Qe(1.603231,2.094468),new Qe(6.041143,7.080126),new Qe(2.882459,3.518061),new Qe(4.266906,5.178857),new Qe(9.041765,10.66308)],V4=[117.001,114.697,97.404],W4=function(e){Me(n,e);function n(){var t=this,r={withSeparableConvs:!0,iouThreshold:B4,classes:["face"],anchors:L4,meanRgb:V4,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=e.call(this,r)||this,t}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(t,r){return Ce(this,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return[4,this.detect(t,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new Ar(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},n}(Tx),Vn={ssdMobilenetv1:new Ax,tinyFaceDetector:new W4,tinyYolov2:new w4,mtcnn:new M4,faceLandmark68Net:new _x,faceLandmark68TinyNet:new z3,faceRecognitionNet:new X3,faceExpressionNet:new I3,ageGenderNet:new L3},Nx=function(e){Me(n,e);function n(t,r,o){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a.extractedFaces=o,a}return n}(us),gh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r,o=this;return Ee(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,Rc(t,this.input,function(i){return Ce(o,void 0,void 0,function(){return Ee(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Vn.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,t.map(function(i,s){return bx(i,r[s])})]}})})},n.prototype.withAgeAndGender=function(){return new wh(this,this.input)},n}(Nx),yh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r;return Ee(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),t?[4,ph(t,this.input,function(a){return Vn.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,bx(t,r)]}})})},n.prototype.withAgeAndGender=function(){return new _h(this,this.input)},n}(Nx),bh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Ch(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Sh(this,this.input)},n}(gh),xh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Eh(this,this.input)},n.prototype.withFaceDescriptor=function(){return new kh(this,this.input)},n}(yh),Ox=function(e){Me(n,e);function n(t,r,o){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a.extractedFaces=o,a}return n}(us),wh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r,o=this;return Ee(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,Rc(t,this.input,function(i){return Ce(o,void 0,void 0,function(){return Ee(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Vn.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,t.map(function(i,s){var u=r[s],c=u.age,l=u.gender,f=u.genderProbability;return kx(Rx(i,l,f),c)})]}})})},n.prototype.withFaceExpressions=function(){return new gh(this,this.input)},n}(Ox),_h=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r,o,a,i;return Ee(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return t=s.sent(),t?[4,ph(t,this.input,function(u){return Vn.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,a=r.gender,i=r.genderProbability,[2,kx(Rx(t,a,i),o)]}})})},n.prototype.withFaceExpressions=function(){return new yh(this,this.input)},n}(Ox),Ch=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new bh(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Sh(this,this.input)},n}(wh),Eh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new xh(this,this.input)},n.prototype.withFaceDescriptor=function(){return new kh(this,this.input)},n}(_h),Mx=function(e){Me(n,e);function n(t,r){var o=e.call(this)||this;return o.parentTask=t,o.input=r,o}return n}(us),Sh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r;return Ee(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),[4,Rc(t,this.input,function(a){return Promise.all(a.map(function(i){return Vn.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(a,i){return Sx(t[i],a)})]}})})},n.prototype.withFaceExpressions=function(){return new bh(this,this.input)},n.prototype.withAgeAndGender=function(){return new Ch(this,this.input)},n}(Mx),kh=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r;return Ee(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),t?[4,ph(t,this.input,function(a){return Vn.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,Sx(t,r)]}})})},n.prototype.withFaceExpressions=function(){return new xh(this,this.input)},n.prototype.withAgeAndGender=function(){return new Eh(this,this.input)},n}(Mx),Bx=function(e){Me(n,e);function n(t,r,o){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a.useTinyLandmarkNet=o,a}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Vn.faceLandmark68TinyNet:Vn.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(us),U4=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r,o,a,i,s=this;return Ee(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),r=t.map(function(c){return c.detection}),this.input instanceof dt?[4,ih(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,ah(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return o=a,[4,Promise.all(o.map(function(c){return s.landmarkNet.detectLandmarks(c)}))];case 6:return i=u.sent(),o.forEach(function(c){return c instanceof dt&&c.dispose()}),[2,t.map(function(c,l){return lh(c,i[l])})]}})})},n.prototype.withFaceExpressions=function(){return new bh(this,this.input)},n.prototype.withAgeAndGender=function(){return new Ch(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Sh(this,this.input)},n}(Bx),z4=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r,o,a,i;return Ee(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return t=s.sent(),t?(r=t.detection,this.input instanceof dt?[4,ih(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,ah(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return o=a,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return i=s.sent(),o.forEach(function(u){return u instanceof dt&&u.dispose()}),[2,lh(t,i)]}})})},n.prototype.withFaceExpressions=function(){return new xh(this,this.input)},n.prototype.withAgeAndGender=function(){return new Eh(this,this.input)},n.prototype.withFaceDescriptor=function(){return new kh(this,this.input)},n}(Bx),Lx=function(e){Me(n,e);function n(t,r){r===void 0&&(r=new kc);var o=e.call(this)||this;return o.input=t,o.options=r,o}return n}(us),H4=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r,o,a;return Ee(this,function(i){switch(i.label){case 0:return t=this,r=t.input,o=t.options,o instanceof Ix?[4,Vn.mtcnn.forward(r,o)]:[3,2];case 1:return[2,i.sent().map(function(s){return s.detection})];case 2:if(a=o instanceof Dx?function(s){return Vn.tinyFaceDetector.locateFaces(s,o)}:o instanceof kc?function(s){return Vn.ssdMobilenetv1.locateFaces(s,o)}:o instanceof hh?function(s){return Vn.tinyYolov2.locateFaces(s,o)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Ce(t,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o.map(function(i){return nh({},i)}))]}})})})},n.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new U4(this.runAndExtendWithFaceDetections(),this.input,t)},n.prototype.withFaceExpressions=function(){return new gh(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new wh(this.runAndExtendWithFaceDetections(),this.input)},n}(Lx),$4=function(e){Me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Ce(this,void 0,void 0,function(){var t,r;return Ee(this,function(o){switch(o.label){case 0:return[4,new H4(this.input,this.options)];case 1:return t=o.sent(),r=t[0],t.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Ce(t,void 0,void 0,function(){var o;return Ee(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o?nh({},o):void 0)]}})})})},n.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new z4(this.runAndExtendWithFaceDetection(),this.input,t)},n.prototype.withFaceExpressions=function(){return new yh(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new _h(this.runAndExtendWithFaceDetection(),this.input)},n}(Lx);function j4(e,n){return n===void 0&&(n=new kc),new $4(e,n)}function G4(e,n){if(e.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(e),r=Array.from(n);return Math.sqrt(t.map(function(o,a){return o-r[a]}).reduce(function(o,a){return o+Math.pow(a,2)},0))}(function(){function e(n,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,a=function(){return"person "+o++};this._labeledDescriptors=r.map(function(i){if(i instanceof Rs)return i;if(i instanceof Float32Array)return new Rs(a(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new Rs(a(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(n,t){return t.map(function(r){return G4(r,n)}).reduce(function(r,o){return r+o},0)/(t.length||1)},e.prototype.matchDescriptor=function(n){var t=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,a=r.label;return new Mm(a,t.computeMeanDistance(n,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},e.prototype.findBestMatch=function(n){var t=this.matchDescriptor(n);return t.distance<this.distanceThreshold?t:new Mm("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},e.fromJSON=function(n){var t=n.labeledDescriptors.map(function(r){return Rs.fromJSON(r)});return new e(t,n.distanceThreshold)},e})();const q4={class:"wrapper"},K4={class:"upload-container"},X4={key:0,class:"preview-box"},Y4=["src"],J4=["disabled"],Q4=cn({__name:"UploadSelfieView",setup(e){const n=Cr(),t=ve(""),r=ve(""),o=ve(null),a=ve(null),i=ve(!1);jt(async()=>{var m,g,y,x,b;const p=localStorage.getItem("access_token");if(!p)return;try{const w=((m=(await Ye.get("https://krawd.antarasuara.com/api/v1/users/profile",{headers:{"X-Access-Token":`Bearer ${p}`}})).data)==null?void 0:m.data)||{},S=(y=(g=w.user_photos)==null?void 0:g[0])==null?void 0:y.people_face_url,E=w.users_fullname,C=(b=(x=w.user_photos)==null?void 0:x[0])==null?void 0:b.people_external_ref;S&&E&&C&&n.replace("/photo-match")}catch(_){console.error("Gagal mengecek profil:",_)}const v=localStorage.getItem("captured_selfie");if(v)try{const _=await u(v);a.value=_,o.value=s(_,"image/jpeg")}catch(_){alert("Gagal crop wajah: "+_.message)}});function s(p,v){const m=atob(p.split(",")[1]),g=new ArrayBuffer(m.length),y=new Uint8Array(g);for(let x=0;x<m.length;x++)y[x]=m.charCodeAt(x);return new Blob([y],{type:v})}async function u(p){const v=new Image;v.src=p,await new Promise(C=>v.onload=C);const m=document.createElement("canvas"),g=await j4(v,new Dx);if(!g)throw new Error("Wajah tidak terdeteksi");const y=g.box,x=30,b=Math.max(0,y.x-x),_=Math.max(0,y.y-x),w=Math.min(v.width-b,y.width+2*x),S=Math.min(v.height-_,y.height+2*x);return m.width=w,m.height=S,m.getContext("2d").drawImage(v,b,_,w,S,0,0,w,S),m.toDataURL("image/jpeg")}function c(){n.push("/camera-capture")}async function l(){if(!o.value){n.push("/photo-match");return}await f()}async function f(){if(!o.value||!r.value){alert("Mohon masukkan kode invoice tiket dan pilih foto untuk diunggah.");return}i.value=!0;try{const v=`${r.value}_${Date.now()}.jpg`,m=localStorage.getItem("access_token"),g={"X-Access-Token":`Bearer ${m}`},y=new FormData;y.append("content_type","image/jpeg"),y.append("file_name",`images/${v}`),y.append("file",o.value,v);const _=(await(await fetch("https://krawd.antarasuara.com/api/v1/face-rekognition/upload-image",{method:"POST",headers:g,body:y})).json()).data.url_file,w={"X-Access-Token":`Bearer ${m}`,"Content-Type":"application/json"},S=JSON.stringify({image_url_hq:_,image_url_compressed:_,image_url_watermarked:_,event_name:"concert-2024",event_code:"concert-2024",index_type:"face",image_price_amount:0,people_external_ref:r.value});await fetch("https://krawd.antarasuara.com/api/v1/face-rekognition/index",{method:"POST",headers:w,body:S}),n.push("/photo-match")}catch(p){console.error("Upload failed:",p),alert("Gagal mengunggah foto. Silakan coba lagi.")}finally{i.value=!1}}function d(){n.push("/photo-match")}function h(){n.back()}return(p,v)=>(xe(),Fe("div",q4,[U("header",{class:"header"},[U("button",{class:"back-btn",onClick:h},"")]),U("div",K4,[v[2]||(v[2]=U("h2",null,"Upload Foto Selfie",-1)),v[3]||(v[3]=U("p",null,"Masukkan data untuk bantu pencocokan wajah kamu dengan foto konser.",-1)),un(U("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=m=>t.value=m),placeholder:"Nama Lengkap"},null,512),[[Mo,t.value]]),un(U("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=m=>r.value=m),placeholder:"Kode Invoice Tiket"},null,512),[[Mo,r.value]]),a.value?(xe(),Fe("div",X4,[U("img",{src:a.value,alt:"Preview Foto"},null,8,Y4)])):xn("",!0),U("button",{class:"camera-btn",onClick:c},at(a.value?"Ambil Ulang":"Ambil Foto dari Kamera"),1),U("button",{class:"continue-btn",disabled:!o.value,onClick:l},at(i.value?"Uploading...":"Lanjutkan"),9,J4),U("button",{class:"skip-btn",onClick:d},"Lewati")])]))}}),Z4=Bt(Q4,[["__scopeId","data-v-3ecc0bf0"]]),eM={name:"RegisterView",data(){return{email:"",loading:!1,errorMessage:""}},computed:{isFormValid(){return this.email&&this.email.includes("@")}},methods:{async submitForm(){this.loading=!0,this.errorMessage="";try{const e=await fetch("https://krawd.antarasuara.com/api/v1/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({users_username:this.email,users_agree_tnc_at:new Date().toISOString(),users_recieve_marketing_promotion:localStorage.getItem("receive_marketing")==="true",users_recieve_marketing_promotion_at:new Date().toISOString()})}),n=await e.json();e.ok&&n.status?this.$router.push({path:"/otp-verification",query:{email:this.email}}):this.errorMessage=n.message||"Gagal mengirim OTP. Coba lagi."}catch{this.errorMessage="Terjadi kesalahan jaringan. Silakan coba beberapa saat lagi."}finally{this.loading=!1}},goBack(){this.$router.back()}}},tM={class:"wrapper"},nM={class:"header"},rM={class:"form-container"},oM=["disabled"],aM={key:0,class:"error-message"};function iM(e,n,t,r,o,a){return xe(),Fe("div",tM,[U("header",nM,[U("button",{class:"back-btn",onClick:n[0]||(n[0]=(...i)=>a.goBack&&a.goBack(...i))},"")]),U("div",rM,[n[4]||(n[4]=U("h2",null,"Masukkan Email Kamu",-1)),n[5]||(n[5]=U("p",null,"Email akan digunakan untuk mengirimkan kode OTP untuk verifikasi identitasmu.",-1)),U("form",{onSubmit:n[2]||(n[2]=vy((...i)=>a.submitForm&&a.submitForm(...i),["prevent"]))},[n[3]||(n[3]=U("label",null,"Email",-1)),un(U("input",{type:"email","onUpdate:modelValue":n[1]||(n[1]=i=>o.email=i),required:""},null,512),[[Mo,o.email]]),U("button",{class:"submit-btn",disabled:!a.isFormValid||o.loading},at(o.loading?"Mengirim...":"Kirim Kode OTP"),9,oM)],32),o.errorMessage?(xe(),Fe("p",aM,at(o.errorMessage),1)):xn("",!0)])])}const sM=Bt(eM,[["render",iM],["__scopeId","data-v-e75e08ef"]]),uM={name:"OtpVerificationView",data(){return{otp:"",timer:60,intervalId:null,email:""}},mounted(){this.startCountdown()},beforeDestroy(){clearInterval(this.intervalId)},beforeRouteEnter(e,n,t){e.query.email?t(r=>{r.email=e.query.email}):t({path:"/ticket-data"})},methods:{startCountdown(){this.timer=60,this.intervalId=setInterval(()=>{this.timer>0?this.timer--:clearInterval(this.intervalId)},1e3)},async resendOtp(){try{(await Ye.post("https://krawd.antarasuara.com/api/v1/users/otp/resend",{email:this.email})).data.status?(alert("OTP baru telah dikirim ke email kamu."),this.startCountdown()):alert("Gagal mengirim ulang OTP. Silakan coba lagi.")}catch(e){console.error("Error resending OTP:",e),alert("Terjadi kesalahan. Silakan coba lagi.")}},async submitOtp(){try{const e=await Ye.get(`https://krawd.antarasuara.com/api/v1/users/otp/check?otp=${this.otp}&email=${this.email}`);if(e.data.status){const n=e.data.data;localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token),localStorage.setItem("access_token_expiration",n.access_token_expiration),localStorage.setItem("refresh_payload_expiration",n.refresh_payload_expiration),localStorage.setItem("users_username",n.users_username),this.$router.push("/upload-selfie")}else alert("OTP tidak valid. Silakan coba lagi.")}catch(e){console.error("Error verifying OTP:",e),alert("Terjadi kesalahan saat memverifikasi OTP.")}},goBack(){this.$router.back()}}},cM={class:"wrapper"},lM={class:"header"},fM={class:"otp-container"},dM=["disabled"],hM={class:"resend-info"},pM={key:0};function vM(e,n,t,r,o,a){return xe(),Fe("div",cM,[U("header",lM,[U("button",{class:"back-btn",onClick:n[0]||(n[0]=(...i)=>a.goBack&&a.goBack(...i))},"")]),U("div",fM,[n[4]||(n[4]=U("h2",null,"Verifikasi Email",-1)),n[5]||(n[5]=U("p",null,"Masukkan kode OTP yang telah kami kirim ke email kamu.",-1)),un(U("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=i=>o.otp=i),maxlength:"6",placeholder:"Masukkan 6 digit kode"},null,512),[[Mo,o.otp]]),U("button",{class:"submit-btn",disabled:o.otp.length!==6,onClick:n[2]||(n[2]=(...i)=>a.submitOtp&&a.submitOtp(...i))}," Verifikasi ",8,dM),U("div",hM,[o.timer>0?(xe(),Fe("span",pM,"Kirim ulang OTP dalam "+at(o.timer)+" detik",1)):(xe(),Fe("button",{key:1,class:"resend-btn",onClick:n[3]||(n[3]=(...i)=>a.resendOtp&&a.resendOtp(...i))}," Kirim Ulang OTP "))])])])}const mM=Bt(uM,[["render",vM],["__scopeId","data-v-d12bfac4"]]);function gM(e){return{all:e=e||new Map,on:function(n,t){var r=e.get(n);r?r.push(t):e.set(n,[t])},off:function(n,t){var r=e.get(n);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(n,[]))},emit:function(n,t){var r=e.get(n);r&&r.slice().map(function(o){o(t)}),(r=e.get("*"))&&r.slice().map(function(o){o(n,t)})}}}const Ou=gM(),yM={class:"wrapper"},bM={class:"main-content"},xM={class:"bottom-nav"},wM={key:0,class:"badge"},_M=cn({__name:"DefaultLayout",setup(e){const n=Ay(),t=i=>n.path===i,r=ve(0),o=()=>{const i=localStorage.getItem("photo_cart");r.value=i?JSON.parse(i).length:0},a=()=>{o()};return jt(()=>{o(),Ou.on("cart-updated",a)}),Dn(()=>{Ou.off("cart-updated",a)}),(i,s)=>(xe(),Fe("div",yM,[s[8]||(s[8]=U("header",{class:"main-header"},[U("img",{src:wb,alt:"Krawd Logo",class:"logo"})],-1)),U("main",bM,[$w(i.$slots,"default",{},void 0)]),U("nav",xM,[U("button",{class:dr({active:t("/photo-match")}),onClick:s[0]||(s[0]=u=>i.$router.push("/photo-match"))},s[4]||(s[4]=[U("span",{class:"material-icons"},"home",-1)]),2),U("button",{class:dr([{active:t("/cart")},"cart-button"]),onClick:s[1]||(s[1]=u=>i.$router.push("/cart"))},[s[5]||(s[5]=U("span",{class:"material-icons cart-icon"},"shopping_cart",-1)),r.value>0?(xe(),Fe("span",wM,at(r.value),1)):xn("",!0)],2),U("button",{class:dr({active:t("/orders")}),onClick:s[2]||(s[2]=u=>i.$router.push("/orders"))},s[6]||(s[6]=[U("span",{class:"material-icons"},"inventory",-1)]),2),U("button",{class:dr({active:t("/profile")}),onClick:s[3]||(s[3]=u=>i.$router.push("/profile"))},s[7]||(s[7]=[U("span",{class:"material-icons"},"person",-1)]),2)])]))}}),cs=Bt(_M,[["__scopeId","data-v-7e6aaa25"]]),CM={class:"result-container"},EM={key:0,class:"selfie-prompt"},SM={class:"filter-tabs mt-5"},kM=["onClick"],RM={key:1,class:"refresh-indicator"},IM={class:"photo-grid"},AM={class:"photo-wrapper"},TM=["src","alt"],DM={class:"photo-info"},FM={class:"price"},PM=["onClick","disabled"],NM={class:"photo-grid"},OM={class:"photo-wrapper"},MM=["src","alt"],BM={class:"photo-info"},LM={class:"price"},VM=["onClick","disabled"],WM={key:4,class:"loading-spinner"},UM={key:5,class:"no-match"},zM=cn({__name:"PhotoMatchView",setup(e){const n=ve([]),t=ve([]),r=ve(1),o=ve(0),a=ve(!1),i=ve(!1),s=ve(null),u=ve(!1),c=ve(null),l=ve([]),f=ve("all"),d=[{value:"all",label:"Semua"},{value:"face",label:"Foto"},{value:"souvenir",label:"Souvenir"}],h=S=>S.toLocaleString("id-ID",{minimumFractionDigits:0}),p=()=>{const S=localStorage.getItem("photo_cart");l.value=S?JSON.parse(S):[]},v=()=>{localStorage.setItem("photo_cart",JSON.stringify(l.value)),Ou.emit("cart-updated")},m=S=>l.value.some(E=>E.product_id===S),g=S=>{m(S.product_id)||(l.value.push({product_id:S.product_id,url:S.pe_watermarked_image_url}),v(),alert("Item ditambahkan ke keranjang."))},y=async()=>{var E;if(a.value||o.value&&r.value>o.value)return;a.value=!0;const S=localStorage.getItem("access_token");try{const C=await Ye.get("https://krawd.antarasuara.com/api/v1/face-rekognition/people/events",{headers:{"X-Access-Token":`Bearer ${S}`},params:{page:r.value,page_size:10}}),{data:k}=C.data;r.value===1?n.value=k.people_events:n.value.push(...k.people_events),o.value=Math.ceil(k.total/k.page_size),r.value++}catch(C){((E=C.response)==null?void 0:E.status)===401?(alert("Sesi kamu telah habis. Silakan masuk kembali."),localStorage.removeItem("access_token"),window.location.href="/"):console.error("Error fetching photos:",C)}finally{a.value=!1,i.value=!1}},x=async()=>{try{const S=await Ye.get("https://krawd.antarasuara.com/api/v1/face-rekognition/people/events",{headers:{Authorization:"Bearer fcb87d07c97a9f08d14967372a9d5485425c00d66db550652edfadc9897ae1eb"},params:{page:1,page_size:20,image_type:"krawd-souvenir"}}),{data:E}=S.data;t.value=E.people_events||[]}catch(S){console.error("Error fetching souvenirs:",S)}},b=async()=>{var E,C,k,I,R,T,N;const S=localStorage.getItem("access_token");try{const B=await Ye.get("https://krawd.antarasuara.com/api/v1/users/profile",{headers:{"X-Access-Token":`Bearer ${S}`}});c.value=B.data.data;const H=(k=(C=(E=c.value)==null?void 0:E.user_photos)==null?void 0:C[0])==null?void 0:k.people_face_url,z=(I=c.value)==null?void 0:I.users_fullname,W=(N=(T=(R=c.value)==null?void 0:R.user_photos)==null?void 0:T[0])==null?void 0:N.people_external_ref;(!H||!z||!W)&&(u.value=!0)}catch(B){console.error("Gagal memuat profil:",B)}},_=async()=>{i.value=!0,r.value=1,await y()},w=()=>{if(!s.value)return;const{scrollTop:S,scrollHeight:E,clientHeight:C}=s.value;S+C>=E-50&&!a.value&&y()};return jt(()=>{p(),y(),x(),b()}),(S,E)=>(xe(),Tn(cs,null,{default:Ne(()=>[U("div",{class:"page-wrapper",onScrollPassive:w,ref_key:"scrollContainer",ref:s},[U("div",CM,[u.value?(xe(),Fe("div",EM,[E[1]||(E[1]=U("p",null," Kamu belum mengisi data selfie atau informasi tiket. Klik tombol di bawah untuk melengkapi. ",-1)),U("button",{class:"selfie-btn",onClick:E[0]||(E[0]=C=>S.$router.push("/upload-selfie"))},"Lengkapi Data")])):xn("",!0),E[6]||(E[6]=U("h2",null,"Foto Kamu di Konser",-1)),E[7]||(E[7]=U("p",null,"Temukan dan koleksi momen konser serta digital artwork pilihanmu.",-1)),U("div",SM,[(xe(),Fe(qe,null,mr(d,C=>U("button",{key:C.value,onClick:k=>f.value=C.value,class:dr({active:f.value===C.value})},at(C.label),11,kM)),64))]),i.value?(xe(),Fe("div",RM," Sedang memuat ulang... ")):xn("",!0),(f.value==="all"||f.value==="face")&&n.value.length>0?(xe(),Fe(qe,{key:2},[E[2]||(E[2]=U("div",{class:"section-label"},[U("span",{class:"material-icons",style:{"vertical-align":"middle","margin-right":"4px"}},"camera"),wt(" Foto ")],-1)),U("div",IM,[(xe(!0),Fe(qe,null,mr(n.value,(C,k)=>(xe(),Fe("div",{key:"face-"+k,class:"photo-card"},[U("div",AM,[U("img",{src:C.pe_watermarked_image_url,alt:"Foto "+(k+1)},null,8,TM),U("div",DM,[U("p",FM,"Rp"+at(h(C.image_price_amount||1e4)),1),U("button",{class:dr(["overlay-btn",{added:m(C.product_id)}]),onClick:I=>g(C),disabled:m(C.product_id)},at(m(C.product_id)?" Ditambahkan":"+ Keranjang"),11,PM)])])]))),128))])],64)):xn("",!0),(f.value==="all"||f.value==="souvenir")&&t.value.length>0?(xe(),Fe(qe,{key:3},[E[3]||(E[3]=U("div",{class:"section-label"},[U("span",{class:"material-icons",style:{"vertical-align":"middle","margin-right":"4px"}},"brush"),wt(" Souvenir ")],-1)),U("div",NM,[(xe(!0),Fe(qe,null,mr(t.value,(C,k)=>(xe(),Fe("div",{key:"souvenir-"+k,class:"photo-card"},[U("div",OM,[U("img",{src:C.pe_watermarked_image_url,alt:"Souvenir "+(k+1)},null,8,MM),U("div",BM,[U("p",LM,"Rp"+at(h(C.image_price_amount||2e4)),1),U("button",{class:dr(["overlay-btn",{added:m(C.product_id)}]),onClick:I=>g(C),disabled:m(C.product_id)},at(m(C.product_id)?" Ditambahkan":"+ Keranjang"),11,VM)])])]))),128))])],64)):xn("",!0),a.value?(xe(),Fe("div",WM,E[4]||(E[4]=[U("p",null,"Loading...",-1)]))):n.value.length===0&&t.value.length===0?(xe(),Fe("div",UM,[E[5]||(E[5]=U("p",null,"Belum ada foto atau souvenir untuk ditampilkan.",-1)),U("button",{class:"refresh-btn",onClick:_},"Coba Lagi")])):xn("",!0)])],544)]),_:1}))}}),HM=Bt(zM,[["__scopeId","data-v-d7941588"]]),$M={class:"cart-wrapper"},jM={class:"cart-container"},GM={key:0,class:"cart-grid"},qM=["src"],KM={class:"cart-card-footer"},XM=["onClick"],YM=["disabled"],JM={key:1,class:"empty-cart"},QM=cn({__name:"CartView",setup(e){const n=Cr(),t=ve([]),r=ve(!1),o=()=>{const u=localStorage.getItem("photo_cart");t.value=u?JSON.parse(u):[]},a=()=>{localStorage.setItem("photo_cart",JSON.stringify(t.value)),Ou.emit("cart-updated")},i=u=>{t.value.splice(u,1),a()},s=async()=>{var u,c,l,f;try{r.value=!0;const d={o_order_details:t.value.map(v=>({product_id:v.product_id}))},h=localStorage.getItem("access_token"),p=await Ye.post("https://krawd.antarasuara.com/api/v1/orders",d,{headers:{"X-Access-Token":`Bearer ${h}`,"Content-Type":"application/json"}});(u=p.data)!=null&&u.status&&((l=(c=p.data)==null?void 0:c.data)!=null&&l.payment_url)?(t.value=[],a(),window.location.href=p.data.data.payment_url):alert("Gagal membuat pesanan. Silakan coba lagi.")}catch(d){((f=d.response)==null?void 0:f.status)===401?(alert("Sesi kamu telah habis. Silakan masuk kembali."),localStorage.removeItem("access_token"),n.push({path:"/"})):(console.error("Checkout error:",d),alert("Terjadi kesalahan saat membuat pesanan."))}finally{r.value=!1}};return jt(()=>{o()}),(u,c)=>(xe(),Tn(cs,null,{default:Ne(()=>[U("div",$M,[U("div",jM,[c[1]||(c[1]=U("h2",null,"Keranjang Kamu",-1)),c[2]||(c[2]=U("p",null,"Foto-foto pilihanmu dari konser.",-1)),t.value.length>0?(xe(),Fe("div",GM,[(xe(!0),Fe(qe,null,mr(t.value,(l,f)=>(xe(),Fe("div",{key:l.product_id,class:"cart-card"},[U("img",{src:l.url,alt:"Foto Keranjang"},null,8,qM),U("div",KM,[U("p",null,"Foto "+at(f+1),1),U("button",{class:"remove-btn",onClick:d=>i(f)},"Hapus",8,XM)])]))),128)),U("button",{class:"checkout-btn",disabled:r.value,onClick:s},at(r.value?"Memproses...":"Lanjut ke Pembayaran"),9,YM)])):(xe(),Fe("div",JM,c[0]||(c[0]=[U("p",null,"Keranjang kamu masih kosong. Yuk tambahkan foto favoritmu!",-1)])))])])]),_:1}))}}),ZM=Bt(QM,[["__scopeId","data-v-8a8bd47c"]]),eB={class:"history-wrapper"},tB={class:"history-container"},nB={key:0,class:"history-grid"},rB=["onClick"],oB=["src"],aB={class:"history-card-footer"},iB={class:"text-left"},sB={class:"foto-label"},uB={class:"order-status"},cB={key:1,class:"empty-history"},lB=cn({__name:"OrderHistoryView",setup(e){const n=Cr(),t=ve([]),r=async()=>{var a,i,s;try{const u=localStorage.getItem("access_token"),l=((i=(a=(await Ye.get("https://krawd.antarasuara.com/api/v1/orders?page=1&page_size=10",{headers:{"X-Access-Token":`Bearer ${u}`}})).data)==null?void 0:a.data)==null?void 0:i.data)||[];t.value=l.flatMap(f=>f.o_detail.map(d=>({imageUrl:d.od_product.da_watermarked_url,orderCode:f.o_code,orderStatus:f.o_status})))}catch(u){((s=u.response)==null?void 0:s.status)===401?(alert("Sesi kamu telah habis. Silakan masuk kembali."),localStorage.removeItem("access_token"),n.push("/")):console.error("Gagal memuat riwayat pembelian:",u)}},o=a=>{n.push(`/order/${encodeURIComponent(a)}`)};return jt(()=>{r()}),(a,i)=>(xe(),Tn(cs,null,{default:Ne(()=>[U("div",eB,[U("div",tB,[i[1]||(i[1]=U("h2",null,"Riwayat Pembelian",-1)),i[2]||(i[2]=U("p",null,"Ini adalah foto-foto konser yang sudah kamu beli.",-1)),t.value.length>0?(xe(),Fe("div",nB,[(xe(!0),Fe(qe,null,mr(t.value,(s,u)=>(xe(),Fe("div",{key:u,class:"history-card",onClick:c=>o(s.orderCode)},[U("img",{src:s.imageUrl,alt:"Foto Terbeli"},null,8,oB),U("div",aB,[U("div",iB,[U("p",sB,"Foto #"+at(u+1),1),U("p",uB,"Status: "+at(s.orderStatus),1)])])],8,rB))),128))])):(xe(),Fe("div",cB,i[0]||(i[0]=[U("p",null,"Kamu belum membeli foto apapun.",-1)])))])])]),_:1}))}}),fB=Bt(lB,[["__scopeId","data-v-f2289cc6"]]),dB={class:"order-detail-wrapper"},hB={class:"order-detail-container"},pB={key:0,class:"product-grid"},vB=["src"],mB={class:"product-info"},gB=["onClick"],yB={key:1,class:"history-log"},bB=cn({__name:"OrderDetailView",setup(e){const n=Ay(),t=Cr(),r=decodeURIComponent(n.params.orderCode),o=ve({}),a=c=>new Intl.NumberFormat("id-ID").format(c),i=c=>new Date(c).toLocaleString("id-ID",{dateStyle:"medium",timeStyle:"short"}),s=async(c,l)=>{var d,h;const f=localStorage.getItem("access_token");try{const v=(h=(d=(await Ye.get(`https://krawd.antarasuara.com/api/v1/orders/photos-code?order_code=${c}&product_id=${l}`,{headers:{"X-Access-Token":`Bearer ${f}`},maxBodyLength:1/0})).data)==null?void 0:d.data)==null?void 0:h.original_url;if(v){const m=document.createElement("a");m.href=v,m.download=v.split("/").pop(),m.click()}else console.error("URL untuk mengunduh tidak ditemukan"),alert("Gagal mendapatkan URL untuk unduh.")}catch(p){console.error("Gagal mengunduh file:",p),alert("Terjadi kesalahan saat mengunduh file.")}},u=async()=>{var f,d,h;const c=localStorage.getItem("access_token"),l=r.split("/").pop();try{const p=await Ye.get(`https://krawd.antarasuara.com/api/v1/orders/detail/${l}`,{headers:{"X-Access-Token":`Bearer ${c}`}});o.value=((d=(f=p.data)==null?void 0:f.data)==null?void 0:d.data)||{}}catch(p){((h=p.response)==null?void 0:h.status)===401?(alert("Sesi kamu telah habis. Silakan masuk kembali."),localStorage.removeItem("access_token"),t.push("/")):console.error("Gagal mengambil detail order:",p)}};return jt(()=>{u()}),(c,l)=>(xe(),Tn(cs,null,{default:Ne(()=>{var f,d;return[U("div",dB,[U("div",hB,[l[3]||(l[3]=U("h2",null,"Detail Pesanan",-1)),U("p",null,[l[0]||(l[0]=wt("Kode Pesanan: ")),U("strong",null,at(o.value.o_code),1)]),U("p",null,[l[1]||(l[1]=wt("Status: ")),U("strong",null,at(o.value.o_status),1)]),(f=o.value.o_detail)!=null&&f.length?(xe(),Fe("div",pB,[(xe(!0),Fe(qe,null,mr(o.value.o_detail,(h,p)=>(xe(),Fe("div",{key:p,class:"product-card"},[U("img",{src:h.od_product.da_watermarked_url,alt:"Foto Pembelian"},null,8,vB),U("div",mB,[U("p",null,"Foto #"+at(p+1),1),U("p",null,"Event: "+at(h.od_product.da_event_name),1),U("p",null,"Total: Rp"+at(a(h.od_total_amount)),1),U("button",{class:"download-btn",onClick:v=>s(o.value.o_code,h.od_product.da_id)}," Unduh ",8,gB)])]))),128))])):xn("",!0),(d=o.value.o_histories)!=null&&d.length?(xe(),Fe("div",yB,[l[2]||(l[2]=U("h3",null,"Riwayat Status",-1)),U("ul",null,[(xe(!0),Fe(qe,null,mr(o.value.o_histories,(h,p)=>(xe(),Fe("li",{key:p},[U("strong",null,at(h.oh_status),1),wt(" - "+at(i(h.created_at)),1)]))),128))])])):xn("",!0)])])]}),_:1}))}}),xB=Bt(bB,[["__scopeId","data-v-8b01da44"]]),wB={class:"profile-wrapper"},_B={class:"profile-container"},CB={class:"profile-photo"},EB=["src"],SB={class:"profile-info"},kB={class:"info-row"},RB={class:"info-row"},IB={class:"info-row"},AB=cn({__name:"ProfileView",setup(e){const n=Cr(),t=ve({}),r=ve("https://photodekdev-storage.s3.amazonaws.com/images/e922bbba-c9dc-4183-bf33-2eb6905e7033.JPG"),o=async()=>{var s,u,c,l;const i=localStorage.getItem("access_token");try{const f=await Ye.get("https://krawd.antarasuara.com/api/v1/users/profile",{headers:{"X-Access-Token":`Bearer ${i}`}});t.value=((s=f.data)==null?void 0:s.data)||{};const d=(c=(u=t.value.user_photos)==null?void 0:u[0])==null?void 0:c.people_face_url;d&&(r.value=d)}catch(f){((l=f.response)==null?void 0:l.status)===401?(alert("Sesi kamu telah habis. Silakan masuk kembali."),localStorage.removeItem("access_token"),n.push("/")):console.error("Gagal mengambil data profil:",f)}},a=()=>{localStorage.clear(),n.push("/")};return jt(()=>{o()}),(i,s)=>(xe(),Tn(cs,null,{default:Ne(()=>{var u,c;return[U("div",wB,[U("div",_B,[s[3]||(s[3]=U("h2",null,"Profil Kamu",-1)),U("div",CB,[U("img",{src:r.value,alt:"Foto Selfie"},null,8,EB)]),U("div",SB,[U("div",kB,[s[0]||(s[0]=U("label",null,"Nama",-1)),U("p",null,at(t.value.users_fullname||"-"),1)]),U("div",RB,[s[1]||(s[1]=U("label",null,"Email",-1)),U("p",null,at(t.value.users_username||"-"),1)]),U("div",IB,[s[2]||(s[2]=U("label",null,"Kode Tiket",-1)),U("p",null,at(((c=(u=t.value.user_photos)==null?void 0:u[0])==null?void 0:c.people_external_ref)||"-"),1)])]),U("button",{class:"logout-btn",onClick:a},"Logout")])])]}),_:1}))}}),TB=Bt(AB,[["__scopeId","data-v-ce43cf29"]]),DB={class:"wrapper"},FB={class:"confirmation-container"},PB={class:"photo-grid"},NB=["src"],OB={__name:"OrderConfirmationView",setup(e){const n=ve([{url:"https://photodekdev-storage.s3.amazonaws.com/images/e922bbba-c9dc-4183-bf33-2eb6905e7033.JPG"},{url:"https://photodekdev-storage.s3.amazonaws.com/images/e922bbba-c9dc-4183-bf33-2eb6905e7033.JPG"},{url:"https://photodekdev-storage.s3.amazonaws.com/images/e922bbba-c9dc-4183-bf33-2eb6905e7033.JPG"}]);return(t,r)=>(xe(),Fe("div",DB,[U("div",FB,[r[1]||(r[1]=U("h2",null,"Terima Kasih!",-1)),r[2]||(r[2]=U("p",{class:"subtitle"},"Pesanan kamu telah berhasil diproses ",-1)),U("div",PB,[(xe(!0),Fe(qe,null,mr(n.value,(o,a)=>(xe(),Fe("img",{key:a,src:o.url,alt:"Foto Konser"},null,8,NB))),128))]),r[3]||(r[3]=U("p",{class:"note"},"Kamu akan menerima link download melalui email yang telah kamu daftarkan.",-1)),U("button",{class:"home-btn",onClick:r[0]||(r[0]=o=>t.$router.push("/photo-match"))},"Kembali ke Beranda")])]))}},MB=Bt(OB,[["__scopeId","data-v-87a53eea"]]),BB={class:"contact-wrapper"},LB={class:"contact-container"},VB={__name:"ContactUsView",setup(e){const n=ve(""),t=ve(""),r=ve("");function o(){alert("Terima kasih! Pesan kamu telah dikirim. "),n.value="",t.value="",r.value=""}return(a,i)=>(xe(),Fe("div",BB,[U("div",LB,[i[7]||(i[7]=U("h2",null,"Hubungi Kami",-1)),i[8]||(i[8]=U("p",null,"Jika kamu memiliki pertanyaan, masukan, atau permintaan kerja sama, silakan isi formulir di bawah ini.",-1)),U("form",{onSubmit:vy(o,["prevent"]),class:"contact-form"},[i[3]||(i[3]=U("label",null,"Nama",-1)),un(U("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=s=>n.value=s),required:""},null,512),[[Mo,n.value]]),i[4]||(i[4]=U("label",null,"Email",-1)),un(U("input",{type:"email","onUpdate:modelValue":i[1]||(i[1]=s=>t.value=s),required:""},null,512),[[Mo,t.value]]),i[5]||(i[5]=U("label",null,"Pesan",-1)),un(U("textarea",{rows:"5","onUpdate:modelValue":i[2]||(i[2]=s=>r.value=s),required:""},null,512),[[Mo,r.value]]),i[6]||(i[6]=U("button",{type:"submit"},"Kirim Pesan",-1))],32)])]))}},WB=Bt(VB,[["__scopeId","data-v-899858fa"]]),UB={class:"camera-wrapper"},zB={__name:"CameraCaptureView",setup(e){const n=ve(null),t=ve(null),r=Cr();let o=null;const a=async()=>{try{o=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}),n.value.srcObject=o}catch(u){alert("Tidak dapat mengakses kamera."),console.error(u)}},i=()=>{o&&o.getTracks().forEach(u=>u.stop())},s=()=>{const u=n.value,c=t.value,l=c.getContext("2d");c.width=u.videoWidth,c.height=u.videoHeight,l.drawImage(u,0,0,c.width,c.height);const f=c.toDataURL("image/jpeg");localStorage.setItem("captured_selfie",f),i(),r.push("/upload-selfie")};return jt(()=>{a()}),Dn(()=>{i()}),(u,c)=>(xe(),Fe("div",UB,[U("video",{ref_key:"videoRef",ref:n,autoplay:"",playsinline:""},null,512),U("canvas",{ref_key:"canvasRef",ref:t,style:{display:"none"}},null,512),c[1]||(c[1]=U("div",{class:"face-guide"},null,-1)),U("div",{class:"bottom-bar"},[U("button",{class:"capture-btn",onClick:s},c[0]||(c[0]=[U("span",{class:"material-icons"},"photo_camera",-1)]))])]))}},HB=Bt(zB,[["__scopeId","data-v-472a0174"]]),$B=pC({history:$_("/"),routes:[{path:"/",name:"home",component:cA},{path:"/event",name:"event",component:pA},{path:"/privacy-policy",name:"privacy_policy",component:CA},{path:"/upload-selfie",name:"upload_selfie",component:Z4},{path:"/camera-capture",name:"camera_capture",component:HB},{path:"/ticket-data",name:"ticket_data",component:sM},{path:"/otp-verification",name:"otp_verification",component:mM},{path:"/photo-match",name:"photo_match",component:HM},{path:"/cart",name:"cart",component:ZM},{path:"/orders",name:"orders",component:fB},{path:"/order/:orderCode",name:"order_detail",component:xB,props:!0},{path:"/order-confirmation",name:"order_confirmation",component:MB},{path:"/profile",name:"profile",component:TB},{path:"/main",name:"main",component:dR},{path:"/contact-us",name:"contact_us",component:WB},{path:"/capture",name:"capture",component:sA},{path:"/my-photos",name:"my_photos",component:eA}]}),jB=t0(),Rh=f_(RE);Rh.use(jB);Rh.use($B);Rh.mount("#app")});export default GB();
